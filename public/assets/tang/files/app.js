webpackJsonp([12],Array(30).concat([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TOGGLE_CONTACT_US_MENU="TOGGLE_CONTACT_US_MENU",t.TOGGLE_MAIN_NAV_MENU="TOGGLE_MAIN_NAV_MENU",t.GO_TO_SIGNIN="GO_TO_SIGNIN",t.UI_ROUTE_STATE_CHANGE_SUCCESS="UI_ROUTE_STATE_CHANGE_SUCCESS",t.RESTORE_STATE="RESTORE_STATE",t.RELOAD_ACTIVE_CHAT="RELOAD_ACTIVE_CHAT",t.TOGGLE_CHAT_WITH_US_MODAL="TOGGLE_CHAT_WITH_US_MODAL",t.START_CHAT="START_CHAT",t.TOGGLE_CHAT_WINDOW_MINI="TOGGLE_CHAT_WINDOW_MINI",t.TOGGLE_CHAT_WINDOW_DOCK="TOGGLE_CHAT_WINDOW_DOCK",t.TOGGLE_CONFIRMATION_STOP_CHAT_MODAL="TOGGLE_CONFIRMATION_STOP_CHAT_MODAL",t.CHANGE_CHAT_STATE="CHANGE_CHAT_STATE",t.EXIT_CHAT="EXIT_CHAT",t.SET_CHAT_AVAILABILITY="SET_CHAT_AVAILABILITY",t.TOGGLE_SCREEN_SHARING="TOGGLE_SCREEN_SHARING",t.TOGGLE_CALL_YOU_MODAL="TOGGLE_CALL_YOU_MODAL",t.TOGGLE_CALL_YOU_CONFORMATION_MODAL="TOGGLE_CALL_YOU_CONFORMATION_MODAL",t.TOGGLE_CALL_YOU_ERROR_MODAL="TOGGLE_CALL_YOU_ERROR_MODAL",t.STOP_CALL_YOU="STOP_CALL_YOU",t.SET_CALL_YOU_AVAILABILITY="SET_CALL_YOU_AVAILABILITY",t.TOGGLE_CALL_US_MODAL="TOGGLE_CALL_US_MODAL",t.TOGGLE_CALL_US_ERROR_MODAL="TOGGLE_CALL_US_ERROR_MODAL",t.STOP_CALL_US="STOP_CALL_US",t.SET_CALL_US_AVAILABILITY="SET_CALL_US_AVAILABILITY"},,,,function(e,t,n){"use strict";function i(e){return L.test(e)}function s(e){var t=/[^a-zA-Z0-9@._-]/g;return e.replace(t,"")}function a(e){return M.test(e)}function o(e){var t=R.test(e);return!!e&&t}function r(e){return D.test(e)}function l(e){return e.replace(P,"")}function c(e){return $.test(e)}function u(e){return O.test(e)}function d(e){return N.test(e)&&!b.test(e)}function h(e){return y.test(e)&&!b.test(e)}function _(e){return y.test(e)&&!b.test(e)}function g(e){return U.test(e)}function S(e){return/^([0-9]){1,4}$/.test(e)}function f(e){return/^([a-zA-ZàçéèëœùûìòáúýâêîôäïöüÿíóÀÇÉÈËŒÙÛÌÒÁÚÝÂÊÎÔÄÏÖÜŸÍÓ0-9@._-\s]){1,25}$/.test(e)}function v(e){return/^([0-9]){6}$/.test(e)}function E(e){return!/^[a-zA-Z0-9àâçéèêëîïôûùüÿñæœ@._-]+$/.test(e)}function p(e){return!/^[a-zA-Z0-9àâçéèêëîïôûùüÿñæœ@._\s]+$/.test(e)}function T(e){return/^(?=.*[a-zA-Zàâçéèêëîïôûùüÿñæœ])/.test(e)}function m(e,t){return!e||e.$valid||e.$pristine&&!t&&(!e.$modelValue||angular.isString(e.$modelValue)&&0===e.$modelValue.length)}function C(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=function(n){return!!(e&&e[t]&&e[t].$error[n]&&(e[t].$touched||i))};return Array.isArray(n)?n.some(function(e){return s(e)}):s(n)}function A(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e&&t){var i=e.$viewValue,s=t.$viewValue;return n&&"string"==typeof i&&"string"==typeof s?i.toLowerCase()===s.toLowerCase():i===s}return!1}function I(e){return e.replace(k,"")}Object.defineProperty(t,"__esModule",{value:!0}),t.userIdValidation=i,t.userIdSanitize=s,t.phoneNumberValidation=a,t.secretQuestionValidation=o,t.captchaValidation=r,t.pinSanitize=l,t.pinValidation=c,t.nameValidation=u,t.personNameValidation=d,t.businessNameValidation=h,t.otherRelationShipValidation=_,t.emailValidation=g,t.lastThreeSSNValidation=S,t.phraseValidation=f,t.newPinValidation=v,t.hasUsernameSpecialChars=E,t.hasGoalnameSpecialChars=p,t.hasAtLeastOneLetter=T,t.inputIsValid=m,t.showError=C,t.inputsAreEqual=A,t.referenceSanitize=I;var O=t.namePattern=/^([a-z A-Z-.\'\/(\/)àçéèëœùûìòáúýâêîôäïöüÿíóÀÇÉÈËŒÙÛÌÒÁÚÝÂÊÎÔÄÏÖÜŸÍÓ]){1,33}$/,N=t.normalAndAMLCharsPattern=/^([a-zA-Z '-\/(\/)àçéèëœùûìòáúýâêîôäïöüÿíóÀÇÉÈËŒÙÛÌÒÁÚÝÂÊÎÔÄÏÖÜŸÍÓ`<>"''%;()&+\\#\?\{\}\|\^~\[\]\/:\*,\$!@])*$/,y=t.normalAndAMLCharsAndNumbersPattern=/^([a-zA-Z '-\/(\/)àçéèëœùûìòáúýâêîôäïöüÿíóÀÇÉÈËŒÙÛÌÒÁÚÝÂÊÎÔÄÏÖÜŸÍÓ`<>"''%;()&+\\#\?\{\}\|\^~\[\]\/:\*,\$!@1234567890])*$/,b=t.twoOrMoreConsecutiveAMLCharsPattern=/[`<>"'%;()&+\\#\?\{\}\|\^~\[\]\/:\*,\$!@]{2,}/,L=(t.notTwoConsecutiveAMLCharsPattern=/^(?!.*[`<>"'%;()&+\\#\?\{\}\|\^~\[\]\/:\*,\$!@]{2}).*$/,t.havingNumbersPattern=/^.*[0-9]+.*$/,t.userIdPattern=/^([a-zA-Z0-9@._\-àçéèëœùûìòáúýâêîôäïöüÿíóÀÇÉÈËŒÙÛÌÒÁÚÝÂÊÎÔÄÏÖÜŸÍÓ]){2,40}$/),M=t.phoneNumberPattern=/^[2-9][0-9]{2}-[2-9][0-9]{2}-[0-9]{4}$/,R=t.secretQuestionPattern=/^([\\\s\/@._\-a-zA-Z0-9]){1,40}$/,D=t.captchaPattern=/^([a-zA-Z0-9@._-\s]){1,40}$/,P=t.pinSanitizePattern=/[^0-9]/g,$=t.pinPattern=/^([0-9]){4,6}$/,U=t.emailFullPattern=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,k=(t.usZipCodePatter="^\\d{5}(-?\\d{4})?$",t.alphanumericPattern="^[a-zA-Z0-9 ]*",t.emailPattern="^[a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$",t.orangeKeyPattern="[a-zA-Z0-9]+",t.sinPattern="^(\\d{3})-?(\\d{3})-?(\\d{3})$",t.phoneViewPattern="^\\([2-9][0-9]{2}\\) [2-9][0-9]{2}-[0-9]{4}$",t.numbersOnlyPattern="^[0-9]*$",t.fileNameAlphaNumericPattern="[^0-9a-zA-Z]",t.streetNumberPattern=/^([a-zA-Z0-9 àçéèëœùûìòáúýâêîôäïöüÿíóÀÇÉÈËŒÙÛÌÒÁÚÝÂÊÎÔÄÏÖÜŸÍÓ.,_\\-])*$/,t.lettersNumbersSpacesReplacePattern=/[^A-Za-z0-9 àçéèëœùûìòáúýâêîôäïöüÿíóÀÇÉÈËŒÙÛÌÒÁÚÝÂÊÎÔÄÏÖÜŸÍÓ]/g,t.lettersNumbersSpacesPattern=/^[A-Za-z0-9 àçéèëœùûìòáúýâêîôäïöüÿíóÀÇÉÈËŒÙÛÌÒÁÚÝÂÊÎÔÄÏÖÜŸÍÓ]*$/,t.emtQuestionPattern=/^[a-zA-Z0-9$.?,!' ÀÁÂÃÄÅÇÈÉÊËÌÍÎÏÒÓÔÕÖÙÚÛÜÝàáâãäåçèéêëìíîïòóôõöùúûüýÿñ]*$/,t.emtAnswerPattern=/^[a-zA-Z0-9ÀÁÂÃÄÅÇÈÉÊËÌÍÎÏÒÓÔÕÖÙÚÛÜÝàáâãäåçèéêëìíîïòóôõöùúûüýÿñ]*$|^\*{5}$/,t.emtAnswerReenterPattern=/^[a-zA-Z0-9ÀÁÂÃÄÅÇÈÉÊËÌÍÎÏÒÓÔÕÖÙÚÛÜÝàáâãäåçèéêëìíîïòóôõöùúûüýÿñ]*$/,t.digitPattern="[0-9]",t.referenceSanitizePattern=/[^A-Za-z0-9- ]/g);t.poBoxPattern=/\b(p(ost){0,1})\.?\s*(o(ffice){0,1})\.?\s*(box){0,1}\s*(([^\w\s]|_)*\s*\d+|([^\w\s]|_)*\s+|([^\w\s]|_)+\w)|\b(box)\s*(([^\w\s]|_)*\s*\d+)/,t.addressPattern="^[a-zA-Z0-9 àçéèëœùûìòáúýâêîôäïöüÿíóÀÇÉÈËŒÙÛÌÒÁÚÝÂÊÎÔÄÏÖÜŸÍÓ.]*",t.tpiAddressPattern="^[a-zA-Z0-9 àçéèëœùûìòáúýâêîôäïöüÿíóÀÇÉÈËŒÙÛÌÒÁÚÝÂÊÎÔÄÏÖÜŸÍÓ_.,'-]*$",t.cadAddressPattern="^([a-zA-Z]\\d[a-zA-Z]( )?\\d[a-zA-Z]\\d)$",t.onCadAddressPattern="^([KLMNPklmnp]\\d[a-zA-Z]( )?\\d[a-zA-Z]\\d)$",t.qcCadAddressPattern="^(([ghjGHJ]\\d[a-zA-Z]|k1a|K1a|k1A|K1A)( )?\\d[a-zA-Z]\\d)$",t.abCadAddressPattern="^([tT]\\d[a-zA-Z]( )?\\d[a-zA-Z]\\d)$",t.bcCadAddressPattern="^([vV]\\d[a-zA-Z]( )?\\d[a-zA-Z]\\d)$",t.mbCadAddressPattern="^([Rr]\\d[a-zA-Z]( )?\\d[a-zA-Z]\\d)$",t.nbCadAddressPattern="^([Ee]\\d[a-zA-Z]( )?\\d[a-zA-Z]\\d)$",t.nlCadAddressPattern="^([Aa]\\d[a-zA-Z]( )?\\d[a-zA-Z]\\d)$",t.nsCadAddressPattern="^([Bb]\\d[a-zA-Z]( )?\\d[a-zA-Z]\\d)$",t.peCadAddressPattern="^([Cc]\\d[a-zA-Z]( )?\\d[a-zA-Z]\\d)$",t.ntCadAddressPattern="^((?!x0a)(?!X0A)(?!x0A)(?!X0a)(?!x0b)(?!X0B)(?!x0B)(?!X0b)(?!x0c)(?!X0C)(?!x0C)(?!X0c)([Xx]\\d[a-zA-Z])( )?\\d[a-zA-Z]\\d)$",t.nuCadAddressPattern="^((x0a|X0A|x0A|X0a|x0b|X0B|x0B|X0b|x0c|X0C|x0C|X0c)( )?\\d[a-zA-Z]\\d)$",t.skCadAddressPattern="^([Ss]\\d[a-zA-Z]( )?\\d[a-zA-Z]\\d)$",t.ytCadAddressPattern="^([Yy]\\d[a-zA-Z]( )?\\d[a-zA-Z]\\d)$"},,,,,,,,,,,,,function(e,t,n){"use strict";function i(e,t){return e(function(e){n.e(1).then(function(){var i=n(1380),s=n(318),a=n(1381),o=n(320);t.load([{name:i.name},{name:s},{name:a.name},{name:o.name}]),e([i,s,a,o])}.bind(null,n)).catch(n.oe)})}Object.defineProperty(t,"__esModule",{value:!0}),i.$inject=["$q","$ocLazyLoad"],t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e,t){return e(function(e){n.e(10).then(function(){var i=n(1382);t.load([{name:i.name}]),e([i])}.bind(null,n)).catch(n.oe)})}Object.defineProperty(t,"__esModule",{value:!0}),i.$inject=["$q","$ocLazyLoad"],t.default=i,e.exports=t.default},,,,,,,,,function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.MainNavMenuActions=t.ContactUsActions=t.CallUsActions=t.CallYouActions=t.RouteActions=t.ChatWithUsActions=void 0;var s=n(513),a=i(s),o=n(514),r=i(o),l=n(515),c=i(l),u=n(516),d=i(u),h=n(517),_=i(h),g=n(518),S=i(g);t.ChatWithUsActions=a,t.RouteActions=S,t.CallYouActions=r,t.CallUsActions=c,t.ContactUsActions=d,t.MainNavMenuActions=_},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function i(e,t){return e(function(e){n.e(2).then(function(){var i=n(1374),s=n(1375),a=n(1376),o=n(320);t.load([{name:i.name},{name:s.name},{name:a.name},{name:o.name}]),e([i,s,a,o])}.bind(null,n)).catch(n.oe)})}Object.defineProperty(t,"__esModule",{value:!0}),i.$inject=["$q","$ocLazyLoad"],t.default=i,e.exports=t.default},,,function(e,t,n){"use strict";function i(e,t){return e(function(e){n.e(3).then(function(){var i=n(1377),s=n(1378);t.load([{name:i.name},{name:s.name}]),e([i,s])}.bind(null,n)).catch(n.oe)})}Object.defineProperty(t,"__esModule",{value:!0}),i.$inject=["$q","$ocLazyLoad"],t.default=i,e.exports=t.default},,,,,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.PageFlowButton=void 0;var s=n(98),a=i(s),o=n(0),r=i(o),l=n(1),c=i(l),u=n(18),d=i(u),h=function(){function e(t,n,i,s,a,o,l,c,u){(0,r.default)(this,e),this.$log=t,this.$q=n,this.$transitions=i,this.$state=s,this.$window=a,this.$rootScope=o,this.AnalyticsService=c,this.modalDialogConstants=u,this.ANALYTICS_AVAILABLE_EVENTS=this.AnalyticsService.availableEvents,this.BUTTON_TYPES=l.BUTTON_TYPES,this.CB_DISABLED_BUTTONS=[this.BUTTON_TYPES.SAVE,this.BUTTON_TYPES.SUBMIT,this.BUTTON_TYPES.SEND,this.BUTTON_TYPES.ACCEPT],this.ANALYTICS_TIMEOUT=l.ANALYTICS_TIMEOUT,this.STATES={},this._listeners={},this.idleTimeoutCleanup=null,this._initialState=null,this._skipNextAnalytics=!1,this._scrollTarget=null}return(0,c.default)(e,[{key:"activate",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.$log.debug("activating onExit warning"),this._loadingOnActivate=n,this._skipNextAnalytics=angular.isDefined(e),this._resetState();var s=this.$state.$current.name;if(i||(this._unbindOnExit=this.$transitions.onExit({exiting:s},function(){return t._warnOnExit()})),this.$window.addEventListener("beforeunload",function(e){return t._catchBrowserButtons(e)}),this.$rootScope&&(this.$log.info("PageFlowService: listening for idle timeout event"),this.idleTimeoutCleanup=this.$rootScope.$on("IdleTimeout",function(){t.deactivate()})),e&&"function"==typeof e){var o=e({subFlow:this}),r=(0,a.default)(o,3);this.BUTTONS=r[0],this.flowIsDone=r[1],this.flowIsRetreating=r[2],this._updateUI(),this.sendAnalytics()}}},{key:"deactivate",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$log.debug("deactivating onExit warning"),this.hideWarning(),this._unbindOnExit&&this._unbindOnExit(),this.$window.removeEventListener("beforeunload",function(t){return e._catchBrowserButtons(t)}),t||(this._skipNextAnalytics=!0,this._resetState()),this.idleTimeoutCleanup&&(this.$log.info("PageFlowService: cleaning up idle timeout event callback"),this.idleTimeoutCleanup(),this.idleTimeoutCleanup=null),this._parentFlow&&this._parentFlow._clearSubFlow()}},{key:"hideWarningOnExit",value:function(){this._showWarningOnExit=!1}},{key:"hideWarning",value:function(){this.hideWarningOnExit()}},{key:"showWarningOnExit",value:function(){this._showWarningOnExit=!0}},{key:"showWarning",value:function(){this.showWarningOnExit()}},{key:"stateHistoryCount",value:function(){return this._stateHistory.length}},{key:"gotoPreviousState",value:function(){this._stateHistory.length>0?(this._preGotoPreviousState(),this.currentState=this._stateHistory.pop(),this._stateHistory.length<1&&this.hideWarning(),this._updateUI(),this._postGotoPreviousState()):this.flowIsRetreating&&"function"==typeof this.flowIsRetreating&&this.flowIsRetreating(),this._conditionalScrollToTop()}},{key:"_preGotoPreviousState",value:function(){}},{key:"_postGotoPreviousState",value:function(){}},{key:"gotoNextState",value:function(){return this.$log.warn("You'll want to override this method in your custom PageFlow service"),this.currentState}},{key:"moveTo",value:function(e){e&&(this._preMoveTo(),this.showWarning(),this.currentState||this.$log.warn("No current state is detected. Did you initialize one in _resetState()?"),this._stateHistory.push(this.currentState),this.currentState=e,this._updateUI(),this._postMoveTo(),this._conditionalScrollToTop())}},{key:"confirmMoveTo",value:function(e){var t=this;this.warn().then(function(){t.moveTo(e)})}},{key:"_preMoveTo",value:function(){}},{key:"_postMoveTo",value:function(){}},{key:"moveBackTo",value:function(e){if(e){this.showWarning();var t=this._stateHistory.lastIndexOf(e);if(t>=0){this._preMoveBackTo();var n=this._stateHistory.length-t;this._stateHistory.splice(t,n),this.currentState=e,this._updateUI(),this._postMoveBackTo(),this._conditionalScrollToTop()}else this.$log.error(e,"not found in state history")}}},{key:"_conditionalScrollToTop",value:function(){this.AnchorService&&this.AnchorService.scrollToTop()}},{key:"_preMoveBackTo",value:function(){}},{key:"_postMoveBackTo",value:function(){}},{key:"warn",value:function(){return this._warnOnExit()}},{key:"onButtonClick",value:function(e){switch(e.type){case this.BUTTON_TYPES.CANCEL:this.onButtonClickCancel();break;case this.BUTTON_TYPES.BACK:this.onButtonClickBack();break;case this.BUTTON_TYPES.SKIP:this.onButtonClickSkip();break;case this.BUTTON_TYPES.NEXT:this.onButtonClickNext();break;case this.BUTTON_TYPES.PAY:this.onButtonClickPay();break;case this.BUTTON_TYPES.SUBMIT:this.onButtonClickSubmit();break;case this.BUTTON_TYPES.DONE:this.onButtonClickDone();break;case this.BUTTON_TYPES.EXIT:this.onButtonClickExit();break;case this.BUTTON_TYPES.SAVE:this.onButtonClickSave();break;case this.BUTTON_TYPES.CONTINUE:this.onButtonClickContinue()}}},{key:"onButtonClickCancel",value:function(){this.gotoNextState()}},{key:"onButtonClickBack",value:function(){this.gotoPreviousState()}},{key:"onButtonClickNext",value:function(){this.gotoNextState()}},{key:"onButtonClickSkip",value:function(){this.gotoNextState()}},{key:"onButtonClickPay",value:function(){this.$log.debug("You'll probably want to override this method with custom PAY logic")}},{key:"onButtonClickSubmit",value:function(){this.$log.debug("You'll probably want to override this method with custom SUBMIT logic")}},{key:"onButtonClickDone",value:function(){this.$log.debug("You'll probably want to override this method with custom DONE logic")}},{key:"onButtonClickExit",value:function(){this.$log.debug("You'll probably want to override this method with custom EXIT logic")}},{key:"onButtonClickSave",value:function(){this.$log.debug("You'll probably want to override this method with custom SAVE logic")}},{key:"onButtonClickContinue",value:function(){this.$log.debug("You'll probably want to override this method with custom CONTINUE logic")}},{key:"showLoadingSpinner",value:function(){this.isLoading=!0,this.isDoneLoading=!1}},{key:"showLoadingDoneIcon",value:function(){this.isLoading=!1,this.isDoneLoading=!0}},{key:"enterLoadingMode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.showLoadingSpinner(),e||this._conditionalScrollToTop()}},{key:"exitLoadingMode",value:function(){this.isLoading=!1,this.isDoneLoading=!1}},{key:"_resetState",value:function(){this.hideWarning(),this.currentState=null,this._loadingOnActivate||(this.isLoading=!1,this.isDoneLoading=!1),this._loadingOnActivate=!1,this.showConfirmExitUI=!1,this._unbindOnExit=null,this._stateHistory=[],this._currentSubFlow=null,this._initialState&&(this.currentState=this._initialState),this._scrollTarget=null}},{key:"_warnOnExit",value:function(){var e=this;this.$log.debug("_warnOnExit",this._showWarningOnExit),this.showConfirmExitUI=!0;var t=this.$q(function(t,n){e.allowExit=function(){e.showConfirmExitUI=!1,e.userExitedFlow(),t("user accepted navigation"),e._skipNextAnalytics=!0,e._resetState()},e.denyExit=function(){e.showConfirmExitUI=!1,n("user rejected navigation")}});return this._showWarningOnExit||(this.allowExit(),this.showConfirmExitUI=!1),t}},{key:"_catchBrowserButtons",value:function(e){if(this._showWarningOnExit){var t="you'll lose your progress";return e.returnValue=t,t}}},{key:"_updateUI",value:function(){this.$log.debug("You should override your flow service's _updateUI() method")}},{key:"userExitedFlow",value:function(){}},{key:"setSubFlow",value:function(e){return this.$log.debug("setting subFlow:",e),this._currentSubFlow&&this._currentSubFlow.setParentFlow(null),e===this?this._currentSubFlow=null:(e&&e.setParentFlow(this),this._currentSubFlow=e),[this.BUTTONS,this._subFlowIsDone.bind(this),this._subFlowIsRetreating.bind(this)]}},{key:"setParentFlow",value:function(e){this._parentFlow=e}},{key:"_clearSubFlow",value:function(){this.setSubFlow(null)}},{key:"_subFlowIsDone",value:function(e,t){if(this.$log.debug("currentFlow signaled that it's done:",e),this._clearSubFlow(),t)return void this._updateUI();this.gotoNextState()}},{key:"_subFlowIsRetreating",value:function(e){if(this.$log.debug("currentFlow signaled that it's retreating"),this._clearSubFlow(),e)return void this._updateUI();this.gotoPreviousState()}},{key:"subscribe",value:function(e,t){var n=this;return d.default.isArray(this._listeners[e])?this._listeners[e].push(t):this._listeners[e]=[t],function(){d.default.isArray(n._listeners[e])&&d.default.pull(n._listeners[e],t)}}},{key:"publish",value:function(e){if(d.default.isArray(this._listeners[e])){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var s=0;s<this._listeners[e].length;s++){var a;(a=this._listeners[e][s]).call.apply(a,[this].concat(n))}}}},{key:"clearSubscriptions",value:function(){this._listeners={}}},{key:"_getAnalyticsID",value:function(){var e=/^([\w]+)flowservice$/gi,t=this.constructor.name.toString(),n=e.exec(t);return n&&n.length>1?n[1].toLowerCase():this.constructor.name.toLowerCase()}},{key:"_getAnalyticsPath",value:function(){var e=this._getCurrentStateKey(),t="/"+e.toLowerCase();return t=this._parentFlow?""+this._parentFlow._getAnalyticsPath()+t:"/"+this._getAnalyticsID()+t}},{key:"_getCurrentStateKey",value:function(){return d.default.findKey(this.STATES,d.default.partial(d.default.isEqual,this.currentState))||""}},{key:"sendAnalytics",value:function(){if(this.currentState){if(this.currentFlow===this&&!this._skipNextAnalytics){var e=this._getAnalyticsPath();this.AnalyticsService&&this.AnalyticsService.sendAction&&this.currentAnalyticsPath!==e&&(this.AnalyticsService.sendAction(this.ANALYTICS_AVAILABLE_EVENTS.FLOW_STATE_CHANGE,e),this.currentAnalyticsPath=e)}this._skipNextAnalytics=!1}}},{key:"_onCurrentStateChange",value:function(){this.sendAnalytics()}},{key:"currentState",get:function(){return this._currentState},set:function(e){e||(e=null),this._currentState=e,this._onCurrentStateChange()}},{key:"inLoadingMode",get:function(){return this.isLoading||this.isDoneLoading}},{key:"currentFlow",get:function(){return this._currentSubFlow&&this._currentSubFlow._currentSubFlow?this._currentSubFlow._currentSubFlow:this._currentSubFlow?this._currentSubFlow:this}},{key:"showMainUI",get:function(){return!this.showConfirmExitUI&&!this.inLoadingMode}}]),e}();t.PageFlowButton=function e(t,n,i){(0,r.default)(this,e),this.type=t,this.show=n,this.disable=i},t.default=h},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={ABSTRACT:"abstract",ABSTRACT_AUTH:"abstractAuth",ABSTRACT_GUEST:"abstractGuest",ABSTRACT_ANON:"abstractAnonymous",LOGIN:"loginPage",LOGIN_PIN:"loginPin",FORGOT_LOGIN:"forgotLogin",LOGGED_OUT:"loggedOut",SHOW_DOUBLE_SAFE_MODAL:"showDoubleSafeModal",RESET_PIN:"resetPin",ACCOUNT_SUMMARY:"accountSummary",BUDGET_LTS_OVERVIEW:"budgetLtsPage",NEW_CLIENT_ENROLLMENT:"tngNewClientEnrollment",EXISTING_CLIENT_ONBOARDING:"existingClientOnboarding",BUSINESS_CLIENT_ONBOARDING:"businessClientOnboarding",CSA_POST_CONVERSION:"tngCsaPostConversionSteps",ACCOUNT_DETAILS_CHEQUING:"accountDetailsChequing",ACCOUNT_DETAILS_CREDIT_CARD:"accountDetailsCreditCard",ACCOUNT_DETAILS_SAVINGS:"accountDetailsSavings",ACCOUNT_DETAILS_GOALS:"accountDetailsGoals",ACCOUNT_DETAILS_MORTGAGE:"accountDetailsMortgage",ACCOUNT_DETAILS_LOAN:"accountDetailsLoan",ACCOUNT_DETAILS_INVESTMENT:"accountDetailsInvestment",ACCOUNT_DOCUMENTS:"accountDocuments",ACCOUNT_DOCUMENTS_STATEMENTS:"accountDocuments.accountStatements",ACCOUNT_DOCUMENTS_TAX_RECEIPTS:"accountDocuments.taxReceipts",ACCOUNT_DOCUMENTS_INVESTMENTS:"accountDocuments.investmentReports",ACCOUNT_DOCUMENTS_OTHER:"accountDocuments.otherDocuments",EXAMPLES:"examples",FORMS:"forms",FORMS_BANKING:"forms.banking",FORMS_INVESTMENT:"forms.investment",JOINT_ENROLLMENT:"tngJointEnrollment",JOINT_ENROLLMENT_VALIDATION:"tngJointEnrollmentValidation",HELP:"help",AIDE:"aide",COMING_SOON:"comingSoon",COMING_SOON_SITE:"comingSoonSite",BILL_PAY:"billPay",BILL_PAY_HISTORY:"billHistory",USER_SETTINGS:"userSettings",USER_SETTINGS_GENERAL:"userSettings.general",USER_SETTINGS_ORANGE_ALERTS:"userSettings.orangeAlerts",USER_SETTINGS_EXTERNAL_ACCOUNTS:"userSettings.externalAccounts",USER_SETTINGS_ASP:"userSettings.automaticSavingsProgram",USER_SETTINGS_TRANSFER_CONTACTS:"userSettings.transferContacts",USER_SETTINGS_CONTEST_BONUSES:"userSettings.contestBonuses",USER_SETTINGS_SECURITY:"userSettings.security",USER_SETTINGS_SECURITY_LOGIN_OPTIONS:"userSettings.security.loginOptions",USER_SETTINGS_SECURITY_CLIENT_PIN:"userSettings.security.clientPin",USER_SETTINGS_SECURITY_DOUBLE_SAFE:"userSettings.security.doubleSafe",USER_SETTINGS_SECURITY_DEVICES:"userSettings.security.devices",USER_SETTINGS_SECURITY_LOGIN_TOUCH_ID:"userSettings.security.touchId",USER_SETTINGS_SECURITY_LOGIN_TOUCH_ID_FROM_SIMPLE_SIGN_ON:"userSettings.security.touchIdFromSimpleSignOn",USER_SETTINGS_SECURITY_LOGIN_QUICK_VIEW:"userSettings.security.quickView",USER_SETTINGS_SECURITY_LOGIN_DEFER_PIN:"userSettings.security.instantAccess",USER_SETTINGS_SECURITY_LOGIN_DEFER_PIN_FROM_SIMPLE_SIGN_ON:"userSettings.security.instantAccessFromSimpleSignOn",USER_SETTINGS_SECURITY_LOGIN_DEFER_PIN_FROM_SIMPLE_SIGN_ON_NO_TOUCH:"userSettings.security.instantAccessFromSimpleSignOnNoTouch",MOBILE_TERMS_AND_CONDITIONS:"mobileTermsAndConditions",SIGNOUT:"signOut",MOBILE_PAY:"mobilePay",SIMPLE_SIGN_ON_TOUCH_ID:"simpleSignOnTouchId",SIMPLE_SIGN_ON_QUICK_VIEW:"simpleSignOnQuickView",SIMPLE_SIGN_ON_QUICK_VIEW_NO_BACK:"simpleSignoOnQuickViewNoBack",WATCH_SETTINGS:"watchSettings",QUICK_VIEW_ID_OPTIONS:"userSettings.security.quickViewIdOptions",QUICK_VIEW_INSTANT_ACCESS:"userSettings.security.instantAccess",QUICK_VIEW_EYE_VERIFY:"userSettings.security.eyeVerifySettings",QUICK_VIEW_VOCAL_PASSWORD:"userSettings.security.vocalPasswordSettings",DEVICES:"devices",DEVICES_SECURITY:"devices.security",DEVICES_ORANGE_SNAPSHOTS:"devices.orangeSnapshots",MAINTENANCE:"maintenance",NOT_FOUND:"notFound",EMT_RECEIVE_MONEY_CLIENT:"receiveMoneyClient",EMT_RECEIVE_MONEY_INTERAC:"receiveMoneyInterac",EMT_RECEIVE_MONEY_STANDARD:"receiveMoneyStandard",MOBILE_NAVIGATION:"navigation",MOBILE_NAVIGATION_DOCUMENTS:"navigation.documents",TRANSACTIONS:"transactionsPage",INSIGHTS_TRANSACTIONS_PLACEHOLDER:"insightsTransactionsPlaceholder",INSIGHTS:"insights",INBOX:"inbox",OVERDRAFT_PRE_APPROVED:"tngHoldsAndOverdraftPreApprovedModal",ABM_LOCATIONS:"abmLocations",ABM_ACCESS:"abmAccess",BUDGET_TOOL:"budgetTool",ACCESS_DENIED:"comingSoon403",KYC:"kycPage",INSIGHTS_TLOC_LEARN_MORE:"insightsTlocLearnMore",ABSTRACT_ACCOUNTS_MODAL:"abstractAccountsModal",ABSTRACT_TRANSACTIONS_MODAL:"abstractTransactionsModal",MOVE_MONEY_MODAL:"moveMoneyModal",PAY_BILLS_MODAL:"payBillsModal",ADD_BILL_MODAL:"addBillModal",EMT_MODAL:"emtModal",EMT_RECLAIM_MODAL:"emtReclaimModal",UNCONFIRMED_TRANSACTIONS_MODAL:"unconfirmedTransactionsModal",UNCATEGORIZED_TRANSACTIONS_MODAL:"uncategorizedTransactionsModal",CREDIT_CARD_BALANCE_TRANSFER_MODAL:"creditCardBalanceTransferModal",CREDIT_CARD_ACTIVATION_MODAL:"creditCardActivationModal",DEBIT_CARD_ACTIVATION_MODAL:"debitCardActivationModal",ASP_MODAL:"aspModal",CSA_CONVERSION_MODAL:"csaConversionModal",DIRECT_DEPOSIT_FORM_MODAL:"directDepositFormModal",E_NOTIFICATION_MODAL:"eNotificationModal",REFER_FRIEND_MODAL:"referFriendModal",DONATIONS_MODAL:"donationsModal",ORDER_CHEQUES_MODAL:"orderChequesModal",PENDING_APPLICATIONS:"pendingApplicationsModal",OVERDRAFT_PROTECTION_APPLY:"overDraftProtectionApplyModal",OVERDRAFT_CONSENT_MODAL:"overDraftConsentModal",RIF_SUMMARY_MODAL:"rifSummaryModal",ACTIVATE_OFFER_MODAL:"activateOfferModal",FEES_SAVED_CALCULATOR_MODAL:"feesSavedCalculatorModal",GOAL_MODAL:"goalModal"};t.default=i,e.exports=t.default},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={SELECT:{KEY:"SELECT",ITEMS:0,PROP_INDEX:1},SAVINGS_AND_CHEQUING:{KEY:"SAVINGS_AND_CHEQUING",ITEMS:6,PROP_INDEX:2,ITEM_PRODUCT_ID_MAP:{1:"eServ_D1_I01_CB",2:"eServ_D1_I02_CB",3:"eServ_D1_I03_CB",4:"eServ_D1_I04_CB",99:"eServ_D1_I99_CB"}},CREDIT_CARDS:{KEY:"CREDIT_CARDS",ITEMS:6,PROP_INDEX:3,ITEM_PRODUCT_ID_MAP:{1:"eServ_D4_I01_CB",2:"eServ_D4_I02_CB",3:"eServ_D4_I03_CB",4:"eServ_D4_I04_CB",99:"eServ_D4_I99_CB"}},MORTGAGES:{KEY:"MORTGAGES",ITEMS:0,PROP_INDEX:4,PRODUCT_ID:"eServ_D2_I99_CB"},INVESTMENTS:{KEY:"INVESTMENTS",ITEMS:0,PROP_INDEX:5,PRODUCT_ID:"eServ_D3_I99_CB"}},s={CALL_BACK:"CALL_BACK",CHAT:"CHAT",AVAILABILITY:"AVAILABILITY",CO_BROWSE:"CO_BROWSE",VIDEO_CHAT:"VIDEO_CHAT",CLICK_TO_CALL:"CLICK_TO_CALL"},a={CONNECTING:{name:"CONNECTING",titleKey:"contactUs.modal.chat.connecting.title"},CONNECTED:{name:"CONNECTED",titleKey:"contactUs.modal.chat.connected.title"},DISCONNECTED:{name:"DISCONNECTED",titleKey:"contactUs.modal.chat.disconnected.title"}},o={STARTED_TYPING:"Notice.TypingStarted",STOPPED_TYPING:"Notice.TypingStopped",JOINED_CHAT:"Notice.Joined",LEFT_CHAT:"Notice.Left",URL_MESSAGE:"Notice.PushUrl",TEXT_MESSAGE:"Message.Text",CUSTOM:"Notice.Custom"},r={CLIENT:"CLIENT",AGENT:"AGENT",EXTERNAL:"EXTERNAL"},l={AGENT:"AGENT",CLIENT:"CLIENT",AGENT_TYPING:"AGENT_TYPING",INFORMATIVE:"INFORMATIVE"},c={START_CHAT:{id:"Start Chat"},FEEDBACK_ACTION_SHOWN:{id:"Feedback Button Shown"},START_CHAT_AGENT_CONNECT:{id:"Start Chat Agent Connect"},FEEDBACK_CHAT_INITIATED:{id:"Feedback Chat Initiated"},FEEDBACK_CHAT_UNAVAILABLE:{id:"Chat Unavailable"}};t.default={TOPIC_HELPS_RELATION:i,CONTACT_SERVICES:s,CALL_BOOKING_SUCCESS:"SUCCESS",CONNECTION_STATES:a,COMET_EVENT_TYPES:o,COMET_EVENT_USERS:r,CHAT_BUBBLE_TYPES:l,ANALYTICS_ACTIONS:c,TOPICS_I18N_KEY:"contactUs.modal.callYou.questions.opt",SUBTOPICS_SUFFIX_I18N_KEY:"helpOptions.opt"},e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(114),a=i(s),o=n(0),r=i(o),l=n(1),c=i(l),u=n(55),d=i(u),h=n(132),_=function(){function e(){(0,r.default)(this,e)}return(0,c.default)(e,null,[{key:"parseDateString",value:function(e){var t=/([0-9]{4})([0-9]{2})([0-9]{2})/,n=e.match(t);return n?{year:parseInt(n[1],10),month:parseInt(n[2],10),day:parseInt(n[3],10)}:null}},{key:"padMonthDay",value:function(e){return e.toString().length<2?"0"+e.toString():e.toString()}},{key:"toMoment",value:function(e){return(0,d.default)([e.year,e.month,e.day],"YYYY/MM/DD")}},{key:"parseMoment",value:function(e){try{var t=e.utc();return{day:t.date(),month:t.month()+1,year:t.year()}}catch(e){return null}}},{key:"sameDates",value:function(e,t){return!(!e||!t)&&e.day===t.day&&e.month===t.month&&e.year===t.year}},{key:"greaterThan",value:function(e,t){return e.year>t.year||!(e.year<t.year)&&(e.month>t.month||!(e.month<t.month)&&e.day>t.day)}},{key:"lessThan",value:function(e,t){return e.year<t.year||!(e.year>t.year)&&(e.month<t.month||!(e.month>t.month)&&e.day<t.day)}},{key:"monthStart",value:function(e,t){return{day:1,month:e,year:t}}},{key:"monthEnd",value:function(e,t){return{day:(0,d.default)(t+"-"+e+"-01","YYYY-MM-DD").endOf("month").date(),month:e,year:t}}},{key:"getEndOfTime",value:function(){return{year:3e3,month:12,day:31}}},{key:"stringify",value:function(t){var n=e.padMonthDay(t.month),i=e.padMonthDay(t.day);return""+t.year+n+i}},{key:"getHighlightedDaysCount",value:function(t,n,i,s){if(!t)return 0;var a=e.toMoment(t),o=void 0;o=s!==h.DATE_SELECTOR_MODES.INDEFINITE&&n?e.toMoment(n):(0,d.default)(a).add(2,"years");var r=1;return i===h.FREQUENCY_MODE_CONSTANTS.DAILY?r+=o.diff(a,"days"):i===h.FREQUENCY_MODE_CONSTANTS.YEARLY?r+=o.diff(a,"years"):i===h.FREQUENCY_MODE_CONSTANTS.QUARTERLY?r+=o.diff(a,"quarters"):i===h.FREQUENCY_MODE_CONSTANTS.MONTHLY?r+=o.diff(a,"months"):i===h.FREQUENCY_MODE_CONSTANTS.SEMI_MONTHLY?(r=2*(o.month()-a.month()+1),e.isNextSemiMonthlyInSameMonth(t)?(r-=o.date()<e.getNextSemiMonthlyInSameMonth(a.clone().month(n.month-1)).date()?1:0,r-=o.date()<a.date()?1:0):(r-=1,r-=o.date()<a.date()?1:0,r-=o.date()<a.clone().add(-15,"days").date()?1:0)):i===h.FREQUENCY_MODE_CONSTANTS.BIWEEKLY?r+=Math.floor(o.diff(a,"weeks")/2):i===h.FREQUENCY_MODE_CONSTANTS.WEEKLY&&(r+=o.diff(a,"weeks")),r}},{key:"isNextSemiMonthlyInSameMonth",value:function(e){return e.day<16}},{key:"getNextSemiMonthlyInSameMonth",value:function(t){var n=t._isAMomentObject?t:e.toMoment(t);if(n.date()<16){var i=n.clone().add(15,"days");return i.month()===n.month()?i:i.date(1).add(-1,"days")}return null}},{key:"getHighlightedDaysList",value:function(t,n,i,s){if(!s||s===h.FREQUENCY_MODE_CONSTANTS.NONE)return[];var o=[],r=e.toMoment(t),l=e.toMoment(n),c=e.toMoment(i).endOf("month"),u=(0,d.default)(r),_=void 0;if(s===h.FREQUENCY_MODE_CONSTANTS.YEARLY)_=[1,"year"];else if(s===h.FREQUENCY_MODE_CONSTANTS.MONTHLY)_=[1,"month"];else if(s===h.FREQUENCY_MODE_CONSTANTS.SEMI_MONTHLY){var g=void 0;g=e.isNextSemiMonthlyInSameMonth(t)?{day:t.day,month:i.month,year:i.year}:{day:t.day-15,month:i.month,year:i.year},o.push(g);var S=e.getNextSemiMonthlyInSameMonth(g);o.push({day:S.date(),month:S.month()+1,year:S.year()})}else _=s===h.FREQUENCY_MODE_CONSTANTS.BIWEEKLY?[2,"weeks"]:s===h.FREQUENCY_MODE_CONSTANTS.WEEKLY?[1,"weeks"]:s===h.FREQUENCY_MODE_CONSTANTS.QUARTERLY?[1,"quarters"]:s===h.FREQUENCY_MODE_CONSTANTS.DAILY?[1,"days"]:[];if(s!==h.FREQUENCY_MODE_CONSTANTS.SEMI_MONTHLY&&2===_.length)for(;u<l&&u<=c;){var f,v=e.parseDateString(u.format("YYYYMMDD"));v.month===i.month&&v.year===i.year&&o.push(v),u=(f=u).add.apply(f,(0,a.default)(_))}return o}},{key:"addDays",value:function(t,n){var i=e.toMoment(t);return e.parseMoment(i.add(n,"days"))}},{key:"addMonths",value:function(t,n){var i=e.toMoment(t);return e.parseMoment(i.add(n,"M"))}}]),e}();t.default=_,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(55),s=function(e){return e&&e.__esModule?e:{default:e}}(i),a={numericYearMonthDayWithDashes:"YYYY-MM-DD",numericYearMonthWithDashes:"YYYY-MM",expandedMonthDayYear:"MMMM Do, YYYY",longDate:"LL"},o={calendarMonthClass:"tng-dp__month",calendarMonthOddClass:"tng-dp__month--odd",calendarMonthDisabledClass:"tng-dp__month--disabled",calendarMonthRangedClass:"tng-dp__month--ranged",calendarMonthRangedPreClass:"tng-dp__month--ranged-pre",calendarMonthRangedPostClass:"tng-dp__month--ranged-post",calendarMonthHeaderClass:"tng-dp__month-header",calendarWeekClass:"tng-dp__week",calendarWeekHeaderClass:"tng-dp__week-header",calendarWeekPopulatedClass:"tng-dp__week--populated",calendarDayClass:"tng-dp__day",calendarDayDisabledClass:"tng-dp__day--disabled",calendarDayPreRangeClass:"tng-dp__day--pre-range",calendarDayPostRangeClass:"tng-dp__day--post-range",calendarDayRangedClass:"tng-dp__day--ranged",calendarDayHighlightedClass:"tng-dp__day--highlighted",calendarHandleClass:"tng-dp__handle",calendarDaySelectedClass:"tng-dp__day--selected",calendarDayEndSelectedClass:"tng-dp__day--selected-end",jsCalendarContainerClass:"js-calendar-container",jsDayInputClass:"js-day-input",jsYearInputClass:"js-year-input",jsMonthClass:"js-month",jsMonthInputClass:"js-month-input",jsMonthHeaderClass:"js-month-header",jsWeekClass:"js-week",jsWeekdayClass:"js-weekday",jsWeeksHeaderClass:"js-weeks-header"},r={RANGE:"RANGE",INDEFINITE:"INDEFINITE",SINGLE:"SINGLE"},l=(0,s.default)("1990-01-01",a.numericYearMonthDayWithDashes),c=(0,s.default)("1900-01-01",a.numericYearMonthDayWithDashes),u=(0,s.default)().subtract(5,"years"),d=(0,s.default)().subtract(12,"years"),h=(0,s.default)().isDST()?-4:-5,_=(0,s.default)().utcOffset(h).utcOffset(0,!0),g={NONE:"NONE",DAILY:"DAILY",WEEKLY:"WEEKLY",BIWEEKLY:"BIWEEKLY",MONTHLY:"MONTHLY",SEMI_MONTHLY:"SEMI_MONTHLY",QUARTERLY:"QUARTERLY",YEARLY:"YEARLY"},S={NONE:{},DAILY:{days:1},WEEKLY:{weeks:1},BIWEEKLY:{weeks:2},MONTHLY:{months:1},SEMI_MONTHLY:{days:15},QUARTERLY:{months:3},YEARLY:{years:1}},f={FROM_DATE:"FROM_DATE",TO_DATE:"TO_DATE",NONE:"NONE"},v={TABLET_PX:768,RESIZE_THROTTLE_MS:500,MONTH_SLOTS_DESKTOP:4,MONTH_BACKWARD_SLOTS_DESKTOP:-1,MONTH_SLOTS_TABLET:1,MONTH_BACKWARD_SLOTS_TABLET:0};t.default={DATE_SELECTOR_CSS_CLASSES:o,FREQUENCY_MODE_CONSTANTS:g,DEFAULT_END_DATE_CONSTANTS:S,DATE_SELECTOR_MODES:r,THRESHOLDS:v,LATEST_CHANGES_OPTIONS:f,DEFAULT_MIN_DATE_OF_BIRTH:c,DEFAULT_MAX_DATE_OF_BIRTH:u,DEFAULT_MAX_DATE_OF_BIRTH_TWELVE:d,DEFAULT_DATE_OF_BIRTH:l,TODAY_IN_EST:_,DATE_FORMATS:a,UTC_OFFSET:h},e.exports=t.default},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ModalFooterButton=void 0;var s=n(1),a=i(s),o=n(0),r=i(o),l=(t.ModalFooterButton=function e(t,n,i){(0,r.default)(this,e),this.type=t,this.show=n,this.disable=i},function(){function e(t,n,i,s,a,o,l,c,u,d,h){(0,r.default)(this,e),this.$log=t,this.$location=a,this.AnalyticsService=l,this.ANALYTICS_AVAILABLE_EVENTS=this.AnalyticsService.availableEvents,this.document=n[0],this.EventBusService=i,this.environmentService=s,this.ModalDialogConstants=o,this.NativeService=c,this.$timeout=u,this.$state=d,this.ModalDialogService=h;var _=o.SELECTOR_CLASSES.DIALOG_CONTENT;this.dialogClassName=o.SELECTOR_CLASSES.DIALOG,this.contentBlock=document.querySelector("."+_),this.DIALOG_OPEN_CSS_CLASS="dialog-open",this.PLATFORM_DIALOG_OPEN_CSS_CLASS=this.environmentService.isIOS()?"ios-dialog-open":"non-ios-dialog-open",this.lastScrollTop=0,this.keyboardIsOpen=!1}return(0,a.default)(e,[{key:"$onInit",value:function(){angular.isUndefined(this.isVisible)&&(this.isVisible=!0),angular.isDefined(this.size)?this.sizeModifier="--"+this.size:this.sizeModifier="",this.isDimming=!angular.isDefined(this.isDimming)||this.isDimming,this.isVisible&&this._processModalDialogOn(),this.setStateMetadata(!0)}},{key:"_addMobileBackgroundStyling",value:function(){angular.element(".dialog__main-content").addClass("ios-background")}},{key:"_removeMobileBackgroundStyling",value:function(){angular.element(".dialog__main-content").removeClass("ios-background")}},{key:"setStateMetadata",value:function(e){this.analyticsId!==this.ModalDialogConstants.METADATA_IGNORED_LOCATIONS.CONTACT_US_CHAT&&this.analyticsId!==this.ModalDialogConstants.METADATA_IGNORED_LOCATIONS.CONTACT_US_CHAT_WITH_US&&this.analyticsId&&(e?(this.$state.kvp_current=this.$state.current.url+"?modal="+this.analyticsId,this.$state.kvp_previous=this.$state.current.url):(this.$state.kvp_previous=this.$state.current.url+"?modal="+this.analyticsId,this.$state.kvp_current=this.$state.current.url))}},{key:"handleOnClose",value:function(){var e=this,t=document.querySelector("."+this.dialogClassName);t&&(t.classList.add(this.ModalDialogConstants.SELECTOR_CLASSES.DIALOG_DURING_THE_CLOSE),this.$timeout(function(){e.onClose()},250))}},{key:"logoLoaded",value:function(){this.ModalDialogService.logoLoadedOnce||(this.ModalDialogService.logoLoadedOnce=!0,this.$log.debug("signalHybridLoaded based on brand.png load fired"),this.NativeService.signalHybridLoaded())}},{key:"$onChanges",value:function(e){"scrollTopOn"in e&&this.contentBlock&&(this.contentBlock.scrollTop=0),"isVisible"in e&&(this.isVisible?this._processModalDialogOn():this._processModalDialogOff())}},{key:"$onDestroy",value:function(){this._processModalDialogOff(),this.setStateMetadata(!1)}},{key:"_disableDocumentScrolling",value:function(){this.inlineMode||(this.document.body.style.overflow="hidden")}},{key:"_enableDocumentScrolling",value:function(){this.inlineMode||(this.document.body.style.overflow="visible")}},{key:"_addDialogBodyClass",value:function(){this.lastScrollTop=this.document.body.scrollTop,this.inlineMode||(this.document.body.classList.add(this.DIALOG_OPEN_CSS_CLASS,this.PLATFORM_DIALOG_OPEN_CSS_CLASS),this.document.documentElement.classList.add(this.DIALOG_OPEN_CSS_CLASS,this.PLATFORM_DIALOG_OPEN_CSS_CLASS),this.ModalDialogService.registerModalWithBodyCssChange(this))}},{key:"_removeDialogBodyClass",value:function(){this.inlineMode||(this.ModalDialogService.unregisterModalWithBodyCssChange(this),this.ModalDialogService.hasModalWithBodyCssChange()||(this.document.body.classList.remove(this.DIALOG_OPEN_CSS_CLASS,this.PLATFORM_DIALOG_OPEN_CSS_CLASS),this.document.documentElement.classList.remove(this.DIALOG_OPEN_CSS_CLASS,this.PLATFORM_DIALOG_OPEN_CSS_CLASS))),this.document.body.scrollTop=this.lastScrollTop}},{key:"_publishModalOpen",value:function(){this.EventBusService.publish(this.ModalDialogConstants.EVENTS.MODAL_OPENED,{})}},{key:"_publishModalClose",value:function(){this.EventBusService.publish(this.ModalDialogConstants.EVENTS.MODAL_CLOSED,{})}},{key:"_sendAnalytics",value:function(){if(this.analyticsId){var e=this._getAnalyticsID();this.AnalyticsService.sendAction(this.ANALYTICS_AVAILABLE_EVENTS.MODAL_SHOW,e)}}},{key:"_getAnalyticsID",value:function(){return"/"+this.analyticsId}},{key:"_processModalDialogOn",value:function(){this._publishModalOpen(),this._disableDocumentScrolling(),this._addDialogBodyClass(),this.environmentService.isIOS()&&this._addMobileBackgroundStyling(),this._sendAnalytics(),this.ModalDialogService.registerOpenModal(this)}},{key:"_processModalDialogOff",value:function(){this._publishModalClose(),this._removeDialogBodyClass(),this.ModalDialogService.unregisterOpenModal(this),this.ModalDialogService.hasOpenModal()||(this._enableDocumentScrolling(),this.environmentService.isIOS()&&this._removeMobileBackgroundStyling())}}]),e}());l.$inject=["$log","$document","EventBusService","EnvironmentService","$location","modalDialogConstants","AnalyticsService","NativeService","$timeout","$state","ModalDialogService"],t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={RESPONSE_CODES:{SUCCESS:"SUCCESS",NO_DATA:"NO_DATA",VALIDATION_ERROR:"VALIDATION_ERROR",USERNAME_EXISTS:"USERNAME_EXISTS",UPDATE_FAILURE:"UPDATE_FAILURE",PININVALID:"PININVALID",INVALID_BANK_INFO:"INVALID_BANK_INFO",INVALID_AMOUNT:"INVALID_AMOUNT",PROFANITY:"MESSAGE_39205",BIINV:"BIINV",INVALID_CIF:"INVALID_CIF",INVALID:"INVALID",INVALID_NICKNAME:"INVALID_NICKNAME"},ADDRESS_TYPE:{HOME:"HOME",MAILING:"MAILING",BUSINESS:"BUSINESS",FUTURE:"FUTURE",FUTURE_MAILING:"FUTURE_MAILING"},ADDRESS_DATE_FORMAT:"YYYY-MM-DD",ADDRESS_CANADA_COUNTRY_CODE:"CA",ADDRESS_UNITED_STATES_COUNTRY_CODE:"US",RESIDENT:"RESIDENT",NON_RESIDENT:"NON_RESIDENT",PHONE_TYPE:{HOME:{KEY:"HOME",TRANSLATION:"userSettings.general.basicInfo.phoneType.home",TABLE_TITLE_TRANSLATION:"userSettings.general.basicInfo.homePhoneNumber"},CELL:{KEY:"CELL",TRANSLATION:"userSettings.general.basicInfo.phoneType.mobile",TABLE_TITLE_TRANSLATION:"userSettings.general.basicInfo.mobilePhoneNumber"},BUSINESS:{KEY:"BUSINESS",TRANSLATION:"userSettings.general.basicInfo.phoneType.business",TABLE_TITLE_TRANSLATION:"userSettings.general.basicInfo.workPhoneNumber"}},EMPLOYMENT_STATUS:{EMPLOYED:{KEY:"EMPLOYED",TRANSLATION:"userSettings.general.basicInfo.employmentStatus.employed"},SELF_EMPLOYED:{KEY:"SELF_EMPLOYED",TRANSLATION:"userSettings.general.basicInfo.employmentStatus.selfEmployed"},RETIRED:{KEY:"RETIRED",TRANSLATION:"userSettings.general.basicInfo.employmentStatus.retired"},STUDENT:{KEY:"STUDENT",TRANSLATION:"userSettings.general.basicInfo.employmentStatus.student"},HOME_MAKER:{KEY:"HOME_MAKER",TRANSLATION:"userSettings.general.basicInfo.employmentStatus.homeMaker"},UNEMPLOYED:{KEY:"UNEMPLOYED",TRANSLATION:"userSettings.general.basicInfo.employmentStatus.notWorking"},OTHER:{KEY:"OTHER",TRANSLATION:"userSettings.general.basicInfo.employmentStatus.other"},EMPLOYED_FULL_TIME:{KEY:"EMPLOYED_FULL_TIME",TRANSLATION:"userSettings.general.basicInfo.employmentStatus.employedFullTime"},EMPLOYED_PART_TIME:{KEY:"EMPLOYED_PART_TIME",TRANSLATION:"userSettings.general.basicInfo.employmentStatus.employedPartTime"},SEASONAL:{KEY:"SEASONAL",TRANSLATION:"userSettings.general.basicInfo.employmentStatus.seasonal"},CHILD_PRE_SCHOOL:{KEY:"CHILD_PRE_SCHOOL",TRANSLATION:"userSettings.general.basicInfo.employmentStatus.childPreSchool"},NOT_WORKING:{KEY:"NOT_WORKING",TRANSLATION:"userSettings.general.basicInfo.employmentStatus.notWorking"}},COMMUNICATION:{MARKETING_TYPE:{EMAIL:"EMAIL",MAIL:"MAIL",STATEMENTS:"STATEMENTS",PHONE:"PHONE"},LANGUAGES:{ENGLISH:{KEY:"ENGLISH",TRANSLATION:"userSettings.general.otherCommunication.language.english"},FRENCH:{KEY:"FRENCH",TRANSLATION:"userSettings.general.otherCommunication.language.french"}},PREFERENCES_KEYS:{SAVINGS:{KEY:"savings",TRANSLATION:"userSettings.general.otherCommunication.preferencesKeys.savings"},MUTUAL_FUNDS:{KEY:"mutual_funds",TRANSLATION:"userSettings.general.otherCommunication.preferencesKeys.mutual_funds"},CREDIT_CARD:{KEY:"credit_card",TRANSLATION:"userSettings.general.otherCommunication.preferencesKeys.creditcard"}},OTHER_TYPES:{ELECTRONIC:{KEY:"ELECTRONIC",TRANSLATION:"userSettings.general.otherCommunication.otherTypes.electronic"},PAPER:{KEY:"PAPER",TRANSLATION:"userSettings.general.otherCommunication.otherTypes.paper"}},STATES:{YES:{KEY:"Y",TRANSLATION:"global.yes"},NO:{KEY:"N",TRANSLATION:"global.no"}},USER_DATA:{LANGUAGE:{KEY:"langauge",TRANSLATION:"userSettings.general.otherCommunication.language.label"},EDOCUMENT:{KEY:"edocument",TRANSLATION:"userSettings.general.otherCommunication.eDocuments"},STATEMENT:{KEY:"statements",TRANSLATION:"userSettings.general.otherCommunication.statement"},TAX_RECEIPT:{KEY:"tax_receipts",TRANSLATION:"userSettings.general.otherCommunication.taxReceipt"},TRADE_CONFIRMATION:{KEY:"trade_confirmation",TRANSLATION:"userSettings.general.otherCommunication.trade"},STATEMENTS_CONSENT:{KEY:"statements_consent"}}},DOUBLE_SAFE:{DEVICES:{UNREGISTER_ALL:"UNBIND_ALL_DEVICES",UNREGISTER_DEVICE:"UNBIND_DEVICE",REGISTER_DEVICE:"BIND_DEVICE",DELETE_REMEMBER_ME_ALL:"DELETE_REMEMBER_ME_ALL"},DEVICE_COOKIE:"PMData"},CARD:{TYPE:{DEBIT:{KEY:"DEBIT",TRANSLATION:"userSettings.general.cards.type.debit"},CREDIT:{KEY:"CREDIT",TRANSLATION:"userSettings.general.cards.type.credit"}},STATUS:{OKAY:{KEY:"OKAY",TRANSLATION:"userSettings.general.cards.status.okay"},STOLEN:{KEY:"STOLEN",TRANSLATION:"userSettings.general.cards.status.stolen"},CAPTURE:{KEY:"CAPTURE",TRANSLATION:"userSettings.general.cards.status.capture"},NOT_ACTIVATED:{KEY:"NOT_ACTIVATED",TRANSLATION:"userSettings.general.cards.status.notActivated"},SETTLE:{KEY:"SETTLE",TRANSLATION:"userSettings.general.cards.status.settle"},CLOSED:{KEY:"CLOSED",TRANSLATION:"userSettings.general.cards.status.closed"},ORDER:{KEY:"ORDER",TRANSLATION:"userSettings.general.cards.status.order"},COMPROMISED:{KEY:"COMPROMISED",TRANSLATION:"userSettings.general.cards.status.compromised"},DESTROYED:{KEY:"DESTROYED",TRANSLATION:"userSettings.general.cards.status.destroyed"}}},ASP_TRANSACTION_TYPE:"ASP"},s={CARDS_FETCH_ERROR:"CARDS_FETCH_ERROR",DEBIT_CARDS_API_ERROR:"DEBIT_CARDS_API_ERROR",CREDIT_CARDS_API_ERROR:"CREDIT_CARDS_API_ERROR"},a=["000000000","999999998"],o={API:i,LAST_LOGIN_REPLACE:" at",CUSTOMER_JSON_KEY:"customer",ERROR_CODES:s,DUMMY_SIN_NUMBERS:a};t.default=o,e.exports=t.default},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,s,a,o,r,l,c,u=n(36),d=function(e){return e&&e.__esModule?e:{default:e}}(u),h={CAD:"CAD",USD:"USD"},_={MIN_TOKEN_LEN:"2"},g={CC:"1100",MUTUAL_FUND:"2000",MUTUAL_FUND_RSP:"2100",MUTUAL_FUND_TFSA:"2200",MUTUAL_FUND_RIF:"2300",SAVINGS:"3000",USDSAVINGS:"3010",RSP:"3100",TFSA:"3200",TFSAKS:"3201",CSA:"3300",RIF_ISA:"3400",GIC:"3500",GIC_USD:"3510",GIC_RSP:"3600",GIC_TFSA:"3800",GIC_RIF:"3900",TGSA:"3950",CHEQUING:"4000",RSP_LOAN:"5100",MORTGAGE:"7000",MORTGAGE_PRE_APPROVAL:"-7001",MORTGAGE_RATE_HOLD:"-7002",HELOC:"7910",BUSINESS_SAVINGS:"3333",BUSINESS_US_SAVINGS:"3343",BUSINESS_GIC:"3533",BUSINESS_GIC_USD:"3543",TLOC_INTEREST:"6800",TLOC_INTEREST_BAL:"6900"},S=(i={},(0,d.default)(i,"4000CAD","4000CAD"),(0,d.default)(i,"1100CAD","1100CAD"),(0,d.default)(i,"3000CAD","3000CAD"),(0,d.default)(i,"3090CAD","3000CAD"),(0,d.default)(i,"3091CAD","3000CAD"),(0,d.default)(i,"3500CAD","3500CAD"),(0,d.default)(i,"3501CAD","3500CAD"),(0,d.default)(i,"3502CAD","3500CAD"),(0,d.default)(i,"3503CAD","3500CAD"),(0,d.default)(i,"3504CAD","3500CAD"),(0,d.default)(i,"3505CAD","3500CAD"),(0,d.default)(i,"3590CAD","3500CAD"),(0,d.default)(i,"3594CAD","3500CAD"),(0,d.default)(i,"3700CAD","3500CAD"),(0,d.default)(i,"3703CAD","3500CAD"),(0,d.default)(i,"3300CAD","3300CAD"),(0,d.default)(i,"3200CAD","3200CAD"),(0,d.default)(i,"3290CAD","3200CAD"),(0,d.default)(i,"3100CAD","3100CAD"),(0,d.default)(i,"3190CAD","3100CAD"),(0,d.default)(i,"3400CAD","3400CAD"),(0,d.default)(i,"3201CAD","3201CAD"),(0,d.default)(i,"3804CAD","3804CAD"),(0,d.default)(i,"3894CAD","3804CAD"),(0,d.default)(i,"3800CAD","3804CAD"),(0,d.default)(i,"3890CAD","3804CAD"),(0,d.default)(i,"3600CAD","3600CAD"),(0,d.default)(i,"3604CAD","3600CAD"),(0,d.default)(i,"3690CAD","3600CAD"),(0,d.default)(i,"3694CAD","3600CAD"),(0,d.default)(i,"3900CAD","3900CAD"),(0,d.default)(i,"3904CAD","3900CAD"),(0,d.default)(i,"3000USD","3000USD"),(0,d.default)(i,"3010USD","3000USD"),(0,d.default)(i,"3090USD","3000USD"),(0,d.default)(i,"3500USD","3500USD"),(0,d.default)(i,"3504USD","3500USD"),(0,d.default)(i,"3510USD","3500USD"),(0,d.default)(i,"3514USD","3500USD"),(0,d.default)(i,"3590USD","3500USD"),(0,d.default)(i,"3594USD","3500USD"),(0,d.default)(i,"3333CAD","3333CAD"),(0,d.default)(i,"3393CAD","3333CAD"),(0,d.default)(i,"3333USD","3333USD"),(0,d.default)(i,"3343USD","3333USD"),(0,d.default)(i,"3393USD","3333USD"),(0,d.default)(i,"3533CAD","3533CAD"),(0,d.default)(i,"3534CAD","3533CAD"),(0,d.default)(i,"3535CAD","3533CAD"),(0,d.default)(i,"3597CAD","3533CAD"),(0,d.default)(i,"3598CAD","3533CAD"),(0,d.default)(i,"3533USD","3533USD"),(0,d.default)(i,"3534USD","3533USD"),(0,d.default)(i,"3543USD","3533USD"),(0,d.default)(i,"3544USD","3533USD"),(0,d.default)(i,"3597USD","3533USD"),(0,d.default)(i,"3598USD","3533USD"),(0,d.default)(i,"5000CAD","5000CAD"),(0,d.default)(i,"5100CAD","5000CAD"),(0,d.default)(i,"5500CAD","5000CAD"),(0,d.default)(i,"6000CAD","6000CAD"),(0,d.default)(i,"6030CAD","6030CAD"),(0,d.default)(i,"6050CAD","6030CAD"),(0,d.default)(i,"6100CAD","6100CAD"),(0,d.default)(i,"6120CAD","6120CAD"),(0,d.default)(i,"7400CAD","6120CAD"),(0,d.default)(i,"6200CAD","6200CAD"),(0,d.default)(i,"6300CAD","6200CAD"),(0,d.default)(i,"6400CAD","6200CAD"),(0,d.default)(i,"6450CAD","6200CAD"),(0,d.default)(i,"6700CAD","6700CAD"),(0,d.default)(i,"7910CAD","7910CAD"),i),f=(s={},(0,d.default)(s,g.RSP_LOAN,{payment_accounts:[g.CHEQUING,g.SAVINGS]}),(0,d.default)(s,g.GIC,{payment_accounts:[g.CHEQUING,g.SAVINGS]}),(0,d.default)(s,g.TLOC_INTEREST,{payment_accounts:[g.CHEQUING,g.SAVINGS]}),(0,d.default)(s,g.TLOC_INTEREST_BAL,{payment_accounts:[g.CHEQUING,g.SAVINGS]}),s),v={3500:"NONREG",3510:"NONREG",3600:"RSP",3800:"TFSA",3900:"RIF",3533:"NONREG",3543:"NONREG",3400:"RIF"},E={3500:"NONREG",3510:"NONREG",3600:"RÉR",3800:"CÉLI",3900:"FRR",3533:"NONREG",3543:"NONREG",3400:"FRR"},p=[g.CHEQUING,g.GIC_RSP,g.GIC_TFSA,g.GIC_RIF,g.TFSAKS,[g.GIC,"3504"],[g.GIC_USD,"3514"],[g.MORTGAGE,"7700"]],T={1100:"CREDIT_CARD",4e3:"CHEQUING",3e3:"SAVINGS",3010:"SAVINGS",3100:"SAVINGS",3200:"SAVINGS",3201:"SAVINGS",3400:"GIC",3500:"GIC",3504:"GIC",3510:"GIC",3514:"GIC",3600:"GIC",3800:"GIC",3900:"GIC"},m={NREG:"NREG",NREGJ:"NREGJ",RSP:"RSP",RSPSP:"RSPSP",TFSA:"TFSA"},C={NREG:"NONREG",NREGJ:"NONREG",RSP:"RSP",RSPSP:"SPOUSAL",TFSA:"TFSA"},A=(a={},(0,d.default)(a,g.MUTUAL_FUND,m.NREG),(0,d.default)(a,g.MUTUAL_FUND_RSP,m.RSP),(0,d.default)(a,g.MUTUAL_FUND_TFSA,m.TFSA),a),I=(o={},(0,d.default)(o,m.NREG,g.MUTUAL_FUND),(0,d.default)(o,m.NREGJ,g.MUTUAL_FUND),(0,d.default)(o,m.RSP,g.MUTUAL_FUND_RSP),(0,d.default)(o,m.RSPSP,g.MUTUAL_FUND_RSP),(0,d.default)(o,m.TFSA,g.MUTUAL_FUND_TFSA),o),O=(r={4e3:"CHQ",3e3:"SAV",3010:"SAV",3100:"SAV",3200:"SAV",3201:"SAV",3300:"CSA",3400:"SAV",3500:"SAV",3504:"SAV",3510:"SAV",3514:"SAV",3600:"SAV",3800:"SAV",3900:"SAV"},(0,d.default)(r,g.BUSINESS_GIC,"BSAV"),(0,d.default)(r,g.BUSINESS_GIC_USD,"BSAV"),(0,d.default)(r,g.BUSINESS_SAVINGS,"BSAV"),(0,d.default)(r,g.BUSINESS_US_SAVINGS,"BSAV"),r),N=[g.BUSINESS_GIC,g.BUSINESS_GIC_USD,g.BUSINESS_SAVINGS,g.BUSINESS_US_SAVINGS],y={CHEQUING:"CHEQUING",SAVINGS:"SAV"},b=[g.GIC,g.GIC_USD,g.GIC_RSP,g.GIC_TFSA,g.GIC_RIF,g.RIF_ISA,g.BUSINESS_GIC,g.BUSINESS_GIC_USD],L=[g.SAVINGS,g.USDSAVINGS,g.RSP,g.TFSA,g.TFSAKS,g.CHEQUING],M=[g.MUTUAL_FUND,g.MUTUAL_FUND_TFSA,g.MUTUAL_FUND_RSP],R={CHEQUING:"CHEQUING",SAVINGS:"SAVINGS",MUTUAL_FUND:"MUTUAL_FUND",MF:"MF",MORT_WEB:"MORT_WEB",MORTGAGE:"MORTGAGE",MORT_DAWT:"MORT_DAWT",LOAN:"LOAN",OTHER:"OTHER",EXT:"EXT",CREDIT_CARD:"CREDIT_CARD",BUSINESS_SAVINGS:"BUSINESS_SAVINGS",GOALS:"GOALS",ASP:"ASP"},D={CHEQUING:"chequing",SPENDING:"spending",SAVINGS:"savings",BORROWING:"borrowing",SPECIAL_OFFERS:"specialOffers",INVESTING:"investing",MORTGAGE:"mortgage",GIC:"gic",GOALS:"goals"},P={RSP:"RSP",TFSA:"TFSA",TFSAKS:"TFSAKS",RIF:"RIF",GIC:"GIC",OTHER:"OTHER"},$={"RÉR":"RÉR","CÉLI":"CÉLI",TFSAKS:"TFSAKS",FRR:"FRR",GIC:"GIC",OTHER:"OTHER"},U={EN:"Locked-in",FR:"immobilisé"},k={HELOC:"HELOC",LOC:"LOC",TLOC:"TLOC"},w={CHQ:"CHQ",CTE:"CTE",CTIF:"CTIF",EFT:"EFT",TFSAP:"TFSAP"},B={SPENDING:"SPENDING",SAVING:"SAVING",INVESTING:"INVESTING",BORROWING:"BORROWING",CHEQUING:"CHEQUING",GOALS:"GOALS"},F={SUSPENDED:"SUSPENDED",CANCELED:"CANCELED"},G=(l={},(0,d.default)(l,R.CHEQUING,B.SPENDING),(0,d.default)(l,R.CREDIT_CARD,B.SPENDING),(0,d.default)(l,R.SAVINGS,B.SAVING),(0,d.default)(l,R.MUTUAL_FUND,B.INVESTING),(0,d.default)(l,R.MORTGAGE,B.BORROWING),(0,d.default)(l,R.LOAN,B.BORROWING),(0,d.default)(l,R.GOALS,B.GOALS),l),V=(c={},(0,d.default)(c,R.CHEQUING,0),(0,d.default)(c,R.SAVINGS,1),(0,d.default)(c,R.BUSINESS_SAVINGS,2),(0,d.default)(c,R.MF,3),(0,d.default)(c,R.MORT_WEB,4),(0,d.default)(c,R.MORTGAGE,5),(0,d.default)(c,R.MORT_DAWT,5),(0,d.default)(c,R.LOAN,6),c),x={SINGLE:{value:"Single",key:"accountDetails.registrationType.single"},JOINT:{value:"Joint",key:"accountDetails.registrationType.joint"}},H={MATURITY:{SHORT_TERM:{REINVEST:{header:"accountDetails.maturityInstructions.SHORT_TERM.REINVEST",id:0},COMBINED:{header:"accountDetails.maturityInstructions.SHORT_TERM.COMBINED",id:1},PAYOUT:{header:"accountDetails.maturityInstructions.SHORT_TERM.PAYOUT",id:2}},LONG_TERM:{REINVEST:{header:"accountDetails.maturityInstructions.LONG_TERM.REINVEST",id:3},PAYOUT:{header:"accountDetails.maturityInstructions.LONG_TERM.PAYOUT",id:2}}},INTERESTS:{REINVEST:{header:"accountDetails.interestsOptions.REINVEST",id:0},PAYOUT:{header:"accountDetails.interestsOptions.PAYOUT",id:2}},ACCOUNT_TERM_CODES:[{apiCode:90,name:"90 days",days:90},{apiCode:180,name:"180 days",days:180},{apiCode:270,name:"270 days",days:270},{apiCode:1,name:"1 year",days:365,longTerm:!0},{apiCode:1.5,name:"1.5 year",days:545,longTerm:!0},{apiCode:2,name:"2 year",days:730,longTerm:!0},{apiCode:3,name:"3 year",days:1095,longTerm:!0},{apiCode:4,name:"1 year",days:1460,longTerm:!0},{apiCode:5,name:"2 year",days:1825,longTerm:!0},{apiCode:7,name:"3 year",days:2555,longTerm:!0},{apiCode:10,name:"10 year",days:3650,longTerm:!0}]},Y={GIC_OPTIONS:"GIC_OPTIONS",BENEFICIARIES:"BENEFICIARIES",CONTRIBUTIONS:"CONTRIBUTIONS",REDEMPTION:"REDEMPTION",RIF_SUMMARY:"RIF_SUMMARY",RSP_TRANSFER:"RSP_TRANSFER",TFSA_TRANSFER:"TFSA_TRANSFER",RIF_TRANSFER:"RIF_TRANSFER",STATEMENTS:"STATEMENTS",CSA_CONVERSION:"CSA_CONVERSION"},q={SAVINGS:{GIC:{TFSA:{GIC_OPTIONS:"GIC_OPTIONS",CONTRIBUTIONS:"CONTRIBUTIONS",REDEMPTION:"REDEMPTION"},TFSAKS:{},RSP:{GIC_OPTIONS:"GIC_OPTIONS",CONTRIBUTIONS:"CONTRIBUTIONS",REDEMPTION:"REDEMPTION"},RIF:{GIC_OPTIONS:"GIC_OPTIONS",REDEMPTION:"REDEMPTION",RIF_SUMMARY:"RIF_SUMMARY"},OTHER:{GIC_OPTIONS:"GIC_OPTIONS",REDEMPTION:"REDEMPTION"}},TFSA:{CONTRIBUTIONS:"CONTRIBUTIONS",TFSA_TRANSFER:"TFSA_TRANSFER"},TFSAKS:{},RIF:{RIF_SUMMARY:"RIF_SUMMARY",RIF_TRANSFER:"RIF_TRANSFER"},RSP:{CONTRIBUTIONS:"CONTRIBUTIONS",RSP_TRANSFER:"RSP_TRANSFER"},OTHER:{STATEMENTS:"STATEMENTS"},GOALS:{STATEMENTS:"STATEMENTS",EDIT_GOAL:"EDIT_GOAL"}}},W={CHEQUING:{TRANSACTIONS:"TRANSACTIONS",CHEQUING_ACCOUNT_DETAILS:"CHEQUING_ACCOUNT_DETAILS",HOLDS_AND_OVERDRAFTS:"HOLDS_AND_OVERDRAFTS"},SAVINGS:{GIC:{TFSA:{SAVINGS_TRANSACTIONS:"SAVINGS_TRANSACTIONS",SAVINGS_ACCOUNT_DETAILS:"SAVINGS_ACCOUNT_DETAILS",HOLDS:"HOLDS",BENEFICIARIES:"BENEFICIARIES"},TFSAKS:{SAVINGS_TRANSACTIONS:"SAVINGS_TRANSACTIONS",SAVINGS_ACCOUNT_DETAILS:"SAVINGS_ACCOUNT_DETAILS",HOLDS:"HOLDS"},RIF:{SAVINGS_TRANSACTIONS:"SAVINGS_TRANSACTIONS",SAVINGS_ACCOUNT_DETAILS:"SAVINGS_ACCOUNT_DETAILS",HOLDS:"HOLDS",BENEFICIARIES:"BENEFICIARIES"},RSP:{SAVINGS_TRANSACTIONS:"SAVINGS_TRANSACTIONS",SAVINGS_ACCOUNT_DETAILS:"SAVINGS_ACCOUNT_DETAILS",HOLDS:"HOLDS",BENEFICIARIES:"BENEFICIARIES"},OTHER:{SAVINGS_TRANSACTIONS:"SAVINGS_TRANSACTIONS",SAVINGS_ACCOUNT_DETAILS:"SAVINGS_ACCOUNT_DETAILS",HOLDS:"HOLDS"}},RIF:{SAVINGS_TRANSACTIONS:"SAVINGS_TRANSACTIONS",SAVINGS_ACCOUNT_DETAILS:"SAVINGS_ACCOUNT_DETAILS",HOLDS:"HOLDS",BENEFICIARIES:"BENEFICIARIES"},TFSA:{SAVINGS_TRANSACTIONS:"SAVINGS_TRANSACTIONS",SAVINGS_ACCOUNT_DETAILS:"SAVINGS_ACCOUNT_DETAILS",HOLDS:"HOLDS",BENEFICIARIES:"BENEFICIARIES"},TFSAKS:{SAVINGS_TRANSACTIONS:"SAVINGS_TRANSACTIONS",SAVINGS_ACCOUNT_DETAILS:"SAVINGS_ACCOUNT_DETAILS",HOLDS:"HOLDS"},RSP:{SAVINGS_TRANSACTIONS:"SAVINGS_TRANSACTIONS",SAVINGS_ACCOUNT_DETAILS:"SAVINGS_ACCOUNT_DETAILS",HOLDS:"HOLDS",BENEFICIARIES:"BENEFICIARIES"},OTHER:{SAVINGS_TRANSACTIONS:"SAVINGS_TRANSACTIONS",SAVINGS_ACCOUNT_DETAILS:"SAVINGS_ACCOUNT_DETAILS",HOLDS:"HOLDS"},GOALS:{GOALS_TRANSACTIONS:"GOALS_TRANSACTIONS",SAVINGS_ACCOUNT_DETAILS:"SAVINGS_ACCOUNT_DETAILS",HOLDS:"HOLDS"},HOLDS:"HOLDS",REWARDS:"REWARDS"},CREDIT_CARD:{TRANSACTIONS:"TRANSACTIONS",CREDIT_CARD_ACCOUNT_DETAILS:"CREDIT_CARD_ACCOUNT_DETAILS",REWARDS:"REWARDS"},MORTGAGE:{PAYMENTS:"PAYMENTS",MORTGAGE_ACCOUNT_DETAILS:"MORTGAGE_ACCOUNT_DETAILS"},LOAN:{LOAN_TRANSACTIONS:"LOAN_TRANSACTIONS",LOAN_ACCOUNT_DETAILS:"LOAN_ACCOUNT_DETAILS",LOAN_HOLDS_AND_OVERDRAFTS:"LOAN_HOLDS_AND_OVERDRAFTS"},INVESTMENT:{TRANSACTIONS:"TRANSACTIONS",INVESTMENT_PORTFOLIO_DETAILS:"INVESTMENT_PORTFOLIO_DETAILS"}},j={INVALIDATE_ACCOUNT:"INVALIDATE_ACCOUNT"},K={MOVE_MONEY:"MOVE_MONEY",REWARDS_MANAGEMENT:"REWARDS_MANAGEMENT",REWARDS_READ_ONLY:"REWARDS_READ_ONLY",AUTHORIZED_USER_MANAGEMENT:"AUTHORIZED_USER_MANAGEMENT",STATEMENTS:"STATEMENTS",ACTIVATE_CARD:"ACTIVATE_CARD",ACTIVATE_REPLACEMENT_CARD:"ACTIVATE_REPLACEMENT_CARD",ACTIVATE_CARD_CALL_CENTER:"ACTIVATE_CARD_CALL_CENTER",CHANGE_PIN:"CHANGE_PIN",CHANGE_CREDIT_LIMIT:"CHANGE_CREDIT_LIMIT",BALANCE_TRANSFER:"BALANCE_TRANSFER",BALANCE_PROTECTION_INSURANCE:"BALANCE_PROTECTION_INSURANCE",ALERTS_MANAGEMENT:"ALERTS_MANAGEMENT",TRAVEL_NOTICE:"TRAVEL_NOTICE",PAUSE_CARD:"PAUSE_CARD",REACTIVATE_CARD:"REACTIVATE_CARD",CHANGE_PAYMENT:"CHANGE_PAYMENT",CHANGE_PAYMENT_OPTIONS:"CHANGE_PAYMENT_OPTIONS",CHANGE_FREQUENCY:"CHANGE_FREQUENCY",CHANGE_ACCOUNT:"CHANGE_ACCOUNT",CHANGE_ADDITIONAL_PAYMENT:"CHANGE_ADDITIONAL_PAYMENT",CONVERT_TO_FIXED_RATE:"CONVERT_TO_FIXED_RATE",ORDER_A_DRAFT:"ORDER_A_DRAFT",ORDER_CHEQUE:"ORDER_CHEQUE",APPLY_FOR_OVERDRAFT:"APPLY_FOR_OVERDRAFT",INCREASE_OVERDRAFT_LIMIT:"INCREASE_OVERDRAFT_LIMIT",DECREASE_OVERDRAFT_LIMIT:"DECREASE_OVERDRAFT_LIMIT",CLOSE_OVERDRAFT:"CLOSE_OVERDRAFT",PAY_FULL_OVERDRAFT:"PAY_FULL_OVERDRAFT",ACCEPT_OD_INCREASE_INVITATION:"ACCEPT_OD_INCREASE_INVITATION",ACCEPT_OD_INVITATION:"ACCEPT_OD_INVITATION",CANCEL_JOINT_ACCOUNT:"CANCEL_JOINT_ACCOUNT",MAKE_JOINT_ACCOUNT:"MAKE_JOINT_ACCOUNT",SUBMIT_MORTGAGE_RENEWAL:"SUBMIT_MORTGAGE_RENEWAL",VIEW_MORTGAGE_RENEWAL_SUMMARY:"VIEW_MORTGAGE_RENEWAL_SUMMARY",EARLY_REDEMPTION:"EARLY_REDEMPTION"},Q={CSA:{SINGLE:"A",JOINT:"B"},SINGLE:"Single",FR_SINGLE:"Individuel",JOINT:"Joint",FR_JOINT:"Conjoint",SINGLE_TRUSTEE:"Single trustee",JOINT_TRUSTEE:"Joint trustee",ADMINISTRATOR_ESTATE:"Administrator/Estate",CORPORATION:"Corporation",JOINT_POWER_OF_ATTORNEY:"Joint Power of Attorney",ORGANIZATION:"Organization",MULTIPLE_BENEFICIARIES:"Multiple beneficiaries",MINORS_TRUST:"Minor's Trust",SOLE_PROPRIETORSHIP:"Sole Proprietorship",PARTNERSHIP:"Partnership",OTHER_TRUSTS:"Other Trusts",POWER_OF_ATTORNEY:"Power of Attorney",SUCCESSOR:"Successor",BENEFICIARY:"Beneficiary",ANY:"Any"},z={210:"PRUD",220:"MOD",230:"ADV",235:"DVD",240:"EQU"},X=["Tangerine Staff Credit Account","Tangerine Staff Credit Account - 2% Repayment","Tangerine Staff Credit Account - 2% Repayment","Credit Account","Tangerine Bridge Loan","Credit Account - 2% Repayment","Credit Account - FAS","Credit Account - 2% Repayment","Credit Account - 2% Repayment","Credit Account - 2% Repayment","Canadian Tire Line of Credit","Tangerine Home Equity Line of Credit","Compte Crédit de personnel","Compte Crédit de personnel - Remboursement de 2 %","Compte Crédit de personnel - Remboursement de 2 %","Compte Crédit","Prêt provisoire Tangerine","Compte Crédit - Remboursement de 2 %","Compte Crédit - SRF","Compte Crédit - Remboursement de 2 %","Compte Crédit - Remboursement de 2 %","Compte Crédit - Remboursement de 2 %","Marge de crédit Canadian Tire","Marge de crédit hypothécaire Tangerine"],Z={PD01:"has_PD01_restriction_only",PD02:"has_PD02_restriction_only",PD03:"has_PD03_restriction_only"},J={AB:18,BC:19,MN:18,NB:18,NL:19,NT:19,NS:19,NU:19,ON:18,PE:18,QC:18,SK:18,YT:19},ee=[g.TLOC_INTEREST,g.TLOC_INTEREST_BAL],te=[g.CHEQUING,g.CC,g.RSP,g.TFSA,g.TFSAKS,g.SAVINGS,g.USDSAVINGS,g.INV_FUND,g.MUTUAL_FUND,g.MUTUAL_FUND_RIF,g.MUTUAL_FUND_RSP,g.MUTUAL_FUND_TFSA],ne=[{value:"TILE",label:"account.overview.tileView"},{value:"LIST",label:"account.overview.listView"}],ie={spending:["4000","1100"],savings:["3000","3010","3200","3100","3201"],investing:["2000","2200","2100","2300"]},se={CURRENCY_TYPES:h,ACCOUNT_TYPES:R,ACCOUNT_GROUPS:D,PLAN_TYPES:v,PLAN_TYPES_FR:E,ACCOUNT_PPTS:g,PRODUCT_CODE_MAP:S,GIC_ACCOUNT_PPTS:b,CHQ_SAV_ACCOUNT_PPTS:L,MF_ACCOUNT_PPTS:M,ACCOUNT_RATES_TO_MERGE:p,DOCUMENT_TYPES_BY_PPT:T,MUTUAL_FUND_PLAN_TYPES:m,MUTUAL_FUND_PLAN_TYPES_FOR_OPEN_ACCOUNTS:C,ACCOUNT_CODES_BY_MUTUAL_FUND_PPT:A,MUTUAL_FUND_PLAN_TYPES_TO_PPT:I,ACCOUNT_CODES_BY_PPT:O,ACCOUNT_NAME_TO_ACCOUNT_CODE:y,ACCOUNT_CATEGORIES:B,ACCOUNT_MAPS:G,ACCOUNT_USAGE_TYPES_MAP:V,ACCOUNT_TABS:W,ACCOUNT_SAVING_TYPES:P,ACCOUNT_SAVING_TYPES_FR:$,ACCOUNT_LOAN_TYPES:k,FUND_TYPE_CODES:w,OVERDRAFT_STATUSES:F,AVAILABLE_ACTIONS:K,ACCOUNT_REGISTRATIONS:Q,INTENDED_USE_OTHER:"OTHER",ACCOUNT_EVENTS:j,ACCOUNT_REGISTRATION_TYPE:x,BUSINESS_ACCOUNT_PPTS:N,ACCOUNT_CONTROL_OPTIONS:q,ACCOUNT_GIC_OPTIONS:H,REDEMPTION_MIN_DATE:"2014-07-19",ACCOUNT_CONTROL_BUTTONS:Y,FUND_NUMBER_TO_PORTFOLIO_TYPE:z,NICKNAME_MAX_LEN:25,NICKNAME_MIN_LEN:2,TGSA_LIMIT:5,AMOUNT_MAX_LEN:9,SEARCH_ACCT_CONFIG:_,MORTGAGE_HELOC_LOC_DESCRIPTIONS:X,CARD_RESTRICTIONS:Z,CANADIAN_PROVINCE_TO_AGE_OF_MATURITY:J,INTERCHANGEABLE_COMPANION_PRODUCTS:f,ACCOUNT_TYPE_TO_LEARN_MORE_EXCLUSION_LIST:ee,MOBILE_PILOT_OPEN_ACCOUNT_WHITELIST:te,VIEW_TYPES:ne,ACCOUNT_GROUPS_WITH_LIMITED_NUMBER_OF_CODES:ie,LOCKED_IN:U};t.default=se,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=n(55),c=i(l),u=function(){function e(t,n,i,s,o){(0,a.default)(this,e),this.$filter=t,this.LocaleService=n,this.LOCALES=n.localeConstants.LOCALES,this.now=c.default.utc(),this.timeStateConstants=i,this.FREQUENCY=i.FREQUENCY,this.tngDateSelectorConstants=s,this.BusinessDaysService=o}return(0,r.default)(e,[{key:"isToday",value:function(e){var t=c.default.utc(e);return t.date()===this.now.date()&&t.month()===this.now.month()&&t.year()===this.now.year()}},{key:"isCurrentYear",value:function(e){return c.default.utc(e).year()===this.now.year()}},{key:"getNewPaymentDate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=void 0;switch(t){case this.FREQUENCY.BIWEEKLY:s=c.default.utc(e).add(2,"weeks");break;case this.FREQUENCY.WEEKLY:s=c.default.utc(e).add(1,"weeks");break;case this.FREQUENCY.MONTHLY:s=c.default.utc(e).add(1,"months");break;case this.FREQUENCY.DAILY:s=c.default.utc(e).add(1,"days");break;default:return e}return i&&!this.BusinessDaysService.isBusinessDay(s)&&(s=this.BusinessDaysService.nextBusinessDay(s)),n?s:s.toDate()}},{key:"_isFrench",value:function(){return this.LocaleService.locale===this.LOCALES.FR_CA}},{key:"convertToOrdinalDay",value:function(e){return this._isFrench()?e.format("D"):e.format("Do")}},{key:"convertToOrdinalMonthDay",value:function(e){return this._isFrench()?this.$filter("date")(e.toDate(),"d MMMM"):e.format("MMMM Do")}},{key:"convertToFormattedMonthDayYear",value:function(e){return this._isFrench()?this._setMomentLocale(e).format("D MMMM YYYY"):this._setMomentLocale(e).format("MMMM D, YYYY")}},{key:"convertToFormattedNonUTCMonthDayYear",value:function(e){return this._isFrench()?(0,c.default)(c.default.utc(e).toDate()).format("D MMMM YYYY"):(0,c.default)(c.default.utc(e).toDate()).format("MMMM D, YYYY")}},{key:"formatMomentToTimeWithLocalizedTime",value:function(e){return this._isFrench()?(0,c.default)(c.default.utc(e).toDate()).format("H [h] mm"):(0,c.default)(c.default.utc(e).toDate()).format("hh:mm a")}},{key:"convertToFormattedMonthYear",value:function(e){return this._setMomentLocale(e).format("MMMM YYYY")}},{key:"convertToNumberForm",value:function(e){return this._isFrench()?this._setMomentLocale(e).format("DD/MM/YYYY"):this._setMomentLocale(e).format("MM/DD/YYYY")}},{key:"printFullOrdinalDate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"longDateOrdinal",n=(0,c.default)(e);return this.$filter("momentDate")(n,t)}},{key:"dateFormatter",value:function(){return this._isFrench()?"d MMMM yyyy":"MMMM d, yyyy"}},{key:"formatMomentToDateIgnoreTimezone",value:function(e){return new Date(e.valueOf())}},{key:"formatMomentToDateWithTimezone",value:function(e){return this._setMomentLocale(e).format("dddd, MMMM Do")}},{key:"formatMomentToLongDateWithTimezone",value:function(e){return this._setMomentLocale(e).format("MMMM Do, YYYY")}},{key:"formatMomentToDateWithTimezoneAndYear",value:function(e){return this._setMomentLocale(e).format("MMMM Do YYYY")}},{key:"formatMomentToDateWithTimeAndTimezone",value:function(e){return this._isFrench()?this._setMomentLocale(e).format("DD MMMM YYYY, H [h] mm z"):this._setMomentLocale(e).format("DD MMMM YYYY [at] hh:mm a z")}},{key:"_setMomentLocale",value:function(e){return this._isFrench()?c.default.utc(e).locale("fr-ca"):c.default.utc(e).locale("en-ca")}},{key:"serverDateToTngDate",value:function(e,t){var n=null;return e&&(n=this.$filter("date")(e,"longDate"),t&&(n=this.$filter("firstDayOfMonth")(n))),n}},{key:"momentToTngDate",value:function(e){return this.serverDateToTngDate(this.momentToServerFormat(e))}},{key:"getTodayInServerFormat",value:function(){return(0,c.default)().format(this.tngDateSelectorConstants.DATE_FORMATS.numericYearMonthDayWithDashes)}},{key:"momentToServerFormat",value:function(e){return e.format(this.tngDateSelectorConstants.DATE_FORMATS.numericYearMonthDayWithDashes)}},{key:"getTodayTngDate",value:function(){return this.serverDateToTngDate(this.getTodayInServerFormat())}},{key:"serverFormatToMoment",value:function(e){return(0,c.default)(e,this.tngDateSelectorConstants.DATE_FORMATS.numericYearMonthDayWithDashes)}}]),e}();u.$inject=["$filter","LocaleService","timeStateConstants","tngDateSelectorConstants","BusinessDaysService"],t.default=u,e.exports=t.default},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function i(e,t){return e(function(e){n.e(5).then(function(){var i=n(1385),s=n(321),a=n(322);t.load([{name:i.name},{name:s.name},{name:a.name}]),e([i,s,a])}.bind(null,n)).catch(n.oe)})}Object.defineProperty(t,"__esModule",{value:!0}),i.$inject=["$q","$ocLazyLoad"],t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(t,i){return t(function(t){n.e(6).then(function(){(function(e){var e=n(1386),s=n(318);i.load([{name:e.name},{name:s}]),t(e)}).call(this,n(42)(e))}.bind(null,n)).catch(n.oe)})}Object.defineProperty(t,"__esModule",{value:!0}),i.$inject=["$q","$ocLazyLoad"],t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(t,i){return t(function(t){n.e(9).then(function(){(function(e){var e=n(1387);i.load({name:e.name}),t(e)}).call(this,n(42)(e))}.bind(null,n)).catch(n.oe)})}Object.defineProperty(t,"__esModule",{value:!0}),i.$inject=["$q","$ocLazyLoad"],t.default=i,e.exports=t.default},,,,,function(e,t,n){"use strict";function i(e,t){return e?"/passmarks?"+e:void 0!==t?"/passmarks?imgIdx="+t:"/passmarks?imgIdx="}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i,s){(0,a.default)(this,e),this.$log=t,this.$q=n,this.RequesterService=i,this.serviceConstants=s}return(0,r.default)(e,[{key:"putMonthlyFees",value:function(e){var t={data:{monthly_fee:e}};return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.PUT_MONTHLY_FEES,t)}}]),e}();l.$inject=["$log","$q","RequesterService","serviceConstants"],t.default=l,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={CLOSE_MODALS:"closeModals",SHOW_MODAL:"showModal",SHOW_MODAL_FROM_STATE:"showModalFromState"},s={GLOBAL_MODAL_CLOSE:"GLOBAL_MODAL_CLOSE"},a={MOVE_MONEY:"moveMoney",MOVE_MONEY_SELECTED_ACCOUNT:"moveMoneySelectedAccount",MOVE_MONEY_CC:"moveMoneyCreditCard",MOVE_MONEY_EDIT:"moveMoneyEdit",EMT:"emt",EMT_RECLAIM:"emtReclaim",OTHER_COMMUNICATIONS:"otherCommunications",RDC:"rdc",PAY_BILL:"pay_bill",ADD_BILL:"add_bill",UNCATEGORIZED_TRANSACTIONS:"uncategorizedTransactions",UNCONFIRMED_TRANSACTIONS:"unconfirmedTransactions",CREDIT_CARD_BALANCE_TRANSFER:"creditCardBalanceTransfer",ACTIVATE_CREDIT_CARD:"activateCreditCard",ACTIVATE_DEBIT_CARD:"activateDebitCard",MOBILE_STEP_UP:"mobileStepUp",ASP:"asp",DIRECT_DEPOSIT_FORM:"directDepositForm",E_NOTIFICATION:"eNotification",PENDING_APPLICATIONS:"pendingApplications",CSA_CONVERSION:"csaConversion",VISITOR_SEARCH:"visitorSearch",REFER_FRIEND:"referFriend",DONATIONS:"donations",ORDER_CHEQUES:"orderCheques",REWARDS:"rewards",OVERDRAFT_PRE_APPROVED:"overDraftPreApproved",OVERDRAFT_PROTECTION_APPLY:"overDraftProtectionApply",OVERDRAFT_CONSENT_MODAL:"overDraftConsentModal",RIF_SUMMARY_MODAL:"rifSummaryModal",CREATE_GOAL:"createGoal",SHOW_DOUBLE_SAFE_MODAL:"showDoubleSafeModal",ACTIVATE_OFFER_MODAL:"activateOfferModal"},o=[a.MOVE_MONEY,a.MOVE_MONEY_SELECTED_ACCOUNT,a.MOVE_MONEY_CC,a.MOVE_MONEY_EDIT,a.RDC,a.ACTIVATE_CREDIT_CARD,a.ACTIVATE_DEBIT_CARD,a.REFER_FRIEND,a.REWARDS];t.default={EVENTS:i,AVAILABLE_MODALS:a,LEVEL2_REQUIRED_MODALS:o,GLOBAL_EVENTS:s},e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i,s,o){(0,a.default)(this,e),this.$scope=t,this.$element=n,this.$timeout=i,this.InsightsConstants=s,this.EnvironmentService=o}return(0,r.default)(e,[{key:"$onInit",value:function(){var e=this;this.$scope.$on("$includeContentError",function(){e.cardLoadError=!0,e.onEvent({action:e.InsightsConstants.EVENT_MAP.INSIGHT_LOADED,properties:{isLightCard:!1}})})}},{key:"onInsightLoaded",value:function(){var e=this.$element.html(),t=e.indexOf("banner--insights-white")>-1;this.onEvent({action:this.InsightsConstants.EVENT_MAP.INSIGHT_LOADED,properties:{isLightCard:t}})}},{key:"onModalLoaded",value:function(){var e=this;this.$timeout(function(){var t=e.$element.html();(t.indexOf("banner--insightsModal")>-1||t.indexOf("takeTour--slide")>-1)&&e.$element.addClass("insightsModal--hide-header-mobile")},150)}},{key:"handleEvent",value:function(e,t){this.onEvent({action:e,properties:t})}}]),e}();l.$inject=["$scope","$element","$timeout","InsightsConstants","EnvironmentService"],t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i){(0,a.default)(this,e),this.RequesterService=t,this.serviceConstants=n,this.$log=i}return(0,r.default)(e,[{key:"getBudgetIncome",value:function(){return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.GET_BUDGET_INCOME)}},{key:"getBudgetExpense",value:function(){return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.GET_BUDGET_EXPENSE)}},{key:"getBudgetSavings",value:function(){return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.GET_BUDGET_SAVINGS)}},{key:"getCurrentBudget",value:function(){return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.GET_CURRENT_BUDGET)}},{key:"getAccounts",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.ACCOUNT_SUMMARY,e,t)}},{key:"recalculateBudgetDetails",value:function(e){var t=this,n={data:{budget_details:e}};return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.RECALCULATE_BUDGET_DETAILS,n).then(function(e){return t.$log.debug("LTS Budget  was recalculated successfully",e),e}).catch(function(e){throw t.$log.error("Recalculate LTS Budget  application error:",e),e})}},{key:"resetBudgetDetails",value:function(){var e=this;return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.RESET_BUDGET).then(function(t){return e.$log.debug("LTS Budget  was reset successfully",t),t}).catch(function(t){throw e.$log.error("Reset LTS Budget application error:",t),t})}},{key:"saveBudgetDetails",value:function(e){var t=this,n={data:{budget_details:e}};return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.CREATE_BUDGET_DETAILS,n).then(function(e){return t.$log.debug("LTS Budget  was created successfully",e),e}).catch(function(e){throw t.$log.error("Create LTS Budget  application error:",e),e})}},{key:"getBudgetTransactions",value:function(e){var t={urlVars:{categoryId:e}};return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.GET_BUDGET_TRANSACTIONS,t)}},{key:"getBudgetCategory",value:function(e){var t={data:{budget_details:e}};return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.GET_BUDGET_CATEGORY,t)}},{key:"getLtsBudget",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.GET_LTS_BUDGET,e,t)}}]),e}();l.$inject=["RequesterService","serviceConstants","$log"],t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(13),a=i(s),o=n(29),r=i(o),l=n(0),c=i(l),u=n(1),d=i(u),h=function(){function e(t,n,i,s,a,o,r,l,u){(0,c.default)(this,e),this.$q=t,this.$log=n,this.StorageService=l,this.$injector=i,this.NativeService=s,this.EnvironmentService=a,this.CacheFactory=o,this.serviceConstants=r,this.storageConstants=u,this._hasInit=!1,this._initDeferred=null,this._isNewClientEnrollmentSession=!1,this.resetSession(),this.savedUserIds=[],this.savedBusinessIds=[],this.device=null,this.locale=null,this.isDeviceBound=!1}return(0,d.default)(e,[{key:"cleanChallenge",value:function(){this.authenticated=!1,this.transaction_token=null,this.hasAIF=null,this.passmark={},this.userInfo=null,this.userhash=null,this.authStatus=null,this.isBusiness=null,this.rememberMe=!1,this.shouldOptIn=!1,this.secretPhrase=null,this.showDisableAuth=!1,this.securityQuestion=null,this.clientIdentifier=null,this.nameToRemember=null,this.authCompleteBody=null,this.deferredPinShowing=!1,this.nextStep=null,this.commandStep=null,this.showCaptcha=null,this.authStatus=null,this.isPinLocked=!1,this.amlEventConfirmed=!1,this.loginToken=null,this.showForgotPinLink=!1,this.isDeviceBound=!1}},{key:"resetSession",value:function(){this.cleanChallenge(),this.errorMessage=null,this.isTimeout=!1,this.isLocked=!1,this.enrolledWithOrangeKey=!1}},{key:"destroyCache",value:function(){this.CacheFactory.destroyAll(),this.clearMenuCache()}},{key:"getSession",value:function(){return{authenticated:this.authenticated,hasAIF:this.hasAIF,passmark:this.passmark,userInfo:this.userInfo,userhash:this.userhash,authStatus:this.authStatus,isBusiness:this.isBusiness,loginToken:this.loginToken,rememberMe:this.rememberMe,shouldOptIn:this.shouldOptIn,secretPhrase:this.secretPhrase,showDisableAuth:this.showDisableAuth,securityQuestion:this.securityQuestion,clientIdentifierDisplay:this.clientIdentifierDisplay,clientIdentifier:this.clientIdentifier,lastLoggedUserHash:this.lastLoggedUserHash,nameToRemember:this.nameToRemember,authCompleteBody:this.authCompleteBody,deferredPinShowing:this.deferredPinShowing,device:this.device,locale:this.locale,showCaptcha:this.showCaptcha,nextStep:this.nextStep,nextCommand:this.nextCommand,savedUserIds:this.savedUserIds,savedBusinessIds:this.savedBusinessIds,savedAuthorizedIds:this.savedAuthorizedIds,errorMessage:this.errorMessage,isTimeout:this.isTimeout,isPinLocked:this.isPinLocked,isPinLockedInPinPage:this.isPinLockedInPinPage,firstTime:this.firstTime,enrolledWithOrangeKey:this.enrolledWithOrangeKey,skipOnboardingBasicInfo:this.skipOnboardingBasicInfo,showForgotPinLink:this.showForgotPinLink,amlEventConfirmed:this.amlEventConfirmed,isDeviceBound:this.isDeviceBound}}},{key:"isAuthenticated",value:function(){return!!this.EnvironmentService.isMock()||this.authenticated}},{key:"setLastLoggedUserHash",value:function(){this.clientIdentifier&&(this.lastLoggedUserHash=this.clientIdentifier)}},{key:"hasInit",value:function(){return this._hasInit}},{key:"getUserByRememberMeHash",value:function(e){return this.savedUserIds.find(function(t){return t.rememberMeHash===e})}},{key:"getUserByUserHash",value:function(e){return this.savedUserIds.find(function(t){return t.userHash===e})}},{key:"initSession",value:function(){var e=this;return this.EnvironmentService.isNative()?this._loadSessionFromCache():this._initDeferred?this._initDeferred.promise:(this._initDeferred=this.$q.defer(),this._loadSessionFromCache().finally(function(){e._initDeferred.resolve()}),this._initDeferred.promise)}},{key:"_loadSessionFromCache",value:function(){var e=this,t=this.$q.defer();return this._getSessionFromStorage().then(function(t){return t?(e._hasInit=!0,e.locale=t.locale,e.EnvironmentService.isNative()||(e.authenticated=t.authenticated,e.transaction_token=t.transaction_token,e.clientIdentifier=t.clientIdentifier,e.device=t.device),t.savedUserIds&&(e.savedUserIds=t.savedUserIds),t.savedBusinessIds&&(e.savedBusinessIds=t.savedBusinessIds),t.savedAuthorizedIds&&(e.savedAuthorizedIds=t.savedAuthorizedIds),e.amlEventConfirmed=!1,e.enrolledWithOrangeKey=t.enrolledWithOrangeKey,e.$q.when()):(e.cleanChallenge(),e.NativeService.setSession(e.getSession()))}).catch(function(t){e._hasInit=!1,e.$log.debug("Error getting session",t)}).finally(function(){t.resolve()}),t.promise}},{key:"_getSessionFromStorage",value:function(){return this.StorageService.getItem(this.storageConstants.KEYS.SESSION)}},{key:"deviceHasExistingTouchId",value:function(){var e=this;return this.NativeService.getTouchId().then(function(t){return t||e.$q.reject()})}},{key:"deviceHasExistingQuickView",value:function(){var e=this;return this.$q.all({eye:this.NativeService.getEyeVerifyDisplay(),defer:this.NativeService.getDeferredPin(),vocal:this.NativeService.getVocalPassword()}).then(function(t){return t?!!(t.eye&&t.eye.userhash||t.defer&&t.defer.userhash||t.vocal&&t.vocal.userhash)||e.$q.reject():e.$q.reject()})}},{key:"userHasExistingTouchId",value:function(){var e=this;return this.userhash?this.NativeService.getTouchId().then(function(t){return t&&t.userhash===e.userhash?t:e.$q.reject()}):this.$q.reject()}},{key:"userHasExistingQuickView",value:function(){var e=this;return this.$q.all({eye:this.NativeService.getEyeVerifyDisplay(),defer:this.NativeService.getDeferredPin(),vocal:this.NativeService.getVocalPassword()}).then(function(t){return t?{eye:t.eye&&t.eye.userhash===e.userhash&&t.eye.device_alias,defer:t.defer&&t.defer.userhash===e.userhash&&t.defer.device_alias,vocal:t.vocal&&t.vocal.userhash===e.userhash&&t.vocal.device_alias}:e.$q.reject()})}},{key:"getAuthMethodAvailability",value:function(){return this.NativeService.getAuthMethodAvailability()}},{key:"getSavedUsers",value:function(){return this.$q.all({remember:this.NativeService.getRememberedList(),biz:this.NativeService.getRememberedBusinessList(),defer:this.NativeService.getDeferredPin(),touch:this.NativeService.getTouchId(),aif:this.NativeService.getRememberedAIFList(),eye:this.NativeService.getEyeVerifyDisplay(),vocal:this.NativeService.getVocalPassword()})}},{key:"removeSavedId",value:function(e){var t=this.savedUserIds.filter(function(t){return t.rememberMeHash!==e});if(this.savedUserIds.length!==t.length)return this.savedUserIds=t,void(this.EnvironmentService.isNative()&&(this.savedAuthorizedIds=t))}},{key:"hasAgreedTOS",value:function(){return this.$log.debug("has tos?",this.userhash,this.clientIdentifier),this.NativeService.hasTOSed(this.userhash)}},{key:"addToTOS",value:function(){return this.$log.debug("set tos?",this.userhash,this.clientIdentifier),this.NativeService.addTOSList(this.userhash)}},{key:"shouldSkipOptIn",value:function(){var e=this;return!this.shouldOptIn||this.isBusiness?this.$q.when():this.NativeService.hasOptedIn(this.userhash).then(function(e){return e},function(){return e.$q.all({full:e.deviceHasExistingTouchId(),quick:e.deviceHasExistingQuickView(),avail:e.getAuthMethodAvailability()}).then(function(t){return t.full&&t.quick?e.$q.when():e.$q.reject()},function(){return!e.shouldOptIn||e.isBusiness?e.$q.when():e.$q.reject()})})}},{key:"querySimpleSignOnMode",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=!1,i=!1,s=this.$q.defer();return t?this._queryQuckView(s):this.getAuthMethodAvailability().then(function(t){e.$log.debug("getAuthMethodAvailability response:",t),e.isTouchIDCapable=t.isTouchIDCapable},function(t){e.$log.error("getAuthMethodAvailability error:",t)}).finally(function(){e.isTouchIDCapable?e.userHasExistingTouchId().then(function(t){e.$log.debug("userHasExistingTouchId response:",t),n=!0},function(t){n=!1,e.$log.error("userHasExistingTouchId error:",t)}).finally(function(){e.deviceHasExistingTouchId().then(function(t){e.$log.debug("deviceHasExistingTouchId response:",t),i=!0},function(t){e.$log.error("deviceHasExistingTouchId error:",t),i=!1}).finally(function(){n||i?e._queryQuckView(s):s.resolve("touch")})}):e._queryQuckView(s)}),s.promise}},{key:"_queryQuckView",value:function(e){var t=this;this.userHasExistingQuickView().then(function(e){var n=e.eye,i=e.defer,s=e.vocal;t.userHasDefer=i,t.userHasEye=n,t.userHasVocal=s}).finally(function(){t.deviceHasExistingQuickView().then(function(e){t.$log.debug("deviceHasExistingQuickView response:",e),t.deviceHasDefer=!0},function(e){t.$log.error("deviceHasExistingQuickView error:",e),t.deviceHasDefer=!1}).finally(function(){t.userHasDefer||t.deviceHasDefer?e.resolve("none"):(e.resolve("quick"),t.tiles=t.allTiles.quickView)})})}},{key:"addToOptIn",value:function(){return this.NativeService.addOptInList(this.userhash)}},{key:"addPendingDisabledLoginOption",value:function(e,t){var n=this;return this.$log.debug("DB - add Pending Disable "+e+": "+(0,r.default)(t)),this.NativeService.getPendingDisabledLoginOptions(e).then(function(i){return Array.isArray(i)?-1===i.indexOf(t)?(i.push(t),n.NativeService.setPendingDisabledLoginOptions(e,i)):n.$q.when(!0):n.NativeService.setPendingDisabledLoginOptions(e,[t])})}},{key:"getPendingDisabledLoginOptions",value:function(e){return this.$log.debug("DB - get Pending Disable "+e),this.NativeService.getPendingDisabledLoginOptions(e)}},{key:"removePendingDisabledLoginOption",value:function(e,t){var n=this;return this.$log.debug("DB - remove Pending Disable "+e+": "+(0,r.default)(t)),this.NativeService.getPendingDisabledLoginOptions(e).then(function(i){return Array.isArray(i)&&-1!==i.indexOf(t)?(i.splice(i.indexOf(t),1),n.NativeService.setPendingDisabledLoginOptions(e,i)):n.$q.when(!0)})}},{key:"setMenuCache",value:function(e){var t=this,n=this.storageConstants.KEYS.CAPABILITIES;(0,a.default)(n).forEach(function(i){var s=e.indexOf(i)>-1;t.StorageService.setItem(n[i],s)})}},{key:"clearMenuCache",value:function(){var e=this,t=this.storageConstants.KEYS.CAPABILITIES;(0,a.default)(t).forEach(function(n){e.StorageService.deleteItem(t[n])})}},{key:"getAndSetNewClientEnrollmentSession",value:function(e){var t=this._isNewClientEnrollmentSession;return this._isNewClientEnrollmentSession=e,t}}]),e}();h.$inject=["$q","$log","$injector","NativeService","EnvironmentService","CacheFactory","serviceConstants","StorageService","storageConstants"],t.default=h,e.exports=t.default},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={EMPLOYED:"EMPLOYED",SELF_EMPLOYED:"SELF_EMPLOYED",RETIRED:"RETIRED",STUDENT:"STUDENT",HOMEMAKER:"HOME_MAKER",UNEMPLOYED:"UNEMPLOYED"},s={EMPLOYED:"EM",SELF_EMPLOYED:"SE",RETIRED:"RT",STUDENT:"SD",HOME_MAKER:"HM",UNEMPLOYED:"UP"};t.default={CODES:i,WS_CODES:s},e.exports=t.default},,function(e,t,n){"use strict";function i(e){var t={};try{e.response_status&&Array.isArray(e.response_status.details)&&e.response_status.details.forEach(function(e){var n=e.description||e.technical_description;a.default.set(t,e.field_name,n)})}catch(e){t.unableToParse=!0,t.error=e}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var s=n(18),a=function(e){return e&&e.__esModule?e:{default:e}}(s);e.exports=t.default},,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(493),a=i(s),o=n(497),r=i(o),l=n(498),c=i(l),u=angular.module("SelectAutocompleteModule",["ui.select","ngSanitize"]).component("tngSelectAutocomplete",a.default).constant("tngSelectAutocompleteConstants",r.default).directive("selectAutocompleteValidator",c.default);t.default=u,e.exports=t.default},,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.mapPhoneAndAddresses=void 0;var s=n(13),a=i(s),o=n(6),r=i(o),l=n(325),c=i(l);t.mapPhoneAndAddresses=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=c.default.PHONE_TYPES,i=(0,r.default)({},e,{addresses:e.address_list.reduce(function(e,t){var n=e;return n[t.address_type]=t,n},{}),phoneNumbers:(0,a.default)(n).reduce(function(t,i){var s=t,a=n[i],o=e.phone_list.find(function(e){return e.type===a});return s[a]={type:a,number:o?o.number:"",preferred:!!o&&o.preferred},s},{})});return t&&(i=(0,r.default)({},i,{extraData:e.extraData})),i.phone_list.forEach(function(e){e.preferred&&!i.primaryPhoneType&&(i.primaryPhoneType=e.type)}),i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={HOME:"HOME",PREVIOUS:"PREVIOUS"},s={HOME:"HOME",MOBILE:"CELL",BUSINESS:"BUSINESS"},a=["street_name","suite","province"],o={CB3Y:"CB3Y"},r={DUPSIN:"DUPSIN"};t.default={ADDRESS_TYPES:i,PHONE_TYPES:s,CLIENT_ADDRESS_OPTIONAL_FIELDS:a,KYC_METHODS:o,DEFAULT_COUNTRY_CANADA:"CA",RETURN_CODES:r},e.exports=t.default},function(e,t,n){"use strict";function i(e,t){e.state(t.USER_SETTINGS_SECURITY_LOGIN_DEFER_PIN,{url:"/instant-access",data:{requiresAuth:!0,parentNavigation:t.USER_SETTINGS_SECURITY_LOGIN_QUICK_VIEW},params:{returnTo:void 0},title:"Security: Instant Access",views:{"page-content@":"tngInstantAccess"}}).state(t.USER_SETTINGS_SECURITY_LOGIN_DEFER_PIN_FROM_SIMPLE_SIGN_ON,{url:"/instant-access-sso",data:{requiresAuth:!0,parentNavigation:t.SIMPLE_SIGN_ON_QUICK_VIEW},params:{returnTo:void 0},title:"Security: Instant Access",views:{"page-content@":"tngInstantAccess"}}).state(t.USER_SETTINGS_SECURITY_LOGIN_DEFER_PIN_FROM_SIMPLE_SIGN_ON_NO_TOUCH,{url:"/instant-access-no-back",data:{requiresAuth:!0,parentNavigation:t.SIMPLE_SIGN_ON_QUICK_VIEW_NO_BACK},params:{returnTo:void 0},title:"Security: Instant Access",views:{"page-content@":"tngInstantAccess"}}).state(t.QUICK_VIEW_ID_OPTIONS,{url:"/quick-view-id-options",data:{requiresAuth:!0,parentNavigation:t.USER_SETTINGS_SECURITY_LOGIN_QUICK_VIEW},title:"Security: Id Me First",views:{"page-content@":"tngQuickViewIdOptions"}})}Object.defineProperty(t,"__esModule",{value:!0}),i.$inject=["$stateProvider","stateConstants"],t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e,t,i){var s=function(e){return e.loadCommonBundle()};s.$inject=["BundleService"];var a=function(e,t,n){return n.preloadAccounts(t.ignoreCache),n.preloadCapabilities(),e.when()};a.$inject=["$q","$stateParams","AccountSummaryPrefetchService"],e.state(t.ACCOUNT_SUMMARY,{url:"/accounts",parent:t.ABSTRACT_AUTH,params:{ignoreCache:null},title:"global.metaTitles.account.overview",views:{"page-content@":t.ACCOUNT_SUMMARY},isTopLevel:!0,showFooterNotifications:!0,resolve:{accountSummaryPrefetch:a}}).state(t.ACCOUNT_DETAILS_CHEQUING,{url:"/chequing/:accountHash",params:{selectedTabId:null},parent:t.ACCOUNT_SUMMARY,title:"global.metaTitles.account.details.chequing",views:{"page-content@":t.ACCOUNT_DETAILS_CHEQUING},resolve:{bundle:n(47),chartingBunde:n(48)},data:{parentNavigation:t.ACCOUNT_SUMMARY}}).state(t.OVERDRAFT_PRE_APPROVED,{url:"/overdraft/pre-approved",parent:t.ACCOUNT_DETAILS_CHEQUING,title:"global.metaTitles.account.overdraft",views:{"page-content@":t.OVERDRAFT_PRE_APPROVED}}).state(t.ACCOUNT_DETAILS_CREDIT_CARD,{url:"/credit_card/:accountHash",parent:t.ACCOUNT_SUMMARY,title:"global.metaTitles.account.details.credit_card",views:{"page-content@":t.ACCOUNT_DETAILS_CREDIT_CARD},resolve:{accountDetailsBundle:n(47),chartingBunde:n(48)},data:{parentNavigation:t.ACCOUNT_SUMMARY}}).state(t.ACCOUNT_DETAILS_SAVINGS,{url:"/savings/:accountHash",parent:t.ACCOUNT_SUMMARY,data:{requiresAuth:!0,parentNavigation:t.ACCOUNT_SUMMARY},title:"global.metaTitles.account.details.savings",views:{"page-content@":t.ACCOUNT_DETAILS_SAVINGS},resolve:{accountDetailsBundle:n(47),chartingBunde:n(48)}}).state(t.ACCOUNT_DETAILS_GOALS,{url:"/goals/:accountHash/:lifeGoalId",parent:t.ACCOUNT_SUMMARY,data:{requiresAuth:!0,parentNavigation:t.ACCOUNT_SUMMARY},title:"global.metaTitles.account.details.goals",views:{"page-content@":t.ACCOUNT_DETAILS_SAVINGS},resolve:{accountDetailsBundle:n(47),chartingBunde:n(48)}}).state(t.ACCOUNT_DETAILS_MORTGAGE,{url:"/mortgage/:accountHash",parent:t.ACCOUNT_SUMMARY,views:{"page-content@":t.ACCOUNT_DETAILS_MORTGAGE},title:"global.metaTitles.account.details.mortgage",resolve:{accountDetailsBundle:n(47),mortgageBundle:n(500),chartingBunde:n(48)},data:{parentNavigation:t.ACCOUNT_SUMMARY}}).state(t.ACCOUNT_DETAILS_LOAN,{url:"/loan/:accountHash",parent:t.ACCOUNT_SUMMARY,views:{"page-content@":t.ACCOUNT_DETAILS_LOAN},title:"global.metaTitles.account.details.loan",resolve:{accountDetailsBundle:n(47),chartingBunde:n(48)},data:{parentNavigation:t.ACCOUNT_SUMMARY}}).state(t.ACCOUNT_DETAILS_INVESTMENT,{url:"/investment/:accountHash",parent:t.ACCOUNT_SUMMARY,views:{"page-content@":t.ACCOUNT_DETAILS_INVESTMENT},title:"global.metaTitles.account.details.investment_fund",resolve:{accountDetailsBundle:n(47),investmentBundle:n(501),chartingBundle:n(48)},data:{parentNavigation:t.ACCOUNT_SUMMARY}}).state(t.BILL_PAY,{url:"/pay-bill",parent:t.ABSTRACT_AUTH,views:{"page-content@":t.BILL_PAY},isTopLevel:!0,title:"global.metaTitles.bills",resolve:{billsBundle:n(268),transactionsBundle:n(269),accountDetailsBundle:n(47),chartingBundle:n(48)}}).state(t.BILL_PAY_HISTORY,{url:"/:payeeId",params:{payee:{}},parent:t.BILL_PAY,views:{"page-content@":t.BILL_PAY_HISTORY},title:"global.metaTitles.billHistory"}).state(t.TRANSACTIONS,{url:"/transactions",parent:t.ABSTRACT_AUTH,views:{"page-content@":t.TRANSACTIONS},isTopLevel:!0,title:"global.metaTitles.transactions",resolve:{transactionsBundle:n(269),accountDetailsBundle:n(47),chartingBundle:n(48)}}).state(t.EMT_RECEIVE_MONEY_CLIENT,{url:"/emt/receive-money/client/:emtId",parent:t.ABSTRACT_AUTH,views:{"page-content@":t.EMT_RECEIVE_MONEY_CLIENT},params:{type:"client"},data:{hideMobileFooter:!0},title:"global.metaTitles.emt_receive_money"}).state(t.EMT_RECEIVE_MONEY_INTERAC,{url:"/emt/receive-money/interac/:emtId",parent:t.ABSTRACT_AUTH,views:{"page-content@":t.EMT_RECEIVE_MONEY_INTERAC},params:{type:"interac"},data:{hideMobileFooter:!0},title:"global.metaTitles.emt_receive_money"}).state(t.EMT_RECEIVE_MONEY_STANDARD,{url:"/emt/receive-money/standard/:emtId?lastName",parent:t.ABSTRACT_GUEST,views:{"page-content@":t.EMT_RECEIVE_MONEY_STANDARD},params:{type:"standard"},resolve:{bundleCommon:s},data:{hideMobileFooter:!0},title:"global.metaTitles.emt_receive_money"}).state(t.EXISTING_CLIENT_ONBOARDING,{url:"/open-account?products",parent:t.ABSTRACT_AUTH,params:{addAccount:null,orangeKey:null,returnToStateData:null,stateData:null,mutualFund:null,rspLoan:null,csaPostConversion:null,tloc:null},title:"global.metaTitles.open_account",views:{"page-content@":t.EXISTING_CLIENT_ONBOARDING},data:{skipAnalyticsOnSuccess:!0,requiresLevel2Auth:!0,hideMobileFooter:!0},resolve:{onboardingBundle:n(86),userSettingsBundle:n(89),chartingBundle:n(48),rdc:n(270)}}).state(t.JOINT_ENROLLMENT_VALIDATION,{url:"/joint-enrollment?invitation",parent:t.ABSTRACT_AUTH,views:{"page-content@":t.JOINT_ENROLLMENT_VALIDATION},title:"global.metaTitles.join_enrollment_validation",resolve:{onboardingBundle:n(86)},data:{hideMobileFooter:!0}}).state(t.JOINT_ENROLLMENT,{url:"/joint-enrollment/:invitationKey",parent:t.ABSTRACT_AUTH,title:"global.metaTitles.join_enrollment",params:{invitation:null,skipConfirmation:!1},data:{requiresAuth:!0,requiresLevel2Auth:!0,hideMobileFooter:!0},views:{"page-content@":t.JOINT_ENROLLMENT},resolve:{onboardingBundle:n(86)}}).state(t.BUSINESS_CLIENT_ONBOARDING,{url:"/business-client-onboarding",parent:t.ABSTRACT_AUTH,title:"global.metaTitles.open_account_business",views:{"page-content@":t.BUSINESS_CLIENT_ONBOARDING},data:{hideMobileFooter:!0}}).state(t.CSA_POST_CONVERSION,{url:"/csa-post-conversion/:conversionHash",parent:t.ABSTRACT_AUTH,title:"global.metaTitles.csa_post_conversation",views:{"page-content@":t.EXISTING_CLIENT_ONBOARDING},data:{hideMobileFooter:!0}}).state(t.KYC,{url:"/kyc",parent:t.ABSTRACT_AUTH,params:{selectedItem:null,isPendingKyc:!1},views:{"page-content@":t.KYC},data:{hideMobileFooter:!0},title:"global.metaTitles.kyc"}).state(t.ACCOUNT_DOCUMENTS,{url:"/documents",parent:t.ABSTRACT_AUTH,title:"global.metaTitles.account_documents.statements",views:{"page-content@":t.ACCOUNT_DOCUMENTS},defaultSubstate:t.ACCOUNT_DOCUMENTS_STATEMENTS,resolve:{documentsBundle:n(502),userSettingsBundle:n(89)},data:{hideMobileFooter:!0}}).state(t.USER_SETTINGS,{url:"/settings",data:{parentNavigation:t.MOBILE_NAVIGATION,requiresLevel2Auth:!0,hideMobileFooter:!0},parent:t.ABSTRACT_AUTH,title:"global.metaTitles.settings.general",views:{"page-content@":t.USER_SETTINGS},defaultSubstate:t.USER_SETTINGS_GENERAL,params:{ignoreCache:null},resolve:{userSettingsBundle:n(89)}}).state(t.DEVICES,{url:"/devices",parent:t.ABSTRACT_AUTH,data:{parentNavigation:t.MOBILE_NAVIGATION,requiresAuth:!0,hideMobileFooter:!0},title:"global.metaTitles.devices",views:{"page-content@":t.DEVICES},defaultSubstate:t.DEVICES_SECURITY,resolve:{userSettingsBundle:n(89)}}).state(t.FORMS,{url:"/forms",parent:t.ABSTRACT_AUTH,title:"global.metaTitles.forms",data:{parentNavigation:t.MOBILE_NAVIGATION,hideMobileFooter:!0},views:{"page-content@":t.FORMS},defaultSubstate:t.FORMS_BANKING}).state(t.SIMPLE_SIGN_ON_TOUCH_ID,{url:"/simple-sign-on/touch-id",title:"Simple Sign On Touch Id",parent:t.ABSTRACT_AUTH,data:{parentNavigation:null,hideMobileFooter:!0},views:{"page-content@":t.SIMPLE_SIGN_ON_TOUCH_ID}}).state(t.SIMPLE_SIGN_ON_QUICK_VIEW,{url:"/simple-sign-on/quick-view",title:"Simple Sign On Quick View",parent:t.ABSTRACT_AUTH,views:{"page-content@":t.SIMPLE_SIGN_ON_QUICK_VIEW},data:{parentNavigation:t.SIMPLE_SIGN_ON_TOUCH_ID,hideMobileFooter:!0}}).state(t.SIMPLE_SIGN_ON_QUICK_VIEW_NO_BACK,{url:"/simple-sign-on/quick-view-noback",title:"Simple Sign On Quick View",parent:t.ABSTRACT_AUTH,views:{"page-content@":t.SIMPLE_SIGN_ON_QUICK_VIEW},data:{parentNavigation:null,hideMobileFooter:!0}}).state(t.WATCH_SETTINGS,{url:"/watch-settings",title:"Watch Settings",parent:t.ABSTRACT_AUTH,views:{"page-content@":t.WATCH_SETTINGS},data:{parentNavigation:t.MOBILE_NAVIGATION,hideMobileFooter:!0}}).state(t.MOBILE_TERMS_AND_CONDITIONS,{parent:t.ABSTRACT_AUTH,url:"/mobile-terms-and-conditions",data:{parentNavigation:t.SIGNOUT,hideMobileFooter:!0},title:"Mobile Terms and Conditions",views:{"page-content@":t.MOBILE_TERMS_AND_CONDITIONS}}).state(t.SIGNOUT,{url:"/sign-out",title:"Sign Out",views:{"page-content@":t.SIGNOUT}}).state(t.INSIGHTS,{url:"/insights",views:{"page-content@":t.INSIGHTS},parent:t.ABSTRACT_AUTH,title:"global.metaTitles.insights",isTopLevel:!0}).state(t.BUDGET_TOOL,{url:"/budgettool",params:{currentState:null},views:{"page-content@":t.BUDGET_TOOL},parent:t.ABSTRACT_AUTH}).state(t.BUDGET_LTS_OVERVIEW,{url:"/left-to-spend",title:"Left to Spend",params:{currentState:null},views:{"page-content@":t.BUDGET_LTS_OVERVIEW},parent:t.ABSTRACT_AUTH}).state(t.NOT_FOUND,{url:"/not-found",parent:t.ABSTRACT_GUEST,views:{"page-content@":t.NOT_FOUND},title:"global.metaTitles.not_found"}).state(t.MAINTENANCE,{url:"/maintenance",parent:t.ABSTRACT_GUEST,views:{"page-content@":t.MAINTENANCE},title:"global.metaTitles.maintenance"}).state(t.ACCESS_DENIED,{url:"/coming-soon-site",data:{parentNavigation:i.ACTION_METHODS.EXIT_NAVIGATION_MENU},parent:t.ABSTRACT_GUEST,views:{"page-content@":t.COMING_SOON_SITE},title:"global.metaTitles."}).state(t.MOBILE_NAVIGATION,{url:"/navigation",parent:t.ABSTRACT_AUTH,data:{menu:i.MENU_TYPES.MOBILE_NAVIGATION,parentNavigation:i.ACTION_METHODS.EXIT_NAVIGATION_MENU,title:"navigation.profile",requiresLevel2Auth:!0,hideMobileFooter:!0},resolve:{userSettingsBundle:n(89)},views:{"page-content@":"tngNavigation"}}).state(t.COMING_SOON,{url:"/coming-soon",data:{parentNavigation:i.ACTION_METHODS.EXIT_NAVIGATION_MENU},parent:t.ABSTRACT_GUEST,views:{"page-content@":t.COMING_SOON}}).state(t.ABSTRACT_ACCOUNTS_MODAL,{abstract:!0,data:{isModal:!0,baseState:t.ACCOUNT_SUMMARY,skipAnalyticsOnSuccess:!0},parent:t.ABSTRACT_AUTH,views:{"page-content@":t.ACCOUNT_SUMMARY}}).state(t.ABSTRACT_TRANSACTIONS_MODAL,{abstract:!0,parent:t.ABSTRACT_AUTH,data:{isModal:!0,baseState:t.TRANSACTIONS,skipAnalyticsOnSuccess:!0},views:{"page-content@":t.TRANSACTIONS}}).state(t.MOVE_MONEY_MODAL,{url:"/move-money",parent:t.ABSTRACT_ACCOUNTS_MODAL,title:"global.metaTitles.move_money"}).state(t.ACTIVATE_OFFER_MODAL,{url:"/activate-offer/:offerId/:type",parent:t.ABSTRACT_ACCOUNTS_MODAL,title:"global.metaTitles.activate_offer"}).state(t.PAY_BILLS_MODAL,{url:"/pay-bills",parent:t.ABSTRACT_ACCOUNTS_MODAL,title:"global.metaTitles.pay_bills"}).state(t.ADD_BILL_MODAL,{url:"/add-bill",parent:t.ABSTRACT_ACCOUNTS_MODAL,title:"global.metaTitles.add_bill"}).state(t.EMT_MODAL,{url:"/emt",parent:t.ABSTRACT_ACCOUNTS_MODAL,title:"global.metaTitles.emt"}).state(t.EMT_RECLAIM_MODAL,{url:"/emt/reclaim-money/interac/:interacId",params:{type:"reclaim_interac"},data:{skipAnalyticsOnSuccess:!0,requiresLevel2Auth:!0,hideMobileFooter:!0},parent:t.ABSTRACT_ACCOUNTS_MODAL,title:"global.metaTitles.emt_reclaim"}).state(t.UNCONFIRMED_TRANSACTIONS_MODAL,{url:"/transactions/unconfirmed",parent:t.ABSTRACT_TRANSACTIONS_MODAL,title:"global.metaTitles.unconfirmed_transactions"}).state(t.UNCATEGORIZED_TRANSACTIONS_MODAL,{url:"/transactions/uncategorized",parent:t.ABSTRACT_TRANSACTIONS_MODAL,title:"global.metaTitles.uncategorized_transactions"}).state(t.CREDIT_CARD_BALANCE_TRANSFER_MODAL,{url:"/balance-transfer/:accountHash",parent:t.ABSTRACT_ACCOUNTS_MODAL,title:"global.metaTitles.credit_card_balance_transfer"}).state(t.CREDIT_CARD_ACTIVATION_MODAL,{url:"/credit-activation/:card",parent:t.ABSTRACT_ACCOUNTS_MODAL,title:"global.metaTitles.credit_activation"}).state(t.DEBIT_CARD_ACTIVATION_MODAL,{url:"/debit-activation/:card",parent:t.ABSTRACT_ACCOUNTS_MODAL,title:"global.metaTitles.debit_activation"}).state(t.REFER_FRIEND_MODAL,{url:"/refer-a-friend",parent:t.ABSTRACT_ACCOUNTS_MODAL,title:"global.metaTitles.refer_a_friend"}).state(t.DONATIONS_MODAL,{url:"/donations",parent:t.ABSTRACT_ACCOUNTS_MODAL,title:"global.metaTitles.donations"}).state(t.ORDER_CHEQUES_MODAL,{url:"/order-cheques/:accountHash",parent:t.ABSTRACT_ACCOUNTS_MODAL,title:"global.metaTitles.order_cheques"}).state(t.PENDING_APPLICATIONS,{url:"/pending-applications",parent:t.ABSTRACT_ACCOUNTS_MODAL,title:"global.metaTitles.pending_applications"}).state(t.ASP_MODAL,{url:"/start-asp",parent:t.ABSTRACT_ACCOUNTS_MODAL,title:"global.metaTitles.start_asp"}).state(t.GOAL_MODAL,{url:"/create-goal",parent:t.ABSTRACT_ACCOUNTS_MODAL,title:"global.metaTitles.goal"}).state(t.INSIGHTS_TLOC_LEARN_MORE,{url:"/tloc-preap-learn-more",parent:t.ACCOUNT_SUMMARY,views:{"page-content@":t.INSIGHTS_TLOC_LEARN_MORE},title:"global.metaTitles.account.details.tloc"}).state(t.CSA_CONVERSION_MODAL,{url:"/csa-conversion/:dealId",parent:t.ABSTRACT_ACCOUNTS_MODAL,resolve:{onboardingBundle:n(86)},title:"global.metaTitles.order_cheques"})}Object.defineProperty(t,"__esModule",{value:!0}),i.$inject=["$stateProvider","stateConstants","menuConstants"],t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function s(e){e.config(h.default).config(o.default).config(l.default).config(u.default).config(g.default).config(f.default).config(E.default)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(503),o=i(a),r=n(504),l=i(r),c=n(505),u=i(c),d=n(506),h=i(d),_=n(507),g=i(_),S=n(326),f=i(S),v=n(508),E=i(v);t.default=s,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i,s,o,r,l){(0,a.default)(this,e),this.$q=t,this.RequesterService=n,this.SessionService=i,this.AppStateService=s,this.AVAILABLE_SERVICES=o.AVAILABLE_SERVICES,this.userConstants=r,this.EventBusService=l,this.capRequestPromise=null,this.userCapabilities=null}return(0,r.default)(e,[{key:"getCapabilities",value:function(){var e=this,t={urlVars:{queryString:"include-servicing-systems=true"}};return this.capRequestPromise?this.capRequestPromise:this.AppStateService.isInit()&&this.SessionService.isAuthenticated()?(this.capRequestPromise=this.RequesterService.request(this.AVAILABLE_SERVICES.USER_CAPABILITIES,t).then(function(t){return t&&t.capabilities?(e.userCapabilities=t.capabilities,e.SessionService.setMenuCache(e.userCapabilities),e.publishUserCapabilitiesChangedEvent(),t):e.$q.reject(e.userConstants.USER.ERRORS.CANNOT_FETCH_CAPABILITIES)}).finally(function(){e.capRequestPromise=null}),this.capRequestPromise):(this.userCapabilities=[],this.SessionService.clearMenuCache(),this.publishUserCapabilitiesChangedEvent(),this.$q.resolve(this.userCapabilities))}},{key:"getUserInfo",value:function(){return this.RequesterService.request(this.AVAILABLE_SERVICES.GET_CUSTOMER_INFO)}},{key:"publishUserCapabilitiesChangedEvent",value:function(){this.EventBusService.publish(this.userConstants.EVENTS.USER_CAPABILITIES_UPDATED,{data:this.userCapabilities})}}]),e}();l.$inject=["$q","RequesterService","SessionService","AppStateService","serviceConstants","userConstants","EventBusService"],t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(114),a=i(s),o=n(98),r=i(o),l=n(0),c=i(l),u=n(1),d=i(u),h=n(18),_=i(h),g=function(){function e(t,n,i,s,a,o,r,l,u,d){(0,c.default)(this,e),this.$log=t,this.cifTypeService=i,this.RequesterService=n,this.serviceConstants=s,this.customerConstants=a,this.userSettingsConstants=o,this.$q=r,this.accountConstants=l,this.$httpParamSerializer=u,this.API_CONST=this.customerConstants.API,this.ACCOUNT_TYPES=this.accountConstants.ACCOUNT_TYPES,this.DateService=d}return(0,d.default)(e,[{key:"getCustomerInfo",value:function(e){if(e){var t={urlVars:{}};return e&&e.include_servicing_systems&&(t.urlVars.include_servicing_systems=e.include_servicing_systems),this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.GET_CUSTOMER_INFO_QUERY,t)}return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.GET_CUSTOMER_INFO)}},{key:"getCustomerInfoAI",value:function(){return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.GET_CUSTOMER_INFO_AI)}},{key:"putCustomerInfo",value:function(e){var t={data:e};return this.$log.debug("PUT Customer Info Payload/Request: ",e),this.cifTypeService.didParentSwitchToChild()?(t.urlVars={id:this.cifTypeService.selectedCif.customerInfo.dependent_id},t.data=e[this.customerConstants.CUSTOMER_JSON_KEY],this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.PUT_CUSTOMER_DEPENDENT,t)):this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.PUT_CUSTOMER_INFO,t)}},{key:"getChildDataAndUpdateDependentInfo",value:function(e){var t=this;return this.getCustomerDependent(e.customerInfo.dependent_id).then(function(n){t.$log.debug("User Settings, DependentInfo: ",n);var i=t.cifTypeService.parentCifOptions.find(function(t){return t.cif===e.cif});i&&(i.customerInfo=n)}).catch(function(e){t.serviceErrors.push(e),t.$log.error(e)})}},{key:"getCustomerUsername",value:function(){return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.GET_CUSTOMER_USERNAME)}},{key:"putCustomerUsername",value:function(e){var t={data:e};return this.$log.debug("PUT Customer Username Payload/Request: ",e),this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.PUT_CUSTOMER_USERNAME,t)}},{key:"putCustomerNewPIN",value:function(e){var t={data:{action_code:this.userSettingsConstants.ACTION_CODES.UPDATE_PIN,current_pin:e.currentPIN,new_pin:e.newPIN}};return this.cifTypeService.didParentSwitchToChild()?(t.urlVars={id:this.cifTypeService.selectedCif.customerInfo.dependent_id},this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.PUT_CUSTOMER_NEW_PIN_DEPENDENT,t)):this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.PUT_CUSTOMER_NEW_PIN,t)}},{key:"getCustomerPassmark",value:function(){return this.cifTypeService.didParentSwitchToChild()?this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.GET_PASSMARK_DEPENDENT,{urlVars:{id:this.cifTypeService.selectedCif.customerInfo.dependent_id}}):this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.GET_PASSMARK)}},{key:"getCustomerPassmarkImagesByCategory",value:function(e){return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.PASSMARK_IMAGES_BY_CATEGORY_UPDATE,{urlVars:{image_category:e,cache_bust:Math.floor(2e3*Math.random()+1)}})}},{key:"putCustomerPassmark",value:function(e){var t=this._pruneAnswers(e),n={data:{answers_list:t}};return e.phrase&&(n.data.phrase=e.phrase),e.image_id&&(n.data.image_id=e.image_id),this.$log.debug("PUT Passmark payload: ",n.data),this.cifTypeService.didParentSwitchToChild()?(n.urlVars={id:this.cifTypeService.selectedCif.customerInfo.dependent_id},this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.PUT_PASSMARK_DEPENDENT,n)):this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.PUT_PASSMARK,n)}},{key:"putCustomerDevice",value:function(e){var t={data:{action_code:e.action_code}};return e.device_print&&(t.data.device_request={},t.data.device_request.device_print=e.device_print),this.cifTypeService.didParentSwitchToChild()?(t.urlVars={id:this.cifTypeService.selectedCif.customerInfo.dependent_id},this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.PUT_CUSTOMER_NEW_PIN_DEPENDENT,t)):this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.PUT_CUSTOMER_NEW_PIN,t)}},{key:"getCustomerPreferences",value:function(){return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.CUSTOMER_PREFERENCES)}},{key:"putCustomerPreferences",value:function(e){var t={data:{communication:e}};return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.PUT_CUSTOMER_PREFERENCES,t)}},{key:"getCustomerDependent",value:function(e){return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.GET_CUSTOMER_DEPENDENT,{urlVars:{id:e}})}},{key:"getCustomerCards",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=!1,i=!1;return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.ACCOUNT_SUMMARY).then(function(s){return s.accounts.forEach(function(t){-1!==[e.ACCOUNT_TYPES.CHEQUING,e.ACCOUNT_TYPES.SAVINGS].indexOf(t.type)&&(n=!0),e.ACCOUNT_TYPES.CREDIT_CARD===t.type&&(i=!0)}),n&&i?(e.$log.debug("get debit and credit cards"),e.$q.all([e.getCustomerDebitCards(),e.getCustomerCreditCards(t)]).then(function(e){var t=(0,r.default)(e,2),n=t[0],i=t[1],s=n.cards||[],o=i.cards||[];return{cards:[].concat((0,a.default)(s),(0,a.default)(o))}})):n?(e.$log.debug("get only debit cards"),e.getCustomerDebitCards().then(function(e){var t=e.cards||[];return{cards:[].concat((0,a.default)(t),[[]])}})):i?(e.$log.debug("get only credit cards"),e.getCustomerCreditCards(t).then(function(e){var t=e.cards||[];return{cards:[[]].concat((0,a.default)(t))}})):(e.$log.debug("user has no cards"),{cards:[[],[]]})})}},{key:"getCustomerDebitCards",value:function(){return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.GET_CUSTOMER_CARDS,{urlVars:{type:this.customerConstants.API.CARD.TYPE.DEBIT.KEY}})}},{key:"getCustomerCreditCards",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={urlVars:{type:this.customerConstants.API.CARD.TYPE.CREDIT.KEY}},n=this.serviceConstants.AVAILABLE_SERVICES.GET_CUSTOMER_CARDS;return this.RequesterService.request(n,t,e)}},{key:"getCustomerBonusInfo",value:function(){return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.CUSTOMER_BONUS_INFO)}},{key:"getPreApprovedCreditCardOffer",value:function(){var e=this;return this.getCustomerOffers("CCPA",!1,"CBK").then(function(t){e.$log.info("CC response",t);var n=_.default.get(t,"response_status.status_code");if(n!==e.serviceConstants.STATUS_CODES.SUCCESS)return e.$log.error("Error getting CC offer",n,t),null;if(_.default.isEmpty(t.offers))return e.$log.debug("No CC offer"),null;var i=t.offers[0];return i.isPreApprovedCreditCard=!0,i.offerExpiryDate=e.DateService.momentToTngDate(e.DateService.serverFormatToMoment(i.credit_card_offer_details.expiry_date)),i}).catch(function(t){throw e.$log.error("Error getting CC offer",t),t})}},{key:"getCustomerOffers",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i={};return e&&(i["offer-type"]=e),t&&(i["fetch-all"]=t),n&&(i["product-code"]=n),this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.CUSTOMER_OFFERS,{urlVars:{queryString:this.$httpParamSerializer(i)}})}},{key:"updateCustomerOffers",value:function(e,t){return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.UPDATE_CUSTOMER_OFFERS,{urlVars:{offerId:t},data:e})}},{key:"getCustomerConsents",value:function(){return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.GET_CUSTOMER_CONSENTS)}},{key:"putCustomerConsents",value:function(e){var t={data:e};return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.PUT_CUSTOMER_CONSENTS,t)}},{key:"getCapabilities",value:function(){return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.USER_CAPABILITIES_NO_QUERY)}},{key:"getPendingTransaction",value:function(){var e={urlVars:{queryString:null}};return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.PENDING_TRANSACTIONS,e)}},{key:"getAccounts",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.$httpParamSerializer(e),n={urlVars:{queryString:t}};return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.REQUEST_ACCOUNTS,n)}},{key:"_didResponseSucceed",value:function(e){return e.response_status.status_code===this.API_CONST.RESPONSE_CODES.SUCCESS||e.response_status.status_code===this.API_CONST.RESPONSE_CODES.NO_DATA}},{key:"_pruneAnswers",value:function(e){return e.answers_list.map(function(e){var t=e;return delete t.question,t})}},{key:"getForeignTaxResidencyCertification",value:function(){return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.GET_TAX_RESIDENCY_CERTIFICATION)}},{key:"getChildForeignTaxResidencyCertification",value:function(e){return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.GET_CHILD_TAX_RESIDENCY_CERTIFICATION,{urlVars:{dependentId:e}})}},{key:"putForeignTaxResidencyCertification",value:function(e){var t=this.serviceConstants.AVAILABLE_SERVICES.PUT_TAX_RESIDENCY_CERTIFICATION,n={data:e};return this.RequesterService.request(t,n)}},{key:"putChildForeignTaxResidencyCertification",value:function(e,t){var n=this.serviceConstants.AVAILABLE_SERVICES.PUT_CHILD_TAX_RESIDENCY_CERTIFICATION,i={data:e};return i.urlVars={dependentId:t},this.RequesterService.request(n,i)}},{key:"deleteAllRememberDevices",value:function(){return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.DELETE_REMEMBER_ME_ALL)}}]),e}();g.$inject=["$log","RequesterService","CifTypeService","serviceConstants","customerConstants","UserSettingsConstants","$q","accountConstants","$httpParamSerializer","DateService"],t.default=g,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),a=i(s),o=n(0),r=i(o),l=n(1),c=i(l),u=function(){function e(t,n,i,s,a,o){(0,r.default)(this,e),this.$log=t,this.ReferenceDataService=i,this.RequesterService=n,this.serviceConstants=s,this.customerConstants=o,this.TEMPLATES=a.TEMPLATES,this.FATCA_RESONABILITY=a.FATCA_RESONABILITY,this._roadblockToken=null,this._hideNextRoadblock=!1}return(0,c.default)(e,[{key:"hideNextRoadblock",value:function(){this._hideNextRoadblock=!0}},{key:"showRoadblocks",value:function(){this._hideNextRoadblock=!1}},{key:"_storeToken",value:function(e){e.token?this._roadblockToken=e.token:this._shouldHoldToken(e.response_status.status_code)&&(this._roadblockToken=this.tempToken)}},{key:"_shouldHoldToken",value:function(e){return-1!==[this.serviceConstants.STATUS_CODES.VALIDATION_ERROR,this.customerConstants.API.RESPONSE_CODES.PININVALID].indexOf(e)}},{key:"getENotifications",value:function(){var e=this;return this.$log.log("eNotificationService:getENotifications"),this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.GET_ROADBLOCKS).then(function(t){return e._storeToken(t),t})}},{key:"getFatcaRoadblocks",value:function(){return this.$log.log("getFactaRoadblocks"),this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.GET_FATCA_ROADBLOCKS)}},{key:"getFatcaTaxInfoDependentDetails",value:function(e){return this.$log.log("getFatcaTaxInfoDependentDetails"),this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.GET_CHILD_TAX_RESIDENCY_CERTIFICATION,{urlVars:{dependentId:e}})}},{key:"getFatcaTaxInfoDetails",value:function(){return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.GET_TAX_RESIDENCY_CERTIFICATION)}},{key:"putFatcaRoadblocks",value:function(e,t){var n=this.serviceConstants.AVAILABLE_SERVICES.PUT_FATCA_ROADBLOCKS,i={data:e};return t&&(n=this.serviceConstants.AVAILABLE_SERVICES.PUT_FATCA_DEPENDENT_ROADBLOCKS,i.urlVars={dependentId:t}),this.RequesterService.request(n,i)}},{key:"prepareFatcaAPIData",value:function(e){var t={foreign_tax_certification_details:{user_consent:!0,self_certification_response:e.selfCertificationResponse}};return e.childCif&&(t.child_cid=e.childCif),e.reasonNonCrsPerson&&(t.foreign_tax_certification_details.reason_non_crs_person=e.reasonNonCrsPerson,e.reasonNonCrsPerson===this.FATCA_RESONABILITY.OTHERS&&(t.foreign_tax_certification_details.other_crs_reason=e.other_crs_reason)),e.reasonNonUsPerson&&(t.foreign_tax_certification_details.reason_non_us_person=e.reasonNonUsPerson,e.reasonNonUsPerson===this.FATCA_RESONABILITY.OTHERS&&(t.foreign_tax_certification_details.other_us_reason=e.other_us_reason)),e.foreignTaxResidency&&e.foreignTaxResidency.length&&(t.foreign_tax_certification_details.foreign_tax_residency=[],e.foreignTaxResidency.forEach(function(e){delete e.country_name,delete e.cannotProvideReason,t.foreign_tax_certification_details.foreign_tax_residency.push(e)})),t}},{key:"putNotification",value:function(e,t,n,i){var s=this,o=[],r=t===this.TEMPLATES.AML_MISSING_INFO;if(n&&n.roadblock_data)o=n.roadblock_data;else{var l={template_id:t};n&&n.templateId&&(l.template_id=angular.copy(n.templateId),delete n.templateId),i||n&&(t===this.TEMPLATES.KYC_INCOMPLETE_NOT_EXPIRED?l=(0,a.default)(l,n):r&&"LATER"===n.user_choice?l=(0,a.default)(l,n):l.template_data=n),o.push(l)}var c={roadblock_type:e,roadblock_data:o};r&&(c.roadblock_subtype=this.TEMPLATES.AML_MISSING_INFO);var u={roadblocks:[c]};return this._roadblockToken&&(u.token=this._roadblockToken,this.tempToken=this._roadblockToken,this._roadblockToken=null),this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.PUT_ROADBLOCKS,{data:u}).then(function(e){return s._storeToken(e),e})}},{key:"getReferenceData",value:function(e){return this.ReferenceDataService.getDataByType(e)}},{key:"submitEsignature",value:function(e){var t={e_signature:e};return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.ADD_KYC_SIGNATURE,{data:t})}},{key:"isInvisibleRoadblock",get:function(){return this._hideNextRoadblock}}]),e}();u.$inject=["$log","RequesterService","ReferenceDataService","serviceConstants","eNotificationConstants","customerConstants"],t.default=u,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(205),s=function(e){return e&&e.__esModule?e:{default:e}}(i),a={RESTRICTION:"RESTRICTION",AML_REMEDIATION_MISSING_INFO:"AML_REMEDIATION_MISSING_INFO",ENOTIFICATION:"ENOTIFICATION",KYC:"KYC",ONBOARDING:"ONBOARDING",CSA_REACHED_AGE_OF_MAJORITY:"CSA_REACHED_AGE_OF_MAJORITY"},o={MULTI:"MULTI",AML_MISSING_INFO:"AML_MISSING_INFO",ADDRESS:"ADDRESS",DOB:"DOB",CONTACT:"CONTACT",ADDRESS_MISSING_SUITE_NUMBER:"ADDRESS_MISSING_SUITE_NUMBER",ADDRESS_INCORRECT:"ADDRESS_INCORRECT",MAILING_ADDRESS_INCORRECT:"MAILING_ADDRESS_INCORRECT",DOB_MISMATCH:"DOB_MISMATCH",SIN_NUMBER_REQUIRED:"SIN_NUMBER_REQUIRED",OCCUPATION:"OCCUPATION",INTENDED_USE:"INTENDED_USE",HOME_PHONE_REQUIRED:"HOME_PHONE_REQUIRED",AML_REMEDIATION_MISSING_INFO:"AML_REMEDIATION_MISSING_INFO",FORWARD_PRICING_OFFER:"FORWARD_PRICING_OFFER",ACCOUNT_ENROLLMENT_NOTIFICATION:"ACCOUNT_ENROLLMENT_NOTIFICATION",DENIED_ACCESS:"DENIED_ACCESS",ADDRESS_HOME_IS_PO_BOX:"ADDRESS_HOME_IS_PO_BOX",ACCOUNT_ON_HOLD_ADDRESS_PROOF:"ACCOUNT_ON_HOLD_ADDRESS_PROOF",ACCOUNT_ON_HOLD_SIN_PROOF:"ACCOUNT_ON_HOLD_SIN_PROOF",CALL_TO_RESOLVE:"CALL_TO_RESOLVE",KYC_PERSONAL_INFO_CHANGED:"KYC_PERSONAL_INFO_CHANGED",CSA_CONVERSION_CHILD_NOTIFICATION:"CSA_CONVERSION_CHILD_NOTIFICATION",FATCA:"FATCA",KYC_NOT_CHOSEN:"KYC_NOT_CHOSEN",KYC_INCOMPLETE_NOT_EXPIRED:"KYC_INCOMPLETE_NOT_EXPIRED",KYC_DIGITAL_SIGNATURE:"KYC_DIGITAL_SIGNATURE",KYC_DIGITAL_SIGNATURE_PI:"KYC_DIGITAL_SIGNATURE_PI",RSTRCTN_TC:"RSTRCTN_TC",FACTA_VERIFICATION_US_SIMPLE_INDICIA:"FACTA_VERIFICATION_US_SIMPLE_INDICIA",FACTA_VERIFICATION_US_SIMPLE_FOREIGN_INDICIA:"FACTA_VERIFICATION_US_SIMPLE_FOREIGN_INDICIA",FACTA_VERIFICATION_FOREIGN_INDICIA:"FACTA_VERIFICATION_FOREIGN_INDICIA",GLOBAL_FACTA_TAX_RESIDENCY:"GLOBAL_FACTA_TAX_RESIDENCY",CHILD_GLOBAL_FACTA_TAX_RESIDENCY:"CHILD_GLOBAL_FACTA_TAX_RESIDENCY"},r={ACCEPT:"ACCEPT",DENY:"DECLINE",LATER:"LATER"},l={OPEN_ACCOUNT:"OPEN_ACCOUNT",MOVE_MONEY:"MOVE_MONEY",KBA_DROP_OFF:"KBA_DROP_OFF",VISITOR_ENROLLMENT:"VISITOR ENROLLMENT",DIGITAL_OR_MANUAL_KYC:"DIGITAL_OR_MANUAL_KYC",FATCA:"FATCA",KYC_SELECTION:"KYC_SELECTION",KYC_CHANGE:"KYC_CHANGE",KYC_ESIGNATURE:"KYC_ESIGNATURE",KYC_ESIGNATURE_PI:"KYC_ESIGNATURE_PI",KYC_KBA:"KYC_KBA",CSA_POST_CONVERSION:"CSA_POST_CONVERSION"},c={INDIVIDUAL:"INDIVIDUAL",BUSINESS:"BUSINESS",CORPORATION:"CORPORATION",HOME:"HOME"},u={CONTINUE:"CONTINUE",DISMISS:"DISMISS"},d=[{key:"eNotification.FACTA.countryList.tinModal.tinInProgress"},{key:"eNotification.FACTA.countryList.tinModal.tinNotAvailable"}],h={OTHERS:"OTH",CLN:"CLN",FI407:"FI407"},_={YES:"YES",NO:"NO"},g={PAGE_ID:"eNotification",ROADBLOCK_TYPE:a,TEMPLATES:o,OFFER_BOOLEAN:r,NEXT_ACTION:l,ACCOUNT_TYPE:c,CANT_PROVIDE_TIN_REASON:d,ADDRESS_TYPE:s.default.API.ADDRESS_TYPE,PHONE_TYPE:s.default.API.PHONE_TYPE,EMPLOYMENT_STATUS:s.default.API.EMPLOYMENT_STATUS,KYC_INCOMPLETE_USER_CHOICE:u,CATCH_ALL:"CATCH_ALL",BOOLEAN_ACTIONS:_,FATCA_RESONABILITY:h};t.default=g,e.exports=t.default},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={ERRORS:{CANNOT_FETCH_CAPABILITIES:"CANNOT_FETCH_CAPABILITIES"},CAPABILITIES:{MUTUALFUND_TRANSACT_BUY:"MUTUALFUND_TRANSACT_BUY",MUTUALFUND_TRANSACT_SELL:"MUTUALFUND_TRANSACT_SELL",PRE_TFS_ENROLL:"PRE_TFS_ENROLL",MUTUAL_FUNDS_TRADE:"MUTUAL_FUNDS_TRADE"}},s=["CREDIT_CARD","MUTUAL_FUND","MORTGAGE"],a={USER_CAPABILITIES_UPDATED:"USER_CAPABILITIES_UPDATED"};t.default={USER:i,USER_CAPABILITIES_SERVICE_SYSTEM_ERRORS:s,EVENTS:a},e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i,s,o){(0,a.default)(this,e),this.$log=t,this.$q=n,this.UserService=i,this.SessionService=s,this.menuConstants=o}return(0,r.default)(e,[{key:"isKycPending",value:function(){var e=this,t=!!(Array.isArray(this.UserService.userCapabilities)&&this.UserService.userCapabilities.length>0);this.$log.debug("KYC Pending: has cached capabilities?",t);var n=t?this.$q.when({capabilities:this.UserService.userCapabilities}):this.UserService.getCapabilities(),i=this.$q.defer();return n.then(function(t){var n=e.checkCapabilities(t&&t.capabilities);return i.resolve(n)}).catch(function(t){e.$log.debug("KYC Pending: error determining KYC Pending status",t),i.resolve(!1)}),i.promise}},{key:"checkCapabilities",value:function(e){var t=this;if(!Array.isArray(e))return!1;var n=!1,i=!1;return e.forEach(function(e){i=i||e===t.menuConstants.CAPABILITIES.PERSON_UPDATE_MINIMUM,n=n||e===t.menuConstants.CAPABILITIES.KYC_PENDING}),!i&&n}}]),e}();l.$inject=["$log","$q","UserService","SessionService","menuConstants"],t.default=l,e.exports=t.default},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n(397),n(398),n(280),angular.element(document).ready(function(){angular.bootstrap(document,["tangerine"],{strictDi:!0})})},function(e,t,n){e.exports=n.p+"favicon.ico"},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),a=i(s),o=n(29),r=i(o),l=n(237),c=i(l),u=n(234),d=i(u),h=n(434),_=i(h),g=n(435),S=i(g),f=n(327),v=i(f),E=n(328),p=i(E),T=n(509),m=i(T),C=n(519),A=i(C),I=n(520),O=i(I),N=n(538),y=i(N),b=n(539),L=i(b),M=n(540),R=i(M),D=n(541),P=i(D),$=n(890),U=i($),k=n(892),w=i(k),B=n(938),F=i(B),G=n(953),V=i(G),x=n(993),H=i(x),Y=n(998),q=i(Y),W=n(1006),j=i(W),K=n(1027),Q=i(K),z=n(1033),X=i(z),Z=n(1039),J=i(Z),ee=n(1073),te=i(ee),ne=n(1078),ie=i(ne),se=n(1116),ae=i(se),oe=n(1125),re=i(oe),le=n(1132),ce=i(le),ue=n(1138),de=i(ue),he=n(1145),_e=i(he),ge=n(1148),Se=i(ge),fe=n(1162),ve=i(fe),Ee=n(280),pe=i(Ee),Te=n(1171),me=i(Te),Ce=[];Ce=Ce.concat(["ui.router","ui.router.state.events","ngAnimate","ngCookies","ngTouch","ngSanitize","ngMessages","ngResource","oc.lazyLoad","pascalprecht.translate","tmh.dynamicLocale","LocalStorageModule","puElasticInput","tmh.dynamicLocale","ngIdle","angular-cache","ngAria",c.default,d.default.name,V.default.name,U.default.name,w.default.name,P.default.name,F.default.name,H.default.name,q.default.name,j.default.name,ie.default.name,ae.default.name,X.default.name,Q.default.name,te.default.name,re.default.name,ce.default.name,J.default.name,de.default.name,_e.default.name,Se.default.name,ve.default.name]);var Ae=angular.module("tangerine",Ce);Ae.config(A.default).config(_.default).config(O.default).config(S.default).config(y.default).run(m.default).run(L.default).run(R.default).factory("TangerineInterpolator",me.default).service("SessionService",pe.default),window.WL||(Ae.config(v.default),(0,p.default)(Ae)),Ae.config(["$provide",function(e){e.decorator("$exceptionHandler",["$delegate",function(e){return function(t,n){try{e(t,n);var i={url:window.location.href,exception:t.stack,cause:n};"undefined"!=typeof dynaTrace&&window.dynaTrace.reportError((0,r.default)(i))}catch(e){}}}]),e.decorator("$log",["$delegate","buildConstants",function(e,t){var n=e.debug,i=e.info,s=e.warn,o=e.error,l=t.DEBUG_ENV,c="undefined"!=typeof dynaTrace,u="undefined"!=typeof WL&&WL.Analytics,d=function(){};!l&&window.console&&(0,a.default)(window.console,{log:d,info:d,warn:d,error:d,trace:d});var h=function(e){return Array.isArray(e)?e.map(function(e){try{return(0,r.default)(e)}catch(t){return e}}).join("|"):e},_=function(e,t){WL.Analytics.log(e+": "+t),WL.Analytics.send()};return e.debug=function(){l&&n.apply(void 0,arguments)},e.info=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];l&&i.apply(void 0,t);var s=h(t);c&&window.dynaTrace.reportString("INFO",s),u&&_("INFO",s)},e.warn=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];l&&s.apply(void 0,t);var i=h(t);c&&window.dynaTrace.reportString("WARN",i),u&&_("WARN",i)},e.error=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];l&&o.apply(void 0,t);var i=h(t);c&&window.dynaTrace.reportString("ERROR",i),u&&_("ERROR",i)},e}]),e.decorator("$translate",["$delegate",function(e){var t=e.instant,n=function(e){return angular.isString(e)&&-1!==e.indexOf("global.errorCodes.MESSAGE_")},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n(e)?e.replace("global.errorCodes.MESSAGE_","global.errorCodes."):e};return e.instant=function(e,n){return e?t(i(e),n).toString():e},e}]),e.decorator("$anchorScroll",["$delegate","$location",function(e,t){return function(n){n="string"==typeof n?n:t.hash(),n&&0!==n.length&&"top"!==n&&".page-content"!==n?e.call():(angular.element(".page-content").scrollTop(0,0),angular.element(".dialog__main-content").scrollTop(0,0),angular.element(".dialog__content").scrollTop(0,0))}}])}]),t.default=Ae,e.exports=t.default},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function i(e,t,n){t.otherwise("/");var i=function(e){return e.onReady(function(){return!0})};i.$inject=["$translate"];var s=function(e,t){var n=e.search().locale;n&&(t.locale=n,e.search("locale",null))};s.$inject=["$location","LocaleService"];var a=function(e){return e.loadCommonBundle()};a.$inject=["BundleService"];var o=function(e,t,n,i){return t.isNative()?e.when():n.loadBundle(i.AVAILABLE_BUNDLES.ACCOUNT_DETAILS)};o.$inject=["$q","EnvironmentService","BundleService","bundleConstants"];var r=function(e,t,n){return t.isNative()?n.when():e.initSession()};r.$inject=["SessionService","EnvironmentService","$q"],e.state(n.ABSTRACT,{abstract:!0,data:{requiresBrowserCheck:!0},resolve:{setGuestLocale:s}}).state(n.ABSTRACT_AUTH,{abstract:!0,parent:n.ABSTRACT,data:{requiresAuth:!0},resolve:{bundleCommon:a,bundleAccountDetails:o,translateReady:i,sessionInitialized:r}}).state(n.ABSTRACT_GUEST,{abstract:!0,parent:n.ABSTRACT,resolve:{translateReady:i},params:{locale:""}}).state(n.ABSTRACT_ANON,{abstract:!0,parent:n.ABSTRACT_GUEST,data:{requiresAnon:!0}})}Object.defineProperty(t,"__esModule",{value:!0}),i.$inject=["$stateProvider","$urlRouterProvider","stateConstants"],t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e,t,i,s){t.when("","/"),t.otherwise("/not-found");var a=function(e){if(e.redirectedFrom&&null!=e.redirectedFrom())return e.redirectedFrom().targetState();var t=e.router.stateService;return e.to().name===i.LOGIN||""===e.from().name||e.options().custom.noReturnTo?e.options().custom&&e.options().custom.returnTo?e.options().custom.returnTo:t.target(i.ACCOUNT_SUMMARY):t.target(e.from(),e.params("from"))};a.$inject=["$transition$"];var o=function(e){return e.loadCommonBundle()};o.$inject=["BundleService"],e.state(i.LOGIN,{parent:i.ABSTRACT_ANON,url:"/?locale&errorCode",title:"Login",params:{sessionTimeOut:null},views:{"page-content@":i.LOGIN},resolve:{returnTo:a}}).state(i.FORGOT_LOGIN,{url:"/forgot-login",parent:i.ABSTRACT_GUEST,title:"Forgot Login",views:{"page-content@":i.FORGOT_LOGIN}}).state(i.RESET_PIN,{url:"/reset-pin",parent:i.ABSTRACT_GUEST,title:"Reset PIN",views:{"page-content@":i.RESET_PIN}}).state(i.NEW_CLIENT_ENROLLMENT,{url:"/enroll",parent:i.ABSTRACT_ANON,title:"global.metaTitles.visitor_enrollment",data:{hideMobileFooter:!0,skipAnalyticsOnSuccess:!0},views:{"page-content@":i.NEW_CLIENT_ENROLLMENT},resolve:{bundleCommon:o,onboardingBundle:n(86)}}).state(i.ABM_LOCATIONS,{url:"/locations",parent:i.ABSTRACT_GUEST,data:{parentNavigation:s.ACTION_METHODS.EXIT_NAVIGATION_MENU},views:{"page-content@":i.ABM_LOCATIONS},title:"global.metaTitles.abm_locations",resolve:{bundleCommon:o}}).state(i.ABM_ACCESS,{url:"/abm-access",parent:i.ABSTRACT_GUEST,data:{parentNavigation:i.ABM_LOCATIONS},views:{"page-content@":i.ABM_ACCESS},title:"global.metaTitles.abm_access",resolve:{bundleCommon:o}}).state(i.MOBILE_PAY,{parent:i.ABSTRACT_AUTH,url:"/mobile-pay",data:{parentNavigation:i.LOGIN,hideMobileFooter:!0},title:"Mobile Pay",views:{"page-content@":i.MOBILE_PAY}}).state(i.INBOX,{url:"/inbox",data:{parentNavigation:i.MOBILE_NAVIGATION,requiresLevel2Auth:!0,hideMobileFooter:!0},parent:i.ABSTRACT_AUTH,views:{"page-content@":i.INBOX},title:"global.metaTitles.inbox",resolve:{userSettingsBundle:n(89),inboxBundle:n(499)}})}Object.defineProperty(t,"__esModule",{value:!0}),i.$inject=["$stateProvider","$urlRouterProvider","stateConstants","menuConstants"],t.default=i,e.exports=t.default},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(494),a=i(s),o=n(495),r=i(o);n(496);var l={template:a.default,controller:r.default,bindings:{ngModel:"=",ngModelSetRawObject:"<?",ngRequired:"<?",ngReadonly:"<?",onSelect:"&?",options:"<?",optionsFn:"&?",optionLabelKey:"@",optionRightLabelKey:"@?",optionValueKey:"@?",placeholder:"@",keypressDisabled:"<?",showDefaultWarnings:"<?",attachToBody:"@?",selectType:"<",simpleFiltered:"<",isStatic:"<?",stylized:"<?",alternateLight:"<?",inputId:"@",inputTabindex:"@",pattern:"<?",sortAlphabetically:"<?",ngWarningBorder:"<?"}};t.default=l,e.exports=t.default},function(e,t){e.exports='<ng-form name="$ctrl.selectAutocompleteForm" autocomplete="off"> <div class="c-select-autocomplete ng-animate-disabled" ng-class="::{\n      \'c-select-autocomplete--stylized\': $ctrl.stylized,\n      \'c-select-autocomplete--alternate-light\': $ctrl.alternateLight,\n    }" id="c-select-autocomplete-wrapper"> <div class="c-select-autocomplete__container js-container" ng-class="{\n        \'suggestions-shown\': $ctrl.suggestionsShown,\n        \'c-select-autocomplete__container--readonly\': $ctrl.ngReadonly,\n        \'c-select-autocomplete__container__warning-border\': \n          $ctrl.ngWarningBorder &&\n          !$ctrl.selectAutocompleteForm[$ctrl.inputId].$valid &&\n          ($ctrl.selectAutocompleteForm[$ctrl.inputId].$touched || $ctrl.showDefaultWarnings)\n        }" ng-click="$ctrl.inputClick($event)" ng-keydown="$ctrl.keydown($event)"> <input type="text" actionable-id="{{ $ctrl.inputId }}" id="{{ $ctrl.inputId }}" autocomplete="off" class="input c-select-autocomplete__input js-input" label-key="$ctrl.optionLabelKey" ng-disabled="$ctrl.isSelectTypeStaticAndNative()" ng-blur="$ctrl.blurCleanup()" ng-change="$ctrl.searchedText = $ctrl.inputModel" ng-class="{ \'suggestions-shown\': $ctrl.suggestionsShown }" ng-model="$ctrl.inputModel" ng-pattern="$ctrl.pattern" ng-readonly="$ctrl.ngReadonly || $ctrl.selectType === $ctrl.COMPONENT_CONSTANTS.SELECT_TYPES.STATIC" ng-required="$ctrl.ngRequired" placeholder="{{ $ctrl.placeholder | translate }}" select-autocomplete-validator suggestions="$ctrl.options" tabindex="{{::$ctrl.inputTabindex }}"/> <input type="hidden" ng-model="$ctrl.ngModel" ng-required="$ctrl.ngRequired"/> <div class="c-select-autocomplete__secondary-value margin__l--fix1" ng-bind-html="$ctrl.secondaryInputModel"></div> </div> <div class="c-select-autocomplete__suggestion-container js-suggestions" ng-class="::{\n        \'c-select-autocomplete__suggestion-container--stylized\': $ctrl.stylized,\n        \'c-select-autocomplete__suggestion-container--alternate-light\': $ctrl.alternateLight\n      }" ng-show="$ctrl.suggestionsShown && $ctrl.suggestions.length"> <div class="c-select-autocomplete__suggestion-container__suggestion" ng-if="$ctrl.dataType === $ctrl.COMPONENT_CONSTANTS.DATA_TYPES.STATIC" ng-repeat="suggestion in $ctrl.suggestions track by $index" ng-class="{ \'isSelected\': $ctrl.isSuggestionSelected(suggestion) }" ng-click="$ctrl.useSuggestion(suggestion)"> <span class="c-select-autocomplete__suggestion-left" ng-bind-html="suggestion[$ctrl.optionLabelKey] | translate"> </span> <span class="c-select-autocomplete__suggestion-right" ng-bind-html="suggestion[$ctrl.optionRightLabelKey] | translate"></span> </div> <div class="c-select-autocomplete__suggestion-container__suggestion" ng-if="$ctrl.dataType !== $ctrl.COMPONENT_CONSTANTS.DATA_TYPES.STATIC" ng-repeat="suggestion in $ctrl.suggestions track by $index" ng-class="{ \'isSelected\': $ctrl.isSuggestionSelected(suggestion) }" ng-click="$ctrl.useSuggestion(suggestion)"> <span class="c-select-autocomplete__suggestion-left" ng-bind-html="suggestion[$ctrl.optionLabelKey] | translate"> </span> <span class="c-select-autocomplete__suggestion-right" ng-bind-html="suggestion[$ctrl.optionRightLabelKey] | translate"></span> </div> </div> </div> <div ng-messages="$ctrl.selectAutocompleteForm[$ctrl.inputId].$error" ng-show="$ctrl.selectAutocompleteForm[$ctrl.inputId].$touched || $ctrl.showDefaultWarnings"> <div ng-message="required" class="field__error"> {{ ::\'clientOnboarding.tpiForm.errors.required\' | translate }} </div> <div ng-message="pattern" class="field__error"> {{ ::\'clientOnboarding.tpiForm.errors.invalidSymbols\' | translate }} </div> <div ng-message="selectAutocomplete" class="field__error"> {{ ::\'global.customErrorCodes.SELECT_AUTOCOMPLETE\' | translate}} </div> </div> </ng-form> '},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(36),a=i(s),o=n(6),r=i(o),l=n(0),c=i(l),u=n(1),d=i(u),h=n(18),_=i(h),g=function(){function e(t,n,i,s,a,o,l,u,d){(0,c.default)(this,e),(0,r.default)(this,{$scope:t,$element:n,$timeout:i,$translate:s,$window:a,$document:o,COMPONENT_CONSTANTS:l,modalDialogConstants:u,EnvironmentService:d}),this.searchedText="",this.suggestions=[],this.highlightedSuggestion=null,this.attachToBody=!!this.attachToBody,this.EnvironmentService=d,this.dataType=this.COMPONENT_CONSTANTS.DATA_TYPES.STATIC,this.selectAutocompleteForm={},this.OPTIONS_TO_SHOW=4,this.OPTION_HEIGHT=36}return(0,d.default)(e,[{key:"$onInit",value:function(){var e=this;this.simpleFiltered?this.selectType=this.COMPONENT_CONSTANTS.SELECT_TYPES.SIMPLE_FILTERED:this.isStatic&&(this.selectType=this.COMPONENT_CONSTANTS.SELECT_TYPES.STATIC),this._domContainerRef=this.$element[0].querySelector(".js-container"),this._domSuggestionsRef=this.$element[0].querySelector(".js-suggestions"),this._domInputRef=this.$element[0].querySelector(".js-input"),this._deregisterModelWatcher=this.$scope.$watch(function(){return e.ngModel},function(t,n){var i=_.default.find(e.suggestions,function(n){return n[e._optionValueKey]===t});!t&&e.inputModel?e._setInputModel():t&&i&&e._setInputModel(i),t!==n&&e.onSelect&&e.onSelect({value:t,option:i})}),this._deregisterSearchWatcher=this.$scope.$watch(function(){return e.searchedText},function(){return e._onSearchChange()})}},{key:"$onChanges",value:function(e){var t=this,n=e.options,i=e.optionsFn;if(n?this._bindStaticOptions():i&&(this.dataType=this.COMPONENT_CONSTANTS.DATA_TYPES.ASYNC),this.ngModel){var s=_.default.find(this.suggestions,function(e){return t._valMatchesModel(e)});this._setInputModel(s)}else this._setInputModel()}},{key:"isSuggestionSelected",value:function(e){return e===this.highlightedSuggestion||this._valMatchesModel(e)}},{key:"_bindStaticOptions",value:function(){this.dataType=this.COMPONENT_CONSTANTS.DATA_TYPES.STATIC,this.transformedOptions=this._prepareOptions(this.options),this.suggestions=angular.copy(this.transformedOptions)}},{key:"_prepareOptions",value:function(e){var t=this,n=[];return angular.isArray(e)?n=e:angular.isObject(e)&&(n=_.default.values(e)),this.sortAlphabetically?n.sort(function(e,n){return e[t.optionLabelKey].toLowerCase().localeCompare(n[t.optionLabelKey].toLowerCase())}):n}},{key:"_onSearchChange",value:function(){var e=this;!this.searchedText||this.searchedText.length<2?this.suggestions=angular.copy(this.transformedOptions):this.suggestions=this.transformedOptions.filter(function(t){return _.default.startsWith(t[e.optionLabelKey].toLowerCase(),e.searchedText.toLowerCase())})}},{key:"blurCleanup",value:function(){var e=this;this.$timeout(function(){e.inputModel?!_.default.find(e.suggestions,function(t){return e._valMatchesModel(t)})&&e.onSelect&&e.onSelect({value:"",option:void 0}):e.ngModel=null},50)}},{key:"$onDestroy",value:function(){this._deregisterModelWatcher(),this._deregisterSearchWatcher()}},{key:"keydown",value:function(e){if(this.keypressDisabled)return e.stopPropagation(),void e.preventDefault();if(this.suggestionsShown)switch(e.keyCode){case 13:this.highlightedSuggestion&&this.useSuggestion(this.highlightedSuggestion);break;case 38:this.highlightPrevious(),e.stopPropagation(),e.preventDefault(),this._domSuggestionsRef.scrollTop-=this.OPTION_HEIGHT+.555555;break;case 40:this.highlightNext(),e.stopPropagation(),e.preventDefault(),this.suggestions.indexOf(this.highlightedSuggestion)<this.OPTIONS_TO_SHOW-1?this._domSuggestionsRef.scrollTop=0:this._domSuggestionsRef.scrollTop+=this.OPTION_HEIGHT+2.555555;break;case 9:this._hideSuggestions()}}},{key:"highlightNext",value:function(){var e=-1;this.highlightedSuggestion?e=this.suggestions.indexOf(this.highlightedSuggestion):this.selectedSuggestion&&(e=this.suggestions.indexOf(this.selectedSuggestion)),e+1>=this.suggestions.length||(this.highlightedSuggestion=this.suggestions[e+1])}},{key:"highlightPrevious",value:function(){var e=this.suggestions.length-1;this.highlightedSuggestion?e=this.suggestions.indexOf(this.highlightedSuggestion):this.selectedSuggestion&&(e=this.suggestions.indexOf(this.selectedSuggestion)),e-1<0||(this.highlightedSuggestion=this.suggestions[e-1])}},{key:"_setInputModel",value:function(e){if(!e||!e[this.optionLabelKey])return this.inputModel="",void(this.secondaryInputModel="");var t=this.$translate.instant(e[this.optionLabelKey].toString());this.inputModel=t.replace(/<[^>]+>/gm,""),this.optionRightLabelKey&&(this.secondaryInputModel=this.$translate.instant(e[this.optionRightLabelKey].toString()))}},{key:"_conditionallySetDirtyFlag",value:function(e){this.inputId&&this.selectAutocompleteForm[this.inputId]&&e!==this.inputModel&&this.selectAutocompleteForm[this.inputId].$setDirty()}},{key:"_showSuggestions",value:function(){this.ngReadonly||this.suggestionsShown||(this.suggestionsShown=!0,this._attachToBody())}},{key:"_hideSuggestions",value:function(){var e=this;this.suggestionsShown&&(this.suggestionsShown=!1,this.$timeout(function(){e._deattachFromBody()}))}},{key:"inputClick",value:function(e){"keypress"===e.type&&13!==e.keyCode||this.isReadOnly||this.suggestionsShown||(this._showSuggestions(),this.EnvironmentService.isMobile()||this._domInputRef.focus(),this.selectType===this.COMPONENT_CONSTANTS.SELECT_TYPES.FILTERED&&(this.searchedText=""))}},{key:"isSelectTypeStaticAndNative",value:function(){return!!(this.EnvironmentService.isNative()&&this.selectType===this.COMPONENT_CONSTANTS.SELECT_TYPES.STATIC||this.EnvironmentService.isMobile())}},{key:"useSuggestion",value:function(e){var t=this;this.ngModelSetRawObject?this.ngModel=e:this.ngModel=e[this._optionValueKey];var n=this.inputModel;this._setInputModel(e),this._conditionallySetDirtyFlag(n),this.searchedText="",this.highlightedSuggestion=null,this.$timeout(function(){t._hideSuggestions()},200)}},{key:"_containerOffset",value:function(){if(!this._domContainerRef)return null;var e=this._domContainerRef.getBoundingClientRect();if(e.width||e.height||this._domContainerRef.getClientRects().length){var t=this._domContainerRef.ownerDocument,n=this.$window,i=t.documentElement;return{top:e.top+n.pageYOffset-i.clientTop,left:e.left+n.pageXOffset-i.clientLeft,width:e.width,height:e.height}}return null}},{key:"_ifClickedInsideDOMTree",value:function(e,t){var n=e.target;do{if(n===t)return!0;n=n.parentNode}while(n!==document.documentElement);return!n}},{key:"_closeIfClickedOutside",value:function(e){var t=this._ifClickedInsideDOMTree(e,this._domContainerRef),n=this._ifClickedInsideDOMTree(e,this._domSuggestionsRef);t||n||this._hideSuggestions()}},{key:"_deattachFromBody",value:function(){var e=angular.element(this._domSuggestionsRef);e.css("top","auto"),e.css("left","auto"),this._domContainerRef.parentNode.insertBefore(this._domSuggestionsRef,this._domContainerRef.nextSibling),this.$document.off("click touchstart",this.bound_closeIfClickedOutside),this.unbindDialogListener&&(this.unbindDialogListener(),this.unbindDialogListener=null)}},{key:"_attachToBody",value:function(){var e=this,t=angular.element(this._domSuggestionsRef),n=this._containerOffset();this._applyOffsetAndPosition(t,n),this.attachToBody&&document.body.appendChild(this._domSuggestionsRef),this.bound_closeIfClickedOutside=this._closeIfClickedOutside.bind(this),this.$document.on("click touchstart",this.bound_closeIfClickedOutside);for(var i=this.modalDialogConstants.SELECTOR_CLASSES.DIALOG_CONTENT,s=null,a=this._domSuggestionsRef.parentNode;a&&a.classList;){if(a.classList.contains(i)){s=angular.element(a);break}a=a.parentNode}s&&(this.unbindDialogListener=function(){s.off("scroll",e.bound_closeIfClickedOutside)})}},{key:"_applyOffsetAndPosition",value:function(e,t){var n=t.width,i=void 0,s=void 0;this.attachToBody?(s=t.top+t.height,i=t.left):(s=t.height,i=0),e.css("top",s+"px"),e.css("left",i+"px"),e.css("width",n+"px"),e.css("position","absolute")}},{key:"_valMatchesModelMapper",value:function(e){var t;if(null===e||void 0===e)return e;var n=(t={},(0,a.default)(t,this.optionLabelKey,e[this.optionLabelKey]),(0,a.default)(t,this._optionValueKey,e[this._optionValueKey]),t);return this.optionRightLabelKey&&(n[this.optionRightLabelKey]=e[this.optionRightLabelKey]),n}},{key:"_valMatchesModel",value:function(e){return this.ngModelSetRawObject?angular.equals(this._valMatchesModelMapper(e),this._valMatchesModelMapper(this.ngModel)):e[this._optionValueKey]===this.ngModel}},{key:"_optionValueKey",get:function(){return this.optionValueKey||"code"}}]),e}();g.$inject=["$scope","$element","$timeout","$translate","$window","$document","tngSelectAutocompleteConstants","modalDialogConstants","EnvironmentService"],t.default=g,e.exports=t.default},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={STATIC:"STATIC",FILTERED:"FILTERED"},s={STATIC:"STATIC",ASYNC:"ASYNC"},a={SELECT_TYPES:i,DATA_TYPES:s};t.default=a,e.exports=t.default},function(e,t,n){"use strict";function i(){var e="selectAutocomplete";return{require:"^ngModel",restrict:"A",scope:{suggestions:"<",labelKey:"<"},link:function(t,n,i,s){function o(n){if(s.$isEmpty(n))return s.$setValidity(e,!0),n;var i=a.default.find(t.suggestions,function(e){return e[t.labelKey].replace(/<[^>]+>/gm,"").trim().toLowerCase()===n.trim().toLowerCase()});return s.$setValidity(e,!!i),n}s.$formatters.push(o),s.$parsers.push(o)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var s=n(18),a=function(e){return e&&e.__esModule?e:{default:e}}(s);i.$inject=[],e.exports=t.default},function(e,t,n){"use strict";function i(t,i){return t(function(t){n.e(8).then(function(){(function(e){var e=n(1379);i.load({name:e.name}),t(e)}).call(this,n(42)(e))}.bind(null,n)).catch(n.oe)})}Object.defineProperty(t,"__esModule",{value:!0}),i.$inject=["$q","$ocLazyLoad"],t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(t,i){return t(function(t){n.e(4).then(function(){(function(e){var e=n(1383);i.load({name:e.name}),t(e)}).call(this,n(42)(e))}.bind(null,n)).catch(n.oe)})}Object.defineProperty(t,"__esModule",{value:!0}),i.$inject=["$q","$ocLazyLoad"],t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(t,i){return t(function(t){n.e(11).then(function(){(function(e){var e=n(1384);i.load({name:e.name}),t(e)}).call(this,n(42)(e))}.bind(null,n)).catch(n.oe)})}Object.defineProperty(t,"__esModule",{value:!0}),i.$inject=["$q","$ocLazyLoad"],t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(t,i){return t(function(t){n.e(7).then(function(){(function(e){var e=n(1388);i.load({name:e.name}),t(e)}).call(this,n(42)(e))}.bind(null,n)).catch(n.oe)})}Object.defineProperty(t,"__esModule",{value:!0}),i.$inject=["$q","$ocLazyLoad"],t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e,t,n){e.state(t.ACCOUNT_DOCUMENTS_STATEMENTS,{url:"/statements",data:{requiresAuth:!0,parentNavigation:n.ACTION_METHODS.GO_BACK,requiresLevel2Auth:!0},title:"global.metaTitles.account_documents.statements",component:"accountStatements"}).state(t.ACCOUNT_DOCUMENTS_TAX_RECEIPTS,{url:"/receipts",data:{requiresAuth:!0,parentNavigation:n.ACTION_METHODS.GO_BACK},title:"global.metaTitles.account_documents.tax",component:"taxReceipts"}).state(t.ACCOUNT_DOCUMENTS_INVESTMENTS,{url:"/reports",data:{requiresAuth:!0,parentNavigation:n.ACTION_METHODS.GO_BACK},title:"global.metaTitles.account_documents.investments",component:"investmentReports"}).state(t.ACCOUNT_DOCUMENTS_OTHER,{url:"/other",data:{requiresAuth:!0,parentNavigation:n.ACTION_METHODS.GO_BACK},title:"global.metaTitles.account_documents.other",component:"otherDocuments"})}Object.defineProperty(t,"__esModule",{value:!0}),i.$inject=["$stateProvider","stateConstants","menuConstants"],t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e,t,n){e.state(t.USER_SETTINGS_GENERAL,{url:n.COMPONENT.GENERAL.URL,title:"global.metaTitles.settings.general",header:"userSettings.nav.general",component:"tngSettingsGeneral"}).state(t.USER_SETTINGS_ORANGE_ALERTS,{url:n.COMPONENT.ORANGE_ALERTS.URL,title:"global.metaTitles.settings.alerts",header:"userSettings.nav.orange_alerts",component:"tngSettingsOrangeAlerts"}).state(t.USER_SETTINGS_EXTERNAL_ACCOUNTS,{url:n.COMPONENT.EXTERNAL_ACCOUNTS.URL,title:"global.metaTitles.settings.external",header:"userSettings.nav.external_accounts",component:"tngSettingsExternalAccounts"}).state(t.USER_SETTINGS_ASP,{url:n.COMPONENT.ASP.URL,title:"global.metaTitles.settings.asp",header:"userSettings.nav.automatic_savings_program",component:"tngAutomaticSavingsProgram"}).state(t.USER_SETTINGS_TRANSFER_CONTACTS,{url:n.COMPONENT.TRANSFER_CONTACTS.URL,title:"global.metaTitles.settings.transfer",header:"userSettings.nav.transfer_contacts",component:"tngSettingsTransferContacts"}).state(t.USER_SETTINGS_CONTEST_BONUSES,{url:n.COMPONENT.CONTEST_BONUSES.URL,title:"global.metaTitles.settings.bonuses",header:"userSettings.nav.contest_bonuses",component:"tngSettingsContestBonuses"})}Object.defineProperty(t,"__esModule",{value:!0}),i.$inject=["$stateProvider","stateConstants","UserSettingsConstants"],t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e,t){e.state(t.USER_SETTINGS_SECURITY,{data:{requiresAuth:!0,requiresLevel2Auth:!0},url:"/security",title:"Security Settings",component:"tngSettingsSecurity"}).state(t.USER_SETTINGS_SECURITY_LOGIN_OPTIONS,{url:"/login-options",data:{requiresAuth:!0,parentNavigation:t.MOBILE_NAVIGATION},views:{"page-content@":"tngLoginOptions"}}).state(t.USER_SETTINGS_SECURITY_LOGIN_TOUCH_ID,{url:"/touch-id",data:{requiresAuth:!0,parentNavigation:t.USER_SETTINGS_SECURITY_LOGIN_OPTIONS},title:"Security: Touch ID",views:{"page-content@":"tngTouchId"},params:{returnTo:void 0}}).state(t.USER_SETTINGS_SECURITY_LOGIN_TOUCH_ID_FROM_SIMPLE_SIGN_ON,{url:"/touch-id-sso",data:{requiresAuth:!0,parentNavigation:t.SIMPLE_SIGN_ON_TOUCH_ID},title:"Security: Touch ID",views:{"page-content@":"tngTouchId"},params:{returnTo:void 0}}).state(t.USER_SETTINGS_SECURITY_LOGIN_QUICK_VIEW,{url:"/quick-view",data:{requiresAuth:!0,parentNavigation:t.USER_SETTINGS_SECURITY_LOGIN_OPTIONS},views:{"page-content@":"tngQuickView"}})}Object.defineProperty(t,"__esModule",{value:!0}),i.$inject=["$stateProvider","stateConstants"],t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e,t){e.state(t.FORMS_BANKING,{url:"/banking",data:{requiresAuth:!0},title:"Forms: Banking",component:"tngBanking"}).state(t.FORMS_INVESTMENT,{url:"/investment",data:{requiresAuth:!0},title:"Forms: Investment",component:"tngInvestment"})}Object.defineProperty(t,"__esModule",{value:!0}),i.$inject=["$stateProvider","stateConstants"],t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e,t){e.state(t.DEVICES_SECURITY,{url:"/security",data:{requiresAuth:!0},title:"Devices",component:"tngDevices"}).state(t.DEVICES_ORANGE_SNAPSHOTS,{url:"/devices-orange-snapshots",data:{requiresAuth:!0},title:"Devices: Orange Snapshots",component:"tngDevicesOrangeSnapshots"})}Object.defineProperty(t,"__esModule",{value:!0}),i.$inject=["$stateProvider","stateConstants"],t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e,t){e.state(t.QUICK_VIEW_EYE_VERIFY,{url:"/eye-verify",data:{requiresAuth:!0,parentNavigation:t.QUICK_VIEW_ID_OPTIONS},title:"Security: Instant Access",views:{"page-content@":"tngEyeVerifySettings"}}).state(t.QUICK_VIEW_VOCAL_PASSWORD,{url:"/vocal-password",data:{requiresAuth:!0,parentNavigation:t.QUICK_VIEW_ID_OPTIONS},title:"Security: Id Me First",views:{"page-content@":"tngVocalPasswordSettings"}})}Object.defineProperty(t,"__esModule",{value:!0}),i.$inject=["$stateProvider","stateConstants"],t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n,i,s,a,r,c,d,g,S,f,v,E,p,T,m,C,A,I,O,N,y,b,L,M){var R={};t.deviceReadyDeferred=e.defer(),t.mfpOnSuccessDeferred=e.defer(),t.$$state=s;var D=function(e,t){var n="";n=t.title?e:t.name,document.title=n+" | Tangerine"};t.$on("$stateChangeSuccess",function(e,i,a,o,r){t.previousStateName=o.name,n.scrollTo(0,0),i.url!==f.IGNORE_PAGES.CONTACT&&(s.kvp_previous=s.kvp_current?s.kvp_current:o.url,s.kvp_current=i.url),T.dispatch(_.RouteActions.uiRouteStateChangeSuccess(i,a,o,r))}),(0,l.default)(i),(0,u.default)(i),i.onBefore({},function(){if(g.isInit())return!0;var n=e.defer();return g.subscribe(t,v.APPLICATION_INIT,function(){n.resolve()}),n.promise}),i.onBefore({to:function(e){return!!e.defaultSubstate}},function(e){return e.router.stateService.target(e.to().defaultSubstate)}),i.onStart({to:"**"},function(){R=c.search()}),i.onSuccess({to:"**"},function(){var e=c.search(),t=(0,o.default)(R,e);c.search(t)}),i.onSuccess({},function(e){var t=e.to();m(t.title).then(function(e){D(e,t)}).catch(function(e){D(e,t)})}),i.onSuccess({},function(e){if(e.targetState){var t=e.targetState().state().data;t&&!t.skipAnalyticsOnSuccess?d.sendAction(f.AVAILABLE_EVENTS.STATE_CHANGE_SUCCESS,s.current.name):r.debug("skipped $transitions.onSuccess analytics"),s.current.data||(s.current.data={}),s.current.data.isApplicationRoot=A.isAuthenticated()&&s.current.name===C.ACCOUNT_SUMMARY}}),"undefined"!=typeof WL?(0,h.default)(r,d,g,S,N,y,f,E,t,b,L,a,A,M,O):(g.initialize(),t.appInitialized=!0),i.onEnter({},function(e,t){d.sendAction(f.AVAILABLE_EVENTS.STATE_CHANGE_START,t.$$state().name,t.$$state().params),I.stepUpInProgress()&&(O.cancelLogin(),I.onStepUpCancelled())}),i.onError({},function(e){S.processError({},E.AVAILABLE_EVENTS.STATE_CHANGE_ERROR,e.error())}),i.onFinish({from:C.ACCOUNT_SUMMARY,to:C.LOGIN},function(e){var t=e.targetState().params();return!A.isAuthenticated()||!!t.skipAnonCheck||s.go(C.ACCOUNT_SUMMARY,{reload:!1,location:"replace"})}),i.onStart({to:C.EMT_RECEIVE_MONEY_INTERAC},function(e){t.currentTargetState=e.targetState()}),i.onStart({to:C.EMT_RECEIVE_MONEY_CLIENT},function(e){t.currentTargetState=e.targetState()}),i.onStart({to:C.EMT_RECEIVE_MONEY_STANDARD},function(){A.isAuthenticated()&&A.logout(!1)}),p.init()}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),o=i(a),r=n(510),l=i(r),c=n(511),u=i(c),d=n(512),h=i(d),_=n(57);s.$inject=["$q","$rootScope","$window","$transitions","$state","$cookies","$log","$location","AnalyticsService","AppStateService","ErrorService","analyticsConstants","appStateConstants","errorConstants","ExternalLinkService","$ngRedux","$translate","stateConstants","AuthService","StepUpService","LoginMFPService","NativeService","ConfigDataService","EnvironmentService","StorageService","$timeout"],t.default=s,e.exports=t.default},function(e,t,n){"use strict";function i(e){var t={to:function(e){return e.data&&(e.data.requiresAuth||e.data.requiresLevel2Auth)}},n=function(e,t,n,i){if(n&&n.isMock())return null;if(!t.isAuthenticated())return e.router.stateService.target(i.LOGIN,void 0,{location:!1,reload:!0});if(n&&n.isNative()){var s=e.to();if(s.data&&s.data.requiresLevel2Auth)return e.injector().get("StepUpService").requestLevel2()}return null},i=function(e){var t=e.injector().get("SessionService"),i=e.injector().get("EnvironmentService"),s=e.injector().get("stateConstants");return t.hasInit()||i.isNative()||i.isMock()?n(e,t,i,s):t.initSession().then(function(){return n(e,t,i,s)})};e.onBefore(t,i,{priority:10})}Object.defineProperty(t,"__esModule",{value:!0}),i.$inject=["$transitions"],t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e){var t={to:function(e){return e.data&&e.data.requiresAnon}},n=function(e,t,n,i){var s=e.targetState(),a=s.params(),o=a.skipAnonCheck;return n&&n.isMock()?null:t.isAuthenticated()&&!o?e.router.stateService.target(i.ACCOUNT_SUMMARY):null},i=function(e){var t=e.injector().get("SessionService"),i=e.injector().get("EnvironmentService"),s=e.injector().get("stateConstants");return t.hasInit()||i.isNative()||i.isMock()?n(e,t,i,s):t.initSession().then(function(){return n(e,t,i,s)})};e.onBefore(t,i,{priority:10})}Object.defineProperty(t,"__esModule",{value:!0}),i.$inject=["$transitions"],t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e,t,n,i,s,a,o,r,l,c,u,d,h,_,g){var S=e,f=!1,v=!1,E=!1,p={wlConnectOnSuccess:function(){v=!0,E=!1,S.log("LN mfpInterface wlConnectOnSuccess"),t.sendAction(o.AVAILABLE_EVENTS.WL_CONNECTION_SUCCESS,"success"),l.mfpOnSuccessDeferred.resolve(),S.log("mfpInterface Fetching ConfigData From Service and setting to native"),a.getConfig().then(function(e){S.log("mfpInterface Fetching ConfigData From Service Successful"),s.setDefaultValuesToNative(e)});try{window.AppVersion=WL.Client.getAppProperty(WL.AppProperty.APP_VERSION),window.AppDeviceModel=c.getDeviceModel(),S.log("App/device info updated",window.AppVersion,window.AppDeviceModel),u.getItem(u.storageConstants.KEYS.ANALYTICS_ID).then(function(e){window.AppAnalyticsId=d.get("gtmok")||e,window.AppAnalyticsId||(window.AppAnalyticsId=""+Math.ceil(1e3*Math.random())+(new Date).getTime()),u.setItem(u.storageConstants.KEYS.ANALYTICS_ID,window.AppAnalyticsId),S.log("App analytics id updated",window.AppAnalyticsId)}).finally(function(){var e=c.get("googleTagManagerKeyMobile");e&&window.gtmInitFn&&window.gtmInitFn(window,document,"script","dataLayer",e)})}catch(e){}},wlConnectOnFailure:function(){E=!1,S.log("LN mfpInterface wlConnectOnFailure"),i.processError({},r.AVAILABLE_EVENTS.WL_CONNECTION_FAILURE,"worklight connection failure")},wlLostConnection:function(){S.log("LN mfpInterface wlLostConnection"),i.processError({},r.AVAILABLE_EVENTS.WL_CONNECTION_LOST,"worklight connection lost")}},T=function(){WL.Client.connect({onSuccess:p.wlConnectOnSuccess,onFailure:p.wlConnectOnFailure})},m={onSuccess:function(){WL.Logger.config({level:"fatal",stacktrace:!0,"tag.level":!0,"tag.pkg":!0,capture:!1,analyticsCapture:!1,autoSendLogs:!1}),WL.Logger.off(),f=!0,S.log("LN mfpInterface MFP Handler onSuccess"),WL.Client.addGlobalHeader("Cache-Control","no-store,no-cache"),S.log("LN Attempt to Connection WL Client"),T(),WL.App.sendActionToNative("closeSplashScreen"),WL.App.sendActionToNative("cmdSecureApp",{}),l.deviceReadyDeferred.resolve(),n.initialize()},onFailure:function(){S.log("LN mfpInterface MFP Handler onFailure")},onConnectionFailure:function(){S.log("LN mfpInterface MFP Handler onConnectionFailure")}},C={connectOnStartup:!1,logger:{enabled:!1,level:"debug",stringify:!0,pretty:!1,tag:{level:!1,pkg:!0},whitelist:[],blacklist:[]},analytics:{enabled:!1},onSuccess:m.onSuccess,onFailure:m.onFailure,onConnectionFailure:m.onConnectionFailure};document.addEventListener("resume",function(){g.isInsideLoginOptionFlow()||g.initTriggerChallengeHandler().then(function(){WL.Client.updateUserInfo({onSuccess:function(e){S.log("WL: updated user info after resume",e),_(function(){!WL.Client.isUserAuthenticated("Level1Realm")&&h.isAuthenticated()&&h.logout(!0,!0)},200)},onFailure:function(e){_(function(){S.log("WL: could not get user info on resume",e)},200)}})})}),document.addEventListener(WL.Events.WORKLIGHT_IS_CONNECTED,function(){S.log("WL: Worklight is connected"),l.mfpOnSuccessDeferred.resolve()},!1),document.addEventListener(WL.Events.WORKLIGHT_IS_DISCONNECTED,function(){S.log("WL: Worklight is disconnected"),!f||v||E||(E=!0,setTimeout(function(){T()}))},!1),S.log("mfpInterface Init WL Client"),WL.Client.init(C)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(){return{type:S.RELOAD_ACTIVE_CHAT,payload:{}}}function s(e,t){return{type:S.START_CHAT,payload:{isRequiredAuth:e,chatProductSelection:t}}}function a(){return{type:S.TOGGLE_CHAT_WITH_US_MODAL}}function o(){return{type:S.TOGGLE_CONFIRMATION_STOP_CHAT_MODAL}}function r(e){return{type:S.CHANGE_CHAT_STATE,payload:{chatConnectionState:e}}}function l(){return{type:S.EXIT_CHAT,payload:{}}}function c(){return{type:S.TOGGLE_CHAT_WINDOW_MINI}}function u(){return{type:S.TOGGLE_CHAT_WINDOW_DOCK}}function d(){return{type:S.GO_TO_SIGNIN}}function h(){return{type:S.TOGGLE_SCREEN_SHARING}}function _(e){return{type:S.SET_CHAT_AVAILABILITY,payload:{isChatWithUsAvailable:e}}}function g(e){return{type:S.RESTORE_STATE,payload:{stateToRestore:e}}}Object.defineProperty(t,"__esModule",{value:!0}),t.reloadActiveChat=i,t.startChat=s,t.toggleChatWithUsModal=a,t.toggleConfirmationStopChatModal=o,t.changeChatState=r,t.exitChat=l,t.minifyChatWindow=c,t.dockChatWindow=u,t.goToSignin=d,t.toggleScreenSharing=h,t.setChatAvailability=_,t.restoreState=g;var S=n(30)},function(e,t,n){"use strict";function i(){return{type:l.TOGGLE_CALL_YOU_MODAL}}function s(e){return{type:l.SET_CALL_YOU_AVAILABILITY,payload:{isCallYouAvailable:e}}}function a(){return{type:l.STOP_CALL_YOU}}function o(){return{type:l.TOGGLE_CALL_YOU_CONFORMATION_MODAL}}function r(){return{type:l.TOGGLE_CALL_YOU_ERROR_MODAL}}Object.defineProperty(t,"__esModule",{value:!0}),t.toggleCallYouModal=i,t.setCallYouAvailability=s,t.stopCallYou=a,t.toggleCallYouConformationModal=o,t.toggleCallYouErrorModal=r;var l=n(30)},function(e,t,n){"use strict";function i(){return{type:r.TOGGLE_CALL_US_MODAL}}function s(e){return{type:r.SET_CALL_US_AVAILABILITY,payload:{isCallUsAvailable:e}}}function a(){return{type:r.STOP_CALL_US}}function o(){return{type:r.TOGGLE_CALL_US_ERROR_MODAL}}Object.defineProperty(t,"__esModule",{value:!0}),t.toggleCallUsModal=i,t.setCallUsAvailability=s,t.stopCallUs=a,t.toggleCallUsErrorModal=o;var r=n(30)},function(e,t,n){"use strict";function i(){return{type:s.TOGGLE_CONTACT_US_MENU}}Object.defineProperty(t,"__esModule",{value:!0}),t.toggleContactUsMenu=i;var s=n(30)},function(e,t,n){"use strict";function i(){return{type:s.TOGGLE_MAIN_NAV_MENU}}Object.defineProperty(t,"__esModule",{value:!0}),t.toggleMainNavMenu=i;var s=n(30)},function(e,t,n){"use strict";function i(e,t,n,i){return{type:s.UI_ROUTE_STATE_CHANGE_SUCCESS,payload:{toState:e,toParams:t,fromState:n,fromParams:i}}}Object.defineProperty(t,"__esModule",{value:!0}),t.uiRouteStateChangeSuccess=i;var s=n(30)},function(e,t,n){"use strict";function i(e,t,n,i,s,o,r){e.addPart("apped776693273843db",-1),t.useLoader("$translatePartialLoader",{urlTemplate:"assets/i18n/strings/{part}/{lang}.json"}),t.forceAsyncReload(!0),t.usePostCompiling(!0),t.useLocalStorage(),t.useInterpolation("TangerineInterpolator"),t.useSanitizeValueStrategy("sce"),i.localeLocationPattern("assets/i18n/locale/angular-locale_{{locale}}.js"),a.default.updateLocale("fr-ca",{monthsShort:"janv._févr._mars_avr._mai_juin_juill._août_sept._oct._nov._déc.".split("_")}),o.debugEnabled(r.DEBUG_ENV),window.AppBuildTimestamp=r.BUILD_TIME,n.classNameFilter(/^(?:(?!ng-animate-disabled).)*$/);var l=function(e){var t=[],n=r.CONFIG;return n.apiUrl&&t.push(n.apiUrl),n.insights&&n.insights.apiUrl&&t.push(n.insights.apiUrl),{request:function(n){try{var i=n.headers;if(!i||i[e.DYNATRACE_HEADERS.SERVICE_URL]||i[e.DYNATRACE_HEADERS.PAGE])return n;var s=void 0;if(t.forEach(function(e){!s&&n.url.startsWith(e)&&(s=n.url.substring(e.length))}),s){i[e.DYNATRACE_HEADERS.SERVICE_URL]=s;var a=e.getCurrentPageView();a&&(i[e.DYNATRACE_HEADERS.PAGE]=a)}}catch(e){}return n}}};s.interceptors.push(["AnalyticsService",l])}Object.defineProperty(t,"__esModule",{value:!0});var s=n(55),a=function(e){return e&&e.__esModule?e:{default:e}}(s);i.$inject=["$translatePartialLoaderProvider","$translateProvider","$animateProvider","tmhDynamicLocaleProvider","$httpProvider","$logProvider","buildConstants"],t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function s(){return(0,l.createLogger)({level:"info",collapsed:!0})}function a(e,t){e.createStoreWith(u.default,t.DEBUG_ENV?[r.default,s()]:[r.default])}Object.defineProperty(t,"__esModule",{value:!0});var o=n(521),r=i(o),l=n(522),c=n(527),u=i(c);a.$inject=["$ngReduxProvider","buildConstants"],t.default=a,e.exports=t.default},,,,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(528),a=n(532),o=i(a),r=n(533),l=i(r),c=n(534),u=i(c),d=n(535),h=i(d),_=n(536),g=i(_),S=n(537),f=i(S),v=(0,s.combineReducers)({chatWithUs:o.default,callYou:l.default,callUs:u.default,contactUs:h.default,mainNavMenu:g.default,routerState:f.default});t.default=v,e.exports=t.default},,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(35),s=function(e){return e&&e.__esModule?e:{default:e}}(i),a=n(30),o={isChatWithUsModalOpen:!1,isScreenSharing:!1,isChatWindowOpen:!1,isChatWindowMinified:!1,isChatWindowDocked:!1,isChatWithUsAvailable:!1,isAreYouClientModalOpen:!1,isConfirmStopChatModalOpen:!1,chatProductSelection:null,chatConnectionState:"CONNECTING"},r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1],n=t.type,i=t.payload,r=void 0===i?void 0:i,l=r||{},c=l.isChatWithUsAvailable,u=l.isRequiredAuth,d=l.chatProductSelection,h=l.stateToRestore,_=l.chatConnectionState;switch(n){case a.RELOAD_ACTIVE_CHAT:return(0,s.default)({},e,{isChatWindowOpen:!0,isChatWindowDocked:!1});case a.TOGGLE_CHAT_WITH_US_MODAL:return(0,s.default)({},e,{isChatWithUsModalOpen:!e.isChatWithUsModalOpen});case a.START_CHAT:return u?(0,s.default)({},e,{isAreYouClientModalOpen:!0,isChatWindowOpen:!1,isChatWithUsModalOpen:!1,chatProductSelection:d}):(0,s.default)({},e,{isAreYouClientModalOpen:!1,isChatWindowOpen:!0,isChatWithUsModalOpen:!1,isChatWindowMinified:!1,isChatWindowDocked:!1,chatProductSelection:d});case a.TOGGLE_CONFIRMATION_STOP_CHAT_MODAL:return(0,s.default)({},e,{isConfirmStopChatModalOpen:!e.isConfirmStopChatModalOpen});case a.CHANGE_CHAT_STATE:return(0,s.default)({},e,{chatConnectionState:_,isConfirmStopChatModalOpen:!1});case a.EXIT_CHAT:case a.GO_TO_SIGNIN:return(0,s.default)({},e,o);case a.TOGGLE_SCREEN_SHARING:return(0,s.default)({},e,{isScreenSharing:!e.isScreenSharing});case a.TOGGLE_CHAT_WINDOW_MINI:return(0,s.default)({},e,{isChatWindowMinified:!e.isChatWindowMinified,isChatWindowDocked:!1});case a.TOGGLE_CHAT_WINDOW_DOCK:return(0,s.default)({},e,{isChatWindowDocked:!e.isChatWindowDocked,isChatWindowMinified:!1});case a.SET_CHAT_AVAILABILITY:return(0,s.default)({},e,{isChatWithUsAvailable:c});case a.RESTORE_STATE:return(0,s.default)({},e,h);default:return e}};t.default=r,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(35),s=function(e){return e&&e.__esModule?e:{default:e}}(i),a=n(30),o={isCallYouModalOpen:!1,isCallYouConfirmationModalOpen:!1,isCallYouErrorModalOpen:!1,isCallYouAvailable:!1},r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1],n=t.type,i=t.payload,r=void 0===i?void 0:i,l=r||{},c=l.isCallYouAvailable;switch(n){case a.TOGGLE_CALL_YOU_MODAL:return(0,s.default)({},e,{isCallYouModalOpen:!e.isCallYouModalOpen});case a.TOGGLE_CALL_YOU_CONFORMATION_MODAL:return(0,s.default)({},e,{isCallYouConfirmationModalOpen:!e.isCallYouConfirmationModalOpen,isCallYouModalOpen:!1});case a.TOGGLE_CALL_YOU_ERROR_MODAL:return(0,s.default)({},e,{isCallYouModalOpen:!1,isCallYouErrorModalOpen:!0});case a.STOP_CALL_YOU:return(0,s.default)({},e,o);case a.SET_CALL_YOU_AVAILABILITY:return(0,s.default)({},e,{isCallYouAvailable:c});default:return e}};t.default=r,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(35),s=function(e){return e&&e.__esModule?e:{default:e}}(i),a=n(30),o={isCallUsModalOpen:!1,isCallUsErrorModalOpen:!1,isCallUsAvailable:!1},r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1],n=t.type,i=t.payload,r=void 0===i?void 0:i,l=r||{},c=l.isCallUsAvailable;switch(n){case a.TOGGLE_CALL_US_MODAL:return(0,s.default)({},e,{isCallUsModalOpen:!e.isCallUsModalOpen});case a.TOGGLE_CALL_US_ERROR_MODAL:return(0,s.default)({},e,{isCallUsModalOpen:!1,isCallUsErrorModalOpen:!0});case a.STOP_CALL_US:return(0,s.default)({},e,o);case a.SET_CALL_US_AVAILABILITY:return(0,s.default)({},e,{isCallUsAvailable:c});default:return e}};t.default=r,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(35),s=function(e){return e&&e.__esModule?e:{default:e}}(i),a=n(30),o={isContactUsMenuOpen:!1},r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;switch(arguments[1].type){case a.TOGGLE_CONTACT_US_MENU:return(0,s.default)({},e,{isContactUsMenuOpen:!e.isContactUsMenuOpen});default:return e}};t.default=r,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(35),s=function(e){return e&&e.__esModule?e:{default:e}}(i),a=n(30),o={isMainNavMenuOpen:!1},r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;switch(arguments[1].type){case a.TOGGLE_MAIN_NAV_MENU:return(0,s.default)({},e,{isMainNavMenuOpen:!e.isMainNavMenuOpen});default:return e}};t.default=r,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(30),s={toState:{},toParams:{},fromState:{},fromParams:{}},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];return t.type!==i.UI_ROUTE_STATE_CHANGE_SUCCESS?e:t.payload};t.default=a,e.exports=t.default},function(e,t,n){"use strict";function i(e,t){t.idle(960),t.timeout(60),e.interval(1200)}Object.defineProperty(t,"__esModule",{value:!0}),i.$inject=["KeepaliveProvider","IdleProvider"],t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e,t,n){e.watch(),t.$on("Keepalive",function(){n.debug("pinging keepalive URL")}),t.$on("KeepaliveResponse",function(e,t,i){n.debug("keepalive response:",e,t,i)}),t.$on("IdleStart",function(){n.debug("user has gone idle")}),t.$on("IdleWarn",function(e,t){n.debug("time until auto-logout:",t)}),t.$on("IdleInterrupt",function(){}),t.$on("IdleEnd",function(){n.debug("user is back from idle")}),t.$on("IdleTimeout",function(){n.debug("logging user out")})}Object.defineProperty(t,"__esModule",{value:!0}),i.$inject=["Idle","$rootScope","$log"],t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e,t){/Android [4-6]/.test(e.navigator.appVersion)&&e.addEventListener("resize",function(){"INPUT"!==document.activeElement.tagName&&"TEXTAREA"!==document.activeElement.tagName||t(function(){document.activeElement.scrollIntoViewIfNeeded()})})}Object.defineProperty(t,"__esModule",{value:!0}),i.$inject=["$window","$timeout"],t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(542),a=i(s),o=n(319),r=i(o),l=n(595),c=i(l),u=n(609),d=i(u),h=n(669),_=i(h),g=n(677),S=i(g),f=n(684),v=i(f),E=n(690),p=i(E),T=n(695),m=i(T),C=n(756),A=i(C),I=n(760),O=i(I),N=n(765),y=i(N),b=n(770),L=i(b),M=n(773),R=i(M),D=n(779),P=i(D),$=n(791),U=i($),k=n(796),w=i(k),B=n(800),F=i(B),G=n(804),V=i(G),x=n(809),H=i(x),Y=n(812),q=i(Y),W=n(816),j=i(W),K=n(819),Q=i(K),z=n(822),X=i(z),Z=n(826),J=i(Z),ee=n(830),te=i(ee),ne=n(834),ie=i(ne),se=n(838),ae=i(se),oe=n(842),re=i(oe),le=n(846),ce=i(le),ue=n(850),de=i(ue),he=n(852),_e=i(he),ge=n(856),Se=i(ge),fe=n(860),ve=i(fe),Ee=n(863),pe=i(Ee),Te=n(867),me=i(Te),Ce=n(871),Ae=i(Ce),Ie=n(872),Oe=i(Ie),Ne=n(875),ye=i(Ne),be=n(876),Le=i(be),Me=n(877),Re=i(Me),De=n(878),Pe=i(De),$e=n(879),Ue=i($e),ke=n(880),we=i(ke),Be=n(881),Fe=i(Be),Ge=n(882),Ve=i(Ge),xe=n(883),He=i(xe),Ye=n(884),qe=i(Ye),We=n(885),je=i(We),Ke=n(886),Qe=i(Ke),ze=n(888),Xe=i(ze),Ze=n(889),Je=i(Ze),et=angular.module("tangerine.app.core.components",[r.default.name,a.default.name,c.default.name,d.default.name,P.default.name,_.default.name,S.default.name,v.default.name,p.default.name,m.default.name,A.default.name,O.default.name,y.default.name,L.default.name,R.default.name,U.default.name]).component("tngErrorMessage",w.default).component("tngWarningMessage",F.default).component("tngMainNav",V.default).component("tngSubNav",H.default).component("tngTertiaryNav",q.default).component("tngIdleNotice",J.default).component("tngAppConfirmExit",te.default).component("tngConnectionLost",ae.default).component("tngLoadingSpinner",X.default).component("tngPageFlowControls",j.default).component("tngPageFlowDialogFooter",Q.default).component("tngConfirmExit",ie.default).component("tngLoadingInProgress",re.default).component("tngLoadingDone",ce.default).component("tngProgressBar",pe.default).component("tngProgressBarButtons",me.default).component("tngSwitch",Se.default).component("tngTileItem",ve.default).component("tngStickyButton",_e.default).directive("tngNavList",de.default).directive("applicationTheme",Oe.default).directive("autofocus",ye.default).directive("actionableId",Ae.default).directive("tngClickOutside",Le.default).directive("tngClickOutsideForNavMenu",Re.default).directive("tngVisitorSite",qe.default).directive("maxlength",Ve.default).directive("numericInput",He.default).directive("tngFocus",Pe.default).directive("tngClick",Fe.default).directive("tngIgnoreMouseWheel",Ue.default).directive("tngListWithFocusableElements",we.default).directive("pinInput",je.default).directive("nativeInputScroll",Qe.default).directive("tngAbsoluteHref",Xe.default).directive("tngBindHtml",Je.default);t.default=et,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(543),a=i(s),o=n(547),r=i(o),l=n(551),c=i(l),u=n(555),d=i(u),h=n(559),_=i(h),g=n(563),S=i(g),f=n(565),v=i(f),E=n(569),p=i(E),T=n(573),m=i(T),C=n(577),A=i(C),I=n(581),O=i(I),N=n(585),y=i(N),b=n(589),L=i(b),M=n(593),R=i(M),D=n(208),P=i(D),$=n(594),U=i($),k=angular.module("tangerine.app.core.components.tileList",[]).component("tngTileList",a.default).component("tngAccountTile",r.default).component("tngAccountTileRif",c.default).component("tngAccountTileBeneficiary",d.default).component("tngEffectiveDateTile",m.default).component("tngTermOptionTile",A.default).component("tngTextTile",_.default).component("tngDateTile",v.default).component("tngAmountTile",p.default).component("tngAddressTile",O.default).component("tngExternalAccountTile",y.default).component("tngParseHtmlTile",S.default).component("tngStartEndDateTile",L.default).constant("tngTileListConstants",R.default).service("DateService",P.default).factory("MultiLineDateTile",U.default);t.default=k,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(544),a=i(s),o=n(545),r=i(o);n(546);var l={template:a.default,controller:r.default,bindings:{tileData:"<",tileType:"<",allActionable:"<",allDisabled:"<",isActionable:"&?",isDisabled:"&?",isHidden:"&?",onTileClick:"&?",singleSelect:"<",multiSelect:"<",selectedTiles:"=?",shortTile:"<?",virtualHeight:"<?",numbered:"<",iconed:"<",icon:"<",customScope:"<",addressTileId:"@?",hideArrow:"<?",tileListId:"@?"}};t.default=l,e.exports=t.default},function(e,t){e.exports=' <div class="c-tile-list" ng-attr-id="{{ $ctrl.tileListId }}"> <div vs-repeat ng-style="$ctrl.virtualScrollStyles" class="c-tile-list__virtual-repeat"> <div class="c-tile" ng-repeat="data in $ctrl.tileData" ng-click="$ctrl.tileClicked($index, data)" ng-hide="$ctrl.tileHidden($index, data)" ng-class="{\n        \'c-tile--disabled\': $ctrl.tileDisabled($index, data),\n        \'c-tile--selected\': $ctrl.isTileSelected($index, data),\n        \'c-tile--cursor-pointer\': $ctrl.tileActionable($index, data),\n        \'c-tile--no-hover\': $ctrl.isMobile\n      }"> <div ng-attr-id="tile-id-{{ $index }}" ng-class="$ctrl.shortTile ?\n         ($ctrl.tileType === $ctrl.tileListConstants.TILE_TYPE.date\n          ? \'panel c-tile__content--short-date\' : \'panel c-tile__content--short\')\n          : \'panel c-tile__content\'"> <span ng-if="$ctrl.numbered" class="c-tile__number"> <div class="numberHover">{{ ::$index + 1 }}</div> </span> <div ng-if="$ctrl.iconed" class="c-tile__icon"> <tng-category-icon icon="{{$ctrl.icon}}" discount="" discount-size="" color="\'#f58426\'" size="50"> </tng-category-icon> </div> <tng-text-tile ng-if="$ctrl.tileType == $ctrl.tileListConstants.TILE_TYPE.text" tile-data="data"> </tng-text-tile> <tng-effective-date-tile ng-if="$ctrl.tileType == $ctrl.tileListConstants.TILE_TYPE.effectiveDate" tile-data="data"> </tng-effective-date-tile> <tng-term-option-tile ng-if="$ctrl.tileType == $ctrl.tileListConstants.TILE_TYPE.termOption" tile-data="data"> </tng-term-option-tile> <tng-parse-html-tile custom-scope="$ctrl.customScope" ng-if="$ctrl.tileType == $ctrl.tileListConstants.TILE_TYPE.parseHtml" tile-data="data"> </tng-parse-html-tile> <tng-address-tile ng-if="$ctrl.tileType == $ctrl.tileListConstants.TILE_TYPE.address" ng-attr-id="{{ $ctrl.addressTileId }}" tile-data="data"> </tng-address-tile> <tng-account-tile ng-if="$ctrl.tileType == $ctrl.tileListConstants.TILE_TYPE.account" tile-data="data" class="short-tile" short-tile="$ctrl.shortTile"> TILE_TYPE.account </tng-account-tile> <tng-account-tile-rif ng-if="$ctrl.tileType == $ctrl.tileListConstants.TILE_TYPE.accountRIF" tile-data="data"> </tng-account-tile-rif> <tng-account-tile-beneficiary ng-if="$ctrl.tileType == $ctrl.tileListConstants.TILE_TYPE.accountBeneficiary" tile-data="data"> </tng-account-tile-beneficiary> <tng-date-tile ng-if="$ctrl.tileType == $ctrl.tileListConstants.TILE_TYPE.date" tile-data="data" short-tile="$ctrl.shortTile"> </tng-date-tile> <tng-amount-tile ng-if="$ctrl.tileType == $ctrl.tileListConstants.TILE_TYPE.amount" tile-index="$index" tile-data="data"> TILE_TYPE.amount </tng-amount-tile> <tng-external-account-tile ng-if="$ctrl.tileType == $ctrl.tileListConstants.TILE_TYPE.externalAccount" tile-data="data" class="short-tile" short-tile="$ctrl.shortTile"> </tng-external-account-tile> <tng-start-end-date-tile ng-if="$ctrl.tileType == $ctrl.tileListConstants.TILE_TYPE.startEndDate" tile-data="data" class="short-tile"> </tng-start-end-date-tile> <span ng-show="!$ctrl.hideArrow && $ctrl.tileActionable($index, data) && $ctrl.tileType !== $ctrl.tileListConstants.TILE_TYPE.effectiveDate" class="c-tile__arrow icon-rightarrow large"> </span> </div> </div> </div> </div> '},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n){(0,a.default)(this,e),this.tileListConstants=t,this.isMobile=n.isTouchDevice()}return(0,r.default)(e,[{key:"$onInit",value:function(){this.tileData||(this.tileData=[]),Array.isArray(this.tileData)||(this.tileData=[this.tileData]),this.tileType||(this.tileType=this.tileListConstants.TILE_TYPE.text),this.allActionable||(this.allActionable=!1),this.allDisabled||(this.allDisabled=!1),Array.isArray(this.selectedTiles)||(this.selectedTiles=[]),this.shortTile=!1,this.virtualScrollStyles={},this.virtualHeight&&(this.virtualScrollStyles.height=this.virtualHeight+"px")}},{key:"tileClicked",value:function(e,t){if(!this.allDisabled&&!this.tileDisabled(e,t)){if(this.singleSelect||this.multiSelect){var n=this.selectedTiles.indexOf(t);n>=0?this.singleSelect&&this.onTileClick||this.selectedTiles.splice(n,1):(this.singleSelect&&(this.selectedTiles=[t]),this.multiSelect&&this.selectedTiles.push(t))}this.onTileClick&&this.onTileClick({index:e,tileData:t,selectedTiles:this.selectedTiles})}}},{key:"tileDisabled",value:function(e,t){return!!this.allDisabled||!!this.isDisabled&&this.isDisabled({index:e,tileData:t})}},{key:"tileHidden",value:function(e,t){return!!this.isHidden&&this.isHidden({index:e,tileData:t})}},{key:"tileActionable",value:function(e,t){return!!this.allActionable||!!this.isActionable&&this.isActionable({index:e,tileData:t})}},{key:"isTileSelected",value:function(e,t){return this.tileActionable(e,t)&&-1!==this.selectedTiles.indexOf(t)}}]),e}();l.$inject=["tngTileListConstants","EnvironmentService"],t.default=l,e.exports=t.default},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(548),a=i(s),o=n(549),r=i(o);n(550);var l={template:a.default,controller:r.default,bindings:{tileData:"<",shortTile:"<?"}};t.default=l,e.exports=t.default},function(e,t){e.exports='<div class="c-account-tile"> <div class="c-account-tile__description body--4"> {{ $ctrl.tileData.tileDescription | translate }} </div> <h3 ng-class="{ \'c-account-tile__middle-title\' : $ctrl.shortTile }"> <span class="body"> {{$ctrl.accountData.accountName || $ctrl.displayName|| $ctrl.tileData.date || $ctrl.accountData.description}} </span> <span class="margin__l--fix1"> {{ $ctrl.tileData.accountNumber || $ctrl.accountData.display_name || $ctrl.accountData.number | maskNumber }} </span> </h3> <div class="body--4 top-margin-small" ng-class="{ \'margin__t--fix1\' : !$ctrl.shortTile }"> <span ng-if="$ctrl.accountData.account_number">#{{ $ctrl.accountData.account_number }}</span> <span ng-if="$ctrl.showAmount()"> {{ $ctrl.displayAmount | currency }} </span> <span ng-if="$ctrl.accountData.amountText ||\n      $ctrl.accountData.currency_type"> {{ $ctrl.accountData.amountText || $ctrl.currencyType | translate }} </span> <div ng-if="$ctrl.accountData.bottomText" class="c-account-tile__description top-margin-small max-text-width"> {{ $ctrl.accountData.bottomText }} </div> </div> <div class="margin__t--fix1" ng-if="$ctrl.accountData.plan_type"> <div class="c-account-tile__plan-title" ng-if="$ctrl.tileData.planTitle"> {{ $ctrl.accountData.planTitle }} </div> <div class="body--2"> <div class="max-text-width"> <span ng-if="$ctrl.accountData.plan_type"><strong>{{ $ctrl.accountData.plan_type }}</strong></span> </div> </div> </div> <div class="margin__t--fix1" ng-if="$ctrl.tileData.extraTitle || $ctrl.tileData.extraDescription"> <div class="c-account-tile__description body--4" ng-if="$ctrl.tileData.extraTitle"> {{ $ctrl.tileData.extraTitle }} </div> <div class="body--2" ng-if="$ctrl.tileData.extraDescription"> <div class="body max-text-width"> {{ $ctrl.tileData.extraDescription }} </div> </div> </div> </div> '},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i){(0,a.default)(this,e),this.$log=t,this.accountHelpersService=n,this.CURRENCY_TYPES=i.CURRENCY_TYPES,this.ACCOUNT_TYPES=i.ACCOUNT_TYPES,this.tileData&&this.tileData.data?this.accountData=this.tileData.data:this.accountData=this.tileData,this.accountData.TLOC&&(this.accountData.amount=this.accountData.account_balance),this.displayName="",this.displayAmount=this.firstActualNumber([this.accountData.amount,this.accountData.available_balance,this.accountData.account_balance,this.tileData.account_balance,this.tileData.available_balance])}return(0,r.default)(e,[{key:"$onChanges",value:function(){var e=this;this.accountHelpersService.getDisplayName(this.accountData).then(function(t){e.displayName=t}).catch(function(t){e.$log.error("error getting display name:",t)})}},{key:"showAmount",value:function(){return this.tileData&&angular.isNumber(this.tileData.amount)||this.accountData&&(angular.isNumber(this.accountData.available_balance)||angular.isNumber(this.accountData.account_balance))&&this.shouldDisplayCreditCardAmount()}},{key:"firstActualNumber",value:function(e){return e.find(function(e){return!!e||0===e})}},{key:"shouldDisplayCreditCardAmount",value:function(){return this.accountData.type!==this.ACCOUNT_TYPES.CREDIT_CARD||this.displayAmount>0}},{key:"currencyType",get:function(){return this.accountData.currency_type!==this.CURRENCY_TYPES.CAD?this.accountData.currency_type:""}}]),e}();l.$inject=["$log","AccountHelpersService","accountConstants"],t.default=l,e.exports=t.default},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(552),a=i(s),o=n(553),r=i(o);n(554);var l={template:a.default,controller:r.default,bindings:{tileData:"<",shortTile:"<?"}};t.default=l,e.exports=t.default},function(e,t){e.exports='<div class="c-account-tile-rif"> <div class="c-account-tile-rif__description body--4"> {{ $ctrl.tileData.tileDescription | translate }} </div> <div class="body--2" ng-class="{ \'c-account-tile-rif__middle-title\' : $ctrl.shortTile }"> <span class="body"> {{$ctrl.tileData.accountName || $ctrl.displayName }} </span> <span class="margin__l--fix1"> {{ $ctrl.tileData.accountNumber || $ctrl.accountData.display_name || $ctrl.accountData.number | maskNumber }} </span> </div> <div class="body--4"> <span> {{ $ctrl.firstActualNumber([$ctrl.accountData.amount, $ctrl.accountData.available_balance, $ctrl.accountData.account_balance, $ctrl.tileData.account_balance, $ctrl.tileData.available_balance]) | currency }} </span> </div> <div class="body--4 c-account-tile__description"> <div ng-class="{ \'margin__t--fix1\' : !$ctrl.shortTile }"> <span>{{ ::\'clientOnboarding.gic.accountTileRIF.plan\' | translate }}</span> </div> </div> <div class="body--1" ng-class=""> <strong>{{ ::\'clientOnboarding.gic.accountTileRIF.rspGroup\' | translate }} {{ $ctrl.accountData.plan_type }}</strong> <span>{{ $ctrl.accountData.plan_number}}</span> </div> </div> '},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i){(0,a.default)(this,e),this.$log=t,this.accountHelpersService=n,this.CURRENCY_TYPES=i.CURRENCY_TYPES,this.tileData&&this.tileData.data?this.accountData=this.tileData.data:this.accountData=this.tileData,this.displayName=""}return(0,r.default)(e,[{key:"$onChanges",value:function(){var e=this;this.accountHelpersService.getDisplayName(this.accountData).then(function(t){e.displayName=t}).catch(function(t){e.$log.error("error getting display name for account Tile: ",t)})}},{key:"firstActualNumber",value:function(e){return e.find(function(e){return!!e||0===e})}},{key:"currencyType",get:function(){return this.accountData.currency_type!==this.CURRENCY_TYPES.CAD?this.accountData.currency_type:""}}]),e}();l.$inject=["$log","AccountHelpersService","accountConstants"],t.default=l,e.exports=t.default},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(556),a=i(s),o=n(557),r=i(o);n(558);var l={template:a.default,controller:r.default,bindings:{tileData:"<"}};t.default=l,e.exports=t.default},function(e,t){e.exports='<div class="c-account-tile-beneficiary"> <div class="c-account-tile-beneficiary__info body--2"> <span><strong>{{ $ctrl.tileData.planDescription }}{{ $ctrl.tileData.planId }}</strong></span> </div> </div> '},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(i),a=function e(t){(0,s.default)(this,e),this.$log=t,this.tileData&&this.tileData.data?this.accountData=this.tileData.data:this.accountData=this.tileData,this.displayName=""};a.$inject=["$log"],t.default=a,e.exports=t.default},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(560),a=i(s),o=n(561),r=i(o);n(562);var l={template:a.default,controller:r.default,bindings:{tileData:"<"}};t.default=l,e.exports=t.default},function(e,t){e.exports='<div class="c-text-tile"> <div class="c-text-tile__description body--4" ng-if="$ctrl.tileData.tileDescription"> {{ $ctrl.tileData.tileDescription | translate }} </div> <h3 class="c-text-tile__header" ng-if="$ctrl.tileData.header"> <span ng-bind-html="$ctrl.tileData.header | translate"></span> <tng-help-bubble ng-if="$ctrl.tileData.helpBubble">{{ $ctrl.tileData.helpBubble | translate }}</tng-help-bubble> </h3> <div class="body--2 margin__t--fix1 c-text-tile__subHeader" ng-if="$ctrl.tileData.subHeader"> <div>{{ $ctrl.tileData.subHeader | translate }}</div> </div> <div class="body--2 margin__t--fix1 c-text-tile__date" ng-if="$ctrl.tileData.date"> <div>{{ $ctrl.tileData.date | date }}</div> </div> </div> '},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(i),a=function e(){(0,s.default)(this,e)};a.$inject=[],t.default=a,e.exports=t.default},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(564),s=function(e){return e&&e.__esModule?e:{default:e}}(i),a={controller:s.default,bindings:{customScope:"<",tileData:"<"}};t.default=a,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i){(0,a.default)(this,e),this.$compile=t,this.$element=n,this.$scope=i}return(0,r.default)(e,[{key:"$onInit",value:function(){var e=this;this.$scope.$watch(function(){return e.tileData},function(t){e.$element.html(t&&t.toString());var n=e.customScope||e.$scope;e.$compile(e.$element.contents())(n)})}}]),e}();l.$inject=["$compile","$element","$scope"],t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(566),a=i(s),o=n(567),r=i(o);n(568);var l={template:a.default,controller:r.default,bindings:{tileData:"<",shortTile:"<?"}};t.default=l,e.exports=t.default},function(e,t){e.exports='<div class="c-date-tile"> <h3 ng-if="!$ctrl.showAccountTile" class="margin__t--fix1 c-date-tile__date" id="date-tile-title"> <span class="c-date-tile__pay-on" ng-hide="$ctrl.isNow"> {{::\'global.commonWords.payOn\' | translate}} </span> {{ $ctrl.formatDate }} </h3> <tng-account-tile ng-if="$ctrl.showAccountTile" short-tile="$ctrl.shortTile" tile-data="$ctrl.tileData"></tng-account-tile> <span class="icon-calendar large c-date-tile__icon"></span> </div> '},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(65),a=i(s),o=n(0),r=i(o),l=n(1),c=i(l),u=function(){function e(t,n,i,s){(0,r.default)(this,e),this.$filter=t,this.$translate=n,this.dateService=i,this.LocaleService=s,this.LocaleService.setMomentLocale(),this.isNow=!1}return(0,c.default)(e,[{key:"$onChanges",value:function(){this.isNow=!1,this.tileData?"string"==typeof this.tileData?(this.isNow=!0,this.formatDate=this.$filter("normalizeType")(this.$translate.instant("global.commonWords.now"))):"calendar"in this.tileData&&"function"==typeof this.tileData.calendar?this.formatDate=this.dateService.convertToFormattedMonthDayYear(this.tileData):this.formatDate="Unknown":this.formatDate=""}},{key:"showAccountTile",get:function(){return"object"===(0,a.default)(this.tileData)&&"tileDescription"in this.tileData&&"nickname"in this.tileData&&"bottomText"in this.tileData}}]),e}();u.$inject=["$filter","$translate","DateService","LocaleService"],t.default=u,e.exports=t.default},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(570),a=i(s),o=n(571),r=i(o);n(572);var l={template:r.default,controller:a.default,bindings:{tileData:"<",tileIndex:"<?"}};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n){(0,a.default)(this,e),this.dateConstants=t,this.DateService=n}return(0,r.default)(e,[{key:"$onInit",value:function(){this.tileData.selectedDate&&(this.tileData.selectedStartDate=this.DateService.convertToFormattedMonthDayYear(moment(this.tileData.selectedDate)))}}]),e}();l.$inject=["tngDatePickerConstants","DateService"],t.default=l,e.exports=t.default},function(e,t){e.exports=' <div ng-if="$ctrl.tileData.amount1" class="c-amount-tile"> <div class="c-amount-tile__header">{{ \'billPay.amount\' | translate }}</div> <div class="body--2 margin__t--fix1"> <p class="c-amount-tile__amount1"> {{ $ctrl.tileData.amount1 | currency }} {{ $ctrl.tileData.currency1 }} </p> <p class="c-amount-tile__amount2" ng-if="$ctrl.tileData.amount2"> {{ $ctrl.tileData.amount2 | currency }} {{ $ctrl.tileData.currency2 }} </p> </div> </div> <div ng-if="$ctrl.tileData.header && $ctrl.tileData.subHeader"> <strong>{{ $ctrl.tileData.header | translate }}</strong> <p class="body--2" ng-class="{\'c-amount-tile__ongoing-CC\': $ctrl.tileData.isCCOngoing}">{{ $ctrl.tileData.subHeader | translate }}</p> </div> <div ng-if="$ctrl.tileData.header && $ctrl.tileData.amount !== undefined" class="c-amount-tile"> <div class="tileDescriptionHeader"> {{ $ctrl.tileData.header | translate }} </div> <div class="body--callout c-amount-tile__amount"> <h4>{{ $ctrl.tileData.amount | currency }}</h4> </div> <div ng-if="$ctrl.tileData.date" class="body--3"> <span ng-if="!$ctrl.tileData.date || $ctrl.tileData.date.calendar() === $ctrl.dateConstants.TODAY.calendar()"> {{ \'global.commonWords.now\' | translate }} </span> <span ng-if="$ctrl.tileData.date.calendar() !== $ctrl.dateConstants.TODAY.calendar()" id="tileData.date.title-{{$ctrl.tileIndex}}"> {{$ctrl.tileData.date | date}} </span> </div> <div ng-if="$ctrl.tileData.frequency" class="body--3"> <span ng-if="!$ctrl.tileData.isInfinite"> {{ (\'global.datePicker.frequencies.\' + $ctrl.tileData.frequency.toLowerCase()) | translate }} {{ \'global.commonWords.from\' | translate }} {{$ctrl.tileData.selectedDate | date}} <div ng-if="$ctrl.tileData.selectionMode!=\'INDEFINITE\'"> {{ \'global.commonWords.until\' | translate }} {{$ctrl.tileData.endDate | date}} </div> </span> <span ng-if="$ctrl.tileData.isInfinite"> {{ (\'global.datePicker.frequencies.\' + $ctrl.tileData.frequency.toLowerCase()) | translate }} {{ \'global.commonWords.starting\' | translate}} {{ $ctrl.tileData.selectedStartDate }} {{\'global.billPay.dateTile.ongoing.continueIndefinitelyLabel\' | translate }} </span> </div> </div> <div ng-if="$ctrl.tileData.header && $ctrl.tileData.percent !== undefined" class="c-amount-tile"> <div class="tileDescriptionHeader"> {{ $ctrl.tileData.header | translate }} </div> <div class="body--callout c-amount-tile__amount"> <h4>{{ $ctrl.tileData.percent }} %</h4> </div> </div> '},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(574),a=i(s),o=n(575),r=i(o);n(576);var l={template:a.default,controller:r.default,bindings:{tileData:"<"}};t.default=l,e.exports=t.default},function(e,t){e.exports='<div class="c-effective-date-tile"> <div class="c-effective-date-tile__date"> <div class="body--4 c-account-tile__description"> {{ $ctrl.tileData.tileDescription | translate }} </div> <div class="body--2 margin__t--fix1"> <p> <span ng-if="$ctrl.tileData.label" ng-bind-html="$ctrl.tileData.label | translate"> </span> <span ng-if="!$ctrl.tileData.toBeIssued"> {{ $ctrl.tileData.date ? $ctrl.tileData.date : "" }} </span> <span ng-if="$ctrl.tileData.toBeIssued"> {{\'clientOnboarding.wrapUp.cc.toBeIssued\' | translate}} </span> </p> </div> </div> <span class="icon-calendar large c-effective-date-tile__icon"></span> </div> '},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(i),a=function e(t){(0,s.default)(this,e),this.effectiveDateDisplayFormat=t.DISPLAY_FORMATS.longForm};a.$inject=["tngDatePickerConstants"],t.default=a,e.exports=t.default},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(578),a=i(s),o=n(579),r=i(o);n(580);var l={template:a.default,controller:r.default,bindings:{tileData:"<"}};t.default=l,e.exports=t.default},function(e,t){e.exports='<div class="c-term-option-tile"> <p class="body--4 c-account-tile__description">{{ $ctrl.tileData.header }}</p> <h4 ng-if="$ctrl.tileData.subHeader">{{ $ctrl.tileData.subHeader }}</h4> <h2 class="tangerine" ng-if="$ctrl.tileData.amount"> {{ $ctrl.tileData.amount | currency}} <span ng-if="$ctrl.tileData.USD">{{ ::\'global.currencies.USD\' | translate }}</span> </h2> <h3 ng-if="$ctrl.tileData.USD"> {{ $ctrl.tileData.cadAmount | currency}} <span>{{ ::\'global.currencies.CAD\' | translate }}</span> </h3> </div> '},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(i),a=function e(t){(0,s.default)(this,e),this.$log=t};a.$inject=["$log"],t.default=a,e.exports=t.default},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(582),a=i(s),o=n(583),r=i(o);n(584);var l={template:a.default,controller:r.default,bindings:{tileData:"<"}};t.default=l,e.exports=t.default},function(e,t){e.exports='<div class="c-address-tile"> <div class="c-text-tile__description body--4" ng-if="$ctrl.tileData.tileDescription"> {{ $ctrl.tileData.tileDescription | translate }} </div> <h2 ng-if="$ctrl.tileData.header">{{ $ctrl.tileData.header | translate }}</h2> <div class="body--2"> <p><span ng-if="$ctrl.tileData.suite">{{ $ctrl.tileData.suite }}-</span>{{ $ctrl.tileData.address_line1}}</p> </div> <div ng-if="$ctrl.tileData.address_line2" class="body--2 margin__t--fix1"> <p>{{ $ctrl.tileData.address_line2 }}</p> </div> <div class="body--2 margin__t--fix1"> <p>{{ $ctrl.tileData.city }}, {{ $ctrl.tileData.province }}</p> </div> <div class="body--2 margin__t--fix1"> <p>{{ $ctrl.tileData.postal_code}}</p> </div> <div ng-if="$ctrl.tileData.country !== \'CA\'" class="body--2 margin__t--fix1"> <p>{{ $ctrl.tileData.country}}</p> </div> </div> '},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(i),a=function e(){(0,s.default)(this,e)};a.$inject=[],t.default=a,e.exports=t.default},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(586),a=i(s),o=n(587),r=i(o);n(588);var l={template:a.default,controller:r.default,bindings:{tileData:"<"}};t.default=l,e.exports=t.default},function(e,t){e.exports='<div class="c-external-tile"> <div class="c-external-tile__description body--4"> {{ $ctrl.tileData.tileDescription | translate }} </div> <div class="body--2 c-external-tile__middle-title"> <span class="body"> {{$ctrl.tileData.externalName }} </span> <span class="margin__l--fix1"> {{ $ctrl.tileData.externalNumber }} </span> </div> <div class="body--4"> <span> {{ $ctrl.tileData.externalAddress }} </span> </div> <div ng-if="$ctrl.tileData.planNumber && $ctrl.tileData.planNumber != \'\'"> <div class="c-external-tile__description--secondary body--4"> {{ $ctrl.tileData.planDescription | translate}} </div> <div class="body--2 c-external-tile__middle-title"> <span class="body"> {{ $ctrl.tileData.planNumber }} </span> </div> </div> </div> '},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(i),a=function e(){(0,s.default)(this,e)};a.$inject=[],t.default=a,e.exports=t.default},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(590),a=i(s),o=n(591),r=i(o);n(592);var l={template:a.default,controller:r.default,bindings:{tileData:"<"}};t.default=l,e.exports=t.default},function(e,t){e.exports='<div class="c-start-end-date-tile"> <div class="c-start-end-date-tile__description body--4"> {{ $ctrl.tileData.tileDescription | translate }} </div> <h3 class="margin__t--fix"> <span class="body"> {{ $ctrl.tileData.startDatelabel | translate }} </span> <span> {{ $ctrl.tileData.startDate | date: \'longDate\' }} </span> </h3> <div class="body--4 top-margin-small margin__t--fix"> <span> {{ $ctrl.tileData.endDatelabel | translate }} </span> <span> {{ $ctrl.tileData.endDate | date: \'longDate\' }} </span> </div> </div>'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(i),a=function e(t){(0,s.default)(this,e),this.startEndDateDisplayFormat=t.DISPLAY_FORMATS.longForm};a.$inject=["tngDatePickerConstants"],t.default=a,e.exports=t.default},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={account:"account",amount:"amount",date:"date",parseHtml:"parseHtml",text:"text",effectiveDate:"effectiveDate",accountRIF:"accountRIF",accountBeneficiary:"accountBeneficiary",termOption:"termOption",address:"address",externalAccount:"externalAccount",startEndDate:"startEndDate"},s={TILE_TYPE:i};t.default=s,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function s(){return function(){function e(t,n,i){(0,o.default)(this,e),this.top=t,this.middle=n,this.bottom=i}return(0,l.default)(e,[{key:"toAccountTileObject",value:function(){return{tileDescription:this.top,nickname:this.middle,bottomText:this.bottom}}}]),e}()}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=i(a),r=n(1),l=i(r);s.$inject=[],t.default=s,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(596),a=i(s),o=n(600),r=i(o),l=n(604),c=i(l),u=n(607),d=i(u),h=n(608),_=i(h),g=angular.module("tangerine.app.core.components.helpBubble",[]).component("tngHelpBubble",a.default).component("tngImageWithToolTip",r.default).directive("tngToolTip",c.default).service("ToolTipService",d.default).constant("toolTipConstants",_.default);t.default=g,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(597),a=i(s),o=n(598),r=i(o);n(599);var l={template:r.default,controller:a.default,transclude:!0,bindings:{cssCorrection:"<?"}};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),a=i(s),o=n(0),r=i(o),l=n(1),c=i(l),u=function(){function e(t,n,i){(0,r.default)(this,e),(0,a.default)(this,{$scope:t,$element:n,ToolTipService:i})}return(0,c.default)(e,[{key:"$onInit",value:function(){var e=this.$element[0].querySelector(".js-button"),t=this.$element[0].querySelector(".js-tooltip"),n=angular.element(e).closest(".dialog__content");this.ToolTipService.createToolTip(this.$scope,e,t,this.cssCorrection,n)}}]),e}();u.$inject=["$scope","$element","ToolTipService"],t.default=u,e.exports=t.default},function(e,t){e.exports='<div class="c-help-bubble"> <span id="helpBubble_showBubble" class="c-help-bubble__icon icon-question large js-button"></span> <div class="c-tool-tip js-tooltip"> <div class="c-tool-tip__arrow js-arrow"></div> <div class="c-tool-tip__wrapper js-wrapper" ng-transclude> </div> </div> </div> '},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(601),a=i(s),o=n(602),r=i(o);n(603);var l={template:r.default,controller:a.default,transclude:!0,bindings:{imageSrc:"<",imageAlt:"<"}};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i){(0,a.default)(this,e),this.$scope=t,this.$element=n,this.ToolTipService=i}return(0,r.default)(e,[{key:"$onInit",value:function(){var e=this.$element[0].querySelector(".js-button"),t=this.$element[0].querySelector(".js-tooltip");this.ToolTipService.createToolTip(this.$scope,e,t,this.cssCorrection)}}]),e}();l.$inject=["$scope","$element","ToolTipService"],t.default=l,e.exports=t.default},function(e,t){e.exports='<div class="c-image"></div> <img class="js-button" ng-src="{{ $ctrl.imageSrc }}" alt="{{ $ctrl.imageAlt }}"> <div class="c-tool-tip__image c-tool-tip js-tooltip"> <div class="c-tool-tip__arrow-image js-arrow"></div> <div class="c-tool-tip__wrapper__image c-tool-tip__wrapper js-wrapper" ng-transclude></div> </div> '},function(e,t){},function(e,t,n){"use strict";function i(e,t,n,i,s,c){var u=t.get(a.default);return{restrict:"A",link:function(t,a,d){var h=e(u)(t),_=angular.element(h[0].querySelector("."+s.CSS_CLASSES.WRAPPER));void 0!==d[r]?t.$watch(function(){return d[r]},function(){_.html(d[r])}):void 0!==d[l]?t.$watch(function(){return d[l]},function(){n(d[l]).then(function(e){_.html(c.getTrustedHtml(e))})}):h.html(d[o]),i.createToolTip(t,a[0],h[0])}}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(605),a=function(e){return e&&e.__esModule?e:{default:e}}(s);n(606);var o="tngToolTip",r="tngToolTipDynamic",l="tngToolTipTranslate";i.$inject=["$compile","$templateCache","$translate","ToolTipService","toolTipConstants","$sce"],t.default=i,e.exports=t.default},function(e,t){e.exports='<div class="c-tool-tip"> <div class="c-tool-tip__arrow js-arrow"></div> <div class="c-tool-tip__wrapper js-wrapper"> </div> </div>'},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),a=i(s),o=n(0),r=i(o),l=n(1),c=i(l),u=n(18),d=i(u),h=function(){function e(t,n,i,s){var o=this;(0,r.default)(this,e),(0,a.default)(this,{$document:t,$window:n,toolTipConstants:i,EnvironmentService:s}),this.outsideClickListeners=[],this.resizeListeners=[],t.on("click touchstart",function(e){o._hideAllOtherToolTips(e)}),this.debouncedResize=d.default.debounce(function(){o.resizeListeners.forEach(function(e){e()})},this.toolTipConstants.TIME_VARS.DEBOUNCE_TICK),angular.element(n).on("resize",this.debouncedResize)}return(0,c.default)(e,[{key:"_hideAllOtherToolTips",value:function(e){this.outsideClickListeners.forEach(function(t){t(e)})}},{key:"_addOutsideClickListener",value:function(e){var t=this;return this.outsideClickListeners.push(e),function(){d.default.pull(t.outsideClickListeners,e)}}},{key:"_addResizeListener",value:function(e){var t=this;return this.resizeListeners.push(e),function(){d.default.pull(t.resizeListeners,e)}}},{key:"_getElementOffset",value:function(e){if(!e)return null;var t=e.getBoundingClientRect();if(t.width||t.height||e.getClientRects().length){var n=e.ownerDocument,i=this.$window,s=n.documentElement;return{top:"IMG"===e.tagName?Math.round(t.top+i.pageYOffset-s.clientTop-6):Math.round(t.top+i.pageYOffset-s.clientTop),left:Math.round(t.left+i.pageXOffset-s.clientLeft),width:Math.round(t.width),height:Math.round(t.height)}}return null}},{key:"_clickedInsideDOMTree",value:function(e,t){for(var n=e.target;n;){if(n===t)return!0;n=n.parentNode}return!1}},{key:"_getCoordinatesForPosition",value:function(e,t,n,i){var s=void 0,a=void 0,o=void 0;return e===this.toolTipConstants.POSITIONS.BOTTOM&&(s=t.left+(t.width/2-n.width/2),a=t.top+t.height),e===this.toolTipConstants.POSITIONS.BOTTOM_FULLSIZE&&(s=0,a=t.top+t.height,o=this.$document[0].documentElement.clientWidth),a+=d.default.get(i,e+"."+this.toolTipConstants.ELEMENTS.WRAPPER+".top",0),s+=d.default.get(i,e+"."+this.toolTipConstants.ELEMENTS.WRAPPER+".left",0),s=Math.max(s,0),{left:s,top:a,width:o,"min-width":d.default.get(i,e+"."+this.toolTipConstants.ELEMENTS.WRAPPER+".min-width"),"max-width":d.default.get(i,e+"."+this.toolTipConstants.ELEMENTS.WRAPPER+".max-width")}}},{key:"_determineAutoPosition",value:function(e,t){var n=e.left+(e.width/2-t.width/2),i=this.$document[0].documentElement.clientWidth;return n<0||n+t.width>i?this.toolTipConstants.POSITIONS.BOTTOM_FULLSIZE:this.toolTipConstants.POSITIONS.BOTTOM}},{key:"_resetTooltipClasses",value:function(e,t){e.removeClass(this.toolTipConstants.CSS_CLASSES.POSITION_BOTTOM_FULLSIZE),e.removeClass(this.toolTipConstants.CSS_CLASSES.POSITION_BOTTOM);var n=d.default.get(t,this.toolTipConstants.POSITIONS.BOTTOM+"."+this.toolTipConstants.ELEMENTS.ARROW+".class");n&&e.removeClass(n),e[0].style.cssText=""}},{key:"_showCustomArrow",value:function(e,t){var n=angular.element(e[0].querySelector("."+this.toolTipConstants.CSS_CLASSES.ARROW));this._setElementCoordinates(n,{left:t.left})}},{key:"_setElementCoordinates",value:function(e,t){void 0!==t.top&&e.css(this.toolTipConstants.CSS_ATTRS.TOP,t.top+"px"),void 0!==t.left&&e.css(this.toolTipConstants.CSS_ATTRS.LEFT,t.left+"px"),void 0!==t.width&&e.css(this.toolTipConstants.CSS_ATTRS.WIDTH,t.width+"px"),void 0!==t["min-width"]&&e.css(this.toolTipConstants.CSS_ATTRS.MIN_WIDTH,t["min-width"]+"px")}},{key:"placeTooltipInPositionFn",value:function(e,t,n){if(e&&t){var i=angular.element(t);this._resetTooltipClasses(i,n);var s=this._getElementOffset(e),a=this._getElementOffset(t),o=this._determineAutoPosition(s,a),r=this._getCoordinatesForPosition(o,s,a,n);if(o===this.toolTipConstants.POSITIONS.BOTTOM){i.addClass(this.toolTipConstants.CSS_CLASSES.POSITION_BOTTOM);var l=d.default.get(n,o+"."+this.toolTipConstants.ELEMENTS.ARROW+".class");l&&i.addClass(l)}else o===this.toolTipConstants.POSITIONS.BOTTOM_FULLSIZE&&(i.addClass(this.toolTipConstants.CSS_CLASSES.POSITION_BOTTOM_FULLSIZE),this._showCustomArrow(i,s));this._setElementCoordinates(i,r)}}},{key:"createToolTip",value:function(e,t,n,i,s){var a=this,o=void 0;s&&(o=angular.element(s));var r=angular.element(t),l=angular.element(n),c=void 0,u=void 0;t&&(u=angular.element(t).closest(".page-content"));var d=function(e){angular.element(document.body).append(l),a.placeTooltipInPositionFn(t,n,i),c||(c=a._addResizeListener(function(){a.placeTooltipInPositionFn(t,n,i)})),setTimeout(function(){l.addClass(a.toolTipConstants.CSS_CLASSES.IS_ACTIVE)}),a._hideAllOtherToolTips(e),e.stopPropagation(),e.preventDefault()},h=function(){l.removeClass(a.toolTipConstants.CSS_CLASSES.IS_ACTIVE),c&&(c(),c=null),setTimeout(function(){a._resetTooltipClasses(l),l.remove()},a.toolTipConstants.TIME_VARS.ANIMATION_TIME)};"IMG"===t.tagName?this.EnvironmentService.isTouchDevice()||(r.on("mouseover",d),r.on("mouseout",h)):"INPUT"===t.tagName?r.on("focus",d):r.on("click",d),s&&o.on("scroll",h),u&&u.on("scroll",h);var _=this._addOutsideClickListener(function(e){a._clickedInsideDOMTree(e,t)||h()});return e.$on("$destroy",function(){h(),_(),"IMG"===t.tagName?a.EnvironmentService.isTouchDevice()||(r.off("mouseover",d),r.off("mouseout",h)):"INPUT"===t.tagName?r.off("focus",d):r.off("click",d),s&&o.off("scroll",h),u&&u.off("scroll",h),c&&(c(),c=null)}),{showFn:d,hideFn:h}}}]),e}();h.$inject=["$document","$window","toolTipConstants","EnvironmentService"],t.default=h,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={DEBOUNCE_TICK:250,ANIMATION_TIME:100},s={BOTTOM:"BOTTOM",BOTTOM_FULLSIZE:"BOTTOM_FULLSIZE"},a={ARROW:"ARROW",WRAPPER:"WRAPPER"},o={POSITION_RIGHT:"position-right",POSITION_BOTTOM:"position-bottom",POSITION_BOTTOM_FULLSIZE:"position-bottom-fullsize",IS_ACTIVE:"is-active",WRAPPER:"js-wrapper",ARROW:"js-arrow"},r={TOP:"top",LEFT:"left",WIDTH:"width",MIN_WIDTH:"min-width",DISPLAY:"display",NONE:"none",BLOCK:"block"};t.default={TIME_VARS:i,POSITIONS:s,ELEMENTS:a,CSS_CLASSES:o,CSS_ATTRS:r},e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(237),a=i(s);n(610);var o=n(615),r=i(o),l=n(617),c=i(l),u=n(621),d=i(u),h=n(625),_=i(h),g=n(628),S=i(g),f=n(631),v=i(f),E=n(635),p=i(E),T=n(642),m=i(T),C=n(646),A=i(C),I=n(650),O=i(I),N=n(130),y=i(N),b=n(654),L=i(b),M=n(655),R=i(M),D=n(656),P=i(D),$=n(659),U=i($),k=n(660),w=i(k),B=n(661),F=i(B),G=n(662),V=i(G),x=n(663),H=i(x);n(664);var Y=angular.module("tangerine.app.core.components.contactUs",["cometd","angular-uuid","luegg.directives",a.default]).constant("contactUsConstants",y.default).constant("genesysRequestConstants",L.default).service("CobrowseService",P.default).service("AvailabilityService",U.default).service("CallService",w.default).service("GenesysRequesterService",F.default).service("ChatService",V.default).service("NotificationService",H.default).directive("tngNotifyTyping",R.default).component("tngContactUsReload",r.default).component("tngCallYou",c.default).component("tngCallUs",d.default).component("tngAreYouClient",_.default).component("tngConfirmChatStop",S.default).component("tngChatWithUs",v.default).component("tngChatWindow",p.default).component("tngChatThread",m.default).component("tngContactUsMenu",O.default).component("tngChatBubble",A.default);t.default=Y,e.exports=t.default},,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(616),s=function(e){return e&&e.__esModule?e:{default:e}}(i),a={controller:s.default,bindings:{}};t.default=a,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=n(57),c=function(){function e(t,n,i,s,o){(0,a.default)(this,e),this.CobrowseService=t,this.ChatService=n,this.$translate=i,this.$log=s,this.$ngRedux=o}return(0,r.default)(e,[{key:"$onInit",value:function(){var e=this;this.unsubscribe=this.$ngRedux.connect(this.mapStateToThis,l.ChatWithUsActions)(this),this.ChatService.existsActiveChat().then(function(t){e.$log.debug("contactUsReload - active chat session exists: ",t),t&&e.$translate.onReady(function(){e.reloadActiveChat()})}).catch(function(t){e.$log.error("Failed to check if active chat session exists",t)})}},{key:"mapStateToThis",value:function(){return{}}}]),e}();c.$inject=["CobrowseService","ChatService","$translate","$log","$ngRedux"],t.default=c,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(618),a=i(s),o=n(619),r=i(o);n(620);var l={template:a.default,controller:r.default,bindings:{}};t.default=l,e.exports=t.default},function(e,t){e.exports='<tng-modal-dialog ng-if="$ctrl.isCallYouModalOpen || $ctrl.isCallYouConfirmationModalOpen || $ctrl.isCallYouErrorModalOpen" analytics-id="contactus/callyou" on-close="$ctrl.stopCallYou()" hide-close="$ctrl.isSpinnerActive"> <header> <h5 class="team-brand"> {{ ::\'contactUs.modal.callYou.brand\' | translate }}<span class="icon-tangerine"></span> </h5> </header> <div class="callYou-modal-content callYou-modal-content--wide spinner" ng-show="$ctrl.isSpinnerActive"> <tng-loading-spinner>{{ :: \'global.commonWords.loading\' | translate }}</tng-loading-spinner> </div> <div class="callYou-modal-content" ng-show="!$ctrl.isSpinnerActive && $ctrl.isCallYouModalOpen"> <h6 class="large">{{ ::\'contactUs.modal.callYou.title\' | translate }}</h6> <p class="">{{ ::\'contactUs.modal.callYou.content\' | translate }}</p> <form name="$ctrl.callYouForm"> <div class="callYou-select-container"> <label for="callYou-topic"> {{ ::\'contactUs.modal.callYou.questions.name\' | translate }} </label> <tng-select-autocomplete input-id="callYou-topic" ng-model="$ctrl.topic" ng-model-set-raw-object="true" on-select="$ctrl.topicSelectChange()" options="$ctrl.topics" option-label-key="label" is-static="true" placeholder="{{ ::\'contactUs.modal.callYou.questions.opt1.name\' | translate }}"></tng-select-autocomplete> </div> <div class="callYou-select-container" ng-if="$ctrl.isSubtopicVisible"> <label for="callYou-subtopic"> {{ ::\'contactUs.modal.callYou.questions.extraName\' | translate }} </label> <tng-select-autocomplete input-id="callYou-subtopic" ng-model="$ctrl.subtopic" ng-model-set-raw-object="true" on-select="$ctrl.subtopicSelectChange()" options="$ctrl.subtopics" option-label-key="label" is-static="true" placeholder="{{ ::\'contactUs.modal.callYou.questions.opt1.name\' | translate }}"></tng-select-autocomplete> </div> <div ng-show="!$ctrl.isCallYouAvailable && $ctrl.isTopicSelected"> <div class="panel body-4"> {{ :: \'contactUs.modal.callYou.error.notAvailable\' | translate }} </div> <div class="panel"> <h5 class="heading--sub2">{{ \'contactUs.phone.title\' | translate }}</h5> <p class="x-small"> {{ \'contactUs.phone.callUs\' | translate }} <br/> <strong>{{ \'contactUs.phone.phoneNumber\' | translate }}</strong> </p> <h5 class="heading--sub2">{{ \'contactUs.chat.title\' | translate }}</h5> <h6 class="small">{{ \'contactUs.chat.savingAndChecking.title\' | translate }}</h6> <p class="x-small"> {{ \'contactUs.chat.savingAndChecking.weekdays\' | translate }} <strong>{{ \'contactUs.chat.savingAndChecking.weekdaysTime\' | translate }}</strong> <br/> {{ \'contactUs.chat.savingAndChecking.weekend\' | translate }} <strong>{{ \'contactUs.chat.savingAndChecking.weekendTime\' | translate }}</strong> </p> <h6 class="small">{{ \'contactUs.chat.investing.title\' | translate }}</h6> <p class="x-small"> {{ \'contactUs.chat.investing.weekdays\' | translate }} <strong>{{ \'contactUs.chat.investing.weekdaysTime\' | translate }}</strong> </p> <p ng-show="$ctrl.isChatWithUsAvailable"> {{ \'contactUs.chat.getStarted\' | translate }} <a actionable-id="call-you-toggle_chat_modal" href="" ng-click="$ctrl.toggleChatWithUsModal();$ctrl.toggleCallYouModal();">{{ \'contactUs.chat.chatLink\' | translate }}</a> </p> <p ng-show="!$ctrl.isChatWithUsAvailable">{{ \'contactUs.unavailable\' | translate}}</p> </div> </div> <div ng-show="$ctrl.isCallYouAvailable && $ctrl.isTopicSelected"> <div class="panel"> <span class="icon-mobile x-large"></span> <span class="medium">{{ ::\'contactUs.modal.callYou.estimatedTime\' | translate }}</span> <div class="heading--title2">{{$ctrl.waitTime}} minutes</div> </div> <label> {{ :: \'contactUs.modal.callYou.yourPhone\' | translate }} </label> <tng-phone-input ng-required="true" input-name="phone" ng-model="$ctrl.phone" custom-error-msg="contactUs.modal.callYou.phoneValidation"> </tng-phone-input> </div> </form> </div> <div class="callYou-modal-content" ng-show="$ctrl.isCallYouConfirmationModalOpen"> <h6 class="large">{{ ::\'contactUs.modal.callYou.confirmation.title\' | translate }}</h6> <p class="small"> {{ ::\'contactUs.modal.callYou.confirmation.msgPrefix\' | translate }} <strong>{{$ctrl.phone}}</strong> {{ ::\'contactUs.modal.callYou.confirmation.msgSuffix\' | translate }} </p> <div class="panel"> <span class="icon-mobile x-large"></span> <span class="medium">{{ ::\'contactUs.modal.callYou.estimatedTime\' | translate }}</span> <div class="heading--title2">{{$ctrl.waitTime}} minutes</div> </div> </div> <div class="callYou-modal-content" ng-show="$ctrl.isCallYouErrorModalOpen"> <div class="panel body-4"> {{ :: \'contactUs.modal.callYou.error.notAvailable\' | translate }} </div> <div class="panel"> <h5 class="heading--sub2">{{ \'contactUs.phone.title\' | translate }}</h5> <p class="x-small"> {{ \'contactUs.phone.callUs\' | translate }} <br/> <strong>{{ \'contactUs.phone.phoneNumber\' | translate }}</strong> </p> <h5 class="heading--sub2">{{ \'contactUs.chat.title\' | translate }}</h5> <h6 class="small">{{ \'contactUs.chat.savingAndChecking.title\' | translate }}</h6> <p class="x-small"> {{ \'contactUs.chat.savingAndChecking.weekdays\' | translate }} <strong>{{ \'contactUs.chat.savingAndChecking.weekdaysTime\' | translate }}</strong> <br/> {{ \'contactUs.chat.savingAndChecking.weekend\' | translate }} <strong>{{ \'contactUs.chat.savingAndChecking.weekendTime\' | translate }}</strong> </p> <h6 class="small">{{ \'contactUs.chat.investing.title\' | translate }}</h6> <p class="x-small"> {{ \'contactUs.chat.investing.weekdays\' | translate }} <strong>{{ \'contactUs.chat.investing.weekdaysTime\' | translate }}</strong> </p> <p ng-show="$ctrl.isChatWithUsAvailable"> {{ \'contactUs.chat.getStarted\' | translate }} <a actionable-id="call-you-chat_modal" href="" ng-click="$ctrl.toggleChatWithUsModal();$ctrl.toggleCallYouModal();">{{ \'contactUs.chat.chatLink\' | translate }}</a> </p> <p ng-show="!$ctrl.isChatWithUsAvailable">{{ \'contactUs.unavailable\' | translate}}</p> </div> </div> <footer> <button ng-if="$ctrl.isCallYouModalOpen" class="btn btn--edit" ng-click="$ctrl.stopCallYou()" actionable-id="callYou_close">{{ \'global.pageFlow.buttons.cancel\' | translate }} </button> <button class="btn btn--orange" ng-click="$ctrl.done()" ng-disabled="!$ctrl.isCallYouAvailable || !$ctrl.callYouForm.phoneInputForm.phone.$valid || !$ctrl.isTopicSelected" actionable-id="callYou_done"> <span ng-if="$ctrl.isCallYouModalOpen">{{ \'global.pageFlow.buttons.submit\' | translate }}</span> <span ng-if="$ctrl.isCallYouConfirmationModalOpen || $ctrl.isCallYouErrorModalOpen">{{ \'global.pageFlow.buttons.done\' | translate }}</span> </button> </footer> </tng-modal-dialog> '},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(35),a=i(s),o=n(0),r=i(o),l=n(1),c=i(l),u=n(57),d=function(){function e(t,n,i,s,a,o,l,c){(0,r.default)(this,e),this.$log=t,this.contactUsConstants=n,this.CustomerInfoService=i,this.AvailabilityService=s,this.CallService=a,this.AuthService=o,this.$ngRedux=l,this.$q=c}return(0,c.default)(e,[{key:"$onInit",value:function(){this.serviceType=this.contactUsConstants.CONTACT_SERVICES.CALL_BACK,this.isSpinnerActive=!1,this.unsubscribe=this.$ngRedux.connect(this.mapStateToThis.bind(this),(0,a.default)({},u.CallYouActions,u.ChatWithUsActions))(this)}},{key:"$onDestroy",value:function(){this.unsubscribe()}},{key:"mapStateToThis",value:function(e){var t=(0,a.default)({},e.callYou,e.chatWithUs),n=t.isCallYouModalOpen,i=t.isCallYouAvailable,s=t.isCallYouConfirmationModalOpen,o=t.isCallYouErrorModalOpen,r=t.isChatWithUsAvailable;return n&&!this.isCallYouModalOpen&&this._initialize(),{isCallYouModalOpen:n,isCallYouAvailable:i,isCallYouConfirmationModalOpen:s,isCallYouErrorModalOpen:o,isChatWithUsAvailable:r}}},{key:"done",value:function(){var e=this;if(this.isCallYouErrorModalOpen)this.stopCallYou();else{if(this.isCallYouModalOpen)return this.isSpinnerActive=!0,this.CallService.bookCallYou(this.intend.uid,this.phone).then(function(t){t.result===e.contactUsConstants.CALL_BOOKING_SUCCESS?e.toggleCallYouConformationModal():(e.toggleCallYouErrorModal(),e.$log.error("Error response during booking callYou"))}).catch(function(){return e.toggleCallYouErrorModal()}).finally(function(){e.isSpinnerActive=!1});this.toggleCallYouConformationModal()}return null}},{key:"topicSelectChange",value:function(){this.topic&&(this.subtopics=this.CallService.getSubTopics(this.topic.value),this.subtopic=void 0,this._checkAvailability())}},{key:"subtopicSelectChange",value:function(){this._checkAvailability()}},{key:"_initialize",value:function(){this.topics=this.CallService.getTopics(),this.topic=void 0,this.subtopic=void 0,this._setPhoneNumber()}},{key:"_checkAvailability",value:function(){var e=this;if(this.topic){this.isTopicSelected=!1,this.setCallYouAvailability(!1);var t=this.topic.value,n=void 0;if(this.CallService.topicNeedsSubTopic(t)){if(!this.subtopic)return this.$q.reject("topic requires subtopic but subtopic is empty");n=this.subtopic.value}return this.isTopicSelected=!0,this.isSpinnerActive=!0,this.AvailabilityService.getServiceAvailability(this.serviceType,t,n).then(function(t){angular.isObject(t)?(angular.isArray(t.intends)?(e.intend=t.intends[0],e.intend&&e._setWaitTime(parseInt(e.intend.wait_time,10))):e._setWaitTime(1e3),e.setCallYouAvailability(!!t.available)):e.setCallYouAvailability(!1)}).catch(function(i){e.$log.error("Can not check availability for topic="+t+" and subtopic="+n+".",i),e.setCallYouAvailability(!1)}).finally(function(){e.isSpinnerActive=!1})}return this.$q.reject("topic is empty")}},{key:"_setWaitTime",value:function(e){this.waitTime=e>=0&&e<=10?10:e>10&&e<=20?20:30}},{key:"_setPhoneNumber",value:function(){var e=this;return this.AuthService.isAuthenticated()?this.CustomerInfoService.get().then(function(t){t.customer&&t.customer.primaryPhoneType&&t.customer.phoneNumbers&&t.customer.phoneNumbers[t.customer.primaryPhoneType]?e.phone=t.customer.phoneNumbers[t.customer.primaryPhoneType].number:t.customer&&t.customer.phone_list&&t.customer.phone_list[0]&&(e.phone=t.customer.phone_list[0].number)}).catch(function(t){e.$log.error("Can not retrieve primary phone for user.",t)}):this.$q.reject("Cusomer is not authenticated")}},{key:"isSubtopicVisible",get:function(){return this.CallService.arrayIsNotEmpty(this.subtopics)}}]),e}();d.$inject=["$log","contactUsConstants","CustomerInfoService","AvailabilityService","CallService","AuthService","$ngRedux","$q"],t.default=d,e.exports=t.default},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(622),a=i(s),o=n(623),r=i(o);n(624);var l={template:a.default,controller:r.default,bindings:{}};t.default=l,e.exports=t.default},function(e,t){e.exports='<tng-modal-dialog ng-if="$ctrl.isCallUsModalOpen || $ctrl.isCallUsErrorModalOpen" on-close="$ctrl.stopCallUs()" analytics-id="contactus/callus" hide-close="$ctrl.isSpinnerActive"> <header> <h5 class="team-brand"> {{ ::\'contactUs.modal.callYou.brand\' | translate }}<span class="icon-tangerine"></span> </h5> </header> <div class="callUs-modal-content callUs-modal-content--wide spinner" ng-show="$ctrl.isSpinnerActive"> <tng-loading-spinner>{{ :: \'global.commonWords.loading\' | translate }}</tng-loading-spinner> </div> <div class="callUs-modal-content" ng-show="!$ctrl.isSpinnerActive && $ctrl.isCallUsModalOpen"> <h6 class="large">{{ ::\'contactUs.modal.callUs.title\' | translate }}</h6> <p class="">{{ ::\'contactUs.modal.callUs.content\' | translate }}</p> <form name="$ctrl.callUsForm"> <div class="callUs-select-container"> <label for="callUs-topic"> {{ :: \'contactUs.modal.callYou.questions.name\' | translate }} </label> <tng-select-autocomplete input-id="callUs-topic" ng-model="$ctrl.topic" ng-model-set-raw-object="true" on-select="$ctrl.topicSelectChange()" options="$ctrl.topics" option-label-key="label" is-static="true" placeholder="{{ ::\'contactUs.modal.callYou.questions.opt1.name\' | translate }}"></tng-select-autocomplete> </div> <div class="callUs-select-container" ng-if="$ctrl.isSubtopicVisible"> <label for="callUs-subtopic"> {{ ::\'contactUs.modal.callYou.questions.extraName\' | translate }} </label> <tng-select-autocomplete input-id="callUs-subtopic" ng-model="$ctrl.subtopic" ng-model-set-raw-object="true" on-select="$ctrl.subtopicSelectChange()" options="$ctrl.subtopics" option-label-key="label" is-static="true" placeholder="{{ ::\'contactUs.modal.callYou.questions.opt1.name\' | translate }}"></tng-select-autocomplete> </div> <p> {{ ::\'contactUs.disclaimer.content\' | translate}} <a actionable-id="call-us-link_text" ng-href="{{::\'contactUs.disclaimer.link\' | translate | absoluteHref:\'url\'}}"> {{::\'contactUs.disclaimer.linkText\' | translate }}</a>. </p> </form> </div> <div class="callUs-modal-content" ng-show="$ctrl.isCallUsErrorModalOpen"> <div class="panel body-4"> {{ :: \'contactUs.modal.callUs.error\' | translate }} </div> </div> <footer> <button ng-if="$ctrl.isCallUsModalOpen" class="btn btn--edit" ng-click="$ctrl.stopCallUs()" actionable-id="callUs_close">{{ \'global.pageFlow.buttons.cancel\' | translate }} </button> <button class="btn btn--orange" ng-click="$ctrl.done()" ng-disabled="!$ctrl.isCallUsAvailable || !$ctrl.isTopicSelected" actionable-id="callUs_done"> <span ng-if="$ctrl.isCallUsModalOpen">{{ \'contactUs.modal.callUs.buttons.submit\' | translate }}</span> <span ng-if="$ctrl.isCallUsErrorModalOpen">{{ \'global.pageFlow.buttons.done\' | translate }}</span> </button> </footer> </tng-modal-dialog> '},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=n(57),c=function(){function e(t,n,i,s,o,r,l){(0,a.default)(this,e),this.$log=t,this.contactUsConstants=n,this.AvailabilityService=i,this.CallService=s,this.$window=o,this.$ngRedux=r,this.$q=l}return(0,r.default)(e,[{key:"$onInit",value:function(){this.serviceType=this.contactUsConstants.CONTACT_SERVICES.CLICK_TO_CALL,this.availabilityServiceType=this.contactUsConstants.CONTACT_SERVICES.CALL_BACK,this.isSpinnerActive=!1,this.unsubscribe=this.$ngRedux.connect(this.mapStateToThis.bind(this),l.CallUsActions)(this)}},{key:"$onDestroy",value:function(){this.unsubscribe()}},{key:"mapStateToThis",value:function(e){var t=e.callUs,n=t.isCallUsModalOpen,i=t.isCallUsAvailable,s=t.isCallUsErrorModalOpen;return n&&!this.isCallUsModalOpen&&this._initialize(),{isCallUsModalOpen:n,isCallUsAvailable:i,isCallUsErrorModalOpen:s}}},{key:"done",value:function(){var e=this;return this.isCallUsErrorModalOpen?(this.stopCallUs(),null):(this.isSpinnerActive=!0,this.CallService.bookCallUs(this.intend.uid).then(function(t){t.result===e.contactUsConstants.CALL_BOOKING_SUCCESS?(e.stopCallUs(),e.$window.location.href=t._tel_url):(e.toggleCallUsErrorModal(),e.$log.error("Error response during booking callUs"))}).catch(function(t){return e.toggleCallUsErrorModal(),t}).finally(function(){e.isSpinnerActive=!1}))}},{key:"topicSelectChange",value:function(){this.topic&&(this.subtopics=this.CallService.getSubTopics(this.topic.value),this.subtopic=void 0,this._checkAvailability())}},{key:"subtopicSelectChange",value:function(){this._checkAvailability()}},{key:"_initialize",value:function(){this.topics=this.CallService.getTopics(),this.topic=void 0,this.subtopic=void 0}},{key:"_checkAvailability",value:function(){var e=this;if(this.topic){this.isTopicSelected=!1,this.setCallUsAvailability(!1);var t=this.topic.value,n=void 0;if(this.CallService.topicNeedsSubTopic(t)){if(!this.subtopic)return this.$q.reject("topic requires subtopic but subtopic is empty");n=this.subtopic.value}return this.isTopicSelected=!0,this.isSpinnerActive=!0,this.AvailabilityService.getServiceAvailability(this.availabilityServiceType,t,n).then(function(t){angular.isObject(t)?(angular.isArray(t.intends)&&(e.intend=t.intends[0]),e.setCallUsAvailability(!!t.available&&e.intend&&e.intend.wait_time<=1)):e.setCallUsAvailability(!1)}).catch(function(i){e.$log.error("Can not check availability for topic="+t+" and subtopic="+n+".",i),e.setCallUsAvailability(!1)}).finally(function(){e.isSpinnerActive=!1})}return this.$q.reject("topic is empty")}},{key:"isSubtopicVisible",get:function(){return this.CallService.arrayIsNotEmpty(this.subtopics)}}]),e}();c.$inject=["$log","contactUsConstants","AvailabilityService","CallService","$window","$ngRedux","$q"],t.default=c,e.exports=t.default},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(626),s=function(e){return e&&e.__esModule?e:{default:e}}(i);n(627);var a={template:s.default,bindings:{onStartChat:"&",onLetsSignin:"&",onClose:"&"}};t.default=a,e.exports=t.default},function(e,t){e.exports='<tng-modal-dialog on-close="$ctrl.onClose($event)" size="medium" analytics-id="new-existing-client"> <header> <h5 class="large"> {{ ::\'contactUs.modal.areYouClient.title\' | translate }} </h5> </header> <div class="areYouClient-modal-content"> <p class="" translate="contactUs.modal.areYouClient.content"></p> </div> <footer> <button class="btn btn--large btn__are-you-client btn--edit" ng-click="$ctrl.onStartChat($event)" actionable-id="areYouClient_startChat">{{ ::\'contactUs.modal.areYouClient.buttons.startChat\' | translate }} </button> <button class="btn btn--large btn__are-you-client btn--orange" ng-click="$ctrl.onLetsSignin($event)" actionable-id="areYouClient_signin">{{ ::\'contactUs.modal.areYouClient.buttons.signin\' | translate }} </button> </footer> </tng-modal-dialog> '},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(629),s=function(e){return e&&e.__esModule?e:{default:e}}(i);n(630);var a={template:s.default,bindings:{onCancel:"&",onStopChat:"&"}};t.default=a,e.exports=t.default},function(e,t){e.exports='<tng-modal-dialog on-close="$ctrl.onCancel($event)" size="medium" analytics-id="contactus/chat/close"> <header> <h5 class="large" translate="contactUs.modal.confirmChatStop.title"> </h5> </header> <div class="confirm-chat-stop"> <div class="confirm-chat-stop__header--mobile"> <h6 class="large" translate="contactUs.modal.confirmChatStop.title"></h6> </div> <div class="confirm-chat-stop__content"> <p class="small" translate="contactUs.modal.confirmChatStop.content"></p> </div> </div> <footer> <button actionable-id="confirm-chat-cancel" class="btn btn--larger btn--edit" ng-click="$ctrl.onCancel($event)"> {{::\'contactUs.modal.confirmChatStop.buttons.cancel\' | translate}} </button> <button actionable-id="confirm-chat-stop" class="btn btn--larger btn--orange" ng-click="$ctrl.onStopChat($event)"> {{::\'contactUs.modal.confirmChatStop.buttons.confirm\' | translate}} </button> </footer> </tng-modal-dialog> '},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(632),a=i(s),o=n(633),r=i(o);n(634);var l={template:a.default,controller:r.default,bindings:{}};t.default=l,e.exports=t.default},function(e,t){e.exports=' <tng-modal-dialog ng-if="$ctrl.isChatWithUsModalOpen" on-close="$ctrl.onExitChat($event)" analytics-id="contactus/chatwithus" hide-close="$ctrl.isSpinnerActive"> <header> <h5 class="team-brand"> {{ ::\'contactUs.modal.callYou.brand\' | translate }}<span class="icon-tangerine"></span> </h5> </header> <div class="chatWithUs-modal-content chatWithUs-modal-content--wide spinner" ng-show="$ctrl.isSpinnerActive"> <tng-loading-spinner>{{ :: \'global.commonWords.loading\' | translate }}</tng-loading-spinner> </div> <div class="chatWithUs-modal-content" ng-show="!$ctrl.isSpinnerActive"> <h6 class="large">{{ ::\'contactUs.modal.chatWithUs.title\' | translate }}</h6> <p class="">{{ ::\'contactUs.modal.chatWithUs.content\' | translate }}</p> <form name="$ctrl.chatWithUsForm"> <div class="chatWithUs-select-container"> <label for="chatWithUs-topic"> {{ ::\'contactUs.modal.callYou.questions.name\' | translate }} </label> <tng-select-autocomplete input-id="chatWithUs-topic" ng-model="$ctrl.topic" ng-model-set-raw-object="true" on-select="$ctrl.topicSelectChange()" options="$ctrl.topics" option-label-key="label" is-static="true" placeholder="{{ ::\'contactUs.modal.callYou.questions.opt1.name\' | translate }}"></tng-select-autocomplete> </div> <div class="chatWithUs-select-container" ng-if="$ctrl.isSubtopicVisible"> <label for="chatWithUs-subtopic"> {{ ::\'contactUs.modal.callYou.questions.extraName\' | translate }} </label> <tng-select-autocomplete input-id="chatWithUs-subtopic" ng-model="$ctrl.subtopic" ng-model-set-raw-object="true" on-select="$ctrl.subtopicSelectChange()" options="$ctrl.subtopics" option-label-key="label" is-static="true" placeholder="{{ ::\'contactUs.modal.callYou.questions.opt1.name\' | translate }}"></tng-select-autocomplete> </div> <div ng-show="!$ctrl.isChatWithUsAvailable && $ctrl.isTopicSelected"> <div class="panel body-4"> {{ :: \'contactUs.modal.chatWithUs.error.notAvailable\' | translate }} </div> </div> <div> <p class="" translate="contactUs.modal.chatWithUs.somethingToRemember"></p> <p> {{ ::\'contactUs.disclaimer.content\' | translate}} <a actionable-id="chat-with-us-disclaimer_link" ng-href="{{::\'contactUs.disclaimer.link\' | translate | absoluteHref:\'url\'}}"> {{::\'contactUs.disclaimer.linkText\' | translate }}</a>. </p> </div> </form> </div> <footer> <button class="btn btn--edit" ng-click="$ctrl.onExitChat($event)" actionable-id="callYou_close">{{ ::\'global.pageFlow.buttons.cancel\' | translate }} </button> <button class="btn btn--orange" ng-click="$ctrl.onStartChat($event)" ng-disabled="!$ctrl.isChatWithUsAvailable || !$ctrl.isTopicSelected" actionable-id="callYou_done">{{ ::\'contactUs.modal.chatWithUs.pageFlow.buttons.startChat\' | translate }} </button> </footer> </tng-modal-dialog> <tng-are-you-client ng-if="$ctrl.isAreYouClientModalOpen" on-close="$ctrl.closeAreYouClientModal($event)" on-start-chat="$ctrl.onStartAnonymousChat()" on-lets-signin="$ctrl.onLetsSignin($event)"></tng-are-you-client> <tng-chat-window ng-if="$ctrl.isChatWindowOpen" product-id="$ctrl.chatProductSelection" on-close="$ctrl.closeChatWindow($event)" on-minified="$ctrl.onMinifyChatWindow($event)" on-docked="$ctrl.onDockChatWindow($event)" on-connected="$ctrl.connectedChatWindow($event)" on-disconnected="$ctrl.disconnectedChatWindow($event)"></tng-chat-window> '},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(35),a=i(s),o=n(0),r=i(o),l=n(1),c=i(l),u=n(57),d=function(){function e(t,n,i,s,a,o,l,c,u,d,h,_){(0,r.default)(this,e),this.$log=t,this.contactUsConstants=n,this.AvailabilityService=i,this.SessionService=s,this.$ngRedux=a,this.$state=o,this.stateConstants=l,this.$uiRouter=c,this.$q=u,this.$window=d,this.ChatService=h,this.CallService=_}return(0,c.default)(e,[{key:"$onInit",value:function(){this.serviceType=this.contactUsConstants.CONTACT_SERVICES.CHAT,this.unsubscribe=this.$ngRedux.connect(this.mapStateToThis.bind(this),u.ChatWithUsActions)(this)}},{key:"$onDestroy",value:function(){this.unsubscribe()}},{key:"mapStateToThis",value:function(e){var t=e.chatWithUs,n=t.isChatWithUsModalOpen,i=t.isChatWithUsAvailable,s=t.isChatWindowOpen,a=t.isAreYouClientModalOpen,o=t.isChatWindowMinified,r=t.isChatWindowDocked,l=t.chatProductSelection;return n&&!this.isChatWithUsModalOpen&&this._initialize(),{isChatWithUsModalOpen:n,isChatWithUsAvailable:i,isChatWindowOpen:s,isAreYouClientModalOpen:a,isChatWindowMinified:o,isChatWindowDocked:r,chatProductSelection:l}}},{key:"closeAreYouClientModal",value:function(){}},{key:"closeChatWindow",value:function(){this.exitChat()}},{key:"onMinifyChatWindow",value:function(){this.minifyChatWindow()}},{key:"onDockChatWindow",value:function(){this.dockChatWindow()}},{key:"connectedChatWindow",value:function(){}},{key:"disconnectedChatWindow",value:function(){}},{key:"onLetsSignin",value:function(){var e=this,t=this.$uiRouter.stateRegistry.states[this.stateConstants.LOGIN];return t.data=(0,a.default)({},t.data,{restoreState:function(){e.restoreState((0,a.default)({},e.$ngRedux.getState().chatWithUs,{isChatWindowOpen:!0,isAreYouClientModalOpen:!1,chatProductSelection:e.productId})),delete t.data.restoreState}}),this.$state.go(this.stateConstants.LOGIN).then(function(){e.goToSignin()})}},{key:"onStartChat",value:function(){this.startChat(!this.SessionService.isAuthenticated(),this.productId)}},{key:"onStartAnonymousChat",value:function(){this.startChat(!1,this.productId)}},{key:"onExitChat",value:function(){this.exitChat()}},{key:"topicSelectChange",value:function(){this.topic&&(this.subtopics=this.CallService.getSubTopics(this.topic.value),this.subtopic=void 0,this._checkAvailability())}},{key:"subtopicSelectChange",value:function(){return this._checkAvailability()}},{key:"_initialize",value:function(){this.topics=this.CallService.getTopics().filter(function(e,t){return-1!==[0,3].indexOf(t)}),this.topic=void 0,this.subtopic=void 0}},{key:"_checkAvailability",value:function(){var e=this;if(this.topic){this.isTopicSelected=!1,this.setChatAvailability(!1);var t=this.topic.value,n=this.topic.label,i=void 0,s="No intent";if(this.CallService.topicNeedsSubTopic(t)){if(!this.subtopic)return this.$q.reject("topic requires subtopic but subtopic is empty");i=this.subtopic.value,s=this.subtopic.label}return this.$window.productTypeAndIntent=n+": "+s,this.isTopicSelected=!0,this.isSpinnerActive=!0,this.AvailabilityService.getServiceAvailability(this.serviceType,t,i).then(function(n){angular.isObject(n)?(e._setProductId(t,i),e.setChatAvailability(!!n.available),n.available||e._sendChatUnavailableToGA()):(e.setChatAvailability(!1),e._sendChatUnavailableToGA())}).catch(function(n){e.$log.error("Can not check availability for topic="+t+" and subtopic="+i+".",n),e.setChatAvailability(!1),e._sendChatUnavailableToGA()}).finally(function(){e.isSpinnerActive=!1})}return this.$q.reject("topic is empty")}},{key:"_sendChatUnavailableToGA",value:function(){var e=this.contactUsConstants.ANALYTICS_ACTIONS.FEEDBACK_CHAT_UNAVAILABLE;this.ChatService.sendChatAnalytics(e.id)}},{key:"_getCallYouTopics",value:function(){return this._getSelectOptionsForLabel(5,"contactUs.modal.callYou.questions.opt").filter(function(e,t){return-1!==[0,1,4].indexOf(t)})}},{key:"_getSelectOptionsForLabel",value:function(e,t){return new Array(e).fill().map(function(e,n){return{label:""+t+(n+1)+".name",value:""+t+(n+1)+".value"}})}},{key:"_setProductId",value:function(e,t){this.productId=t?this.contactUsConstants.TOPIC_HELPS_RELATION[e].ITEM_PRODUCT_ID_MAP[t]:this.contactUsConstants.TOPIC_HELPS_RELATION[e].PRODUCT_ID}},{key:"isSubtopicVisible",get:function(){return this.CallService.arrayIsNotEmpty(this.subtopics)}}]),e}();d.$inject=["$log","contactUsConstants","AvailabilityService","SessionService","$ngRedux","$state","stateConstants","$uiRouter","$q","$window","ChatService","CallService"],t.default=d,e.exports=t.default},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(636),a=i(s),o=n(637),r=i(o);n(641);var l={template:a.default,controller:r.default,bindings:{productId:"<",onClose:"&",onMinified:"&",onDocked:"&",onConnected:"&?",onDisconnected:"&?"}};t.default=l,e.exports=t.default},function(e,t){e.exports=' <div class="chat-window__header--mobile" ng-class="{\'chat-window__header--mobile--mini\': $ctrl.isChatWindowMinified,\n               \'chat-window__header--mobile--mini--authenticated\' : $ctrl.isUserAuthenticated}"> <h6 ng-class="$ctrl.isChatWindowMinified ? \'medium float-left\' : \'large\'" translate="{{$ctrl.CONNECTION_STATES[$ctrl.chatConnectionState].titleKey}}"> </h6> <span class="icon-uparrow medium float-right" ng-if="$ctrl.isChatWindowMinified" ng-click="$ctrl.onMinified($event)"></span> </div> <tng-modal-dialog on-close="$ctrl.chatConnectionState === $ctrl.CONNECTION_STATES.DISCONNECTED.name ? $ctrl.exitChat() : $ctrl.toggleConfirmationStopChatModal($event)" on-minified="$ctrl.onMinified($event)" is-minified="$ctrl.isChatWindowMinified" on-docked="$ctrl.onDocked($event)" is-docked="$ctrl.isChatWindowDocked" is-dimming="$ctrl.isDimming" analytics-id="contactus/chat" ng-class="{\'notification-on-chat\': $ctrl.isNotified}"> <header> <h5 ng-class="$ctrl.isChatWindowMinified ? \'medium\' : \'large\'" translate="{{!$ctrl.isNotified || !$ctrl.isChatWindowMinified ? $ctrl.CONNECTION_STATES[$ctrl.chatConnectionState].titleKey : \'contactUs.chat.notificationsMinified.primary\'}}" translate-values="{agentName:$ctrl.agentName}"> </h5> </header> <div class="chatWithUs-modal-content chatWithUs-modal-content--wide spinner chat-window__spinner" ng-show="$ctrl.isSpinnerActive"> <tng-loading-spinner>{{ :: \'global.commonWords.loading\' | translate }}</tng-loading-spinner> </div> <div ng-show="!$ctrl.isChatWindowMinified"> <div class="chat-window__content"> <form name="$ctrl.chatForm"> <div class="grid__container"> <div class="grid__column--1of6 margin__t--rel1 margin__r--rel2 chat-window__content__logo"> <span class="icon-tangerine"></span> <p class="heading--sub2 margin__t--rel2 margin__b--zero" ng-class="{\'chat-window__content__heading--agent-typing\': $ctrl.isAgentTyping}" translate="{{$ctrl.agentName}}"></p> <p class="margin__t--zero small" ng-show="$ctrl.isAgentTyping"> {{::\'contactUs.modal.chat.connected.agentTyping\' | translate}}<span class="anim-elipsis"></span></p> </div> <div class="grid__column--5of6 chat-thread-container"> <tng-chat-thread message-thread="$ctrl.messageThread" is-agent-typing="$ctrl.isAgentTyping" agent-name="$ctrl.agentName"></tng-chat-thread> <div ng-show="$ctrl.chatConnectionState === $ctrl.CONNECTION_STATES.CONNECTED.name" class="field margin__t--rel2 chat-text-input"> <input class="input input-message" type="text" placeholder="{{ ::\'contactUs.modal.chat.connected.inputPlaceholder\' | translate}}" tng-notify-typing native-input-scroll="{{ $ctrl.nativeInputScrollOptionsLandscape }}" autofocus ng-required="true" ng-model="$ctrl.message" on-start-typing="$ctrl.onStartClientTyping()" on-stop-typing="$ctrl.onStopClientTyping()" on-enter="$ctrl.onSend()" ng-focus="$ctrl.chatFocused()" ng-blur="$ctrl.chatBlured()"> </div> </div> </div> </form> </div> </div> <footer ng-if="!$ctrl.isChatWindowMinified"> <button actionable-id="chat-btn-exit" ng-show="$ctrl.chatConnectionState !== $ctrl.CONNECTION_STATES.DISCONNECTED.name" class="btn btn--edit chat-window--desktop" ng-click="$ctrl.toggleConfirmationStopChatModal($event)"> {{ ::\'contactUs.modal.chat.buttons.exit\' | translate }} </button> <button actionable-id="chat-connected-btn-send" ng-show="$ctrl.chatConnectionState === $ctrl.CONNECTION_STATES.CONNECTED.name" class="btn btn--orange chat-window--desktop" ng-disabled="$ctrl.chatForm.$invalid" ng-click="$ctrl.onSend()" type="submit"> {{ ::\'contactUs.modal.chat.connected.buttons.send\' | translate }} </button> <tng-print-button only-element="\'tng-chat-thread-area\'" ng-show="$ctrl.chatConnectionState === \n        $ctrl.CONNECTION_STATES.DISCONNECTED.name"></tng-print-button> <button ng-show="$ctrl.chatConnectionState === $ctrl.CONNECTION_STATES.DISCONNECTED.name" actionable-id="chat-disconnected-btn-close" class="btn btn--edit chat-window__btn-close--mobile" ng-click="$ctrl.onClose($event)"> {{ ::\'contactUs.modal.chat.disconnected.buttons.close\' | translate }} </button> <form name="$ctrl.chatFormMobile" class="chat-window--mobile"> <input ng-show="$ctrl.chatConnectionState === $ctrl.CONNECTION_STATES.CONNECTED.name" class="input input-message" type="text" placeholder="{{ ::\'contactUs.modal.chat.connected.inputPlaceholder\' | translate}}" tng-notify-typing autofocus native-input-scroll="{{ $ctrl.nativeInputScrollOptionsPortrait }}" ng-required="true" ng-model="$ctrl.message" on-start-typing="$ctrl.setClientStartTyping($event)" on-stop-typing="$ctrl.setClientStopTyping($event)" on-enter="$ctrl.onSend()" ng-focus="$ctrl.chatFocused()" ng-blur="$ctrl.chatBlured()"> <button actionable-id="chat-connected-btn-send-1" ng-show="$ctrl.chatConnectionState === $ctrl.CONNECTION_STATES.CONNECTED.name" class="btn btn--small btn--orange" ng-disabled="$ctrl.chatFormMobile.$invalid" ng-click="$ctrl.onSend()" type="submit"> {{ ::\'contactUs.modal.chat.connected.buttons.send\' | translate }} </button> </form> </footer> </tng-modal-dialog> <tng-confirm-chat-stop ng-if="$ctrl.isConfirmStopChatModalOpen" on-cancel="$ctrl.toggleConfirmationStopChatModal($event);refocusThread();" on-stop-chat="$ctrl.onDisconnectChat($event)"></tng-confirm-chat-stop> '},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=n(638),c=i(l),u=n(640),d=i(u),h=n(57),_=function(){function e(t,n,i,s,o,r,l,u,d,h,_,g,S,f,v,E,p,T){(0,a.default)(this,e),this.contactUsConstants=t,this.FeedbackSurveyConstants=n,this.ChatService=i,this.FeedbackSurveyService=s,this.CobrowseService=o,this.AuthService=r,this.NotificationService=l,this.buildConstants=u,this.RequesterService=d,this.serviceConstants=h,this.$scope=_,this.document=g[0],this.$translate=S,this.$window=f,this.$log=v,this.transcriptItemFactory=new c.default,this.$ngRedux=E,this.hasConnectedToAgent=!1,this.hasSurveyStarted=!1,this.isSpinnerActive=!1,this.DIALOG_OPEN_CSS_CLASS="dialog-open",this.isNativeAndroid=p.isNative()&&p.isAndroid(),this.EnvironmentService=p,this.$timeout=T}return(0,r.default)(e,[{key:"$onInit",value:function(){var e=this;this.unsubscribe=this.$ngRedux.connect(this.mapStateToThis.bind(this),h.ChatWithUsActions)(this),this.isDimming=!1,this.agentName="contactUs.modal.chat.agentDefaultName",this.CHAT_BUBBLE_TYPES=this.contactUsConstants.CHAT_BUBBLE_TYPES,this.CONNECTION_STATES=this.contactUsConstants.CONNECTION_STATES;var t=this._getStaticBubbles(),n=t.errorBubble,i=t.introBubble;return this.messageThread=[i],this.isNotified=!1,this.isAgentTyping=!1,this.CobrowseService.registerSessionStartedCB(this._cobrowseSessionStarted.bind(this)),this.CobrowseService.registerApiInitializedCB(this._cobrowseApiInitialized.bind(this)),this.CobrowseService.registerAgentJoinedCB(this._cobrowseAgentJoined.bind(this)),this.CobrowseService.registerSessionEndedCB(this._cobrowseSessionEnded.bind(this)),window.innerHeight>=800?this.paddingBottom=340:window.innerHeight>=600||window.innerHeight>=520&&this.EnvironmentService.isLandscape()?this.paddingBottom=285:this.paddingBottom=240,this.nativeInputScrollOptionsPortrait={anchorElement:"tng-chat-window .c-modal__dialog",paddingBottom:this.paddingBottom,enabled:this.isNativeAndroid},this.nativeInputScrollOptionsLandscape={paddingBottom:260,enabled:this.isNativeAndroid},this._startChat().then(function(t){t||(e.changeChatState(e.CONNECTION_STATES.DISCONNECTED.name),e.messageThread.push(n))})}},{key:"$onDestroy",value:function(){this.unsubscribe(),this.CobrowseService.deregisterAllCB()}},{key:"$postLink",value:function(){var e=this;this.$timeout(function(){e.paddingElement=document.querySelector("tng-chat-thread .panel-chat-thread")})}},{key:"mapStateToThis",value:function(e){var t=e.chatWithUs,n=t.isScreenSharing,i=t.isChatWindowMinified,s=t.isChatWindowDocked,a=t.isConfirmStopChatModalOpen,o=t.chatConnectionState;return i||s?(this.document.body.style.overflow="visible",this.document.body.classList.remove(this.DIALOG_OPEN_CSS_CLASS),this.document.documentElement.classList.remove(this.DIALOG_OPEN_CSS_CLASS)):i||s||(this.document.body.style.overflow="hidden",this.document.body.classList.add(this.DIALOG_OPEN_CSS_CLASS),this.document.documentElement.classList.add(this.DIALOG_OPEN_CSS_CLASS)),{isScreenSharing:n,isChatWindowMinified:i,isChatWindowDocked:s,isConfirmStopChatModalOpen:a,chatConnectionState:o}}},{key:"onStartScreenSharing",value:function(e){var t=this;return e.preventDefault(),this.CobrowseService.startCobrowseSession().then(function(){return t.toggleScreenSharing(),!0})}},{key:"onStopScreenSharing",value:function(e){return e.preventDefault(),this.toggleScreenSharing(),this.CobrowseService.endCobrowseSession()}},{key:"onStartClientTyping",value:function(){var e=this;return this.ChatService.setClientStartTyping().then(function(){return e.$log.debug("successfully set client is typing"),!0}).catch(function(t){return e.$log.error("failed to set client is typing",t),!1})}},{key:"onStopClientTyping",value:function(){var e=this;return this.ChatService.setClientStopTyping().then(function(){return e.$log.debug("successfully set client stopped typing"),!0}).catch(function(t){return e.$log.error("failed to set client stopped typing",t),!1})}},{key:"onPrint",value:function(){this.$window.print()}},{key:"onStartSurvey",value:function(){var e=this;this.hasSurveyStarted=!0;var t=this.FeedbackSurveyConstants.MEDALLIA_FORM_IDS.AFTER_CHAT_SURVEY;this.isSpinnerActive=!0,this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.GET_AGENTID,{urlVars:{interactionId:this.$window.agentChatInteractionId}}).then(function(t){e.$window.agentId=t.agentId}).finally(function(){e.isSpinnerActive=!1,e.FeedbackSurveyService.launchFeedbackSurvey(t)})}},{key:"onDisconnectChat",value:function(){var e=this;return this._endChat().catch(function(){}).finally(function(){e.toggleConfirmationStopChatModal(),e.changeChatState(e.CONNECTION_STATES.DISCONNECTED.name)})}},{key:"onSend",value:function(){return this._sendMessage()}},{key:"refocusThread",value:function(){angular.element(".panel-chat-thread").focus()}},{key:"refocusInput",value:function(){angular.element("form.chat-window--mobile input.input-message").focus()}},{key:"_startChat",value:function(){var e=this;return this.ChatService.startChat(this.productId,this._cometEventHandler.bind(this)).then(function(){return e.$log.debug("Started Chat Successfully"),e.chatWaitStartTime=new Date,!0}).catch(function(t){return e.$log.error("Chat failed to start",t),!1})}},{key:"_endChat",value:function(){var e=this;return this.ChatService.endChat().then(function(){return e.$log.debug("Chat disconnected Successfully"),!0}).catch(function(t){return e.$log.error("Chat failed to disconnect",t),!1}).finally(function(){e.isAgentTyping=!1,e.$window.chatInteractionTime=(new Date-e.chatInteractionStartTime)/1e3;var t=!!e.buildConstants.CONFIG.chatSurvey&&e.buildConstants.CONFIG.chatSurvey.isEnabled;if(e.hasConnectedToAgent&&t){var n=e.contactUsConstants.ANALYTICS_ACTIONS.FEEDBACK_ACTION_SHOWN;e.ChatService.sendChatAnalytics(n.id),e._sendChatSurveyMsg()}e.NotificationService.tabNotificationStop()})}},{key:"_handleChatConnected",value:function(){this.changeChatState(this.CONNECTION_STATES.CONNECTED.name),this.hasConnectedToAgent=!0;var e=this.contactUsConstants.ANALYTICS_ACTIONS.START_CHAT_AGENT_CONNECT;this.ChatService.sendChatAnalytics(e.id),this.chatInteractionStartTime=new Date,this.$window.chatWaitTime=(this.chatInteractionStartTime-this.chatWaitStartTime)/1e3,"function"==typeof this.onConnected&&this.onConnected()}},{key:"_handleChatDisconnected",value:function(){this.changeChatState(this.CONNECTION_STATES.DISCONNECTED.name),this._endChat(),"function"==typeof this.onDisconnected&&this.onDisconnected()}},{key:"_sendMessage",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.message;this.refocusInput();var n="";return t===this.message?(n=this.message,this.message=""):n=t,this.ChatService.sendMessage(n).then(function(){return e.$log.debug("message sent successfully"),!0}).catch(function(t){return e.$log.error("message failed to send",t),!1})}},{key:"_handleAgentTypingEvent",value:function(e){e.isAgentStartTypingEvent?this.isAgentTyping=!0:e.isAgentStopTypingEvent&&(this.isAgentTyping=!1)}},{key:"_handleAgentStateChangeEvent",value:function(e){e.isAgentConnectedEvent?this._handleChatConnected():e.isAgentDisconnectedEvent}},{key:"_cometEventHandler",value:function(e){var t=this;"DISCONNECTED"===e.chatIxnState&&this._handleChatDisconnected(),this.transcriptItemFactory.generateTranscriptItems(e).forEach(function(e){if(e.isAgentEvent&&e.name.length>0?(t.agentName=e.name,t._setAgentNameSurveyMetadata(t.agentName)):e.isAgentEvent&&(e.name=t.$translate.instant(t.agentName)),e.isAgentStateChangeEvent?t._handleAgentStateChangeEvent(e):e.isAgentTypingEvent&&t._handleAgentTypingEvent(e),e.isMessageThreadEvent){var n=new d.default(e,t.$translate);t.messageThread.push(n),e.type!==t.contactUsConstants.COMET_EVENT_TYPES.TEXT_MESSAGE&&e.type!==t.contactUsConstants.COMET_EVENT_TYPES.JOINED_CHAT||e.user!==t.contactUsConstants.COMET_EVENT_USERS.AGENT||t.NotificationService.tabNotificationStart(t.$translate.instant("contactUs.chat.notifications.primary",{agentName:t.$translate.instant(t.agentName)}),t.notifyMinified.bind(t))}})}},{key:"_setAgentNameSurveyMetadata",value:function(e){this.$window.agentName=e}},{key:"_getStaticBubbles",value:function(){return{errorBubble:{type:this.CHAT_BUBBLE_TYPES.INFORMATIVE,content:{body:"contactUs.modal.chat.error",params:null},isShowTime:!1,time:null,name:this.agentName},introBubble:{type:this.CHAT_BUBBLE_TYPES.INFORMATIVE,content:{body:"contactUs.modal.chat.intro",params:null},isShowTime:!1,time:null,name:this.agentName}}}},{key:"_sendCobrowseTokenMessage",value:function(e){var t=this.$translate.instant("contactUs.modal.chat.connected.threadMessages.connectCode",{cobrowseToken:e});return this._sendMessage(t)}},{key:"_cobrowseSessionStarted",value:function(e){return this._sendCobrowseTokenMessage(e.token)}},{key:"_cobrowseApiInitialized",value:function(e){e&&this.toggleScreenSharing()}},{key:"_cobrowseSessionEnded",value:function(){this.toggleScreenSharing(),this.$log.debug("Cobrowse session disconnected")}},{key:"_cobrowseAgentJoined",value:function(){}},{key:"_sendChatSurveyMsg",value:function(){var e={type:this.CHAT_BUBBLE_TYPES.INFORMATIVE,content:{body:"contactUs.modal.chat.survey",params:{name:this.$translate.instant(this.agentName)}},isShowTime:!1,time:null,name:this.agentName,button:"contactUs.modal.chat.surveyButton",callback:this.onStartSurvey.bind(this)};this.messageThread.push(e)}},{key:"chatFocused",value:function(){var e=this;this.NotificationService.tabNotificationStop(),this.NotificationService.disableTabNotifications(),this.isNotified=!1,this.isNativeAndroid&&this.$timeout(function(){angular.element(e.paddingElement).css({"padding-bottom":e.paddingBottom+"px"})})}},{key:"chatBlured",value:function(){var e=this;this.NotificationService.enableTabNotifications(),this.isNativeAndroid&&this.$timeout(function(){angular.element(e.paddingElement).css({"padding-bottom":""})})}},{key:"notifyMinified",value:function(){this.isNotified=!this.isNotified}},{key:"isUserAuthenticated",get:function(){return this.AuthService.isAuthenticated()}}]),e}();_.$inject=["contactUsConstants","FeedbackSurveyConstants","ChatService","FeedbackSurveyService","CobrowseService","AuthService","NotificationService","buildConstants","RequesterService","serviceConstants","$scope","$document","$translate","$window","$log","$ngRedux","EnvironmentService","$timeout"],t.default=_,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=n(639),c=i(l),u=function(){function e(){(0,a.default)(this,e)}return(0,r.default)(e,[{key:"generateTranscriptItems",value:function(e){var t=e.transcriptPosition,n=e.startedAt,i=e.transcriptToShow,s=[];return i.forEach(function(e,i){var a=t+i,o=e;s.push(new c.default(o,a,n))}),s}}]),e}();t.default=u,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=n(130),c=i(l),u=function(){function e(t,n,i){(0,a.default)(this,e),this.transcriptPosition=n,this.chatStartTime=i,this._transcriptObject=t,this.type=this._transcriptObject[0],this.name=this._transcriptObject[1],this.message=this._transcriptObject[2],this.elapsedMs=this._transcriptObject[3],this.user=this._transcriptObject[4],this.EVENT_TYPES=c.default.COMET_EVENT_TYPES,this.EVENT_USERS=c.default.COMET_EVENT_USERS,this.isAgentEvent=this.user===this.EVENT_USERS.AGENT,this.isAgentStartTypingEvent=!1,this.isAgentStopTypingEvent=!1,this.isAgentTypingEvent=!1,this._setAgentTypingEventBooleans(),this.isAgentDisconnectedEvent=!1,this.isAgentConnectedEvent=!1,this.isAgentStateChangeEvent=!1,this._setAgentStateChangeBooleans(),this.isMessageThreadEvent=this._isMessageThreadEvent()}return(0,r.default)(e,[{key:"_setAgentTypingEventBooleans",value:function(){this.isAgentStartTypingEvent=this.type===this.EVENT_TYPES.STARTED_TYPING&&this.isAgentEvent,this.isAgentStopTypingEvent=(this.type===this.EVENT_TYPES.STOPPED_TYPING||this.type===this.EVENT_TYPES.TEXT_MESSAGE||this.type===this.EVENT_TYPES.URL_MESSAGE)&&this.isAgentEvent,this.isAgentTypingEvent=this.isAgentStartTypingEvent||this.isAgentStopTypingEvent}},{key:"_setAgentStateChangeBooleans",value:function(){this.isAgentDisconnectedEvent=this.type===this.EVENT_TYPES.LEFT_CHAT&&this.isAgentEvent,this.isAgentConnectedEvent=this.type===this.EVENT_TYPES.JOINED_CHAT&&this.isAgentEvent,this.isAgentStateChangeEvent=this.isAgentDisconnectedEvent||this.isAgentConnectedEvent}},{key:"_isMessageThreadEvent",value:function(){return this.type!==this.EVENT_TYPES.STARTED_TYPING&&this.type!==this.EVENT_TYPES.STOPPED_TYPING&&this.type!==this.EVENT_TYPES.CUSTOM&&!(this.type===this.EVENT_TYPES.LEFT_CHAT&&this.user===this.EVENT_USERS.CLIENT)}}]),e}();t.default=u,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=n(130),c=i(l),u=function(){function e(t){(0,a.default)(this,e),this.transcriptItem=t,this.EVENT_TYPES=c.default.COMET_EVENT_TYPES,this.EVENT_USERS=c.default.COMET_EVENT_USERS,this.BUBBLE_TYPES=c.default.CHAT_BUBBLE_TYPES,this.name=this.transcriptItem.name,this.type=this._getType(),this.isShowTime=this._getShowTime(),this.content=this._getContent(),this.time=this._getTime()}return(0,r.default)(e,[{key:"_getType",value:function(){var e=this.transcriptItem.type,t=this.transcriptItem.user,n=null;return e===this.EVENT_TYPES.JOINED_CHAT||e===this.EVENT_TYPES.LEFT_CHAT||t===this.EVENT_USERS.EXTERNAL?n=this.BUBBLE_TYPES.INFORMATIVE:t===this.EVENT_USERS.AGENT?n=this.BUBBLE_TYPES.AGENT:t===this.EVENT_USERS.CLIENT&&(n=this.BUBBLE_TYPES.CLIENT),n}},{key:"_getShowTime",value:function(){return this.type===this.BUBBLE_TYPES.AGENT||this.type===this.BUBBLE_TYPES.CLIENT}},{key:"_getContent",value:function(){var e="";switch(this.transcriptItem.type){case this.EVENT_TYPES.TEXT_MESSAGE:e={body:this.transcriptItem.message,params:null};break;case this.EVENT_TYPES.URL_MESSAGE:e={body:this._parseUrlMessage(this.transcriptItem.message),params:null};break;case this.EVENT_TYPES.JOINED_CHAT:e={body:"contactUs.modal.chat.connected.threadMessages.agentJoined",params:{name:this.name}};break;case this.EVENT_TYPES.LEFT_CHAT:e={body:"contactUs.modal.chat.connected.threadMessages.agentLeft",params:{name:this.name}};break;default:e=""}return e}},{key:"_getTime",value:function(){var e=new Date(this.transcriptItem.chatStartTime).getTime()+1e3*parseInt(this.transcriptItem.elapsedMs,10);return new Date(e)}},{key:"_parseUrlMessage",value:function(e){return e.replace(/(.*)(http.*$)/i,'<a class="chat-window-url" href="$2" target="_blank">$2</a>')}}]),e}();t.default=u,e.exports=t.default},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(643),a=i(s),o=n(644),r=i(o);n(645);var l={template:a.default,controller:r.default,bindings:{messageThread:"<",isAgentTyping:"<",agentName:"<"}};t.default=l,e.exports=t.default},function(e,t){e.exports='<div class="panel panel-chat-thread" ng-if="$ctrl.messageThread.length" ng-class="{\'panel-chat-thread--IOS_Safari\': $ctrl.isIOSSafari}" scroll-glue force-glue> <div class="tng-chat-thread" id="tng-chat-thread-area"> <tng-chat-bubble ng-repeat="chatBubble in $ctrl.messageThread" chat-bubble="chatBubble" bubble-types="$ctrl.bubbleTypes" date-object="$ctrl.Date"></tng-chat-bubble> <tng-chat-bubble ng-if="$ctrl.isAgentTyping" chat-bubble="$ctrl.agentTypingBubble" bubble-types="$ctrl.bubbleTypes" agent-name="$ctrl.agentName"></tng-chat-bubble> </div> </div> '},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i,s,o,r,l){(0,a.default)(this,e),this.contactUsConstants=t,this.$scope=n,this.$timeout=i,this.$log=s,this.$window=o,this.$document=r,this.EnvironmentService=l,this.isIOSSafari=l.isIOS()&&l.isSafari()}return(0,r.default)(e,[{key:"$onInit",value:function(){this.bubbleTypes=this.contactUsConstants.CHAT_BUBBLE_TYPES,this.Date=Date,this.agentTypingBubble={type:this.contactUsConstants.CHAT_BUBBLE_TYPES.AGENT_TYPING,content:{body:"...",params:null},isShowTime:!1,time:null,name:this.agentName},this.customHeight={height:""},this._chatThreadResize(null),angular.element(this.$window).bind("resize",this._chatThreadResize.bind(this))}},{key:"$onDestroy",value:function(){}},{key:"_chatThreadResize",value:function(){var e=this;this.$timeout(function(){if(angular.element(e.$window).innerWidth()>=980)e.customHeight={height:""};else{var t=angular.element("tng-chat-window #modalMainContent").height(),n=angular.element("tng-chat-window .chat-window__header--mobile").height(),i=0;e.EnvironmentService.isIOS()&&(i=80);var s=t-80-n-i;e.customHeight={height:s}}},20)}}]),e}();l.$inject=["contactUsConstants","$scope","$timeout","$log","$window","$document","EnvironmentService"],t.default=l,e.exports=t.default},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(647),a=i(s);n(648);var o=n(649),r=i(o),l={template:a.default,controller:r.default,bindings:{chatBubble:"<",bubbleTypes:"<",agentName:"<?",dateObject:"<?"}};t.default=l,e.exports=t.default},function(e,t){e.exports='<div class="chat-bubble" ng-class="::{\'chat-bubble__client\': $ctrl.chatBubble.type === $ctrl.bubbleTypes.CLIENT}"> <div ng-if="$ctrl.chatBubble.type === $ctrl.bubbleTypes.INFORMATIVE" class="margin__b--rel1 panel chat-panel" ng-class="$ctrl.chatBubble.button ? \'margin__b--chat-with-button-top-panel chat-panel__width--survey\' : \'\'" translate="{{ ::$ctrl.chatBubble.content.body }}" translate-values="$ctrl.chatBubble.content.params"> </div> <div class="panel chat-panel chat-panel__width--survey" ng-if="$ctrl.chatBubble.button"> <button class="btn btn--orange btn--large" ng-disabled="$ctrl.hasSurveyStarted" ng-click="$ctrl.clickFeedbackSurvey()" id="chat_feedbackSurveyButton" type="button"> {{ ::$ctrl.chatBubble.button | translate }} </button> </div> <div class="chat-text-container"> <div ng-if="$ctrl.chatBubble.type !== $ctrl.bubbleTypes.INFORMATIVE" class="margin__b--rel1 panel chat-panel" ng-bind-html="::$ctrl.chatBubble.content.body" ng-class="::{\n   \'panel chat-panel__agent\': $ctrl.chatBubble.type === $ctrl.bubbleTypes.AGENT,\n   \'panel chat-panel__agent--fresh\': $ctrl.dateObject && $ctrl.chatBubble.type === $ctrl.bubbleTypes.AGENT && $ctrl.chatBubble.time.valueOf() + 5000 > $ctrl.dateObject.now(),\n   \'panel chat-panel__agent chat-panel__agent--typing\': $ctrl.chatBubble.type === $ctrl.bubbleTypes.AGENT_TYPING,\n   \'panel chat-panel__customer\': $ctrl.chatBubble.type === $ctrl.bubbleTypes.CLIENT,\n   \'panel chat-panel__customer--fresh\': $ctrl.dateObject && $ctrl.chatBubble.type === $ctrl.bubbleTypes.CLIENT && $ctrl.chatBubble.time.valueOf() + 5000 > $ctrl.dateObject.now()\n   }"></div> </div> <div class="padding__b--rel2 chat-bubble__time" ng-if="$ctrl.chatBubble.isShowTime"> <p ng-class="::{\'float-left\': $ctrl.chatBubble.type === $ctrl.bubbleTypes.AGENT, \'float-right\': $ctrl.chatBubble.type === $ctrl.bubbleTypes.CLIENT}"> <span ng-if="$ctrl.chatBubble.type === $ctrl.bubbleTypes.CLIENT"><strong>{{\'contactUs.modal.chat.connected.client\' | translate}}</strong></span> <span ng-if="$ctrl.chatBubble.type === $ctrl.bubbleTypes.AGENT"><strong>{{$ctrl.chatBubble.name}}</strong></span> {{::$ctrl.chatBubble.time | date:\'h:mm a\'}} </p> </div> <div class="padding__b--rel2 chat-bubble__typing" ng-if="$ctrl.chatBubble.type === $ctrl.bubbleTypes.AGENT_TYPING && !$ctrl.chatBubble.isShowTime"> <p class="float-left"> <strong translate="{{::$ctrl.agentName}}"></strong> {{::\'contactUs.modal.chat.connected.agentTyping\' | translate}} </p> </div> </div> '},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i){(0,a.default)(this,e),this.contactUsConstants=t,this.ChatService=n,this.$log=i}return(0,r.default)(e,[{key:"clickFeedbackSurvey",value:function(){this.hasSurveyStarted=!0,this.chatBubble.callback(),this.handleChatFeedbackAnalytics()}},{key:"handleChatFeedbackAnalytics",value:function(){this.$log.debug("ChatBubbleController sending analytics on feedback survey click");var e=this.contactUsConstants.ANALYTICS_ACTIONS.FEEDBACK_CHAT_INITIATED;this.ChatService.sendChatAnalytics(e.id)}}]),e}();l.$inject=["contactUsConstants","ChatService","$log"],t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(651),a=i(s),o=n(652),r=i(o);n(653);var l={template:a.default,controller:r.default,bindings:{isOpen:"<"}};t.default=l,e.exports=t.default},function(e,t){e.exports='<div class="dropdown-menu drop-up" ng-if="$ctrl.isContactUsMenuOpen"> <div class="drop-up drop-up__mobile-bar"> <div class="drop-up drop-up__mobile-bar drop-up__mobile-bar--left"> <span class="mobile-bar mobile-bar__close icon-x large" ng-click="$ctrl.toggleContactUsMenu()"> </span> </div> <div class="drop-up drop-up__mobile-bar drop-up__mobile-bar--center"> <p class="brand"> <img ng-src="assets/images/brand.png"/> </p> </div> <div class="drop-up drop-up__mobile-bar drop-up__mobile-bar--right"> <span class="mobile-bar__help icon-search large"></span> </div> </div> <div class="contactus-content"> <span class="icon-x close-icon" ng-click="$ctrl.toggleContactUsMenu()"></span> <h5 class="team-brand"> {{ ::\'contactUs.modal.callYou.brand\' | translate }}<span class="icon-tangerine"></span> </h5> <h4>{{ \'contactUs.headline\' | translate }}</h4> <div class="contactus-content__block-container"> <div class="contactus-content__block-container__block"> <h6>{{ \'contactUs.phone.title\' | translate }}</h6> <p> {{ \'contactUs.phone.callUs\' | translate }} <br/> <strong> <a actionable-id="contact-us-menu-toggle_contact_modal" href="" tng-click="$ctrl.toggleCallUsModal();$ctrl.toggleContactUsMenu()" level2-auth="{{ !!$ctrl.isAuthenticated }}" ng-show="$ctrl.isCallUsAvailable">{{ \'contactUs.phone.phoneNumber\' | translate }}</a> <span ng-show="!$ctrl.isCallUsAvailable"> {{ \'contactUs.phone.phoneNumber\' | translate }} </span> </strong> <span ng-show="$ctrl.isCallYouAvailable"> {{ \'contactUs.phone.callYou.prefix\' | translate }} <a actionable-id="contact-us-menu-hyper_link" class="call-you" tng-click="$ctrl.toggleCallYouModal(); $ctrl.toggleContactUsMenu()" level2-auth="{{ !!$ctrl.isAuthenticated }}" href="">{{ \'contactUs.phone.callYou.hyperlink\' | translate }}</a> </span> </p> <p><strong>{{ \'contactUs.taxFaq.title\' | translate }}</strong> <a actionable-id="contact-us-menu-toggle_contact_menu_tax_faq" ng-href="{{ $ctrl.marketingUrl + (\'contactUs.taxFaq.faqLink\' | translate) }}" ng-click="$ctrl.toggleContactUsMenu();" target="_blank">{{ \'contactUs.taxFaq.faqLinkText\' | translate }}</a> </p> <h6 class="section-separator-header">{{ \'contactUs.chat.title\' | translate }}</h6> <h6 class="inner-header">{{ \'contactUs.chat.savingAndChecking.title\' | translate }}</h6> <p> {{ \'contactUs.chat.savingAndChecking.weekdays\' | translate }} <strong>{{ \'contactUs.chat.savingAndChecking.weekdaysTime\' | translate }}</strong> <br/> {{ \'contactUs.chat.savingAndChecking.weekend\' | translate }} <strong>{{ \'contactUs.chat.savingAndChecking.weekendTime\' | translate }}</strong> </p> <h6 class="inner-header">{{ \'contactUs.chat.investing.title\' | translate }}</h6> <p> {{ \'contactUs.chat.investing.weekdays\' | translate }} <strong>{{ \'contactUs.chat.investing.weekdaysTime\' | translate }}</strong> </p> <p ng-show="$ctrl.isChatWithUsAvailable">{{ \'contactUs.chat.getStarted\' | translate }} <a actionable-id="contact-us-menu-toggle_chat_modal" class="call-you" href="" tng-click="$ctrl.toggleChatWithUsModal(); $ctrl.toggleContactUsMenu()" level2-auth="{{ !!$ctrl.isAuthenticated }}">{{ \'contactUs.chat.chatLink\' | translate }}</a></p> <p ng-show="!$ctrl.isChatWithUsAvailable">{{ \'contactUs.unavailable\' | translate}}</p> </div> <div class="contactus-content__block-container__block"> <h6>{{ \'contactUs.faq.title\' | translate }}</h6> <p>{{ \'contactUs.faq.questions\' | translate }}<br/> <a actionable-id="contact-us-menu-toggle_contact_menu_faq" ng-href="{{ $ctrl.marketingUrl + (\'contactUs.faq.faqLink\' | translate) }}" ng-click="$ctrl.toggleContactUsMenu();" target="_blank">{{ \'contactUs.faq.faqLinkText\' | translate }}</a> </p> <h6 class="section-separator-header">{{ \'contactUs.faq.visitUs\' | translate }}</h6> <p>{{ \'contactUs.faq.cafes\' | translate }} <a actionable-id="contact-us-menu-toggle_contact_menu_cafes" ng-href="{{ $ctrl.marketingUrl + (\'contactUs.faq.cafesLink\' | translate) }}" ng-click="$ctrl.toggleContactUsMenu();" target="_blank">{{\'contactUs.faq.cafesLinkText\' | translate }}</a></p> </div> <div class="contactus-content__block-container__block"> <h6>{{ \'contactUs.getSocial\' | translate }}</h6> <ul class="social-list"> <li> <a actionable-id="contact-us-menu-twitter_btn" ng-href="{{\'contactUs.socialMedia.twitter\' | translate}}" target="_blank"> <img ng-src="assets/images/socialIcon-twitter.png"/> </a> </li> <li> <a actionable-id="contact-us-menu-facebook_btn" ng-href="{{\'contactUs.socialMedia.facebook\' | translate}}" target="_blank"> <img ng-src="assets/images/socialIcon-facebook.png"/> </a> </li> <li> <a actionable-id="contact-us-menu-linkedin_btn" ng-href="{{\'contactUs.socialMedia.linkedIn\' | translate}}" target="_blank"> <img ng-src="assets/images/socialIcon-linkedIn.png"/> </a> </li> <li> <a actionable-id="contact-us-menu-instagram_btn" ng-href="{{\'contactUs.socialMedia.instagram\' | translate}}" target="_blank"> <img ng-src="assets/images/socialIcon-instagram.png"/> </a> </li> <li> <a actionable-id="contact-us-menu-youtube_btn" ng-href="{{ \'global.menu.contactUs.socialLinks.youtube\' | translate }}" target="_blank"> <img ng-src="assets/images/socialIcon-youtube.png"/> </a> </li> </ul> </div> </div> </div> </div> '},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(36),a=i(s),o=n(35),r=i(o),l=n(0),c=i(l),u=n(1),d=i(u),h=n(57),_=function(){function e(t,n,i,s,a,o,r,l){(0,c.default)(this,e),this.contactUsConstants=t,this.AvailabilityService=n,this.AuthService=s,this.$log=a,this.$ngRedux=o,this.$translate=r,this.BundleService=l,this.EnvironmentService=i,this.marketingUrl=i.getBaseUrl()}return(0,d.default)(e,[{key:"$onInit",value:function(){this.unsubscribe=this.$ngRedux.connect(this.mapStateToThis.bind(this),(0,r.default)({},h.ChatWithUsActions,h.CallYouActions,h.CallUsActions,h.ContactUsActions))(this)}},{key:"$onDestroy",value:function(){this.unsubscribe()}},{key:"mapStateToThis",value:function(e){var t=this,n=(0,r.default)({},e.contactUs,e.callYou,e.callUs,e.chatWithUs),i=n.isContactUsMenuOpen,s=n.isChatWithUsAvailable,a=n.isCallYouAvailable,o=n.isCallUsAvailable;return i&&!this.isContactUsMenuOpen&&this.BundleService.loadCommonBundle().then(function(){return t._setContactUsAvailability()}),{isContactUsMenuOpen:i,isCallYouAvailable:a,isChatWithUsAvailable:s,isCallUsAvailable:o}}},{key:"_checkCallUsAvailability",value:function(e){return e.filter(function(e){return"CALL_BACK"===e.type&&e.available}).reduce(function(e,t){return e.concat(t.intends)},[]).some(function(e){return e.available&&e.wait_time<=1})}},{key:"_setContactUsAvailability",value:function(){var e=this;return this.AvailabilityService.getGeneralServiceAvailability().then(function(t){var n=t.services.filter(function(e){return e.available}).reduce(function(e,t){return(0,r.default)({},e,(0,a.default)({},t.type,!0))},{});e.setChatAvailability(!!n[e.contactUsConstants.CONTACT_SERVICES.CHAT]),e.setCallYouAvailability(!!n[e.contactUsConstants.CONTACT_SERVICES.CALL_BACK]),e.isCallUsLinkActive?e.setCallUsAvailability(e._checkCallUsAvailability(t.services)):e.setCallUsAvailability(!1)}).catch(function(t){return e.setChatAvailability(!1),e.setCallYouAvailability(!1),e.setCallUsAvailability(!1),e.$log.error("Failed to retrieve general service availability: ",t),t})}},{key:"isCallUsLinkActive",get:function(){return this.EnvironmentService.isNative()&&this.AuthService.isAuthenticated()}},{key:"isAuthenticated",get:function(){return this.AuthService.isAuthenticated()}}]),e}();_.$inject=["contactUsConstants","AvailabilityService","EnvironmentService","AuthService","$log","$ngRedux","$translate","BundleService"],t.default=_,e.exports=t.default},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(130),s=function(e){return e&&e.__esModule?e:{default:e}}(i),a={GET:"GET",POST:"POST"},o={getServiceAvailability:{method:a.GET,serviceType:s.default.CONTACT_SERVICES.AVAILABILITY,HTTP:{url:"/{{env}}/v1/general/service-availability"}},postBookCallYou:{method:a.POST,serviceType:s.default.CONTACT_SERVICES.CALL_BACK,HTTP:{url:"/evolution/callback"}},postCallUs:{method:a.POST,serviceType:s.default.CONTACT_SERVICES.CLICK_TO_CALL,HTTP:{url:"/evolution/click-to-call"}},createChatServiceSession:{method:a.POST,serviceType:s.default.CONTACT_SERVICES.CHAT,HTTP:{url:"/evolution/chat"}},createChatInteraction:{method:a.POST,serviceType:s.default.CONTACT_SERVICES.CHAT,HTTP:{url:"/evolution/1/service/{{sessionId}}/ixn/chat"}},refreshChatInteraction:{method:a.POST,serviceType:s.default.CONTACT_SERVICES.CHAT,HTTP:{url:"/evolution/1/service/{{sessionId}}/ixn/chat/refresh"}},chatInteractionStartTyping:{method:a.POST,serviceType:s.default.CONTACT_SERVICES.CHAT,HTTP:{url:"/evolution/1/service/{{sessionId}}/ixn/chat/startTyping"}},chatInteractionStopTyping:{method:a.POST,serviceType:s.default.CONTACT_SERVICES.CHAT,HTTP:{url:"/evolution/1/service/{{sessionId}}/ixn/chat/stopTyping"}},disconnectChatInteraction:{method:a.POST,serviceType:s.default.CONTACT_SERVICES.CHAT,HTTP:{url:"/evolution/1/service/{{sessionId}}/ixn/chat/disconnect"}}},r={GET_SERVICE_AVAILABILITY:"getServiceAvailability",POST_BOOK_CALL_YOU:"postBookCallYou",POST_CALL_US:"postCallUs",CREATE_CHAT_SERVICE_SESSION:"createChatServiceSession",CREATE_CHAT_INTERACTION:"createChatInteraction",REFRESH_CHAT_INTERACTION:"refreshChatInteraction",CHAT_INTERACTION_START_TYPING:"chatInteractionStartTyping",CHAT_INTERACTION_STOP_TYPING:"chatInteractionStopTyping",DISCONNECT_CHAT_INTERACTION:"disconnectChatInteraction"},l={createChatServiceSession:{_customer_number:"123456789",_device_os:"comet",_media_type:"chat",_provide_code:"true",_wait_for_agent:"false",_wait_for_user_confirm:"false"},createChatInteraction:{notify_by:"comet",subject:"chat"}};t.default={SERVICE_CONFIG:o,AVAILABLE_SERVICES:r,FORM_DATA:l},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=["$timeout",function(e){return{restrict:"A",scope:{onStartTyping:"&",onStopTyping:"&",onEnter:"&"},link:function(t,n){var i=null;n.on("keydown keypress",function(n){if(13===n.keyCode)return void t.onEnter();i?e.cancel(i):t.onStartTyping(),i=e(function(){i=null,t.onStopTyping()},4e3)})}}}];t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=n(657),c=i(l),u=n(658),d=i(u),h=function(){function e(t,n,i,s,o,r){(0,a.default)(this,e),this.config=t.CONFIG,this.LocalService=n,this.$window=s,this.$log=r,this.$q=o,this._genesys=null,this.session=null,this.cobrowseAPI=null,this.sessionStartedCB=null,this.sessionEndedCB=null,this.agentJoinedCB=null,this.apiInitializedCB=null,this.cobrowseLocaleCB=null,this.isCobrowseLocaleSet=!1,this.isMobileNative=i.isNative(),this.cobrowseLocale={enCA:c.default,frCA:d.default},this.isMobileNative}return(0,r.default)(e,[{key:"registerSessionStartedCB",value:function(e){this.sessionStartedCB=e}},{key:"deregisterSessionStartedCB",value:function(){this.sessionStartedCB=null}},{key:"registerSessionEndedCB",value:function(e){this.sessionEndedCB=e}},{key:"deregisterSessionEndedCB",value:function(){this.sessionEndedCB=null}},{key:"registerAgentJoinedCB",value:function(e){this.agentJoinedCB=e}},{key:"deregisterAgentJoinedCB",value:function(){this.apiInitializedCB=null}},{key:"registerApiInitializedCB",value:function(e){this.apiInitializedCB=e}},{key:"deregisterApiInitializedCB",value:function(){this.agentJoinedCB=null}},{key:"deregisterAllCB",value:function(){this.deregisterSessionStartedCB(),this.deregisterApiInitializedCB(),this.deregisterAgentJoinedCB(),this.deregisterSessionEndedCB()}},{key:"startCobrowseSession",value:function(){return this.isCobrowseLocaleSet||(this.isCobrowseLocaleSet=!0,this._setLocale()),this.$q.resolve(this.cobrowseAPI.startSession())}},{key:"endCobrowseSession",value:function(){return this.$q.resolve(this.cobrowseAPI.exitSession())}},{key:"_cobrowseSessionStarted",value:function(e){this.session=e,"function"==typeof this.sessionStartedCB&&this.sessionStartedCB(e)}},{key:"_cobrowseSessionEnded",value:function(e){this.session=null,"function"==typeof this.sessionEndedCB&&this.sessionEndedCB(e)}},{key:"_cobrowseApiInitialized",value:function(e){!this.isCobrowseLocaleSet&&e&&(this.isCobrowseLocaleSet=!0,this._setLocale()),this.session=e,"function"==typeof this.apiInitializedCB&&this.apiInitializedCB(e)}},{key:"_agentJoined",value:function(e,t){"function"==typeof this.sessionStartedCB&&this.agentJoinedCB(e,t)}},{key:"_setLocale",value:function(){var e=this.LocalService.locale;this.cobrowseLocaleCB(this.cobrowseLocale[e]),this.$log.debug("Cobrowse Localed Set: ",e,this.cobrowseLocale[e])}},{key:"_appendGCBScript",value:function(){var e=this.config.genesys.cobrowse,t=document.getElementsByTagName("script")[0],n=document.createElement("script");n.id="genesys-js",n.src="assets/js/gcb.min.js",n.setAttribute("data-gcb-url",e+"/evolution/cobrowse"),n.setAttribute("data-gwc-var","_genesys.chat"),t.parentNode.insertBefore(n,t)}},{key:"_extendCobrowseAPI",value:function(){var e=this;this._genesys={debug:!1,chat:!1,cobrowse:{primaryMedia:{isAgentConnected:function(){return!0},sendCbSessionToken:function(){}},localization:function(t){e.cobrowseLocaleCB=t},onReady:function(t){t.onSessionStarted.add(function(t){e._cobrowseSessionStarted(t),e.$log.debug("Cobrowse Session Started",t)}),t.onInitialized.add(function(t){e._cobrowseApiInitialized(t),e.$log.debug("Cobrowse API Initialized",t)}),t.onAgentJoined.add(function(t,n){e._agentJoined(t,n),e.$log.debug("Cobrowse Session Agent Joined",t,n)}),t.onSessionEnded.add(function(t){e._cobrowseSessionEnded(t),e.$log.debug("Cobrowse Session Ended",t)}),e.cobrowseAPI=t}}},this.$window._genesys=this._genesys}}]),e}();h.$inject=["buildConstants","LocaleService","EnvironmentService","$window","$q","$log"],t.default=h,e.exports=t.default},function(e,t){e.exports={agentJoined:"Representative has joined the session",youLeft:"You have left the session. Co-browse is now terminated.",sessionTimedOut:"Session timed out. Co-browse is now terminated.",sessionInactiveTimedOut:"Session timed out. Co-browse is now terminated.",agentLeft:"Representative has left the session. Co-browse is now terminated.",sessionError:"Unexpected error occured. Co-browse is now terminated.",serverUnavailable:"Could not reach Co-browse server. Co-browse is now terminated.",sessionStarted:"Your co-browse session ID is {sessionId}. Please spell it to our representative to continue with co-browsing.",navRefresh:"Representative has refreshed the page. Reloading.",navBack:'Representative has pressed the "Back" button. Reloading page.',navForward:'Representative has pressed the "Forward" button. Reloading page.',navUrl:"Representative has requested navigation. Reloading page.",navFailed:"Navigation request by representative has failed.",toolbarContent:"Session ID: {sessionId}",contentMasked:"Content is hidden from representative",contentMaskedPartially:"Some content is hidden from representative",exitBtnTitle:"Exit Co-browse session",areYouOnPhone:"Are you on the phone with our representative?",areYouOnPhoneOrChat:"Are you on the phone or chat with our representative?",connectBeforeCobrowse:"You need to be connected with our representative to continue with co-browsing. Please call us or start a live chat with us, and then start Co-browse again.",sessionStartedAutoConnect:"Co-browse session started. Waiting for representative to connect to the session&hellip;",browserUnsupported:"Unfortunately, your browser is not currently supported.<br><br> Supported browsers are: <ul><li><a target='_blank' href='http://www.google.com/chrome'>Google Chrome</a></li><li><a target='_blank' href='http://www.firefox.com/'>Mozilla Firefox</a></li><li><a target='_blank' href='http://microsoft.com/ie'>Internet Explorer 9 and above</a></li><li><a target='_blank' href='https://www.apple.com/safari'>Safari 6 and above</a></li></ul>",chatIsAlreadyRunning:"Chat is already running on another page.",modalTitle:"Co-browse",modalYes:"Yes",modalNo:"No",writeModeInProgress:"Agent has control over the page.",downgradeMode:"Revoke control",modeUpgraded:"Co-browse session was upgraded. Agent has control over the page.",modeDowngraded:"Co-browse session was downgraded. Agent has no control",modeUpgradeRequested:'Agent requests upgrading Co-browse session to "write" mode. In "write" mode agent will have control over the page.'}},function(e,t){e.exports={agentJoined:"Un Associ&eacute; s'est joint &agrave; la session.",youLeft:"Vous avez quitt&eacute; la session. Le partage d'&eacute;cran est maintenant termin&eacute;.",sessionTimedOut:"La session a expir&eacute;. Le partage d'&eacute;cran est maintenant termin&eacute;.",sessionInactiveTimedOut:"La session a expir&eacute;. Le partage d'&eacute;cran est maintenant termin&eacute;.",agentLeft:"L'Associ&eacute; a quitt&eacute; la session. Le partage d'&eacute;cran est maintenant termin&eacute;.",sessionError:"Une erreur inattendue s'est produite. Le partage d'&eacute;cran est maintenant termin&eacute;.",serverUnavailable:"Nous n'avons pas pu nous connecter au serveur de partage d'&eacute;cran. Le partage d'&eacute;cran est maintenant termin&eacute;.",sessionStarted:"Votre identificateur de session de partage d'&eacute;cran est {sessionid}. Veuillez l'&eacute;peler &agrave; notre Associ&eacute; pour continuer.",navRefresh:"L'Associ&eacute; a rafraichi la page qui est en cours de recharge.",navBack:'L\'Associ&eacute; a cliqu&eacute; sur le bouton "Retour". Rechargement de la page.',navForward:'L\'Associ&eacute; a cliqu&eacute; sur le bouton"Suivant". Rechargement de la page.',navUrl:"L'Associ&eacute; a fait une demande de navigation. Rechargement de la page.",navFailed:"La demande de navigation de l'Associ&eacute; a &eacute;chou&eacute;. ",toolbarContent:"Identificateur de session : {sessionId}",contentMasked:"Le contenu est invisible &agrave; l'Associ&eacute;",contentMaskedPartially:"Une partie du contenu est invisible &agrave; l'Associ&eacute;",exitBtnTitle:"Quitter la session de partage d'&eacute;cran",areYouOnPhone:"&Ecirc;tes-vous au t&eacute;l&eacute;phone avec notre Associ&eacute; ?",areYouOnPhoneOrChat:"&Ecirc;tes-vous au t&eacute;l&eacute;phone ou en train de clavarder avec notre Associ&eacute; ?",connectBeforeCobrowse:"Vous devez &ecirc;tre connect&eacute; avec notre Associ&eacute; pour continuer avec le partage d'&eacute;cran. Veuillez nous appeler ou lancer une session de clavardage en direct avec nous, et puis recommencer le partage d'&eacute;cran.",sessionStartedAutoConnect:"La session de partage d'&eacute;cran a commenc&eacute;. En attente d'un Associ&eacute; pour se connecter &agrave; la session&hellip;",browserUnsupported:"Nous sommes d&eacute;sol&eacute;s : votre navigateur n'est pas support&eacute; actuellement. Les navigateurs support&eacute;s sont les suivants : <ul><li><a target='_blank' href='http://www.google.com/chrome'>Google Chrome</a></li><li><a target='_blank' href='http://www.firefox.com/'>Mozilla Firefox</a></li><li><a target='_blank' href='http://microsoft.com/ie'>Internet Explorer 9 et versions plus r&eacute;centes</a></li><li><a target='_blank' href='https://www.apple.com/safari'>Safari 6 et versions plus r&eacute;centes</a></li></ul>",chatIsAlreadyRunning:"Une session de clavardage est d&eacute;j&agrave; ouverte sur une autre page.",modalTitle:"Partage d'&eacute;cran",modalYes:"Oui",modalNo:"Non",writeModeInProgress:"L'Associ&eacute; contr&ocirc;le la page.",downgradeMode:"Reprendre le contr&ocirc;le",modeUpgraded:"L'Associ&eacute; contr&ocirc;le maintenant la page.",modeDowngraded:"L'Associ&eacute; ne contr&ocirc;le plus la page.",modeUpgradeRequested:"L'Associ&eacute; demande la permission de placer la session en mode \"&eacute;criture\". L'Associ&eacute; contr&ocirc;lera alors la page."}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i,s,o,r,l,c){(0,a.default)(this,e),this.$q=l,this.$log=c,this.GenesysRequesterService=t,this.LocaleService=n,this.AuthService=i,this.genesysRequestConstants=s,this.contactUsConstants=o,this.buildConstants=r,this.serviceAvailabilityEnvAppId=this.buildConstants.CONFIG.genesys.serviceAvailabilityEnvAppId,this.serviceAvailabilityEnv=this.buildConstants.CONFIG.genesys.serviceAvailabilityEnv,this.request_queue=[]}return(0,r.default)(e,[{key:"getServiceAvailability",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i={queries:{type:e,appId:this.serviceAvailabilityEnvAppId,language:this.LocaleService.localeDisplay,product:t,"logged-in":this.AuthService.isAuthenticated()},urlVars:{env:this.serviceAvailabilityEnv}};return""!==n&&(i.queries["intend-q"]=n),this.GenesysRequesterService.request(this.genesysRequestConstants.AVAILABLE_SERVICES.GET_SERVICE_AVAILABILITY,i).then(function(n){return Array.isArray(n.services)?n.services.filter(function(n){return(n.product===t||!n.product)&&n.type===e}):[]}).then(function(e){return e[0]})}},{key:"getGeneralServiceAvailability",value:function(){var e=this,t=this.$q.defer();if(this.request_queue.push(t),1===this.request_queue.length){var n={queries:{appId:this.serviceAvailabilityEnvAppId,language:this.LocaleService.localeDisplay,"logged-in":this.AuthService.isAuthenticated()},urlVars:{env:this.serviceAvailabilityEnv}};this.GenesysRequesterService.request(this.genesysRequestConstants.AVAILABLE_SERVICES.GET_SERVICE_AVAILABILITY,n).then(function(t){for(;e.request_queue.length>0;)e.request_queue.pop().resolve(t)}).catch(function(t){for(;e.request_queue.length>0;)e.request_queue.pop().reject(t)})}return t.promise}}]),e}();l.$inject=["GenesysRequesterService","LocaleService","AuthService","genesysRequestConstants","contactUsConstants","buildConstants","$q","$log"],t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(13),a=i(s),o=n(0),r=i(o),l=n(1),c=i(l),u=function(){function e(t,n,i,s,o,l,c,u,d,h,_){(0,r.default)(this,e),this.$log=d,this.$q=u,this.$translate=h,this.GenesysRequesterService=t,this.RequesterService=n,this.AuthService=s,this.LocaleService=i,this.genesysRequestConstants=o,this.serviceConstants=l,this.buildConstants=c,this.contactUsConstants=_,this.env=this.buildConstants.CONFIG.genesys.env,this.TOPICS_THAT_NEED_SUBTOPIC=(0,a.default)(_.TOPIC_HELPS_RELATION).filter(function(e){return _.TOPIC_HELPS_RELATION[e].ITEMS>0})}return(0,c.default)(e,[{key:"bookCallYou",value:function(e,t){var n=this;return this.$q.when(!0).then(function(){return n.AuthService.isAuthenticated()?n._getToken():""}).then(function(i){var s={CustomerNumber:t.replace(/-/g,""),kvp_CallUID:e,kvp_LanguageSelection:n._getLocale(),kvp_SecurityToken:i,kvp_Environment:n.env},a={data:s};return n.GenesysRequesterService.request(n.genesysRequestConstants.AVAILABLE_SERVICES.POST_BOOK_CALL_YOU,a)})}},{key:"bookCallUs",value:function(e){var t=this;return this.$q.when(!0).then(function(){return t.AuthService.isAuthenticated()?t._getToken():""}).then(function(n){var i={kvp_CallUID:e,kvp_LanguageSelection:t._getLocale(),kvp_SecurityToken:n,kvp_Environment:t.env},s={data:i};return t.GenesysRequesterService.request(t.genesysRequestConstants.AVAILABLE_SERVICES.POST_CALL_US,s)})}},{key:"_getToken",value:function(){var e={device_alias:"mobile",device_type:"iPhone"};return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.GET_CONTACT_SECURITY_TOKEN,{data:e}).then(function(e){return e.securityToken||e.security_token})}},{key:"_getLocale",value:function(){return this.LocaleService.locale?this.LocaleService.locale.replace("_","-"):"en-CA"}},{key:"_formatToUrlEncoded",value:function(e){return(0,a.default)(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")}},{key:"getLabelsArray",value:function(e,t){var n=this;return new Array(e).fill().map(function(e,i){return{label:n.$translate.instant(""+t+(i+1)+".name"),value:n.$translate.instant(""+t+(i+1)+".value")}})}},{key:"getTopics",value:function(){var e=this.getLabelsArray(5,this.contactUsConstants.TOPICS_I18N_KEY);return e.splice(0,1),e}},{key:"getSubTopics",value:function(e){var t=this.contactUsConstants.TOPIC_HELPS_RELATION[e].ITEMS,n=this.contactUsConstants.TOPIC_HELPS_RELATION[e].PROP_INDEX,i=this.contactUsConstants.TOPICS_I18N_KEY,s=this.contactUsConstants.SUBTOPICS_SUFFIX_I18N_KEY,a=""+i+n+"."+s,o=this.getLabelsArray(t,a);return o.splice(0,1),o}},{key:"topicNeedsSubTopic",value:function(e){return this.TOPICS_THAT_NEED_SUBTOPIC.indexOf(e)>=0}},{key:"arrayIsNotEmpty",value:function(e){return Array.isArray(e)&&e.length>0}}]),e}();u.$inject=["GenesysRequesterService","RequesterService","LocaleService","AuthService","genesysRequestConstants","serviceConstants","buildConstants","$q","$log","$translate","contactUsConstants"],t.default=u,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),a=i(s),o=n(0),r=i(o),l=n(1),c=i(l),u=n(18),d=i(u),h=function(){function e(t,n,i,s,a,o,l,c,u){(0,r.default)(this,e),this.$http=t,this.$log=n,this.$state=i,this.$q=s,this.$interpolate=a,this.contactUsConstants=l,this.buildConstants=c,this.EnvironmentService=u,this.HTTP_VERBS=o.HTTP_VERBS,this.config=o.SERVICE_CONFIG}return(0,c.default)(e,[{key:"request",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.$log.debug("Chat Service request for "+e);var n=this.config[e],i=n.method,s=n.HTTP;this.baseUrl=this.EnvironmentService.getGenesysAPIUrl();var a=this.baseUrl+s.url;a=this._interpolate(a,t);var o=void 0,r=void 0;if(n.serviceType!==this.contactUsConstants.CONTACT_SERVICES.AVAILABILITY){var l=this._constructPayloadAndHeaders(t.data,t.gmsUser);o=l.headers,r=l.data,d.default.extend(o,t.headers)}else o=t.headers,r=t.data;var c=t.queries;return this.$http({method:i,url:a,data:r,params:c,headers:o,withCredentials:!0}).then(function(e){return e.data})}},{key:"_constructPayloadAndHeaders",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="----WebKitFormBoundary7MA4YWxkTrZu0gW",i={"Content-Type":"multipart/form-data;boundary="+n+";charset=UTF-8"};t&&(0,a.default)(i,{gms_user:t});var s="";return angular.forEach(e,function(e,t){s+="--"+n+'\r\nContent-Disposition: form-data; name="'+t+'"\r\n\r\n'+e+"\r\n"}),s.length>0&&(s+="--"+n),{headers:i,data:s}}},{key:"_interpolate",value:function(e,t){return t&&"urlVars"in t?(this.$log.debug("interpolating",e,t),this.$interpolate(e)(t.urlVars)):e}}]),e}();h.$inject=["$http","$log","$state","$q","$interpolate","genesysRequestConstants","contactUsConstants","buildConstants","EnvironmentService"],t.default=h,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(35),a=i(s),o=n(0),r=i(o),l=n(1),c=i(l),u=n(18),d=i(u),h=function(){function e(t,n,i,s,a,o,l,c,u,d,h,_,g,S,f,v,E,p,T,m,C,A){(0,r.default)(this,e),this.config=t.CONFIG,this.contactUsConstants=n,this.storageConstants=i,this.AuthService=s,this.RequesterService=a,this.GenesysRequesterService=o,this.serviceConstants=l,this.genesysRequestConstants=c,this.LocaleService=u,this.UserService=d,this.StorageService=h,this.EnvironmentService=_,this.cometD=g,this.uuid=S,this.$q=E,this.$cookies=f,this.$translate=v,this.$log=p,this.$window=T,this.$document=m,this.$state=C,this.AnalyticsService=A,this.ANALYTICS_AVAILABLE_EVENTS=this.AnalyticsService.availableEvents,this.env=this.config.genesys.env,this.sessionId=null,this.cometD.websocketEnabled=!1,this.genesysSubscription=null,this.genesysConnectListener=null,this.genesysDisconnectListener=null,this.cometDState=this.chatInteractionState=n.CONNECTION_STATES.DISCONNECTED.name,this.cookieOptions={path:"/"};try{var I=void 0,O=this.$document[0].createElement("a");O.href=this.$window.location.href;var N=O.hostname.split("."),y=!N.some(function(e){return+e!=+e});(I=1===N.length||y?null:"."+N.slice(N.length-2).join("."))&&(this.cookieOptions.domain=I)}catch(e){this.$log.error("Could not extract domain")}this.gms_user=null,this.productId="",this.locale=this._getLocale()}return(0,c.default)(e,[{key:"existsActiveChat",value:function(){return this._checkAndSetChatSession()}},{key:"sendChatAnalytics",value:function(e){this.AnalyticsService.sendAction(this.ANALYTICS_AVAILABLE_EVENTS.CUSTOM_EVENT,e,{label:this.$window.productTypeAndIntent,category:"Secure Chat",value:""})}},{key:"startChat",value:function(e,t){var n=this,i=this.contactUsConstants.ANALYTICS_ACTIONS.START_CHAT;this.sendChatAnalytics(i.id),this.$log.debug("ChatService startChat() called - sessionId, gms_user: ",this.sessionId,this.gms_user);var s=this.$q.defer();return this.$q.when(!0).then(function(){return n.sessionId&&n.gms_user?n._reconnectActiveChat(t):n._startNewChat(e,t)}).then(function(){s.resolve()}).catch(function(e){s.reject(e),n.endChat().catch(function(e){n.$log.error("Failed to clear potential lingering genesys connections",e)})}),s.promise}},{key:"setClientStartTyping",value:function(){return this._updateStartTyping()}},{key:"setClientStopTyping",value:function(){return this._updateStopTyping()}},{key:"sendMessage",value:function(e){return this._refreshChatInteraction(e)}},{key:"endChat",value:function(){var e=this,t=this.$q.defer();return this._clearChatState().catch(function(t){e.$log.error("Failed to clear chat state",t)}),this.$q.all([this._disconnectCometD(),this._disconnectChatInteraction()]).then(function(){t.resolve()}).catch(function(e){t.reject(e)}).finally(function(){e.gms_user=null,e.sessionId=null})}},{key:"_getLocale",value:function(){return this.LocaleService.locale?this.LocaleService.locale.replace("_","-"):"en-CA"}},{key:"_storeChatState",value:function(e){var t={gmsUser:this.gms_user,sessionId:this.sessionId};try{this.$cookies.put("tc-gmsuser",this.gms_user,this.cookieOptions);var n=this.config.genesys.chat,i=this.genesysRequestConstants.SERVICE_CONFIG.createChatInteraction.HTTP.url.replace("{{sessionId}}",this.sessionId);this.$cookies.put("tc-gmsurl",""+n+i,this.cookieOptions),this.$cookies.put("tc-pt",e,this.cookieOptions),this.$cookies.put("tc-ws","open-modal",this.cookieOptions)}catch(e){this.$log.error("reverse compatibility for VS chat failed - Chat.service.js - _storeChatState")}var s={status:"connected",action:"_handleConnect",isActive:!0,isEnded:!1,showTyping:!1,showEnded:!1};return this.$cookies.putObject("tc-status",s,this.cookieOptions),this.StorageService.setItem(this.storageConstants.KEYS.CHAT_SESSION,t)}},{key:"_retrieveChatState",value:function(){var e=this;return this.StorageService.getItem(this.storageConstants.KEYS.CHAT_SESSION).then(function(t){if(t)return t;var n=e.$cookies.get("tc-gmsuser"),i=e.$cookies.get("tc-gmsurl");return i&&(i=i.match(/service\/(.*)\/ixn/i)[1]),!(!i||!n)&&{gmsUser:n,sessionId:i}})}},{key:"_clearChatState",value:function(){return this.$cookies.remove("tc-gmsuser",this.cookieOptions),this.$cookies.remove("tc-gmsurl",this.cookieOptions),this.$cookies.remove("tc-pt",this.cookieOptions),this.$cookies.remove("tc-ws",this.cookieOptions),this.$cookies.remove("tc-status",this.cookieOptions),this.StorageService.deleteItem(this.storageConstants.KEYS.CHAT_SESSION)}},{key:"_startNewChat",value:function(e,t){var n=this;this.$log.debug("ChatService: _startNewChat()");try{e=e.replace("_CB","")}catch(t){e=""}return this.gms_user=this._generateGmsUserId(),this.locale=this._getLocale(),this.$q.when(!0).then(function(){return n.AuthService.isAuthenticated()?n._getToken():n.$q.resolve("")}).then(function(i){return n.$q.all([n._createServiceSession(i,e),n._initializeCometD(t)])}).then(function(){return n._createChatInteraction()}).then(function(){return n._storeChatState(e).catch(function(e){n.$log.error("Failed to store chat state",e)}),n.$q.resolve()})}},{key:"_reconnectActiveChat",value:function(e){var t=this;return this._refreshChatInteractionFromStart().then(function(n){return e(n),t._initializeCometD(e)})}},{key:"_checkAndSetChatSession",value:function(){var e=this;this.$log.debug("Chat Service: CHECK AND SET SESSION");var t=this.$q.defer();return this._retrieveChatState().then(function(t){return!!t&&(e.sessionId=t.sessionId,e.gms_user=t.gmsUser,e._updateStopTyping().then(function(){return!0}).catch(function(){return!1}))}).then(function(n){n?e.chatInteractionState=e.contactUsConstants.CONNECTION_STATES.CONNECTED.name:(e.sessionId=null,e.gms_user=null,e._clearChatState()),t.resolve(n)}).catch(function(){t.resolve(!1)}),t.promise}},{key:"_initializeCometD",value:function(e){var t=this;this.$log.debug("ChatService: _initializeCometD Called");var n=this.cometD;if(this.cometDState===this.contactUsConstants.CONNECTION_STATES.CONNECTED.name)return this.$q.resolve();var i=this.$q.defer();return this.base_gms_url=this.EnvironmentService.getGenesysAPIUrl(),n.configure({url:this.base_gms_url+"/evolution/cometd",requestHeaders:{gms_user:this.gms_user},logLevel:"info"}),n.handshake(function(e){e.successful?(t.cometDState=t.contactUsConstants.CONNECTION_STATES.CONNECTED.name,i.resolve()):i.reject("Failed to establish handshake with comet server.")}),this.genesysConnectListener=n.addListener("/meta/connect",function(){t.$log.debug("cometD connected")}),this.genesysDisconnectListener=n.addListener("/meta/disconnect",function(){t.$log.debug("cometD Disconnected")}),this.genesysSubscription=n.subscribe("/_genesys",function(n){t.$log.debug("Subscription event triggered",n),n.data&&n.data.message&&e(n.data.message)}),n.onListenerException=function(e,n,i,s){t.$log.error("EXCEPTION",e,n,i,s)},i.promise}},{key:"_disconnectCometD",value:function(){var e=this;this.$log.debug("ChatService: _disconnectCometD Called");var t=this.cometD;if(this.cometDState===this.contactUsConstants.CONNECTION_STATES.DISCONNECTED.name)return this.$q.resolve();var n=this.$q.defer();return this.genesysSubscription&&(t.unsubscribe(this.genesysSubscription),this.genesysSubscription=null),this.genesysConnectListener&&(t.removeListener(this.genesysConnectListener),this.genesysConnectListener=null),this.genesysDisconnectListener&&(t.removeListener(this.genesysDisconnectListener),this.genesysDisconnectListener=null),t.disconnect(function(t){t.successful?(e.cometDState=e.contactUsConstants.CONNECTION_STATES.DISCONNECTED.name,n.resolve()):n.reject("Failed to cleanly disconnect from comet server.")}),n.promise}},{key:"_generateGmsUserId",value:function(){return this.uuid.v4()}},{key:"_createServiceSession",value:function(e,t){var n=this,i={kvp_CallUID:t,kvp_SecurityToken:e,kvp_LanguageSelection:this.locale,kvp_Environment:this.env,kvp_WebOriginPage:this.$state.kvp_current,kvp_ChatWebPreviousPage:this.$state.kvp_previous,kvp_ChatWebErrorCode:this.RequesterService.lastError.code,kvp_ChatWebErrorCounter:this.RequesterService.lastError.counter};d.default.extend(i,this.genesysRequestConstants.FORM_DATA[this.genesysRequestConstants.AVAILABLE_SERVICES.CREATE_CHAT_SERVICE_SESSION]);var s={headers:{gms_user:this.gms_user},data:i};return this.GenesysRequesterService.request(this.genesysRequestConstants.AVAILABLE_SERVICES.CREATE_CHAT_SERVICE_SESSION,s).then(function(e){return e&&"StartChat"===e._action&&e._start_chat_url?(n._extractAndSetSessionId(e._start_chat_url),n.$q.resolve()):n.$q.reject("Start Service Session Request returned 200 but action param was not correct")})}},{key:"_createChatInteraction",value:function(){var e=this;return this.chatInteractionState===this.contactUsConstants.CONNECTION_STATES.CONNECTED.name?this.$q.resolve():this._getUserFirstAndLastName().then(function(t){var n=t.firstName,i=t.lastName,s={FirstName:n,LastName:i,userDisplayName:n+" "+i};s=(0,a.default)({},s,e.genesysRequestConstants.FORM_DATA[e.genesysRequestConstants.AVAILABLE_SERVICES.CREATE_CHAT_INTERACTION]);var o={headers:{gms_user:e.gms_user},urlVars:{sessionId:e.sessionId},data:s};return e.GenesysRequesterService.request(e.genesysRequestConstants.AVAILABLE_SERVICES.CREATE_CHAT_INTERACTION,o)}).then(function(t){return t&&t.chatIxnState===e.contactUsConstants.CONNECTION_STATES.CONNECTED.name?(e.chatInteractionState=e.contactUsConstants.CONNECTION_STATES.CONNECTED.name,e._setSurveyMetadata(t.chatSessionId),e.$q.resolve()):e.$q.reject("Chat Interaction failed to connect")})}},{key:"_setSurveyMetadata",value:function(e){this.$window.agentChatInteractionId=e}},{key:"_refreshChatInteraction",value:function(e){var t={_verbose:"false",message:e},n={headers:{gms_user:this.gms_user},data:t,urlVars:{sessionId:this.sessionId}};return this.GenesysRequesterService.request(this.genesysRequestConstants.AVAILABLE_SERVICES.REFRESH_CHAT_INTERACTION,n)}},{key:"_refreshChatInteractionFromStart",value:function(){var e={headers:{gms_user:this.gms_user},urlVars:{sessionId:this.sessionId},queries:{transcriptPosition:1}};return this.GenesysRequesterService.request(this.genesysRequestConstants.AVAILABLE_SERVICES.REFRESH_CHAT_INTERACTION,e)}},{key:"_updateStartTyping",value:function(){var e={headers:{gms_user:this.gms_user},urlVars:{sessionId:this.sessionId}};return this.GenesysRequesterService.request(this.genesysRequestConstants.AVAILABLE_SERVICES.CHAT_INTERACTION_START_TYPING,e)}},{key:"_updateStopTyping",value:function(){var e={headers:{gms_user:this.gms_user},urlVars:{sessionId:this.sessionId}};return this.GenesysRequesterService.request(this.genesysRequestConstants.AVAILABLE_SERVICES.CHAT_INTERACTION_STOP_TYPING,e)}},{key:"_disconnectChatInteraction",value:function(){var e=this;if(this.chatInteractionState===this.contactUsConstants.CONNECTION_STATES.DISCONNECTED.name)return this.$q.resolve();var t={headers:{gms_user:this.gms_user},urlVars:{sessionId:this.sessionId}};return this.GenesysRequesterService.request(this.genesysRequestConstants.AVAILABLE_SERVICES.DISCONNECT_CHAT_INTERACTION,t).then(function(t){return t&&"DISCONNECTED"===t.chatIxnState?(e.chatInteractionState=e.contactUsConstants.CONNECTION_STATES.DISCONNECTED.name,e.$q.resolve()):e.$q.reject("Chat Interaction failed to disconnect or was already disconnected")})}},{key:"_getUserFirstAndLastName",value:function(){var e=this;return this.$q.when(!0).then(function(){return!!e.AuthService.isAuthenticated()&&e.UserService.getUserInfo()}).then(function(t){var n=void 0,i=void 0;return t?(n=t.customer.first_name,i=t.customer.last_name):(n=e.$translate.instant("contactUs.modal.chat.anonymousClientFirstName"),i=e.$translate.instant("contactUs.modal.chat.anonymousClientLastName"),e.AuthService.isAuthenticated()&&e.$log.error("ChatNameRetrievalError")),e.$q.resolve({firstName:n,lastName:i})})}},{key:"_extractAndSetSessionId",value:function(e){var t=e.match(/service\/(.*)\/ixn/i);this.sessionId=t[1]}},{key:"_getToken",value:function(){var e={device_alias:"mobile",device_type:"iPhone"};return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.GET_CONTACT_SECURITY_TOKEN,{data:e}).then(function(e){return e.securityToken||e.security_token})}}]),e}();h.$inject=["buildConstants","contactUsConstants","storageConstants","AuthService","RequesterService","GenesysRequesterService","serviceConstants","genesysRequestConstants","LocaleService","UserService","StorageService","EnvironmentService","cometd","uuid","$cookies","$translate","$q","$log","$window","$document","$state","AnalyticsService"],t.default=h,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n){(0,a.default)(this,e),this.$window=t,this.$interval=n,this.tabSavedText="",this.notificationsEnabled=!0,this.count=1,this.alertAudio=new Audio("assets/sounds/chat_notification.mp3")}return(0,r.default)(e,[{key:"tabNotificationStart",value:function(e,t){this.notificationsEnabled&&(this.alertAudio.play(),this.tabTextInterval?this.tabText===e?this.count=this.count+1:(this.count=1,this.tabText=e,this.notificationCallback=t):(this.tabSavedText=this.$window.document.title,this.tabText=e,this.notificationCallback=t,this._startTabTimer()))}},{key:"tabNotificationStop",value:function(){this._setTabText(this.tabSavedText),this._stopTabTimer()}},{key:"enableTabNotifications",value:function(){this.notificationsEnabled=!0}},{key:"disableTabNotifications",value:function(){this.notificationsEnabled=!1}},{key:"_startTabTimer",value:function(){var e=this;this.tabTextInterval=this.$interval(function(){e.notificationCallback(),e.$window.document.title===e.tabText?e._setTabText("("+e.count+") "+e.tabSavedText):e._setTabText(e.tabText)}.bind(this),2e3)}},{key:"_stopTabTimer",value:function(){this.tabTextInterval&&(this.$interval.cancel(this.tabTextInterval),this.tabTextInterval=null,this.count=1)}},{key:"_setTabText",value:function(e){this.$window.document.title=e}}]),e}();l.$inject=["$window","$interval"],t.default=l,e.exports=t.default},function(e,t,n){"use strict";var i={};i.cometd=n(110),i.cometd.AckExtension=n(665),i.cometd.ReloadExtension=n(666),i.cometd.TimeStampExtension=n(667),i.cometd.TimeSyncExtension=n(668),angular.module("cometd",[]).factory("cometd",["$rootScope","$http",function(e,t){function n(){var e=new i.cometd.LongPollingTransport,n=i.cometd.Transport.derive(e);return n.xhrSend=function(e){var n={},i=e.headers||{};return i["Content-Type"]="application/json;charset=UTF-8",t.post(e.url,e.body,{headers:i,withCredentials:!0}).success(function(t,i){n.status=i,e.onSuccess(t)}).error(function(t,i,s,a,o){n.status=i,e.onError(o)}),n},n}function s(){var e=new i.cometd.CallbackPollingTransport,n=i.cometd.Transport.derive(e);return n.jsonpSend=function(e){t.jsonp(e.url,{headers:e.headers,params:{jsonp:"JSON_CALLBACK",message:e.body}}).success(function(t){e.onSuccess(t)}).error(function(t,n,i,s,a){e.onError(a)})},n}function a(t){return function(){var n=this,i=arguments;return e.$apply(function(){return t.apply(n,i)})}}return e.CometD=function(e){var t=new i.cometd.CometD(e);if(t.unregisterTransports(),window.WebSocket){var o=new i.cometd.WebSocketTransport;o._notifySuccess=a(o._notifySuccess),o._notifyFailure=a(o._notifyFailure),t.registerTransport("websocket",o)}t.registerTransport("long-polling",new n),t.registerTransport("callback-polling",new s),t.registerExtension("ack",new i.cometd.AckExtension);var r=new i.cometd.ReloadExtension;return r._receive=a(r._receive),t.registerExtension("reload",r),t.registerExtension("timestamp",new i.cometd.TimeStampExtension),t.registerExtension("timesync",new i.cometd.TimeSyncExtension),t},new e.CometD}])},,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(670),a=i(s),o=n(673),r=i(o),l=angular.module("tangerine.app.core.components.footerNav",["tangerine.app.core.components.contactUs"]).component("tngFooterNav",r.default).component("tngFlowFooter",a.default);t.default=l,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(671),s=function(e){return e&&e.__esModule?e:{default:e}}(i);n(672);var a={template:s.default,controller:function(){},bindings:{flowService:"<",footerText:"<",currentStep:"<",hideBottomProgressbar:"<?",totalStepsInSubFlow:"<",gotoPreviousState:"&",gotoNextState:"&"}};t.default=a,e.exports=t.default},function(e,t){e.exports='<footer class="flow-footer"> <div class="container"> <button ng-show="$ctrl.flowService.showConfirmExitUI" class="btn btn--prev" actionable-id="clientOnboarding_cancelFlow_no" ng-click="$ctrl.flowService.denyExit()"> {{ ::\'clientOnboarding.cancelFlow.no\' | translate }} </button> <button ng-show="$ctrl.flowService.showConfirmExitUI" class="btn btn--next" actionable-id="clientOnboarding_cancelFlow_yes" ng-click="$ctrl.flowService.allowExit()"> {{ ::\'clientOnboarding.cancelFlow.yes\' | translate }} </button> <span ng-if="$ctrl.footerText &&\n      $ctrl.currentStep() &&\n      $ctrl.totalStepsInSubFlow() &&\n      !$ctrl.hideBottomProgressbar() &&\n      !$ctrl.flowService.showConfirmExitUI" class="c-navigation-footer__which-step small"> <span> <strong>{{ $ctrl.footerText() | translate }}</strong> </span> <span class="c-navigation-footer__which-step__progress"> {{ \'clientOnboarding.footer\' | translate:{ currentStep: $ctrl.currentStep(), totalSteps: $ctrl.totalStepsInSubFlow() } }} </span> </span> <button class="btn btn--prev" actionable-id="clientOnboarding_prevState" ng-show="!$ctrl.flowService.showConfirmExitUI && $ctrl.flowService.BUTTONS.BTN_GRY.show" ng-click="$ctrl.gotoPreviousState()" ng-disabled="$ctrl.flowService.currentFlow.BUTTONS.BTN_GRY.disable || $ctrl.flowService.currentFlow.inLoadingMode"> {{ $ctrl.flowService.BUTTONS.BTN_GRY.type.label | translate }} </button> <button class="btn btn--next" ng-class="{\'CB_ReadOnly\': $ctrl.flowService.CB_DISABLED_BUTTONS.includes($ctrl.flowService.BUTTONS.BTN_ORG.type)}" actionable-id="clientOnboarding_nextState" ng-show="!$ctrl.flowService.showConfirmExitUI && $ctrl.flowService.BUTTONS.BTN_ORG.show" ng-click="$ctrl.gotoNextState()" ng-disabled="$ctrl.flowService.currentFlow.BUTTONS.BTN_ORG.disable || $ctrl.flowService.currentFlow.inLoadingMode"> {{ $ctrl.flowService.BUTTONS.BTN_ORG.type.label | translate }} </button> </div> </footer> '},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(674),a=i(s),o=n(675),r=i(o);n(676);var l={template:r.default,controller:a.default};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(35),a=i(s),o=n(0),r=i(o),l=n(1),c=i(l),u=n(57),d=function(){function e(t,n,i,s,a,o,l,c,u,d,h,_,g,S){(0,r.default)(this,e),this.menuConstants=i,this.MenuService=n,this.isNative=t.isNative(),this.$scope=s,this.$state=_,this.$ngRedux=u,this.ACCOUNT_TYPES=a.ACCOUNT_TYPES,this.stateConstants=o,this.LocaleService=l,this.$window=c,this.UserService=d,this.SessionService=h,this.$transitions=g,this.isMobileNative=t.isNative(),this.FlowFooterService=S}return(0,c.default)(e,[{key:"$onInit",value:function(){var e=this;this.unsubscribe=this.$ngRedux.connect(this.mapStateToThis,(0,a.default)({},u.ContactUsActions))(this),this.MenuService.subscribe(this.$scope,function(){null===e.UserService.userCapabilities?e.UserService.getCapabilities().then(function(){e.fetchMenuItems()}):e.fetchMenuItems(),e.showFooterNotifications=e.SessionService.isAuthenticated()&&e.$state.current.showFooterNotifications}),this._onTransitionHandle=this.$transitions.onSuccess({},function(t){var n=t.to();e.hideMobileFooter=n.data&&n.data.hideMobileFooter}),this.statesWithFooterHiddenList=[this.stateConstants.ABM_LOCATIONS],this.statesWithFooterHiddenMap=this.statesWithFooterHiddenList.reduce(function(e,t){return e[t]=!0,e},{})}},{key:"$onDestroy",value:function(){this.isMobileNative&&this._onTransitionHandle(),this.unsubscribe()}},{key:"fetchMenuItems",value:function(){var e=this.menuConstants,t=this.MenuService;this.FOOTER_ITEMS={PRIMARY:t.getMenuItems(e.MENU_TYPES.PRIMARY_FOOTER),ACTION:t.getMenuItems(e.MENU_TYPES.FOOTER_ACTIONS)}}},{key:"mapStateToThis",value:function(e){return{isContactUsMenuOpen:e.contactUs.isContactUsMenuOpen}}},{key:"handleNavItemClick",value:function(e,t){e===this.menuConstants.LINK_TYPES.METHOD&&t===this.menuConstants.ACTION_METHODS.DISPLAY_CONTACT_US_MENU?this.toggleContactUsMenu():this.MenuService.handleMenuInteraction(e,t)}},{key:"handleGoToFAQ",value:function(){var e=this.LocaleService.localeDisplay.toLowerCase();this.$window.location="/"+e+"/faq"}},{key:"showMobileFooter",value:function(){return!this.hideMobileFooter&&this.SessionService.isAuthenticated()&&this.FOOTER_ITEMS&&this.FOOTER_ITEMS.ACTION&&this.FOOTER_ITEMS.ACTION.length>0&&!this.statesWithFooterHiddenMap[this.$state.current.name]}}]),e}();d.$inject=["EnvironmentService","MenuService","menuConstants","$scope","accountConstants","stateConstants","LocaleService","$window","$ngRedux","UserService","SessionService","$state","$transitions","FlowFooterService"],t.default=d,e.exports=t.default},function(e,t){e.exports='<tng-footer-notifications ng-if="$ctrl.showFooterNotifications"> </tng-footer-notifications> <tng-flow-footer ng-if="$ctrl.FlowFooterService.isVisible" flow-service="$ctrl.FlowFooterService.flowService" goto-previous-state="$ctrl.FlowFooterService.gotoPreviousState()" goto-next-state="$ctrl.FlowFooterService.gotoNextState()" footer-text="$ctrl.FlowFooterService.footerText" current-step="$ctrl.FlowFooterService.currentStep" hide-bottom-progressbar="$ctrl.FlowFooterService.hideBottomProgressBar" total-steps-in-sub-flow="$ctrl.FlowFooterService.totalStepsInSubFlow" is-native="$ctrl.FlowFooterService.isNative"> </tng-flow-footer> <footer class="c-footer-nav"> <nav class="footer-desktop" ng-if="!$ctrl.isNative"> <ul class="nav__list nav__list--widescreen"> <li class="nav__item" ng-repeat="menuItem in $ctrl.FOOTER_ITEMS.PRIMARY"> <a actionable-id="footer-nav-handle_nav_item_{{$index}}" class="nav__link" href="" ng-click="$ctrl.handleNavItemClick(menuItem.type, menuItem.action)"><span translate-cloak>{{ menuItem.displayName | translate }}</span> <span ng-class="{\'icon-downarrow\':($ctrl.isContactUsMenuOpen && menuItem.icon!==\'\'),\'icon-uparrow\':(!$ctrl.isContactUsMenuOpen && menuItem.icon!==\'\')}"></span></a> </li> </ul> <tng-contact-us-menu ng-if="$ctrl.isContactUsMenuOpen"></tng-contact-us-menu> </nav> <nav class="footer-native" ng-if="$ctrl.showMobileFooter()"> <div class="nav__list--mobile grid__container"> <div class="c-footer-nav__menu-alignment"> <a actionable-id="footer-nav-footer_link_{{$index}}" class="c-footer-nav__grid-item" href="" ng-repeat="menuItem in $ctrl.FOOTER_ITEMS.ACTION" ng-if="menuItem" ng-click="$ctrl.handleNavItemClick(menuItem.type, menuItem.action)"> <span class="{{ menuItem.icon }} large" translate-cloak></span><br>{{ menuItem.displayName | translate }} </a> </div> </div> </nav> </footer> '},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(678),a=i(s),o=n(682),r=i(o),l=n(683),c=i(l),u=angular.module("tangerine.app.core.components.footerNotifications",[]).component("tngFooterNotifications",a.default).constant("footerConstants",c.default).service("FooterNotificationsService",r.default);t.default=u,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(679),a=i(s),o=n(680),r=i(o);n(681);var l={template:r.default,controller:a.default,bindings:{accountDetailsArray:"<?"}};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i,s,o,r,l,c,u,d,h,_,g,S,f,v){(0,a.default)(this,e),this.footerConstants=s,this.loadedPage=0,this.nextClass=this.footerConstants.NEXT,this.previousClass=this.footerConstants.PREVIOUS,this.footerMenu=this.footerConstants.FOOTER_MENU,this.mobileUpArrow=this.footerConstants.MOBILE_UP_ARROW,this.mobileDownArrow=this.footerConstants.MOBILE_DOWN_ARROW,this.mobileView=this.footerConstants.MOBILE_VIEW,this.regularView=this.footerConstants.REGULAR_VIEW,this.footerNotificationsService=t,this.AccountDetailsService=n,this.templateData=[],this.accountDetails=null,this.divColors=[],this.callToAction=[],this.mobileTemplate=[],this.isArray=angular.isArray,this.$log=u,this.moveMoneyConstants=o,this.gmConstants=r,this.accountConstants=l,this.ACCOUNT_REGISTRATIONS=l.ACCOUNT_REGISTRATIONS,this.$q=d,this.$stateParams=c,this.GlobalModalsService=h,this.$translate=_,this.$window=g,this.$timeout=S,this.BundleService=f,this.bundleConstants=v,this.currentIndex=null,this.isNotificationExpanded=!1,this.isNative=i.isNative()}return(0,r.default)(e,[{key:"loadNotifications",value:function(){var e=this,t=[];return this.templateData=[],this.divColors=[],this.callToAction=[],this.mobileTemplate=[],this.footerNotificationsService.getNotifications().then(function(n){t=n.notification_banners,t.forEach(function(t,n){1===t.buttons.length?t.buttons.forEach(function(t){t.action===e.footerConstants.MOVE_MONEY?t.name=e.$translate.instant("footerNotifications.fundNow"):t.action===e.footerConstants.BALANCE_TRANSFER?t.name=e.$translate.instant("footerNotifications.transferABalance"):t.action===e.footerConstants.JOINT_CONSENT_T_AND_C?t.name=e.$translate.instant("footerNotifications.continue"):t.action===e.footerConstants.ACCEPT_PREAPPROVED_OVERDRAFT&&(t.name=e.$translate.instant("footerNotifications.continue")),e.callToAction.push(t)},e):t.buttons.length>1&&e.callToAction.push(t.buttons),e.divColors.push(t.color_cta.toLowerCase()),e.templateData.push('<div id="slide_'+n+'">'+t.short_description+"<br /><h1>"+t.description+"</h1></div>")},e),e.mobileTemplate=t,e.totalPages=e.templateData.length,e.pageCount=e.loadedPage+1+" / "+e.totalPages,e.footerContents=e.templateData[e.loadedPage]}).catch(function(t){e.$log.error(t)})}},{key:"toggle",value:function(e){"up"===e?(angular.element(this.footerMenu).parent().addClass("expanded-mobile"),angular.element(this.footerMenu).parent().removeClass("collapse-mobile"),angular.element(this.footerMenu).removeClass("hide"),angular.element(this.footerMenu).css("display","block"),this.isNotificationExpanded=!0):"down"===e&&(angular.element(this.mobileView).css("margin-bottom","0px"),angular.element(this.footerMenu).parent().removeClass("expanded-mobile"),angular.element(this.mobileView).addClass("collapse-mobile"),angular.element(this.footerMenu).css({display:"none"}),this.isNotificationExpanded=!1),this.resizer()}},{key:"resizer",value:function(){var e=angular.element(".mobileView").find(".ftn-menu .nav__list"),t=angular.element(".footer-native").parent().height(),n=angular.element(".footer-desktop").parent().height(),i=Math.max(t,n),s=i||0;e.each(function(e,t){angular.element(t).height()>0&&(s+=angular.element(t).height())}),s-=2,angular.element(this.mobileView).css("margin-bottom",s+"px"),angular.element(this.regularView).css("margin-bottom",s+"px")}},{key:"wireUpButtons",value:function(e){e===this.nextClass?this.loadedPage+=1:e===this.previousClass&&(this.loadedPage-=1),this.evaluator(),this.pageCount=this.loadedPage+1+" / "+this.totalPages,this.footerContents=this.templateData[this.loadedPage]}},{key:"evaluator",value:function(){this.loadedPage+1>this.totalPages?this.loadedPage=0:this.loadedPage<0&&(this.loadedPage=this.totalPages-1)}},{key:"getAccountDetailIndex",value:function(e){var t=null,n=this.footerNotificationsService.accountDetails;this.currentIndex=null;for(var i=0;i<n.length;i++){var s=n[i].account_summary.account_registration;if(s===this.ACCOUNT_REGISTRATIONS.JOINT||s===this.ACCOUNT_REGISTRATIONS.FR_JOINT){if(e===this.footerConstants.ACCEPT_PREAPPROVED_OVERDRAFT||e===this.footerConstants.JOINT_CONSENT_T_AND_C){t=i,this.currentIndex=t;break}}else if(n[i].account_summary.credit_card&&e===this.footerConstants.BALANCE_TRANSFER){t=i,this.currentIndex=t;break}}}},{key:"closeModal",value:function(){this.showMoveMoney=!1,this.showWaitingApplicationBar=!1,this.loadNotifications()}},{key:"handleButtonAction",value:function(e){var t=this;switch(e){case this.footerConstants.MOVE_MONEY:this.GlobalModalsService.showMoveMoneySelectedAccount(null,this.moveMoneyConstants.MODAL_TYPES.DEFAULT);break;case this.footerConstants.BALANCE_TRANSFER:this.getAccountDetailIndex(e),this.BundleService.loadBundle(this.bundleConstants.AVAILABLE_BUNDLES.ACCOUNT_DETAILS).then(function(){t.GlobalModalsService.showCreditCardBalanceTransfer(t.footerNotificationsService.accountDetails[t.currentIndex].account_summary.credit_card.cc_account_details)});break;case this.footerConstants.ACCEPT_PREAPPROVED_OVERDRAFT:case this.footerConstants.JOINT_CONSENT_T_AND_C:this.getAccountDetailIndex(e),this.$stateParams.accountHash=this.footerNotificationsService.accountDetails[this.currentIndex].account_summary.account_number,this._checkAvailableActions()}}},{key:"_checkAvailableActions",value:function(){var e=this;this.accountDetails=this.footerNotificationsService.accountDetails[this.currentIndex],this.isApplyConsentWaiting=this.AccountDetailsService.isActionAvailable(this.accountDetails,this.accountConstants.AVAILABLE_ACTIONS.ACCEPT_OD_INVITATION),this.isIncreaseConsentWaiting=this.AccountDetailsService.isActionAvailable(this.accountDetails,this.accountConstants.AVAILABLE_ACTIONS.ACCEPT_OD_INCREASE_INVITATION),this.BundleService.loadBundle(this.bundleConstants.AVAILABLE_BUNDLES.ACCOUNT_DETAILS).then(function(){(e.isApplyConsentWaiting||e.isIncreaseConsentWaiting)&&e.GlobalModalsService.showOverdraftConsentModal(e.accountDetails)})}},{key:"_initializeMobileView",value:function(){var e=this;this.$timeout(function(){e.resizer()},100)}},{key:"$onInit",value:function(){var e=this;this.loadNotifications().then(function(){return e._initializeMobileView()}),this.boundResizeListener=this.resizer.bind(this),this.$window.addEventListener("resize",this.boundResizeListener)}}]),e}();l.$inject=["FooterNotificationsService","AccountDetailsService","EnvironmentService","footerConstants","moveMoneyConstants","globalModalsConstants","accountConstants","$stateParams","$log","$q","GlobalModalsService","$translate","$window","$timeout","BundleService","bundleConstants"],t.default=l,e.exports=t.default},function(e,t){e.exports='<div class="footer-notifications regularView" ng-class="\'notification_\'+$ctrl.divColors[$ctrl.loadedPage]" ng-if="$ctrl.totalPages > 0"> <div class="column"> <div class="page-count-container"> <span class="page-count" ng-bind-html="$ctrl.pageCount"></span> </div> </div> <div class="middle column-content"> <div class="column-content-wrapper"> <div class="column-left-circle"> <span class="circle"></span> <span class="icon-leftarrow" ng-click="$ctrl.wireUpButtons(\'left\')"></span> </div> <div class="column-center"> <div class="content" ng-bind-html="$ctrl.footerContents"> </div> <div class="call-to-action" ng-if="!$ctrl.isArray($ctrl.callToAction[$ctrl.loadedPage])"> <a actionable-id="footer-notifications-link_1" class="btn--small" href="" ng-click="$ctrl.handleButtonAction($ctrl.callToAction[$ctrl.loadedPage].action)">{{$ctrl.callToAction[$ctrl.loadedPage].name}}</a> </div> <div class="call-to-action" ng-if="$ctrl.isArray($ctrl.callToAction[$ctrl.loadedPage])" ng-repeat="ca in $ctrl.callToAction[$ctrl.loadedPage]"> <a actionable-id="footer-notifications-link_2" class="btn--small" href="" ng-click="$ctrl.handleButtonAction($ctrl.footerConstants[ca.action])">{{ca.name}}</a> </div> </div> <div class="column-right-circle"> <span class="circle"></span> <span class="icon-rightarrow" ng-click="$ctrl.wireUpButtons(\'right\')"></span> </div> </div> </div> </div> <div class="footer-notifications mobileView collapse-mobile" ng-if="$ctrl.totalPages > 0"> <div class="ftn-reduced notification_red"> <ul class="nav__list"> <li class="nav__item"> <p ng-if="$ctrl.divColors.length === 1">{{::\'footerNotifications.barMessageOneItem\'|translate}}</p> <p ng-if="$ctrl.divColors.length > 1">{{::\'footerNotifications.barMessageMultipleItems\'|translate:{\'number\':$ctrl.divColors.length} }}</p> </li> <li class="nav__item button-styler"> <span ng-show="!$ctrl.isNotificationExpanded" class="icon-uparrow" ng-click="$ctrl.toggle(\'up\')"></span> <span ng-show="$ctrl.isNotificationExpanded" class="icon-downarrow" ng-click="$ctrl.toggle(\'down\')"></span> </li> </ul> </div> <div class="hide ftn-menu"> <div class="nav__list" ng-repeat="item in $ctrl.mobileTemplate track by $index" ng-class="\'notification_\'+$ctrl.divColors[$index]"> <li class="nav__item"> <div ng-bind-html="item.short_description"></div> <h1 class="mobileDescription">{{item.description}}</h1> </li> <li class="nav__item button-styler"> <div class="call-to-action" ng-if="!$ctrl.isArray($ctrl.callToAction[$index])"> <a actionable-id="footer-notification-link_3" class="btn--small" href="" ng-click="$ctrl.handleButtonAction($ctrl.footerConstants[$ctrl.callToAction[$index].action])">{{$ctrl.callToAction[$index].name}}</a> </div> <div class="call-to-action" ng-if="$ctrl.isArray($ctrl.callToAction[$index])" ng-repeat="mb in $ctrl.callToAction[$index]"> <a actionable-id="footer-notification-link_4" class="btn--small" href="" ng-click="$ctrl.handleButtonAction($ctrl.footerConstants[$ctrl.callToAction[$index].action])">{{mb.name}}</a> </div> </li>  </div> </div> </div> '},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i,s,o,r,l,c,u,d){(0,a.default)(this,e),this.RequesterService=t,this.serviceConstants=n,this.footerConstants=i,this.SessionService=s,this.UserService=o,this.$q=r,this.$timeout=l,this.EventBusService=c,this.appStateConstants=u,this.$rootScope=d,this.init()}return(0,r.default)(e,[{key:"init",value:function(){var e=this;this.accountDetails=[],this.EventBusService.subscribe(this.$rootScope,this.appStateConstants.APPLICATION_LOGOUT,function(){e.accountDetails=[]})}},{key:"setAccountDetails",value:function(e){e&&(this.accountDetails=e)}},{key:"getNotifications",value:function(){var e=this,t=this.$q.defer();return this.$timeout(function(){e.RequesterService.request(e.serviceConstants.AVAILABLE_SERVICES.FOOTER_NOTIFICATIONS).then(function(n){n.notification_banners&&t.resolve(n),t.reject(e.footerConstants.ERRORS.CANNOT_FETCH_NOTIFICATIONS)})},500),t.promise}}]),e}();l.$inject=["RequesterService","serviceConstants","footerConstants","SessionService","UserService","$q","$timeout","EventBusService","appStateConstants","$rootScope"],t.default=l,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={NEXT:"right",PREVIOUS:"left",FOOTER_MENU:".ftn-menu",MOBILE_UP_ARROW:".icon-uparrow",MOBILE_DOWN_ARROW:".icon-downarrow",MOBILE_VIEW:".mobileView",REGULAR_VIEW:".regularView",ERRORS:{CANNOT_FETCH_NOTIFICATIONS:"CANNOT_FETCH_NOTIFICATIONS"},MOVE_MONEY:"MOVE_MONEY",BALANCE_TRANSFER:"BALANCE_TRANSFER",ACCEPT_PREAPPROVED_OVERDRAFT:"ACCEPT_PREAPPROVED_OVERDRAFT",JOINT_CONSENT_T_AND_C:"JOINT_CONSENT_T_AND_C"};t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(685),a=i(s),o=n(688),r=i(o),l=n(689),c=i(l),u=angular.module("tangerine.app.core.components.modalDialog",[]).component("tngModalDialog",a.default).constant("modalDialogConstants",r.default).service("ModalDialogService",c.default);t.default=u,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(204),a=i(s),o=n(686),r=i(o);n(687);var l={template:r.default,controller:a.default,transclude:{titleSlot:"?header",footerSlot:"?footer"},bindings:{isVisible:"<?",onClose:"&",logoLoaded:"@?",hideClose:"<",scrollTopOn:"<",inlineMode:"<?",size:"@?",isDimming:"<?",onMinified:"&?",isMinified:"<?",onDocked:"&?",isDocked:"<?",isNotification:"<?",analyticsId:"@?",scrollId:"@?",hasFormFooter:"<",showHeader:"<"}};t.default=l,e.exports=t.default},function(e,t){e.exports='<div ng-if="!$ctrl.inlineMode" class="c-modal fb2-modal" ng-class="{\'c-modal--e-notification\': $ctrl.isNotification}" ng-show="$ctrl.isVisible"> <div class="c-modal__curtain" ng-class="{\'c-modal__curtain--noDimming\': !$ctrl.isDimming,\n  \'c-modal__curtain--show-header\': $ctrl.showHeader}"> <div class="c-modal__dialog c-modal__dialog{{::$ctrl.sizeModifier}}" ng-class="{\'c-modal__dialog--mini\': $ctrl.isMinified, \'c-modal__dialog--docked\': $ctrl.isDocked}"> <div ng-if="!$ctrl.isMinified" class="dialog__mobile-bar" tng-hide-header elm="#modalMainContent" toggle-class="scrolling"> <div class="dialog__mobile-bar__left"> <span class="header-icon icon-x" ng-show="$ctrl.onClose" ng-click="$ctrl.handleOnClose()" ng-hide="$ctrl.hideClose"> </span> &nbsp; </div> <div class="dialog__mobile-bar__center"> <img ng-src="assets/images/brand.png" alt="Tangerine" onload="angular.element(this).scope().$ctrl.logoLoaded()"/> </div> <div class="dialog__mobile-bar__right"> <span ng-if="!$ctrl.onMinified" class="mobile-bar__help icon-question large"></span> <span class="header-icon" ng-class="$ctrl.isMinified ? \'icon-uparrow medium\' : \'icon-downarrow large\'" ng-if="$ctrl.onMinified" ng-click="$ctrl.onMinified($event)"> </span> </div> </div> <div id="modalMainContent" class="dialog__main-content" ng-class="{\'dialog__main-content-iOSSafari\': !$ctrl.environmentService.isNative() && $ctrl.environmentService.isSafari() && $ctrl.environmentService.isIOS()}"> <div class="dialog__header print-hide" ng-class="{\'dialog__header--mini\': $ctrl.isMinified}"> <button actionable-id="modal-dialo-general-close" class="btn c-modal__btn--close float-right" ng-show="$ctrl.onClose" ng-click="$ctrl.handleOnClose()" ng-hide="$ctrl.hideClose"> <span class="icon-x" ng-class="$ctrl.isMinified ? \'medium\' : \'large\'"></span> </button> <button actionable-id="modal-dialog-general-dock" class="btn c-modal__btn--close float-right" ng-if="$ctrl.onDocked" ng-click="$ctrl.onDocked($event)"> <div class="export-icon-rotation"> <span class="icon-export large" ng-class="$ctrl.isMinified ? \'medium\' : \'large\'"> </span> </div> </button> <button actionable-id="modal-dialo-general-minify" class="btn c-modal__btn--close float-right" ng-if="$ctrl.onMinified" ng-click="$ctrl.onMinified($event)"> <span ng-class="$ctrl.isMinified ? \'icon-uparrow medium\' : \'icon-downarrow large\'"></span> </button> <div class="dialog__title family-fancy" ng-transclude="titleSlot"></div> </div> <div class="dialog__content" tng-infinity-scroll="{{ $ctrl.scrollId }}"> <div class="dialog__content-wrapper" ng-transclude></div> </div> </div> <div class="dialog__footer" ng-transclude="footerSlot"></div> </div> </div> </div> <div ng-if="$ctrl.inlineMode" class="container inline-mode-container"> <div class="dialog__header"> <div class="dialog__title family-fancy" ng-transclude="titleSlot"></div> </div> <div class="dialog__content--inline-mode"> <div class="dialog__content-wrapper" ng-transclude></div> </div> </div> '},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={DIALOG_CONTENT:"dialog__content",DIALOG:"c-modal__dialog",DIALOG_DURING_THE_CLOSE:"c-modal__dialog--during-the-close"},s={MODAL_OPENED:"modalOpened",MODAL_CLOSED:"modalClosed"},a={CONTACT_US_CHAT:"contactus/chat",CONTACT_US_CHAT_WITH_US:"contactus/chatwithus"},o={SELECTOR_CLASSES:i,EVENTS:s,METADATA_IGNORED_LOCATIONS:a};t.default=o,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t){(0,a.default)(this,e),this.$log=t,this.openModals=[],this.modalsWithCssChange=[],this.logoLoadedOnce=!1}return(0,r.default)(e,[{key:"registerOpenModal",value:function(e){-1===this.openModals.indexOf(e)&&this.openModals.push(e)}},{key:"unregisterOpenModal",value:function(e){var t=this.openModals.indexOf(e);-1!==t&&this.openModals.splice(t,1)}},{key:"hasOpenModal",value:function(){return this.openModals.length>0}},{key:"registerModalWithBodyCssChange",value:function(e){-1===this.modalsWithCssChange.indexOf(e)&&this.modalsWithCssChange.push(e)}},{key:"unregisterModalWithBodyCssChange",value:function(e){var t=this.modalsWithCssChange.indexOf(e);-1!==t&&this.modalsWithCssChange.splice(t,1)}},{key:"hasModalWithBodyCssChange",value:function(){return this.modalsWithCssChange.length>0}},{key:"getModals",value:function(){return{open:this.openModals,css:this.modalsWithCssChange}}}]),e}();l.$inject=["$log"],t.default=l,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(691),s=function(e){return e&&e.__esModule?e:{default:e}}(i),a=angular.module("tangerine.app.core.components.modalConfirmation",[]).component("tngModalConfirmation",s.default);t.default=a,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(692),a=i(s),o=n(693),r=i(o);n(694);var l={template:r.default,controller:a.default,bindings:{modalTitle:"@",modalDescription:"@",successButtonArray:"&",modalCancelText:"@",onCancel:"&"}};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t){(0,a.default)(this,e),this.$log=t,this.successButtonObjects=angular.copy(this.successButtonArray())}return(0,r.default)(e,[{key:"handleOnSuccess",value:function(){this.$log.info("HandleOnSuccess"),this.onSuccess()}},{key:"handleOnCancel",value:function(){this.$log.info("HandleOnCancel"),this.onCancel()}}]),e}();l.$inject=["$log"],t.default=l,e.exports=t.default},function(e,t){e.exports='<div class="c-modal__curtain"> <div class="modal-confirmation"> <div class="modal-confirmation__header"> <div ng-if="$ctrl.modalTitle" class="modal-confirmation__title">{{ ::$ctrl.modalTitle }}</div> <div class="modal-confirmation__description">{{ ::$ctrl.modalDescription }}</div> </div> <div ng-repeat="successButtonObject in $ctrl.successButtonObjects track by $index" class="modal-confirmation__success-button"> <div ng-click="successButtonObject.onSuccess()"> {{ ::successButtonObject.modalSuccessText }} </div> </div> <div class="modal-confirmation__cancel-button" ng-click="$ctrl.handleOnCancel()"> {{ ::$ctrl.modalCancelText }} </div> </div> </div>'},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(696),a=i(s),o=n(700),r=i(o),l=n(703),c=i(l),u=n(706),d=i(u),h=n(710),_=i(h),g=n(714),S=i(g),f=n(743),v=i(f),E=n(751),p=i(E),T=n(752),m=i(T),C=n(753),A=i(C),I=n(754),O=i(I),N=n(755),y=i(N),b=angular.module("tangerine.loginComponent.module",[S.default.name,v.default.name]).component("tngLogin",a.default).component("userIdSection",r.default).component("businessId",c.default).component("secretQuestionSection",d.default).component("pinSection",_.default).service("LoginTPWService",p.default).service("LoginMFPService",m.default).service("LoginFlowService",A.default).directive("inputPasswordNoSave",O.default).constant("loginConstants",y.default);t.default=b,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(697),a=i(s),o=n(698),r=i(o);n(699);var l={controller:r.default,template:a.default,bindings:{returnTo:"<",mode:"<?",mustTypeCif:"@?",locale:"<",onDoublesafeClose:"&?"}};t.default=l,e.exports=t.default},function(e,t){e.exports=' <tng-first-login ng-if="$ctrl.showFirstLogin && !$ctrl.flowService.isRedirecting" on-close="$ctrl.onModalClose(result)" initial-state="$ctrl.passmarkState"> </tng-first-login> <div class="c-login c-login__time-out-info--container" ng-if="($ctrl.shouldShowVisitorTimeoutMessage && !$ctrl.flowService.isRedirecting) || ($ctrl.$stateParams.sessionTimeOut && $ctrl.stateIsPristine)"> <div class="c-login c-login__time-out-info--text">{{\'loggedOut.sessionTimeoutMsg\' | translate}}</div> </div> <user-id-section ng-if="$ctrl.flowService.currentState == $ctrl.flowService.STATES.USER_ID && !$ctrl.isNextStateLoading && !$ctrl.flowService.isRedirecting" ng-hide="$ctrl.flowService.isLoading" on-data-update="$ctrl.handleStateChange(data)" locale="$ctrl.locale" device="$ctrl.device" error-message="$ctrl.SessionService.errorMessage" is-timeout="$ctrl.SessionService.isTimeout" deactive-flow="$ctrl.flowService.deactivate();" go-to-state="$ctrl.flowService.moveTo($ctrl.flowService.STATES.BUSINESS_LOGIN); $ctrl.scrollToInput()" saved-user-ids="$ctrl.SessionService.savedUserIds"></user-id-section> <business-id ng-if="$ctrl.flowService.currentState == $ctrl.flowService.STATES.BUSINESS_LOGIN ||\n    $ctrl.flowService.currentState == $ctrl.flowService.STATES.AUTHORIZED_USER && !$ctrl.flowService.isRedirecting" ng-hide="$ctrl.flowService.isLoading" on-data-update="$ctrl.handleStateChange(data)" locale="$ctrl.locale" device="$ctrl.device" error-message="$ctrl.SessionService.errorMessage" is-timeout="$ctrl.SessionService.isTimeout" go-to-state="$ctrl.reInitPersonalCIF()" init-business-login="$ctrl.initBusinessLogin()" saved-business-ids="$ctrl.SessionService.savedBusinessIds" saved-authorized-ids="$ctrl.SessionService.savedAuthorizedIds"></business-id> <secret-question-section ng-if="$ctrl.flowService.currentState == $ctrl.flowService.STATES.SECRET_QUESTION && !$ctrl.flowService.isRedirecting" ng-hide="$ctrl.flowService.isLoading" on-data-update="$ctrl.handleStateChange(data)" question="$ctrl.secretQuestion" error-message="$ctrl.SessionService.errorMessage" is-timeout="$ctrl.SessionService.isTimeout" parent-ctrl="$ctrl"></secret-question-section> <pin-section ng-if="$ctrl.flowService.currentState == $ctrl.flowService.STATES.PIN && !$ctrl.isNextStateLoading && !$ctrl.flowService.isRedirecting" ng-hide="$ctrl.flowService.isLoading" on-data-update="$ctrl.handleStateChange(data)" error-message="$ctrl.SessionService.errorMessage" is-timeout="$ctrl.SessionService.isTimeout" parent-ctrl="$ctrl"></pin-section> <div ng-if="$ctrl.flowService.isLoading || $ctrl.isNextStateLoading && !$ctrl.flowService.isRedirecting" class="loginLoadingIndicator"> <tng-loading-in-progress></tng-loading-in-progress> </div> <div ng-if="$ctrl.flowService.isRedirecting" class="loginLoadingIndicator"> <tng-loading-in-progress></tng-loading-in-progress> </div> '},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),a=i(s),o=n(13),r=i(o),l=n(36),c=i(l),u=n(0),d=i(u),h=n(1),_=i(h),g=function(){function e(t,n,i,s,o,l,u,h,_,g,S,f,v,E,p,T,m,C,A,I,O,N,y,b,L,M,R,D,P,$,U,k,w,B,F,G,V,x,H,Y,q,W,j){var K,Q,z=this;(0,d.default)(this,e),this.EventBusService=t,this.AppStateService=n,this.AuthService=s,this.flowService=i,this.SessionService=o,this.LocaleService=l,this.EnvironmentService=_,this.InsightsService=u,this.InsightsSessionService=h,this.InsightsConstants=P,this.AnalyticsService=y,this.CustomersService=b,this.eNotificationService=M,this.eNotificationConstants=R,this.eNOTIFICATION_TEMPLATES=R.TEMPLATES,this.GlobalModalsService=D,this.appStateConstants=g,this.authConstants=f,this.$timeout=T,this.$state=v,this.$stateParams=E,this.$scope=p,this.$window=N,this.$log=C,this.Idle=I,this.stateConstants=O,this.localeConstants=L,this.menuConstants=$,this.$q=U,this.serviceConstants=k,this.InboxService=w,this.nativeService=B,this.BackButtonService=F,this.backButtonConstants=G,this.firstLoginConstants=V,this.TimerService=H,this.LoginTimeoutService=W,this.AccountSummaryPrefetchService=q,this.analyticsConstants=j,this.locale=E.locale||m.proposedLanguage(),this.errorCode=E.errorCode,this.$window=N,this.validatedUserId=null,this.showPassmark=!1,this.loginConstants=S,this.loginEvents=S.LOGIN_EVENTS,this.loginCommands=S.LOGIN_COMMANDS,this.loginStates=S.LOGIN_STATES,this.secretQuestion=null,this.showFirstLogin=!1,this.showForgotPinLink=!1,this.invalidUserId=null,this.SPECIAL_MODES=S.SPECIAL_MODES,this.$rootScope=Y,this.eventConstants=x,this.SHOW_UI_KEY={PROMO:"showPromo",HEADER:"showHeader",REMEMBER_ME:"showRememberMe",FOOTER:"showFooter",FORGOT_LINK:"showForgotLink",BUSINESS_LOGIN_LINK:"showBusinessLoginLink",DOUBLE_SAFE:"showDoubleSafe",CIF_FIELD_LABEL:"CIFFieldLabel"},this.uiDisplaySettings=(0,c.default)({},this.SPECIAL_MODES.VISITOR_ENROLLMENT,(K={},(0,c.default)(K,this.SHOW_UI_KEY.HEADER,!1),(0,c.default)(K,this.SHOW_UI_KEY.PROMO,!1),(0,c.default)(K,this.SHOW_UI_KEY.REMEMBER_ME,!0),(0,c.default)(K,this.SHOW_UI_KEY.FOOTER,!1),(0,c.default)(K,this.SHOW_UI_KEY.FORGOT_LINK,!1),(0,c.default)(K,this.SHOW_UI_KEY.BUSINESS_LOGIN_LINK,!1),(0,c.default)(K,this.SHOW_UI_KEY.DOUBLE_SAFE,!1),(0,c.default)(K,this.SHOW_UI_KEY.CIF_FIELD_LABEL,!0),K)),this.standardUISettings={},(0,r.default)(this.SHOW_UI_KEY).forEach(function(e){z.standardUISettings[z.SHOW_UI_KEY[e]]=!0}),(0,a.default)(this.standardUISettings,(Q={},(0,c.default)(Q,this.SHOW_UI_KEY.PROMO,!this.EnvironmentService.isNative()),(0,c.default)(Q,this.SHOW_UI_KEY.CIF_FIELD_LABEL,!1),Q)),this.flowService.currentState=null,this.LoginTimeoutService.revokeTimer()}return(0,_.default)(e,[{key:"$onInit",value:function(){var e=this;this.flowService.activateOnEmptyState(),this.showFirstLogin=!1,this.SessionService.errorMessage=!1,this.stateIsPristine=!0,this.uiSettings=this._getUISettings(),this.InsightsService.openCarouselOnLaunch=!0,this.isStandardLogin?(this.$log.info("login: unwatching for idle: ",this.flowService.stateSet),this.Idle.unwatch(),this.EventBusService.subscribe(this.$rootScope,this.menuConstants.EVENTS.REDIRECT_AFTER_RESET_PIN,function(){return e.goToNextPage()}),this.flowService.stateSet&&!this.AuthService.reinitLogin||(this.$stateParams.viewState===this.stateConstants.LOGIN_PIN?this.flowService.currentState=this.flowService.STATES.PIN:this.AppStateService.isInit()?this._initLogin():this.AppStateService.subscribe(this.$scope,this.appStateConstants.APPLICATION_INIT,function(){e.SessionService.initSession().finally(function(){return e._initLogin()})})),this.EventBusService.subscribe(this.$scope,this.menuConstants.EVENTS.RESET_LOGIN,function(){e.flowService.isLoading=!1,e._initLogin()})):(this.mode,this.SPECIAL_MODES.VISITOR_ENROLLMENT),this.EventBusService.subscribe(this.$scope,this.loginEvents.SUCCESSFUL_LOGIN,function(t,n){(e.EnvironmentService.isNative()?e._readTosAndSingleSignOnFlags():e.$q.when()).finally(function(){var t=n&&n.action;t===e.loginConstants.LOGIN_ACTIONS.GO_TO_NEXT_PAGE?(e.isNextStateLoading=!0,e.goToNextPage().then(function(){e.$timeout(function(){e.flowService.isLoading=!1},e.flowService.VISIBILITY_TIMEOUT)})):t===e.loginConstants.LOGIN_ACTIONS.SHOW_FIRST_TIME_USER&&(e.isNextStateLoading=!0,e.showFirstLogin=!0,e.passmarkState=n.data,e.TimerService.cancelTimerForAction(e.TimerService.EVENTS.SUBMIT_PIN))})}),this.BackButtonService.addBackButtonListener(this.$scope,this.backButtonConstants.PRIORITY.LOW,function(){return!e.SessionService.isAuthenticated()&&(e._isOnLoginPage()?WL.App.close():e.AuthService.logout(),!0)}),this.LoginTimeoutService.subscribe(function(){e._onUiTimeout()})}},{key:"$onDestroy",value:function(){this.LoginTimeoutService.unsubscribe()}},{key:"_readTosAndSingleSignOnFlags",value:function(){var e=this;return this.SessionService.hasAgreedTOS().then(function(){return e.hasAgreedToMobileTOS=!0,e.SessionService.shouldSkipOptIn().then(function(){e.skipMobileSimpleSignOnOffer=!0},function(){return e.skipMobileSimpleSignOnOffer=!1,e.TimerService.cancelTimerForAction(e.TimerService.EVENTS.SUBMIT_PIN),e.SessionService.getAuthMethodAvailability().then(function(t){e.$log.debug("getAuthMethodAvailability response:",t),e.isTouchIDAvailable=t.isTouchIDAvailable},function(t){e.$log.error("getAuthMethodAvailability error:",t)})})},function(){e.hasAgreedToMobileTOS=!1,e.TimerService.cancelTimerForAction(e.TimerService.EVENTS.SUBMIT_PIN)})}},{key:"$onChanges",value:function(e){e.locale&&e.locale.previousValue.constructor.name!==this.loginCommands.UNINITIALIZED_VALUE&&!this.flowService.stateSet&&this._initLogin()}},{key:"_initLogin",value:function(){var e=this;this.$log.info("Login controller _initLogin"),this.TimerService.reset(),this.SessionService.errorMessage=!1,(this.EnvironmentService.isNative()?this.$q.when():this.AuthService.logout(!1)).finally(function(){e.flowService.isBusiness?(e.flowService.currentState!==e.flowService.STATES.BUSINESS_LOGIN&&e.flowService.moveTo(e.flowService.STATES.BUSINESS_LOGIN),e.initBusinessLogin()):(e.flowService.currentState!==e.flowService.STATES.USER_ID&&e.flowService.moveTo(e.flowService.STATES.USER_ID),e.AuthService.initLogin(e.LocaleService.locale,e.loginConstants.LOGIN_TYPES.PERSONAL).then(function(t){return e._handleInitSuccess(t)}))}),this.EnvironmentService.isNative()?this.SessionService.hasAgreedTOS().then(function(){e.hasAgreedToMobileTOS=!0,e.SessionService.shouldSkipOptIn().then(function(){e.skipMobileSimpleSignOnOffer=!0},function(){e.skipMobileSimpleSignOnOffer=!1})},function(){e.hasAgreedToMobileTOS=!1}):this.InsightsService.getInsights({count:1,interactionPoint:this.InsightsConstants.INTERACTION_POINTS.LOGIN},!0).then(function(t){e.$timeout(function(){t.insights&&t.insights.length>0&&(e.insight=t.insights[0])},1e3)})}},{key:"initBusinessLogin",value:function(){var e=this;return this.AuthService.logout(!1).finally(function(){e.AuthService.initLogin(e.LocaleService.locale,e.loginConstants.LOGIN_TYPES.BUSINESS).then(function(t){return e._handleInitSuccess(t)})})}},{key:"_handleInitSuccess",value:function(e){this.device=e.device,this.nextCommand=e.nextCommand,this.AuthService.reinitLogin=!1}},{key:"_handleInitError",value:function(e){if(!e)throw new Error("No initializing data is present");throw new Error(e)}},{key:"handleStateChange",value:function(e){var t=this;if(this.Idle.watch(),void 0!==e.nextStep)switch(e.nextStep){case this.loginCommands.INIT:this._initLogin(),this.Idle.unwatch();break;case this.loginCommands.AIF:this.flowService.moveTo(this.flowService.STATES.AUTHORIZED_USER);break;case this.loginStates.CIF:e.isBusiness?this.flowService.moveTo(this.flowService.STATES.BUSINESS_LOGIN):this.flowService.moveTo(this.flowService.STATES.USER_ID);break;case this.loginCommands.VALID_PIN_COMMAND:this.$timeout(function(){t.showPassmark=!0},100);break;case this.loginStates.SECRET_QUESTION:this.secretQuestion=e.securityQuestion,this.flowService.moveTo(this.flowService.STATES.SECRET_QUESTION);break;case this.loginStates.PIN:this.showForgotPinLink=e.showForgotPinLink,e.errorMessage?this.invalidUserId=e.clientIdentifierDisplay:this.invalidUserId=null,this.flowService.moveTo(this.flowService.STATES.PIN)}}},{key:"returnToOriginalState",value:function(){var e=this,t=this.$state,n=t.$current.data,i=function(){n&&n.restoreState&&n.restoreState()};return this.flowService.$q(function(t){e._initUserSession();var n=e.whereToNext();n&&n.state===e.stateConstants.ACCOUNT_SUMMARY&&e._preloadAccountSummary(),e.flowService.deactivate(),e.$log.debug("redirect state is: ",n),t(n)}).then(function(t){return e.$state.go(t.state,t.params).then(i)})}},{key:"whereToNext",value:function(){var e=this.returnTo.state(),t=this.returnTo.params();return e&&e.name!==this.stateConstants.LOGIN&&e.name!==this.stateConstants.FORGOT_LOGIN&&e.name!==this.stateConstants.ACCOUNT_SUMMARY?{state:e,params:t}:this.EnvironmentService.isNative()?(this.EnvironmentService.isNative()&&this.EnvironmentService.isIOS()&&this.updateBadgeCount(),this.hasAgreedToMobileTOS?this.skipMobileSimpleSignOnOffer?{state:this.stateConstants.ACCOUNT_SUMMARY}:this.isTouchIDAvailable?{state:this.stateConstants.SIMPLE_SIGN_ON_TOUCH_ID,options:{location:"replace"}}:{state:this.stateConstants.SIMPLE_SIGN_ON_QUICK_VIEW_NO_BACK,options:{location:"replace"}}:{state:this.stateConstants.MOBILE_TERMS_AND_CONDITIONS,options:{location:"replace"}}):{state:this.stateConstants.ACCOUNT_SUMMARY}}},{key:"updateBadgeCount",value:function(){var e=this;this.InboxService.getNewMessageCount().then(function(t){t.response_status.status_code===e.serviceConstants.STATUS_CODES.SUCCESS&&e.nativeService.sendUpdateBadge(parseInt(t.total_number_of_new_emessages,10))})}},{key:"reInitPersonalCIF",value:function(){this._initLogin(),this.flowService.isBusiness=!1,this.flowService.moveTo(this.flowService.STATES.USER_ID)}},{key:"onModalClose",value:function(e){var t=this;this.onDoublesafeClose&&this.onDoublesafeClose(),e&&(this.showFirstLogin=!1,this.flowService.isLoading=!0,e.then(function(e){return e&&e.event===t.firstLoginConstants.EVENTS.FIRST_TIME_SETUP_COMPLETE?t.goToNextPage():t.AuthService.logout(!1).then(function(){t.$state.go(t.stateConstants.LOGIN,void 0,{location:!1,reload:!0})})}).catch(function(e){t.$log.error("Error occured:",e)}).finally(function(){t.flowService.isLoading=!1}))}},{key:"goToNextPage",value:function(){var e=this;return this.eNotificationService.getENotifications().then(function(t){var n=void 0,i=e.whereToNext();if(t.next_action===e.eNOTIFICATION_TEMPLATES.FATCA){var s={template_id:e.eNOTIFICATION_TEMPLATES.FATCA};n=e.GlobalModalsService.showENotification(s,t.mandatory,!0,i)}else if(t.roadblocks.length){var a=t.roadblocks[0];n=e.GlobalModalsService.showENotification(a,t.mandatory,!1,i)}return n}).then(function(t){return t?(e.TimerService.cancelTimerForAction(e.TimerService.EVENTS.SUBMIT_PIN),t):e._handleNextPage()})}},{key:"scrollToInput",value:function(){this.$window.scrollTo(0,200)}},{key:"_handleNextPage",value:function(){return this._startInsightsSession(),this.returnTo?this.returnToOriginalState():this.$state.go(this.stateConstants.ACCOUNT_SUMMARY)}},{key:"_initUserSession",value:function(){var e=this;this.CustomersService.getCustomerInfo({include_servicing_systems:!0}).then(function(t){e.AnalyticsService.tagSession(t.customer),e.SessionService.getAndSetNewClientEnrollmentSession(!1)&&e.AnalyticsService.sendAction(e.AnalyticsService.availableEvents.NEW_CLIENT_ENROLLMENT)})}},{key:"_startInsightsSession",value:function(){try{this.InsightsSessionService.startSession(!0)}catch(e){this.$log.error("Insights: could not init session",e)}}},{key:"_preloadAccountSummary",value:function(){this.$log.debug("Preloading account summary resources"),this.AccountSummaryPrefetchService.preloadAccounts(),this.AccountSummaryPrefetchService.preloadCapabilities()}},{key:"_getUISettings",value:function(){return!this.isStandardLogin&&this.mode in this.uiDisplaySettings?this.uiDisplaySettings[this.mode]:this.standardUISettings}},{key:"_isOnLoginPage",value:function(){return this.flowService.currentState===this.flowService.STATES.BUSINESS_LOGIN||this.flowService.currentState===this.flowService.STATES.USER_ID}},{key:"_onUiTimeout",value:function(){this.flowService.isLoading=!1,this.EnvironmentService.isNative()&&(this.EventBusService.publish(this.eventConstants.LOGIN_CONNECTION_LOST),this.AnalyticsService.sendAction(this.analyticsConstants.AVAILABLE_EVENTS.FORCED_LOGIN_TIMEOUT,"triggered"))}},{key:"isStandardLogin",get:function(){return!this.mode}},{key:"isVisitorEnrollment",get:function(){return!this.isStandardLogin&&this.mode===this.SPECIAL_MODES.VISITOR_ENROLLMENT}},{key:"shouldShowVisitorTimeoutMessage",get:function(){return this.errorCode===this.loginConstants.LOGIN_ERRORS.VS_TIMEOUT&&this.stateIsPristine}}]),e}();g.$inject=["EventBusService","AppStateService","LoginFlowService","AuthService","SessionService","LocaleService","InsightsService","InsightsSessionService","EnvironmentService","appStateConstants","loginConstants","authConstants","$state","$stateParams","$scope","$timeout","$translate","$log","tmhDynamicLocale","Idle","stateConstants","$window","AnalyticsService","CustomersService","localeConstants","eNotificationService","eNotificationConstants","GlobalModalsService","InsightsConstants","menuConstants","$q","serviceConstants","InboxService","NativeService","BackButtonService","backButtonConstants","firstLoginConstants","eventConstants","TimerService","$rootScope","AccountSummaryPrefetchService","LoginTimeoutService","analyticsConstants"],t.default=g,e.exports=t.default},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(701),a=i(s),o=n(702),r=i(o),l={template:a.default,controller:r.default,require:{parentCtrl:"^tngLogin"},bindings:{onDataUpdate:"&",locale:"<",device:"<",nextCommand:"<",savedUserIds:"<",errorMessage:"<",isTimeout:"<",goToState:"&",deactiveFlow:"&"}};t.default=l,e.exports=t.default},function(e,t){e.exports='<div ng-if="$ctrl.parentCtrl.isVisitorEnrollment"> <h1 class="heading--title2">{{ \'newClientEnrollment.welcome.titleLogin\' | translate }}</h1> <h2 class="body--2" ng-bind-html="::\'newClientEnrollment.welcome.subTitleLogin\' | translate"></h2> </div> <form ng-if="!$ctrl.isNative" name="UserID" class="c-login c-login--userId" ng-class="{ \'c-login--vis-enroll\': $ctrl.parentCtrl.isVisitorEnrollment }"> <div class="c-login__header" ng-if="::$ctrl.parentCtrl.uiSettings.showHeader"> <tng-error-message ng-if="$ctrl.errorMessage"> {{ $ctrl.errorMessage }} </tng-error-message> <tng-error-message ng-if="$ctrl.showSafariLocalStorageError"> {{ \'login.userID.safariBrowserLocalStorageErrorMessage\' | translate }} </tng-error-message> <h2 class="heading--title2" translate>{{ \'login.userID.heading\' }}</h2> <label for="login_clientId"> <span>{{ \'login.userID.labelUserId\' | translate }}</span> <tng-help-bubble><span>{{ \'login.userID.helpBubbleInputLabel\' | translate }}</span></tng-help-bubble> </label> </div> <div class="grid__container"> <div class="c-login__panel--left" ng-class="{\'c-login__panel--left--vis-enroll\': $ctrl.parentCtrl.isVisitorEnrollment}"> <label for="login_clientId" ng-if="::$ctrl.parentCtrl.uiSettings.CIFFieldLabel" class="heading--sub3"> {{ \'login.userID.CIFFieldLabel\' | translate }} </label> <fieldset ng-if="!$ctrl.showUserIdField" class="field"> <tng-select-autocomplete ng-model="$ctrl.selectedId" input-id="userID-input" options="$ctrl.availableUserIds" option-label-key="nameToRemember" option-value-key="rememberMeHash" select-type="$ctrl.selectConstants.SELECT_TYPES.STATIC" on-select="$ctrl.handleSelect(option)" ng-required="true"> </tng-select-autocomplete> <div class="field"> <input type="checkbox" actionable-id="login_removeID" class="input" ng-model="$ctrl.userIDSectionCredentials.removeID"/> <label for="login_removeID"> <span class="sr-only">{{ \'login.userID.labelDropDown\' | translate }}</span> </label> <div class="checkbox-label"> <div class="login_removeID_desc"> {{ \'login.userID.labelDropDown\' | translate }} <tng-help-bubble><span ng-bind-html="\'login.userID.helpBubbleDropDown\' | translate"></span></tng-help-bubble> </div> </div> </div> </fieldset> <div class="field"> <input ng-if="$ctrl.showUserIdField" name="userIdInput" actionable-id="login_clientId" class="input CB_DataMask" type="text" minlength="{{ $ctrl.userIdMinLength}}" maxlength="{{ $ctrl.userIdMaxLength }}" placeholder="{{ \'login.userID.inputPlaceHolder\' | translate }}" ng-model="$ctrl.userIDSectionCredentials.id" ng-trim="false" ng-paste="$ctrl.sanitizeInput()" ng-change="$ctrl.validateInput()" ng-required="required" autocomplete="off" autofocus autofocus-device="{{ $ctrl.autoFocusConstants.ALL }}"> </div> <div ng-if="$ctrl.parentCtrl.uiSettings.showRememberMe && $ctrl.showUserIdField" ng-show="$ctrl.showUserIdField" class="field remember-me"> <input ng-show="$ctrl.showUserIdField" actionable-id="login_rememberMe" type="checkbox" ng-model="$ctrl.userIDSectionCredentials.rememberMe" class="input"/> <label for="login_rememberMe"></label> <label for="login_rememberMe_text"> <span translate-cloak>{{ \'login.userID.labelRememberMe\' | translate }}</span> <tng-help-bubble><span translate-cloak>{{ \'login.userID.helpBubbleRememberMe\' | translate }}</span></tng-help-bubble> </label> </div> <button actionable-id="login_logMeIn" class="btn--medium CB_ReadOnly" ng-class="{ \'disabled\': !$ctrl.isUserIDSubmitEnabled }" ng-disabled=" !$ctrl.isUserIDSubmitEnabled || $ctrl.showSafariLocalStorageError" ng-click="$ctrl.checkUserID($ctrl.userIDSectionCredentials); $ctrl.hideVisitorSiteTimeoutErrorMessage()" type="submit" translate> <span ng-if="$ctrl.parentCtrl.isStandardLogin"> {{ \'login.userID.userIdSubmitButton\' | translate }} </span> <span ng-if="$ctrl.parentCtrl.isVisitorEnrollment"> {{ \'global.components.buttons.next\' | translate }} </span> </button> <div ng-if="$ctrl.parentCtrl.uiSettings.showForgotLink" class="c-help-block--forgot-link"> <a ng-click="$ctrl.deactiveFlow()" actionable-id="login_forgotLoginLink" ui-sref="{{$ctrl.stateConstants.FORGOT_LOGIN}}" class="link">{{ \'login.userID.forgotLogin\' | translate }}</a> </div> <a actionable-id="login_businessLink" href="" ng-if="$ctrl.parentCtrl.uiSettings.showBusinessLoginLink" ng-click="$ctrl.goToState(); $ctrl.hideVisitorSiteTimeoutErrorMessage()" class="link"> {{ \'login.userID.businessLogin\' | translate }} </a> </div> <div ng-if="::$ctrl.parentCtrl.uiSettings.showPromo" class="c-login__panel--right"> <section class="insight-panel" ng-if="::$ctrl.showPromotionalOffer"> <div class="login"> <tng-insight-banner insight="$ctrl.parentCtrl.insight"></tng-insight-banner> </div> </section> </div> </div> <div ng-if="::$ctrl.parentCtrl.uiSettings.showFooter" class="grid__container--footer"> <div class="c-login__panel--left styleguide-grid-unit grid__column--1of2"> <p class="disclaimer" ng-bind-html="\'login.userID.disclaimer\' | translate | absoluteHref"> </p> </div> <div class="c-login__panel--right styleguide-grid-unit grid__column--1of2"> <div class="link-wrapper"> <p ng-bind-html="\'login.userID.securityText\' | translate | absoluteHref"></p> </div> </div> </div> </form> <form ng-if="$ctrl.isNative" name="UserID" class="c-login c-login--userId"> <div class="c-login__header"> <tng-error-message ng-if="$ctrl.errorMessage"> {{ $ctrl.errorMessage }} </tng-error-message> </div> <div class="c-login-content" ng-class="{\'c-login-content-error-padding\': $ctrl.errorMessage}"> <div class="c-login-content__title"> {{ \'login.mobile.cifLabel\' | translate}} <tng-help-bubble><span>{{ \'login.userID.helpBubbleInputLabel\' | translate }}</span></tng-help-bubble> </div> <div ng-if="$ctrl.showUserIdField" class="field remember-me"> <div> <input name="userIdInput" actionable-id="login_clientId" class="input CB_DataMask" type="text" minlength="{{ $ctrl.userIdMinLength}}" maxlength="{{ $ctrl.userIdMaxLength }}" placeholder="{{ \'login.userID.inputPlaceHolder\' | translate }}" ng-model="$ctrl.userIDSectionCredentials.id" ng-trim="false" ng-paste="$ctrl.sanitizeInput()" ng-change="$ctrl.validateInput()" ng-required="required" autocomplete="off"> </div> </div> <fieldset ng-if="!$ctrl.showUserIdField" class="field"> <tng-select-autocomplete ng-model="$ctrl.selectedId" input-id="userID-input" options="$ctrl.availableUserIds" option-label-key="nameToRemember" option-value-key="rememberMeHash" select-type="$ctrl.selectConstants.SELECT_TYPES.STATIC" on-select="$ctrl.handleSelect(option)" ng-required="true"> </tng-select-autocomplete> </fieldset> <div class="field c-login-remember-me"> <tng-switch class="c-login-remember-me-switch" actionable-id="login_rememberMe" ng-model="$ctrl.rememberMe" ng-click="$ctrl.onRememberMeClick()"></tng-switch> <span class="c-login-remember-me-label" for="login_rememberMe" translate-cloak>{{ \'login.mobile.remember\' | translate }} <tng-help-bubble><span>{{ \'login.mobile.mobileToolTip\' | translate }}</span></tng-help-bubble> </span> </div> <div class="field__group--inline c-login-account-type"> <div class="field c-login-account-personal"> <input class="input input--pill input--checked" type="radio"/> <label>{{ \'login.common.personal\' | translate}}</label> </div> <div class="field c-login-account-business" ng-if="$ctrl.parentCtrl.uiSettings.showBusinessLoginLink" ng-click="$ctrl.goToState(); $ctrl.hideVisitorSiteTimeoutErrorMessage()"> <input class="input input--pill" type="radio"/> <label>{{ \'login.common.business\' | translate}}</label> </div> </div> </div> <div class="c-login-footer"> <div class="c-login-footer-links"> <div ng-if="$ctrl.parentCtrl.uiSettings.showForgotLink" class="c-help-block--forgot-link"> <a ng-click="$ctrl.deactiveFlow()" actionable-id="login_forgotLoginLink" ui-sref="{{$ctrl.stateConstants.FORGOT_LOGIN}}" class="link">{{ \'login.userID.forgotLogin\' | translate }}</a> </div> <div class="link-wrapper c-help-block--security-link"> <p ng-bind-html="\'login.userID.securityText\' | translate | absoluteHref"></p> </div> </div> <div class="c-login-footer-login"> <span class="c-login__footer-feedback" ng-click="$ctrl.feedbackClicked()"> {{ \'global.menu.header.feedback\' | translate}} </span> <button actionable-id="login_logMeIn" class="btn CB_ReadOnly" ng-class="{ \'disabled\': !$ctrl.isUserIDSubmitEnabled   }" ng-disabled=" !$ctrl.isUserIDSubmitEnabled || $ctrl.showSafariLocalStorageError" ng-click="$ctrl.checkUserID($ctrl.userIDSectionCredentials); $ctrl.hideVisitorSiteTimeoutErrorMessage()" type="submit" translate> <span ng-if="$ctrl.parentCtrl.isStandardLogin"> {{ \'login.userID.userIdSubmitButton\' | translate }} </span> <span ng-if="$ctrl.parentCtrl.isVisitorEnrollment"> {{ \'global.components.buttons.next\' | translate }} </span> </button> </div> </div> </form> <tng-modal-dialog is-visible="$ctrl.showLoginOptionModal === true" on-close="$ctrl.showLoginOptionModal = false"> <header>{{$ctrl.modalHeader | translate}}</header> <div translate="{{$ctrl.modalText}}"></div> <footer> <button class="btn btn--orange" ng-click="$ctrl.showLoginOptionModal = false" translate="{{$ctrl.cancelTextResource}}"></button> <button class="btn btn--orange mobile-max-width" ng-show="$ctrl.showModalActionButton" ng-click="$ctrl._loginOptionModalClick()" translate="{{$ctrl.modalActionText}}"></button> </footer> </tng-modal-dialog> <tng-modal-confirmation ng-if="$ctrl.isNative && $ctrl.showConfirmationModal" modal-title="{{ \'login.mobile.removeAccountHeader\' | translate }}" modal-description=" {{ $ctrl.getOnCIFDeleteModalDescription }}" modal-cancel-text="{{ \'login.mobile.cancel\' | translate }}" success-button-array="$ctrl.getConfirmationModalSuccessButtonHandlerArray()" on-cancel="$ctrl.dismissConfirmationModal()"> </tng-modal-confirmation> '},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(29),a=i(s),o=n(114),r=i(o),l=n(6),c=i(l),u=n(0),d=i(u),h=n(1),_=i(h),g=n(34),S=n(18),f=i(S),v=40,E=1,p=function(){function e(t,n,i,s,a,o,r,l,c,u,h,_,S,f,p,T,m,C,A,I,O,N,y,b){var L=this;(0,d.default)(this,e),this.AuthService=t,this.flowService=n,this.authConstants=s,this.stateConstants=a,this.selectConstants=u,this.autoFocusConstants=o,this.NativeService=f,this.LoginOptionService=p,this.SessionService=T,this.loginEvents=i.LOGIN_EVENTS,this.loginStates=i.LOGIN_STATES,this.loginPlaceholderIndicator=i.LOGIN_PLACEHOLDER_INDICATOR,this.loginActions=i.LOGIN_ACTIONS,this.$translate=h,this.$scope=l,this.$state=r,this.$timeout=c,this.$log=_,this.$sce=S,this.FeedbackSurveyService=b,this.userIdValidation=g.userIdValidation,this.userIdMinLength=E,this.userIdMaxLength=v,this.userIdSanitize=g.userIdSanitize,this.SessionService=T,this.$document=C,this.EventBusService=A,this.localStorageLength=localStorage.length,this.$window=I,this.BundleService=O,this.TimerService=N,this.LoginTimeoutService=y,this.userIDSectionCredentials={id:"",rememberMe:!1,removeID:!1},this.selectedId=void 0,this.showPromotionalOffer=!0,this.showUserIdField=!0,this.isUserIDSubmitEnabled=!1,this.submitNoLogout=!1,this.loginOptions=m.LOGIN_OPTION_TYPE,this.NATIVE_ERROR_CODE=m.NATIVE_ERROR_CODE,this.loginOptionType=m.LOGIN_OPTION_TYPE,this.loginOptionResult=m.LOGIN_OPTION_RESULT,this.showLoginOptionModal=!1,this.showConfirmationModal=!1,this.availableUserIds=[],this.staticOption={rememberMeHash:this.loginPlaceholderIndicator.USE_ANOTHER,nameToRemember:"login.userID.newClientNumber"},this.pleaseSelectOption={rememberMeHash:this.loginPlaceholderIndicator.PLEASE_SELECT,nameToRemember:"login.userID.pleaseSelect"},this.isNative=this.AuthService.isNative,this.LoginTimeoutService.subscribe(function(){L._onLoginTimeout()})}return(0,_.default)(e,[{key:"_onLoginTimeout",value:function(){this.isUserIDSubmitEnabled=!0}},{key:"$onDestroy",value:function(){this.LoginTimeoutService.unsubscribe()}},{key:"$onInit",value:function(){this._setDocumentTitle(),this._checkLocalStorage()}},{key:"_setDocumentTitle",value:function(){this.$document[0].title=this.$translate.instant("login.userID.pageTitle")}},{key:"_checkLocalStorage",value:function(){var e=this.$window.navigator.userAgent.indexOf("AppleWebKit")>=0;!this.localStorageLength&&e?this.showSafariLocalStorageError=!0:this.showSafariLocalStorageError=!1}},{key:"$onChanges",value:function(){this._setDocumentTitle(),this.parentCtrl.isStandardLogin&&this.SessionService&&this.SessionService.savedUserIds&&this.SessionService.savedUserIds.length>0?(this.userIDSectionCredentials={id:"",rememberMe:!1,removeID:!1},this._setStatic(this.savedUserIds),this._turnOnSavedUsers()):this._turnOffSavedUsers()}},{key:"validateInput",value:function(){var e=this;this.sanitizeInput(function(){var t=e.userIdValidation(e.userIDSectionCredentials.id);e.parentCtrl.isVisitorEnrollment&&e.parentCtrl.mustTypeCif?e.isUserIDSubmitEnabled=t&&e.userIDSectionCredentials.id===e.parentCtrl.mustTypeCif:e.isUserIDSubmitEnabled=t})}},{key:"sanitizeInput",value:function(e){var t=this;this.$timeout(function(){t.userIDSectionCredentials.id&&(t.userIDSectionCredentials.id=t.userIdSanitize(t.userIDSectionCredentials.id)),angular.isFunction(e)&&e()},200)}},{key:"checkUserID",value:function(){var e=this,t=this._getUserDataObject();this.isUserIDSubmitEnabled=!1,this.flowService.isLoading=!0;var n=this.LoginOptionService.getAlternativeLoginOption(t);this._logPerformanceMetrics(n),this._loadCommonBundle(),!this.submitNoLogout&&n?this.LoginOptionService.submitLoginOption(n).then(function(t){t&&t.authenticated||!t.errorMessage&&!t.errorCode&&t.loginOptionResult!==e.loginOptionResult.SHOW_ERROR?e._mobileProcessSuccess(t):e._mobileProcessError(t)}).catch(function(t){e._mobileProcessError(t)}).finally(function(){e.isUserIDSubmitEnabled=!0}):this.AuthService.submitCIF(t).then(function(n){if(!n.authenticated&&n.errorMessage)e._handleCheckUserIdError(n);else{var i=t.displayId||t.userId||t.acn;e._handleCheckUserIdSuccess(n,i)}}).catch(function(t){e._handleCheckUserIdError(t)}).finally(function(){e.isUserIDSubmitEnabled=!0})}},{key:"_logPerformanceMetrics",value:function(e){var t=this.TimerService.EVENTS.SUBMIT_CIF;switch(e){case this.loginOptionType.TOUCH_ID:t=this.TimerService.EVENTS.SUBMIT_TOUCH_ID;break;case this.loginOptionType.DEFER_PIN:case this.loginOptionType.EYE_VERIFY:case this.loginOptionType.VOICE_PASSWORD:t=this.TimerService.EVENTS.SUBMIT_QUICK_VIEW;break;default:t=this.TimerService.EVENTS.SUBMIT_CIF}this.TimerService.startTimerForAction(t)}},{key:"removeUserID",value:function(){var e=this._getUserDataObject();this.AuthService.removeCIF(e),this.rememberMe=!1,this.dismissConfirmationModal()}},{key:"getConfirmationModalSuccessButtonHandlerArray",value:function(){var e=this;return[{modalSuccessText:this.$translate.instant("login.mobile.continue"),onSuccess:function(){e.removeUserID()}}]}},{key:"_getUserDataObject",value:function(){var e=null,t=null,n=null,i=angular.isDefined(this.selectedId)&&this.selectedId!==this.staticOption.rememberMeHash;if(i){e=this.selectedId;var s=f.default.find(this.savedUserIds,function(t){return t.rememberMeHash===e});t=s.nameToRemember,n=s.userHash}else e=this.userIDSectionCredentials.id;this.isNative&&this.showUserIdField&&(this.userIDSectionCredentials.rememberMe=this.rememberMe);var a={acn:e,displayId:t,userHash:n,locale:this.locale,nextCommand:this.nextCommand,device:this.device,rememberMe:this.userIDSectionCredentials.rememberMe,removeID:this.userIDSectionCredentials.removeID,isBusiness:!1};return a=i&&!this.userIDSectionCredentials.removeID?(0,c.default)(a,{ddCIF:!0}):a}},{key:"hideVisitorSiteTimeoutErrorMessage",value:function(){this.parentCtrl.stateIsPristine=!1}},{key:"onRememberMeClick",value:function(){this.showUserIdField||this.rememberMe||(this.rememberMe=!0,this.showConfirmationModal=!0)}},{key:"dismissConfirmationModal",value:function(){this.showConfirmationModal=!1}},{key:"_handleCheckUserIdSuccess",value:function(e,t){var n=this;this._loadCommonBundle().then(function(){n.flowService.isLoading=!1,n.nextCommand=e.nextStep,n._cleanUp(e.nextStep),n.parentCtrl.validatedUserId=t,n.onDataUpdate({data:e}),e.nextStep===n.loginStates.SECRET_QUESTION||(e.nextStep,n.loginStates.PIN)})}},{key:"_turnOnSavedUsers",value:function(){this.showUserIdField=!1,this.isUserIDSubmitEnabled=!1,this.savedUserIds&&(this.selectedId=this.savedUserIds[0].rememberMeHash,this.selectedId!==this.loginPlaceholderIndicator.PLEASE_SELECT&&(this.isUserIDSubmitEnabled=!0))}},{key:"_turnOffSavedUsers",value:function(){this.showUserIdField=!0,this.isUserIDSubmitEnabled=!1,this.selectedId=void 0}},{key:"_cleanUp",value:function(e){e!==this.authConstants.steps.CIF&&(this.userIDSectionCredentials.id=null,this.selectedId=void 0)}},{key:"_handleCheckUserIdError",value:function(e){var t=this;e.clientIdentifierDisplay&&"cif"===e.nextStep&&(e.errorMessage=this.$translate.instant("global.errorCodes.generic"),this.SessionService.errorMessage=e.errorMessage),this._loadCommonBundle().then(function(){t.LoginTimeoutService.revokeTimer(),t.flowService.isLoading=!1,t.errorMessage=e.errorMessage,t._cleanUp(e.nextStep),t.onDataUpdate({data:e})})}},{key:"_setStatic",value:function(e){var t=[].concat((0,r.default)(e),[this.staticOption]);e.length>2&&t.unshift(this.pleaseSelectOption),this.availableUserIds=t}},{key:"handleSelect",value:function(e){e?e.rememberMeHash===this.loginPlaceholderIndicator.USE_ANOTHER?(this.selectedId=void 0,this.showUserIdField=!0,this.isUserIDSubmitEnabled=!1):e.rememberMeHash===this.loginPlaceholderIndicator.PLEASE_SELECT?this.isUserIDSubmitEnabled=!1:this.isUserIDSubmitEnabled=!0:this.isUserIDSubmitEnabled=!1}},{key:"feedbackClicked",value:function(){var e={EN:this.$window.MEDALLIA_FEEDBACK_ID_EN,FR:this.$window.MEDALLIA_FEEDBACK_ID_FR};this.FeedbackSurveyService.launchFeedbackSurvey(e)}},{key:"_mobileProcessSuccess",value:function(e){var t=this;this.$log.debug("DB - _mobileProcessSuccess: "+(0,a.default)(e)),this.SessionService.isAuthenticated()&&this.NativeService.setSession(this.SessionService.getSession()),e.authStatus===this.authConstants.status.COMPLETE&&e.hasLevel1?this._loadCommonBundle().then(function(){e.firstTime&&e.firstTime.ChallengeQuestions?t.EventBusService.publish(t.loginEvents.SUCCESSFUL_LOGIN,{action:t.loginActions.SHOW_FIRST_TIME_USER,data:e.firstTime}):t.EventBusService.publish(t.loginEvents.SUCCESSFUL_LOGIN,{action:t.loginActions.GO_TO_NEXT_PAGE})}):this._handleCheckUserIdSuccess(e)}},{key:"_mobileProcessError",value:function(e){switch(this.$log.debug("DB - _mobileProcessError: "+(0,a.default)(e)),this.flowService.isLoading=!1,this.isUserIDSumbitEnabled=!0,e=e||{},e.loginOptionResult){case this.loginOptionResult.CANCEL:return void this.$state.go(this.stateConstants.LOGIN,{},{reload:!0});case this.loginOptionResult.FALL_BACK_TO_PIN:return void this._loginWithPin();case this.loginOptionResult.TRY_AGAIN:return void this.checkUserID();case this.loginOptionResult.SHOW_DISABLE_MODAL:return void this._showMobileDisabledLoginOptionModal();case this.loginOptionResult.SHOW_EYE_VERIFY_FAILURE_MODAL:return void this._showMobileLoginOptionFailureModal(this.loginOptionType.EYE_VERIFY);case this.loginOptionResult.SHOW_TOUCH_ID_FAILURE_MODAL:return void this._showMobileLoginOptionFailureModal(this.loginOptionType.TOUCH_ID);case this.loginOptionResult.PASSMARK_RESET_PIN_CANCEL:return this.AuthService.logout();case this.loginOptionResult.SHOW_ERROR:return void(this.errorMessage=e.message)}this._handleCheckUserIdError(e)}},{key:"_showMobileDisabledLoginOptionModal",value:function(){this.modalHeader="userSettings.security.loginOption.oops",this.modalText="userSettings.security.loginOption.disableInfo",this.cancelTextResource="userSettings.security.buttons.ok",this.showLoginOptionModal=!0,this.showModalActionButton=!1}},{key:"_showMobileLoginOptionFailureModal",value:function(e){this.modalHeader="userSettings.security.loginOption.oops",this.cancelTextResource="userSettings.security.buttons.cancel",this.modalActionText="userSettings.security.buttons.loginPin";var t="";switch(e){case this.loginOptionType.TOUCH_ID:this.modalHeader="userSettings.security.loginOption.touchId.failureTitle",t="userSettings.security.loginOption.touchId.failureMessage";break;case this.loginOptionType.EYE_VERIFY:t="userSettings.security.loginOption.eyeVerify.failureMessage";break;default:this.$log.error("_showLoginOptionFailureModal error: invalid optionType "+e)}this.modalText=t,this.showLoginOptionModal=!0,this.showModalActionButton=!0}},{key:"_loginOptionModalClick",value:function(){this._loginWithPin()}},{key:"_loginWithPin",value:function(){this.submitNoLogout=!0,this.checkUserID()}},{key:"_loadCommonBundle",value:function(){var e=this;if(this._commonBundlePromise)return this._commonBundlePromise;this.$log.debug("Preloading common bundle");var t=(new Date).getTime();return this._commonBundlePromise=this.BundleService.loadCommonBundle().then(function(){var n=(new Date).getTime(),i=n-t;e.$log.debug("Deferred bundle loaded after(ms): ",i)}),this._commonBundlePromise}},{key:"showUserIdField",set:function(e){this.rememberMe=!e,this.isShown=e},get:function(){return this.isShown}},{key:"getOnCIFDeleteModalDescription",get:function(){return this.$translate.instant("login.mobile.removeAccountFromDevice")}}]),e}();p.$inject=["AuthService","LoginFlowService","loginConstants","authConstants","stateConstants","autoFocusConstants","$state","$scope","$timeout","tngSelectAutocompleteConstants","$translate","$log","$sce","NativeService","LoginOptionService","SessionService","mobileSecurityConstants","$document","EventBusService","$window","BundleService","TimerService","LoginTimeoutService","FeedbackSurveyService"],t.default=p,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(704),a=i(s),o=n(705),r=i(o),l={template:a.default,controller:r.default,require:{parentCtrl:"^tngLogin"},bindings:{onDataUpdate:"&",locale:"<",device:"<",nextCommand:"<",errorMessage:"<",isTimeout:"<",goToState:"&",initBusinessLogin:"&",savedBusinessIds:"<",savedAuthorizedIds:"<"}};t.default=l,e.exports=t.default},function(e,t){e.exports=' <form ng-if="!$ctrl.isNative()" name="BusinessID" class="c-login c-login--userId"> <div class="c-login__header"> <tng-error-message ng-if="$ctrl.errorMessage"> {{ $ctrl.errorMessage }} </tng-error-message> <div ng-if="$ctrl.flowService.currentState == $ctrl.flowService.STATES.BUSINESS_LOGIN"> <h2 class="heading--title2" translate>{{ \'login.businessID.heading\' }}</h2> <label for="login_clientId"> {{ \'login.businessID.labelUserId\' | translate }} <tng-help-bubble>{{ \'login.businessID.labelUserTooltip\' | translate }}</tng-help-bubble> </label> </div> <div ng-if="$ctrl.flowService.currentState == $ctrl.flowService.STATES.AUTHORIZED_USER"> <h2 class="heading--title2" translate>{{ \'login.authorizedId.heading\' }}</h2> <label for="login_clientId"> {{ \'login.authorizedId.labelUserId\' | translate }} <tng-help-bubble>{{ \'login.authorizedId.labelUserTooltip\' | translate }}</tng-help-bubble> </label> </div> </div> <div class="grid__container" ng-if="$ctrl.flowService.currentState == $ctrl.flowService.STATES.BUSINESS_LOGIN"> <div class="c-login__panel--left styleguide-grid-unit grid__column--1of2"> <fieldset ng-if="!$ctrl.showBusinessIdField" class="field"> <tng-select-autocomplete ng-model="$ctrl.selectedId" input-id="businessId-input" options="$ctrl.availableIds" option-label-key="nameToRemember" option-value-key="rememberMeHash" select-type="$ctrl.selectConstants.SELECT_TYPES.STATIC" on-select="$ctrl.handleSelect(option)" ng-required="true"> </tng-select-autocomplete> <div class="field"> <input type="checkbox" actionable-id="login_removeID" class="input" ng-model="$ctrl.businessIdCredentials.removeID"/> <label for="login_removeID"> {{ \'login.userID.labelDropDown\' | translate }} <tng-help-bubble><span ng-bind-html="\'login.userID.helpBubbleDropDown\' | translate"></span></tng-help-bubble> </label> </div> </fieldset> <div class="field"> <input ng-if="$ctrl.showBusinessIdField" name="userIdInput" id="login_businessId" actionable-id="login_businessId" class="input CB_DataMask" type="text" minlength="{{ $ctrl.inputMinLength}}" maxlength="{{ $ctrl.inputMaxLength }}" placeholder="{{ \'login.userID.inputPlaceHolder\' | translate}}" ng-model="$ctrl.businessIdCredentials.id" ng-trim="false" ng-paste="$ctrl.sanitizeInput()" ng-change="$ctrl.validateInput()" ng-required="required" autocomplete="off" autofocus autofocus-device="{{ $ctrl.autoFocusConstants.ALL }}"> </div> <div ng-if="$ctrl.showBusinessIdField" class="field remember-me"> <input actionable-id="login_rememberMe" type="checkbox" ng-model="$ctrl.businessIdCredentials.rememberMe" class="input"/> <label for="login_rememberMe"></label> <label for="login_rememberMe_text"> {{ \'login.businessID.labelRememberMe\' | translate }} <tng-help-bubble>{{ \'login.businessID.helpBubbleRememberMe\' | translate }}</tng-help-bubble> </label> </div> <button actionable-id="login_logMeIn" class="btn--medium CB_ReadOnly" ng-class="{ \'disabled\': !$ctrl.isSubmitEnabled }" ng-disabled="!$ctrl.isSubmitEnabled" ng-click="$ctrl.checkUserID()" type="submit" translate> {{ \'login.businessID.submitButton\' }} </button> <a ng-click="$ctrl.goToState()" href="" actionable-id="login_businessId_personalBankingLink" class="link personalBanking_link" translate>{{ \'login.businessID.personalBanking\' }}</a> </div> <div class="c-login__panel--right styleguide-grid-unit grid__column--1of2"> <span ng-show="!$ctrl.showPromotionalOffer" class="icon-Lightbulb"></span> <div ng-show="$ctrl.showPromotionalOffer" class="panel"> <strong translate>{{ \'login.userID.promoTagLine\' }}</strong> <p translate>{{ \'login.userID.promoDesc\' }}</p> </div> </div> </div> <div class="grid__container" ng-if="$ctrl.flowService.currentState == $ctrl.flowService.STATES.AUTHORIZED_USER"> <div class="c-login__panel--left styleguide-grid-unit grid__column--1of2"> <fieldset ng-if="!$ctrl.showAuthorizedIdField" class="field"> <tng-select-autocomplete ng-model="$ctrl.selectedId" options="$ctrl.availableIds" option-label-key="nameToRemember" option-value-key="rememberMeHash" select-type="$ctrl.selectConstants.SELECT_TYPES.STATIC" on-select="$ctrl.handleSelect(option)" ng-model="$ctrl.selectedId" ng-required="true"> </tng-select-autocomplete> <div class="field"> <input type="checkbox" id="login_removeID" class="input" ng-model="$ctrl.authorizedIdCredentials.removeID"/> <label for="login_removeID"> {{ \'login.userID.labelDropDown\' | translate }} <tng-help-bubble><span ng-bind-html="\'login.userID.helpBubbleDropDown\' | translate"></span></tng-help-bubble> </label> </div> </fieldset> <div class="field"> <input ng-if="$ctrl.showAuthorizedIdField" name="userIdInput" id="login_clientId" actionable-id="login_clientId" class="input CB_DataMask" type="text" minlength="{{ $ctrl.inputMinLength}}" maxlength="{{ $ctrl.inputMaxLength }}" placeholder="{{ \'login.userID.inputPlaceHolder\' | translate}}" ng-model="$ctrl.authorizedIdCredentials.id" ng-trim="false" ng-paste="$ctrl.sanitizeInput()" ng-change="$ctrl.validateInput()" ng-required="required" autocomplete="off" autofocus autofocus-device="{{ $ctrl.autoFocusConstants.ALL }}"> </div> <div ng-if="$ctrl.showAuthorizedIdField" class="field remember-me"> <input ng-show="$ctrl.showAuthorizedIdField" actionable-id="login_rememberMe" type="checkbox" ng-model="$ctrl.authorizedIdCredentials.rememberMe" class="input"/> <label for="login_rememberMe"></label> <label for="login_rememberMe_text"> {{ \'login.authorizedId.labelRememberMe\' | translate }} <tng-help-bubble>{{ \'login.authorizedId.helpBubbleRememberMe\' | translate }}</tng-help-bubble> </label> </div> <button actionable-id="login_logMeIn" class="btn--medium CB_ReadOnly" ng-class="{ \'disabled\': !$ctrl.isSubmitEnabled }" ng-disabled="!$ctrl.isSubmitEnabled" ng-click="$ctrl.checkUserID()" type="submit" translate> {{ \'login.authorizedId.submitButton\' | translate }} </button> <div class="c-login--submitSubtext"> <span ng-bind-html="\'login.authorizedId.businessNumber1\' | translate"></span> <strong>{{ $ctrl.parentCtrl.validatedUserId }}</strong> <span ng-bind-html="\'login.authorizedId.businessNumber2\' | translate"></span> <a ng-click="$ctrl.redirectToLogin()" class="link" translate><span ng-bind-html="\'login.authorizedId.businessNumber3\' | translate"></span></a>. </div> </div> <div class="c-login__panel--right styleguide-grid-unit grid__column--1of2"> <span ng-show="!$ctrl.showPromotionalOffer" class="icon-Lightbulb"></span> <div ng-show="$ctrl.showPromotionalOffer" class="panel"> <strong translate>{{ \'login.userID.promoTagLine\' }}</strong> <p translate>{{ \'login.userID.promoDesc\' }}</p> </div> </div> </div> <div class="grid__container--footer"> <div class="c-login__panel--left styleguide-grid-unit grid__column--1of2"> <p class="disclaimer" translate> {{ \'login.userID.disclaimer\' }} </p> </div> <div class="c-login__panel--right styleguide-grid-unit grid__column--1of2"> <div class="link-wrapper"> <p ng-bind-html="\'login.userID.securityText\' | translate | absoluteHref"></p> </div> </div> </div> </form> <form ng-if="$ctrl.isNative()" name="BusinessID" class="c-login c-login--userId"> <div class="c-login__header"> <tng-error-message ng-if="$ctrl.errorMessage"> {{ $ctrl.errorMessage }} </tng-error-message> </div> <div class="c-login-content" ng-class="{\'c-login-content-error-padding\': $ctrl.errorMessage}"> <div class="c-login-content__title"> <div ng-if="$ctrl.flowService.currentState === $ctrl.flowService.STATES.BUSINESS_LOGIN"> <span>{{ \'login.mobile.cifLabel\' | translate }}</span> <tng-help-bubble>{{ \'login.businessID.labelUserTooltip\' | translate }}</tng-help-bubble> </div> <div ng-if="$ctrl.flowService.currentState === $ctrl.flowService.STATES.AUTHORIZED_USER"> <span translate>{{ \'login.authorizedId.cifLabel\' }}</span> <tng-help-bubble>{{ \'login.authorizedId.labelUserTooltip\' | translate }}</tng-help-bubble> </div> </div> <div ng-if="$ctrl.flowService.currentState === $ctrl.flowService.STATES.BUSINESS_LOGIN"> <div ng-if="$ctrl.showBusinessIdField" class="field remember-me"> <div> <input name="userIdInput" actionable-id="login_businessId" class="input CB_DataMask" type="text" minlength="{{ $ctrl.inputMinLength}}" maxlength="{{ $ctrl.inputMaxLength }}" placeholder="{{ \'login.userID.inputPlaceHolder\' | translate}}" ng-model="$ctrl.businessIdCredentials.id" ng-trim="false" ng-paste="$ctrl.sanitizeInput()" ng-change="$ctrl.validateInput()" ng-required="required" autocomplete="off"/> </div> </div> <fieldset ng-if="!$ctrl.showBusinessIdField" class="field"> <tng-select-autocomplete ng-model="$ctrl.selectedId" input-id="businessId-input" options="$ctrl.availableIds" option-label-key="nameToRemember" option-value-key="rememberMeHash" select-type="$ctrl.selectConstants.SELECT_TYPES.STATIC" on-select="$ctrl.handleSelect(option)" ng-required="true"> </tng-select-autocomplete> </fieldset> <div class="c-login-remember-me"> <tng-switch class="c-login-remember-me-switch" actionable-id="login_rememberMe" ng-model="$ctrl.rememberMeBusiness" ng-click="$ctrl.onRememberMeClick()"></tng-switch> <span class="c-login-remember-me-label" for="login_rememberMe">{{ \'login.mobile.remember\' | translate }} <tng-help-bubble><span>{{ \'login.mobile.mobileToolTip\' | translate }}</span></tng-help-bubble> </span> </div> <div class="field__group--inline c-login-account-type"> <div class="field c-login-account-personal" ng-click="$ctrl.goToState()"> <input class="input input--pill" type="radio"/> <label>{{ \'login.common.personal\' | translate}}</label> </div> <div class="field c-login-account-business"> <input class="input input--pill input--checked" type="radio"/> <label>{{ \'login.common.business\' | translate}}</label> </div> </div> </div> <div ng-if="$ctrl.flowService.currentState === $ctrl.flowService.STATES.AUTHORIZED_USER"> <div ng-if="$ctrl.showAuthorizedIdField" class="field remember-me"> <div class="field"> <input name="userIdInput" id="login_clientId" actionable-id="login_clientId" class="input CB_DataMask" type="text" minlength="{{ $ctrl.inputMinLength}}" maxlength="{{ $ctrl.inputMaxLength }}" placeholder="{{ \'login.authorizedId.inputPlaceHolder\' | translate}}" ng-model="$ctrl.authorizedIdCredentials.id" ng-trim="false" ng-paste="$ctrl.sanitizeInput()" ng-change="$ctrl.validateInput()" ng-required="required" autocomplete="off"/> </div> </div> <fieldset ng-if="!$ctrl.showAuthorizedIdField" class="field"> <tng-select-autocomplete ng-model="$ctrl.selectedId" options="$ctrl.availableIds" option-label-key="nameToRemember" option-value-key="rememberMeHash" select-type="$ctrl.selectConstants.SELECT_TYPES.STATIC" on-select="$ctrl.handleSelect(option)" ng-model="$ctrl.selectedId" ng-required="true"> </tng-select-autocomplete> </fieldset> <div class="c-login-remember-me"> <tng-switch class="c-login-remember-me-switch" actionable-id="login_rememberMe" ng-model="$ctrl.rememberMeAuthorized" ng-click="$ctrl.onRememberMeClick()"></tng-switch> <span class="c-login-remember-me-label" for="login_rememberMe">{{ \'login.mobile.remember\' | translate }} <tng-help-bubble><span>{{ \'login.mobile.mobileToolTip\' | translate }}</span></tng-help-bubble> </span> </div> <div class="c-login--submitSubtext"> <span ng-bind-html="\'login.authorizedId.businessNumber1\' | translate"></span> <strong>{{ $ctrl.parentCtrl.validatedUserId }}</strong> <span ng-bind-html="\'login.authorizedId.businessNumber2\' | translate"></span> <a ng-click="$ctrl.redirectToLogin()" class="link" translate><span ng-bind-html="\'login.authorizedId.businessNumber3\' | translate"></span></a>. </div> </div> </div>  <div class="c-login-footer"> <div class="c-login-footer-links"> <div ng-if="$ctrl.parentCtrl.uiSettings.showForgotLink" class="c-help-block--forgot-link"> <a actionable-id="login_forgotLoginLink" ui-sref="{{$ctrl.stateConstants.FORGOT_LOGIN}}" class="link">{{ \'login.userID.forgotLogin\' | translate }}</a> </div> <div class="link-wrapper c-help-block--security-link"> <p ng-bind-html="\'login.userID.securityText\' | translate | absoluteHref"></p> </div> </div> <div class="c-login-footer-login"> <span class="c-login__footer-feedback" ng-click="$ctrl.feedbackClicked()"> {{ \'global.menu.header.feedback\' | translate}} </span> <button actionable-id="login_logMeIn" class="btn CB_ReadOnly" ng-class="{ \'disabled\': !$ctrl.isSubmitEnabled }" ng-disabled="!$ctrl.isSubmitEnabled" ng-click="$ctrl.checkUserID()" type="submit" translate> {{ $ctrl.flowService.currentState !== $ctrl.flowService.STATES.BUSINESS_LOGIN ? \'login.authorizedId.submitButton\' : \'login.businessID.submitButton\' }} </button> </div> </div> </form> <tng-modal-confirmation ng-if="$ctrl.isNative() && $ctrl.showConfirmationModal" modal-title="{{ \'login.mobile.removeAccountHeader\' | translate }}" modal-description=" {{ $ctrl.getOnCIFDeleteModalDescription }}" modal-cancel-text="{{ \'login.mobile.cancel\' | translate }}" success-button-array="$ctrl.getConfirmationModalSuccessButtonHandlerArray()" on-cancel="$ctrl.dismissConfirmationModal()"> </tng-modal-confirmation> '},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),a=i(s),o=n(114),r=i(o),l=n(0),c=i(l),u=n(1),d=i(u),h=n(34),_=n(18),g=i(_),S=40,f=1,v=function(){function e(t,n,i,s,a,o,r,l,u,d,_,g,v,E,p,T,m){(0,c.default)(this,e),this.AuthService=t,this.SessionService=n,this.flowService=i,this.EventBusService=s,this.authConstants=o,this.stateConstants=r,this.menuConstants=l,this.loginEvents=a.LOGIN_EVENTS,this.loginCommands=a.LOGIN_COMMANDS,this.loginPlaceholderIndicator=a.LOGIN_PLACEHOLDER_INDICATOR,this.selectConstants=E,this.autoFocusConstants=p,this.$translate=u,this.$scope=d,this.$timeout=_,this.$window=g,this.$log=v,this.BundleService=T,this.FeedbackSurveyService=m,this.userIdValidation=h.userIdValidation,this.inputMinLength=f,this.inputMaxLength=S,this.userIdSanitize=h.userIdSanitize,this.businessIdCredentials={id:"",rememberMe:!1,removeID:!1},this.authorizedIdCredentials={id:"",rememberMe:!1,removeID:!1},this.selectedId=void 0,this.showPromotionalOffer=!0,this.showBusinessIdField=!0,this.showAuthorizedIdField=!0,this.isSubmitEnabled=!1,this.availableIds=[],this.staticOption={rememberMeHash:this.loginPlaceholderIndicator.USE_ANOTHER,nameToRemember:"login.userID.newClientNumber"},this.pleaseSelectOption={rememberMeHash:this.loginPlaceholderIndicator.PLEASE_SELECT,nameToRemember:"login.businessID.pleaseSelect"}}return(0,d.default)(e,[{key:"$onInit",value:function(){this.initBusinessLogin()}},{key:"$onChanges",value:function(){this.businessIdCredentials={id:"",rememberMe:!1,removeID:!1},this.authorizedIdCredentials={id:"",rememberMe:!1,removeID:!1},this._toggleSavedUsers(),this._focusElement()}},{key:"validateInput",value:function(){var e=this;this.sanitizeInput(function(){e.businessIdCredentials.id?e.isSubmitEnabled=e.userIdValidation(e.businessIdCredentials.id):e.isSubmitEnabled=e.userIdValidation(e.authorizedIdCredentials.id)})}},{key:"sanitizeInput",value:function(e){var t=this;this.$timeout(function(){t.businessIdCredentials.id?t.businessIdCredentials.id=t.userIdSanitize(t.businessIdCredentials.id):t.authorizedIdCredentials.id=t.userIdSanitize(t.authorizedIdCredentials.id),angular.isFunction(e)&&e()},200)}},{key:"checkUserID",value:function(){var e=this,t=this._getUserDataObject();this.isSubmitEnabled=!1,this.flowService.isLoading=!0,this.AuthService.submitCIF(t).then(function(n){if(e.isSubmitEnabled=!0,!n.authenticated&&n.errorMessage)e._handleCheckUserIdError(n);else{var i=t.displayId||t.userId||t.acn;e._handleCheckUserIdSuccess(n,i)}}).catch(function(t){e.isSubmitEnabled=!0,e._handleCheckUserIdError(t)})}},{key:"isNative",value:function(){return this.AuthService.isNative}},{key:"redirectToLogin",value:function(){this.EventBusService.publish(this.menuConstants.EVENTS.RESET_LOGIN)}},{key:"feedbackClicked",value:function(){var e={EN:this.$window.MEDALLIA_FEEDBACK_ID_EN,FR:this.$window.MEDALLIA_FEEDBACK_ID_FR};this.FeedbackSurveyService.launchFeedbackSurvey(e)}},{key:"_handleCheckUserIdSuccess",value:function(e,t){var n=this;this.BundleService.loadCommonBundle().then(function(){n.flowService.isLoading=!1,n.nextCommand=e.nextStep,n._cleanUp(e.nextStep),n.parentCtrl.validatedUserId=t,n.onDataUpdate({data:e}),e.nextStep===n.loginCommands.AIF&&(n.parentCtrl.showForgotPinLink=!0),n._toggleSavedUsers()})}},{key:"_turnOnSavedUsers",value:function(){this.showBusinessIdField=!1,this.showAuthorizedIdField=!1,this.isSubmitEnabled=!1,this.selectedId=this.flowService.currentState===this.flowService.STATES.BUSINESS_LOGIN?this.savedBusinessIds[0].rememberMeHash:this.savedAuthorizedIds[0].rememberMeHash,this.selectedId!==this.loginPlaceholderIndicator.PLEASE_SELECT&&(this.isSubmitEnabled=!0)}},{key:"_turnOffSavedUsers",value:function(){this.showBusinessIdField=!0,this.showAuthorizedIdField=!0,this.isSubmitEnabled=!1,this.selectedId=void 0}},{key:"_toggleSavedUsers",value:function(){this.flowService.currentState===this.flowService.STATES.BUSINESS_LOGIN&&this.savedBusinessIds&&this.savedBusinessIds.length?(this._setStatic(this.savedBusinessIds),this._turnOnSavedUsers()):this.flowService.currentState===this.flowService.STATES.AUTHORIZED_USER&&this.savedAuthorizedIds&&this.savedAuthorizedIds.length?(this._setStatic(this.savedAuthorizedIds),this._turnOnSavedUsers()):this._turnOffSavedUsers()}},{key:"_cleanUp",value:function(e){e!==this.authConstants.steps.CIF&&(this.businessIdCredentials.id=null,this.authorizedIdCredentials.id=null,this.selectedId=void 0)}},{key:"_handleCheckUserIdError",value:function(e){this.flowService.isLoading=!1,this.errorMessage=e.errorMessage,e.nextStep&&this._cleanUp(e.nextStep),this.onDataUpdate({data:e})}},{key:"_setStatic",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[].concat((0,r.default)(e),[this.staticOption]);e.length>2&&t.unshift(this.pleaseSelectOption),this.availableIds=t}},{key:"handleSelect",value:function(e){e?e.rememberMeHash===this.loginPlaceholderIndicator.USE_ANOTHER?(this.showBusinessIdField=!0,this.showAuthorizedIdField=!0,this.isSubmitEnabled=!1):e.rememberMeHash===this.loginPlaceholderIndicator.PLEASE_SELECT?this.isSubmitEnabled=!1:this.isUserIDSubmitEnabled=!0:this.isUserIDSubmitEnabled=!1}},{key:"onRememberMeClick",value:function(){var e=this.flowService.currentState===this.flowService.STATES.BUSINESS_LOGIN&&!this.showBusinessIdField&&!this.rememberMeBusiness,t=this.flowService.currentState!==this.flowService.STATES.BUSINESS_LOGIN&&!this.showAuthorizedIdField&&!this.rememberMeAuthorized;(e||t)&&(this.flowService.currentState===this.flowService.STATES.BUSINESS_LOGIN?this.rememberMeBusiness=!0:this.rememberMeAuthorized=!0,this.showConfirmationModal=!0)}},{key:"dismissConfirmationModal",value:function(){this.showConfirmationModal=!1}},{key:"removeUserID",value:function(){var e=this._getUserDataObject();this.AuthService.removeCIF(e),this.flowService.currentState===this.flowService.STATES.BUSINESS_LOGIN?this.rememberMeBusiness=!1:this.rememberMeAuthorized=!1,this.dismissConfirmationModal()}},{key:"getConfirmationModalSuccessButtonHandlerArray",value:function(){var e=this;return[{modalSuccessText:this.$translate.instant("login.mobile.continue"),onSuccess:function(){e.removeUserID()}}]}},{key:"_getUserDataObject",value:function(){var e=null,t=null,n=angular.isDefined(this.selectedId)&&this.selectedId!==this.staticOption.rememberMeHash,i=this.flowService.currentState===this.flowService.STATES.BUSINESS_LOGIN?this.businessIdCredentials:this.authorizedIdCredentials;n?(e=this.selectedId,t=g.default.find(this.availableIds,function(t){return t.rememberMeHash===e}).nameToRemember):e=i.id;var s=this.flowService.currentState===this.flowService.STATES.BUSINESS_LOGIN?this.showBusinessIdField:this.showAuthorizedIdField;this.isNative()&&s&&(i.rememberMe=this.flowService.currentState===this.flowService.STATES.BUSINESS_LOGIN?this.rememberMeBusiness:this.rememberMeAuthorized);var o={acn:e,displayId:t,locale:this.locale,nextCommand:this.nextCommand,device:this.device,rememberMe:i.rememberMe,removeID:i.removeID,isBusiness:!0};return o=n&&!i.removeID?(0,a.default)(o,{ddCIF:!0}):o}},{key:"_focusElement",value:function(){var e=this;this.$timeout(function(){if(!e.isNative())if(e.flowService.currentState===e.flowService.STATES.BUSINESS_LOGIN){var t=angular.element("#login_businessId");t.focus()}else if(e.flowService.currentState===e.flowService.STATES.AUTHORIZED_USER){var n=angular.element("#login_clientId");n.focus()}},200)}},{key:"showBusinessIdField",set:function(e){this.rememberMeBusiness=!e,this.isBusinessShown=e},get:function(){return this.isBusinessShown}},{key:"showAuthorizedIdField",set:function(e){this.rememberMeAuthorized=!e,this.isAuthorizedShown=e},get:function(){return this.isAuthorizedShown}},{key:"getOnCIFDeleteModalDescription",get:function(){return this.$translate.instant("login.mobile.removeAccountFromDevice")}}]),e}();v.$inject=["AuthService","SessionService","LoginFlowService","EventBusService","loginConstants","authConstants","stateConstants","menuConstants","$translate","$scope","$timeout","$window","$log","tngSelectAutocompleteConstants","autoFocusConstants","BundleService","FeedbackSurveyService"],t.default=v,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(707),a=i(s),o=n(708),r=i(o);n(709);var l={template:a.default,controller:r.default,require:{},bindings:{onDataUpdate:"&",errorMessage:"<",isTimeout:"<",question:"<",parentCtrl:"<?"}};t.default=l,e.exports=t.default},function(e,t){e.exports='<form name="$ctrl.securityQuestionForm" class="c-login c-login--security-question"> <div class="grid__container"> <div class="grid__column--1of2"> <h2 class="heading--title2" id="login_secretQuestion_heading" translate> {{ ::\'login.secretQuestion.heading\' }} </h2> <tng-error-message ng-if="$ctrl.errorMessage"> <span>{{ $ctrl.errorMessage }}</span> </tng-error-message> <label for="login_secretQuestion" id="login_secretQuestion_label" class="CB_DoNotShow">{{ $ctrl.question }}</label> <div class="field"> <input name="securityQuestion" id="login_secretQuestion" class="input CB_DataMask" in-view="$ctrl.questionInputInView($inview,$inviewInfo)" ng-focus="$ctrl.onQuestionFocus()" ng-blur="$ctrl.onQuestionBlur()" ng-class="{warning:\n            $ctrl.securityQuestionForm.securityQuestion.$invalid &&\n            $ctrl.securityQuestionForm.securityQuestion.$dirty\n          }" maxlength="{{ $ctrl.secQuestMaxLength }}" ng-change="$ctrl.validateInput($ctrl.secretQuestionCredentials.secretQuestion, \'SECURITY_QUESTION\')" ng-model="$ctrl.secretQuestionCredentials.secretQuestion" ng-required="true" autocapitalize="none" autocomplete="OFF" autofocus autofocus-device="{{ ::$ctrl.autoFocusConstants.ALL }}" type="text" placeholder="{{ \'login.secretQuestion.inputPlaceHolder\' | translate }}"> <div ng-messages="$ctrl.securityQuestionForm.securityQuestion.$error" ng-show="$ctrl.securityQuestionForm.securityQuestion.$dirty" class="field__error"> <p ng-message="required"> {{ ::\'login.resetPin.requiredField\' | translate }} </p> </div> </div> <div class="field skip-next-time"> <input id="login_skipQuestion" type="checkbox" class="input CB_ReadOnly" ng-model="$ctrl.secretQuestionCredentials.skipSecurityQuestion"/> <label for="login_skipQuestion" id="login_skipQuestion_label"></label> <label for="login_skipQuestion_text" id="login_skipQuestion_label_text"> {{ ::\'login.secretQuestion.labelSkip\' | translate }} <tng-help-bubble><span ng-bind-html="\'login.secretQuestion.helpBubbleSkip\' | translate"></span></tng-help-bubble> </label> <div ng-if="$ctrl.secretQuestionCredentials.skipSecurityQuestion" class="skipContent"> <p> {{ \'login.secretQuestion.registerComputer\' | translate }} </p> <p> <span translate>{{ \'login.secretQuestion.learnMorePart1\' }}</span> <a actionable-id="secret-question-lear_more-part_2" href="{{ \'login.secretQuestion.learnMoreLink\' | translate }}" class="link" target="_blank">{{ \'login.secretQuestion.learnMorePart2\' | translate }}</a> </p> </div> </div> <div ng-if="$ctrl.showCaptchaImage" class="c-captcha"> <div class="c-captcha--captcha"> <p> <strong>{{ ::\'login.secretQuestion.captchaErrorMessageTitle\' | translate }}</strong> <br> <span>{{ ::\'login.secretQuestion.captchaErrorMessageBody\' | translate }}</span> <tng-help-bubble> <span ng-bind-html="\'login.secretQuestion.helpBubbleCaptcha\' | translate"></span> </tng-help-bubble> </p> </div> <img ng-if="$ctrl.showCaptchaImage" ng-src="{{ $ctrl.captchaImage }}" class="captcha-image" alt="Captcha Image"> <a actionable-id="secret-question-new_image" href="" class="link" ng-click="$ctrl.generateCaptchaImage()">{{ ::\'login.secretQuestion.newImage\' | translate }}</a> <div class="field"> <input id="login_captchImage" class="input" type="text" maxlength="{{ $ctrl.captchaMaxLength }}" ng-change="$ctrl.validateCaptchaInput($ctrl.secretQuestionCredentials.captchaAnswer)" ng-model="$ctrl.secretQuestionCredentials.captchaAnswer" placeholder="{{ \'login.secretQuestion.inputCaptchaPlaceholder\' | translate }}" autocapitalize="none"> </div> </div> <button actionable-id="login_Next" class="btn--medium CB_ReadOnly" ng-if="!$ctrl.isLockedOut" ng-class="{ \'disabled\': !$ctrl.isSecQuestSubmitEnabled }" ng-disabled="!$ctrl.isSecQuestSubmitEnabled" ng-click="$ctrl.checkSecret($ctrl.secretQuestionCredentials)" type="submit" translate> {{ ::\'login.secretQuestion.secretQuestionSubmitButton\' }} </button> <p class="user-info CB_DataMask" translate translate-values="{ userId: $ctrl.parentCtrl.validatedUserId }"> {{ ::\'login.secretQuestion.clientNumber\' }} </p> <p> <span translate>{{ ::\'login.secretQuestion.wrongUserId\' }}</span> <a actionable-id="secret-question-wrong_user_id" ng-href="#" ng-click="$ctrl.handleBackToCif()" class="link inline" translate>{{ ::\'login.secretQuestion.wrongUserIdLink\' }}.</a> </p> <a actionable-id="secret-question-safe_and_secure" ng-href="#" ng-click="$ctrl.openBrowserToSafeAndSecureLink()" target="_blank" class="link" translate>{{ ::\'login.common.safeAndSecure\' }}</a> </div> </div> </form> '},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=n(34),c=40,u=40,d=function(){function e(t,n,i,s,o,r,d,h,_,g,S,f,v,E,p){var T=this;(0,a.default)(this,e),this.EventBusService=t,this.AuthService=n,this.EnvironmentService=i,this.SessionService=s,this.flowService=o,this.TimerService=f,this.LoginTimeoutService=p,this.loginEvents=r.LOGIN_EVENTS,this.loginCommands=r.LOGIN_COMMANDS,this.authConstants=d,this.autoFocusConstants=h,this.$window=_,this.$document=g,this.$timeout=v,this.$log=E,this.$translate=S,this.isNative=i.isNative(),this.isAndroid=i.isAndroid(),this.captchaValidation=l.captchaValidation,this.errorMessage=!1,this.secQuestMaxLength=c,this.captchaMaxLength=u,this.captchaImage="",this.generateCaptchaImage(),this.isSecQuestSubmitEnabled=!1,this.isLockedOut=!1,this.nextCommand=this.loginCommands.VERIFY_CHALLENGE_QUESTION,this.failedTries=0,this.secretQuestionCredentials={question:"",secretQuestionAnswer:"",captchaAnswer:"",skipSecurityQuestion:!1},this.showCaptchaImage=!1,this.isFormSubmitting=!1,this.LoginTimeoutService.subscribe(function(){T._resetFormSubmissionState()})}return(0,r.default)(e,[{key:"$onInit",value:function(){this.$document[0].title=this.$translate.instant("login.secretQuestion.pageTitle"),this.securityQuestionForm={},this.TimerService.endTimerForAction(this.TimerService.EVENTS.SUBMIT_CIF)}},{key:"$onDestroy",value:function(){this.LoginTimeoutService.unsubscribe()}},{key:"_resetFormSubmissionState",value:function(){this.isSecQuestSubmitEnabled=!0,this.isFormSubmitting=!1}},{key:"$onChanges",value:function(){if(this.flowService.currentState===this.flowService.STATES.SECRET_QUESTION){this.isTimeout&&this.handleBackToCif();var e=this.$window.document.getElementById("login_secretQuestion");e&&e.focus()}}},{key:"onQuestionFocus",value:function(){this.isNative&&this.isAndroid&&(this.innerHeightOrig=window.innerHeight,window.innerHeight-=200,this.questionInputInView(!1))}},{key:"onQuestionBlur",value:function(){this.innerHeightOrig&&this.isNative&&this.isAndroid&&(window.innerHeight=this.innerHeightOrig)}},{key:"questionInputInView",value:function(e){var t=this;this.$timeout(function(){if(!e)try{t.$document.find('div[ui-view="page-content"]')[0].scrollTop=t.$document[0].getElementById("login_secretQuestion_label").offsetTop-60}catch(e){t.$log.error("questionInputInView error:",e)}},0)}},{key:"handleBackToCif",value:function(){var e={data:{nextStep:"init"}};this.SessionService.errorMessage=!1,this.onDataUpdate(e)}},{key:"openBrowserToSafeAndSecureLink",value:function(){var e=this.$translate.instant("login.common.safeAndSecureLink");if(this.EnvironmentService.isNative()){var t=""+this.EnvironmentService.getBaseUrl()+e;this.$window.open(t,"_system")}else this.$window.location=e}},{key:"generateCaptchaImage",value:function(){var e=this.EnvironmentService.getAPIUrl();this.captchaImage=e+"/web/images/captcha.jpg?v=."+Math.random()}},{key:"validateInput",value:function(e){this.isSecQuestSubmitEnabled=e&&null!==e&&""!==e}},{key:"validateCaptchaInput",value:function(e){this.isSecQuestSubmitEnabled=this.captchaValidation(e)}},{key:"checkSecret",value:function(){var e=this;if(!this.isFormSubmitting){this.isFormSubmitting=!0,this.TimerService.startTimerForAction(this.TimerService.EVENTS.SUBMIT_PASSMARK),this.isSecQuestSubmitEnabled=!1;var t=this.showCaptchaImage,n={challengeAnswer:this.secretQuestionCredentials.secretQuestion,skipSecurityQuestion:this.secretQuestionCredentials.skipSecurityQuestion,nextCommand:this.SessionService.nextCommand};t&&(n.Captcha=this.secretQuestionCredentials.captchaAnswer),this.flowService.isLoading=!0,this.AuthService.checkSecret(n).then(function(t){!t.authenticated&&t.errorMessage?e._handleSecretError(t):(e.secretQuestionCredentials.skipSecurityQuestion&&(e.SessionService.isDeviceBound=!0),e._handleCheckSecretSuccess(t))}).catch(function(t){e._handleSecretError(t)}).finally(function(){e._resetFormSubmissionState()})}}},{key:"_handleCheckSecretSuccess",value:function(e){this.flowService.isLoading=!1,this.nextCommand=e.nextCommand,this._cleanUp(e.nextStep),this.onDataUpdate({data:e}),e.passmark.phrase&&this.EventBusService.publish(this.loginEvents.SET_PIN_PHRASE,e)}},{key:"_cleanUp",value:function(e){e!==this.authConstants.steps.QUESTION&&(this.secretQuestionCredentials.secretQuestion=null,this.secretQuestionCredentials.skipSecurityQuestion=!1)}},{key:"_handleSecretError",value:function(e){this.flowService.isLoading=!1,this.failedTries=this.failedTries+1,this.EnvironmentService.isNative()?(this.errorMessage=this.failedTries>2?this.$translate.instant("global.errorCodes.PASSMARK_LOCKED"):this.$translate.instant("login.secretQuestion.mobileInvalidAnswer"),this.SessionService.errorMessage=this.errorMessage):this.errorMessage=this.failedTries<2?e.errorMessage:this.$translate.instant("login.secretQuestion.warnings.twoFails"),this.isSecQuestSubmitEnabled=!1,e.isPinLocked&&(this.isLockedOut=!0),!this.EnvironmentService.isNative()&&("true"===e.showCaptcha||this.failedTries>1)&&(this.secretQuestionCredentials.captchaAnswer="",this.generateCaptchaImage(),this.showCaptchaImage=!0),this.EnvironmentService.isNative()&&this.failedTries>2&&(this.isLockedOut=!0,this.EventBusService.publish(this.loginEvents.PASSMARK_LOCKED)),this._cleanUp(e.nextStep),e.nextStep&&this.onDataUpdate({data:e})}}]),e}();d.$inject=["EventBusService","AuthService","EnvironmentService","SessionService","LoginFlowService","loginConstants","authConstants","autoFocusConstants","$window","$document","$translate","TimerService","$timeout","$log","LoginTimeoutService"],t.default=d,e.exports=t.default},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(711),a=i(s),o=n(712),r=i(o);n(713);var l={template:a.default,controller:r.default,require:{},bindings:{onDataUpdate:"&",errorMessage:"<",isTimeout:"<",parentCtrl:"<"}};t.default=l,e.exports=t.default},function(e,t){e.exports='<form name="$ctrl.pinSectionForm" autocomplete="off" novalidate> <div ng-if="$ctrl.parentCtrl.isVisitorEnrollment"> <h1 class="heading--title2">{{ \'newClientEnrollment.welcome.titleLogin\' | translate }}</h1> <h2 class="body--2">{{ \'newClientEnrollment.welcome.subTitlePIN\' | translate }}</h2> </div> <div name="PIN" class="c-login c-login--pin" ng-class="{ \'c-login--vis-enroll\': $ctrl.parentCtrl.isVisitorEnrollment }"> <div class="c-login__header" ng-if="::$ctrl.parentCtrl.uiSettings.showHeader"> <h2 ng-show="$ctrl.phrase" class="heading--title2" id="login_pin_heading" translate>{{ ::\'login.pin.heading\' }}</h2> <h2 ng-show="!$ctrl.phrase" class="heading--title2" id="login_pinFirstLogin_heading" translate>{{ ::\'login.pinFirstLogin.heading\' }}</h2> </div> <tng-error-message ng-if="$ctrl.errorMessage"> {{ $ctrl.errorMessage }} </tng-error-message> <label for="login_pin" ng-if="::$ctrl.parentCtrl.uiSettings.showHeader"> <span ng-if="$ctrl.phrase">{{ ::\'login.pin.labelPIN\' | translate }}</span> <span ng-if="!$ctrl.phrase">{{ ::\'login.pinFirstLogin.labelPIN\' | translate }}</span> <tng-help-bubble>{{ ::\'login.pin.helpBubblePin\' | translate }}</tng-help-bubble> </label> <div class="grid__container"> <div class="c-login__panel--right--pin styleguide-grid-unit grid__column--1of2" ng-if="::$ctrl.parentCtrl.uiSettings.showDoubleSafe" ng-class="{\'hasError\': $ctrl.errorMessage}"> <div ng-if="!$ctrl.phrase" class="panel"> <strong translate>{{ ::\'login.pin.passmarkTagline\' }}</strong> <p translate>{{ ::\'login.pin.passmarkDesc\' }}</p> </div> <div ng-if="!$ctrl.parentCtrl.invalidUserId" class="security-image" id="login_security_image"> <img ng-if="$ctrl.passmark" class="CB_DoNotShow" data-ng-src="data:image/png;base64,{{$ctrl.passmark}}" alt="{{ \'login.common.securityImageTitle\' | translate}}"> <img ng-if="$ctrl.passmarkUrl && $ctrl.phrase" class="CB_DoNotShow" ng-src="{{$ctrl.passmarkUrl}}?no-cache={{ $ctrl.date }}" alt="{{ \'login.common.securityImageTitle\' | translate}}"> <strong ng-if="$ctrl.phrase" class="pass-phrase CB_DataMask" id="login_pin_phrase">{{ ::$ctrl.phrase }}</strong> </div> </div> <div class="c-login__panel--left--pin styleguide-grid-unit grid__column--1of2" ng-class="{\'c-login__panel--left--vis-enroll\': $ctrl.parentCtrl.isVisitorEnrollment}"> <div class="field"> <input type="{{ ::$ctrl.inputType }}" name="login_pin" id="login_pin" class="input CB_DataMask" ng-class="{warning:\n              $ctrl.pinSectionForm.login_pin.$invalid &&\n              $ctrl.pinSectionForm.login_pin.$touched &&\n              $ctrl.pinSectionForm.login_pin.$dirty &&\n              $ctrl.showErrorOn\n            }" maxlength="6" minlength="4" numeric-input inputmode="numeric" in-view="$ctrl.pinInputInView($inview, $inviewInfo)" autofocus autofocus-device="{{ ::$ctrl.autoFocusConstants.ALL }}" autocomplete="off" ng-change="$ctrl.validateInput($ctrl.pinCredentials.PIN)" ng-keypress="$ctrl.onKeyPress($event)" ng-keyup="$ctrl.onNativeKeyPress($event)" ng-keydown="$ctrl.onNativeKeyPress($event)" ng-focus="$ctrl.onFocus()" ng-required="true" ng-blur="$ctrl.onBlur()" ng-model="$ctrl.pinCredentials.PIN" placeholder="{{ \'login.pin.inputPlaceHolder\' | translate }}"> <div class="field__error_const_height"> <div ng-messages="$ctrl.pinSectionForm.login_pin.$error" ng-show="$ctrl.pinSectionForm.login_pin.$touched && $ctrl.pinSectionForm.login_pin.$dirty && $ctrl.showErrorOn" class="field__error"> <p ng-message="required"> {{ ::\'login.pin.requiredField\' | translate }} </p> <p ng-message="minlength"> {{ ::\'login.pin.fourDigits\' | translate }} </p> </div> </div> </div> <button actionable-id="login_signIn" type="submit" class="btn--small button CB_ReadOnly" ng-hide="$ctrl.isPinLockedInPinPage" ng-class="{ \'disabled\' : (!$ctrl.isPINSubmitedEnabled || $ctrl.isPinLockedInPinPage) }" ng-disabled="(!$ctrl.isPINSubmitedEnabled || $ctrl.isPinLockedInPinPage)" ng-click="$ctrl.checkPIN()" translate> <span ng-if="$ctrl.parentCtrl.isStandardLogin"> {{ ::\'login.pin.pinSubmitButton\' | translate }} </span> <span ng-if="$ctrl.parentCtrl.isVisitorEnrollment"> {{ ::\'global.components.buttons.next\' | translate }} </span> </button> <span ng-if="$ctrl.parentCtrl.invalidUserId"> <p class="user-info CB_DataMask" translate translate-values="{ userId: $ctrl.parentCtrl.invalidUserId }"> {{ ::\'login.secretQuestion.clientNumber\' }} </p> <p> <span translate>{{ ::\'login.secretQuestion.wrongUserId\' }}</span> <a actionable-id="secret-question-wrong_user_id" ng-href="#" ng-click="$ctrl.handleBackToCif()" class="link inline" translate>{{ ::\'login.secretQuestion.wrongUserIdLink\' }}.</a> </p> <a actionable-id="secret-question-safe_and_secure" ng-href="#" ng-click="$ctrl.openBrowserToSafeAndSecureLink()" target="_blank" class="link" translate>{{ ::\'login.common.safeAndSecure\' }}</a> </span> <p><a ng-if="\n            !$ctrl.isBusiness && ($ctrl.parentCtrl.showForgotPinLink || $ctrl.AuthService.showForgotPinLink) &&\n            $ctrl.phrase" class="link forgot CB_ReadOnly c-login__link" actionable-id="login_pinSection_resetPinLink" ui-sref="{{$ctrl.stateConstants.RESET_PIN}}" ng-click="$ctrl.resetPin()" translate> {{ ::\'login.pin.forgotPIN\' }} </a></p> <p ng-if="!$ctrl.phrase" translate> {{ ::\'login.pin.forgotPINNoPassmark\' }} </p> <p translate ng-if="::$ctrl.parentCtrl.uiSettings.showFooter">{{::\'login.pin.warning\' }}</p> </div> </div> </div> </form> '},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=n(34),c=function(){function e(t,n,i,s,o,r,l,c,u,d,h,_,g,S,f,v,E,p,T,m,C,A){var I=this;(0,a.default)(this,e),this.AuthService=n,this.flowService=i,this.LocaleService=g,this.SessionService=s,this.EnvironmentService=t,this.loginEvents=o.LOGIN_EVENTS,this.loginCommands=o.LOGIN_COMMANDS,this.loginActions=o.LOGIN_ACTIONS,this.authConstants=r,this.stateConstants=l,this.GlobalModalsService=_,this.autoFocusConstants=c,this.EventBusService=p,this.resetPinConstants=T,this.TimerService=m,this.LoginTimeoutService=A,this.isPinLockedInPinPage=!1,this.isNative=t.isNative(),this.isPINSubmitedEnabled=!1,this.errorMessage=!1,this.nextCommand=this.loginCommands.VALID_PIN_COMMAND,this.passmark=null,this.phrase=null,this.passmarkUrl=null,this.secretQuestion=this.SessionService.getSession().securityQuestion,this.isBusiness=this.SessionService.getSession().isBusiness,this.$timeout=d,this.$element=h,this.$state=S,this.$document=f,this.$translate=v,this.$anchorScroll=E,this.inputType=this.getInputType(),this.date=new Date,this.$scope=u,this.pinCredentials={passmark:"",phrase:"",PIN:""},this.isFormSubmitting=!1,this.menuConstants=C,this.isResetLoginEventInProgress=!1,this.LoginTimeoutService.subscribe(function(){I._resetFormSubmissionState()})}return(0,r.default)(e,[{key:"getInputType",value:function(){return this.EnvironmentService.isEdge()||!this.EnvironmentService.isWebKit()?"password":"tel"}},{key:"$onInit",value:function(){var e=this;this.AuthService.getPassmarks().then(function(t){t&&(e.phrase=t.phrase,void 0!==t.phrase&&null!==t.phrase&&""!==t.phrase||(e.phrase=" "),e.passmark=t.image,e.passmarkUrl=t.url)}),this.$document[0].title=this.$translate.instant("login.pin.pageTitle"),this.pinSectionForm={},this.TimerService.endTimersForActions([this.TimerService.EVENTS.SUBMIT_CIF,this.TimerService.EVENTS.SUBMIT_PASSMARK]),this.$timeout(function(){e.$anchorScroll()},150),this.EventBusService.subscribe(this.$scope,this.menuConstants.EVENTS.RESET_LOGIN,function(){e.isResetLoginEventInProgress=!0})}},{key:"$onChanges",value:function(){this.flowService.currentState===this.flowService.STATES.PIN&&this.isTimeout&&this.handleBackToCif()}},{key:"$onDestroy",value:function(){this.LoginTimeoutService.unsubscribe()}},{key:"_resetFormSubmissionState",value:function(){this.isPINSubmitedEnabled=!0,this.isFormSubmitting=!1}},{key:"handleBackToCif",value:function(){var e={data:{nextStep:"init"}};this.SessionService.errorMessage=!1,this.onDataUpdate(e)}},{key:"validateInput",value:function(e){var t=this;this.sanitizeInput(function(){t.isPINSubmitedEnabled=(0,l.pinValidation)(e),t.showErrorOn=!1})}},{key:"sanitizeInput",value:function(e){var t=this;this.$timeout(function(){t.pinCredentials.PIN&&(t.pinCredentials.PIN=(0,l.pinSanitize)(t.pinCredentials.PIN)),"function"==typeof e&&e()})}},{key:"onBlur",value:function(){this.showErrorOn=!0,this.innerHeightOrig&&this.isNative&&this.EnvironmentService.isAndroid()&&(window.innerHeight=this.innerHeightOrig)}},{key:"onKeyPress",value:function(e){this._isValidKeyCode(e)&&this.pinSectionForm.login_pin.$valid&&this.checkPIN()}},{key:"onNativeKeyPress",value:function(e){this.isNative&&this.onKeyPress(e)}},{key:"onFocus",value:function(){this.isNative&&this.EnvironmentService.isAndroid()&&(this.innerHeightOrig=window.innerHeight,window.innerHeight-=200,this.pinInputInView(!1))}},{key:"_isValidKeyCode",value:function(e){var t=13===e.keyCode||13===e.charCode,n=9===e.keyCode;return t||n}},{key:"checkPIN",value:function(){var e=this;this.isFormSubmitting||(this.isFormSubmitting=!0,this.AuthService.isAuthenticated()||this.TimerService.startTimerForAction(this.TimerService.EVENTS.SUBMIT_PIN),this.isPINSubmitedEnabled=!1,this.flowService.isLoading=!0,this.AuthService.submitPin({pin:this.pinCredentials.PIN,nextCommand:this.nextCommand,locale:this.LocaleService.locale}).then(function(t){if(e.isResetLoginEventInProgress)return void(e.isResetLoginEventInProgress=!1);!t.authenticated&&t.errorMessage?e._handleCheckPINError(t):e._handleCheckPINSuccess(t)}).catch(function(t){e._handleCheckPINError(t)}).finally(function(){e._resetFormSubmissionState()}))}},{key:"pinInputInView",value:function(e){var t=this;this.$timeout(function(){if(!e)try{var n=t.$document[0].getElementById("login_security_image").offsetTop;t.$document.find('div[ui-view="page-content"]')[0].scrollTop=n,t.$document.find('div[class="dialog__main-content"]')[0].scrollTop=n}catch(e){}},0)}},{key:"resetPin",value:function(){this.flowService.deactivate(!0),this.AuthService.showForgotPinLink=!0,this.$state.go(this.stateConstants.RESET_PIN)}},{key:"_handleCheckPINSuccess",value:function(e){this._cleanUp(e),e.firstTime||!e.passmark?this.EventBusService.publish(this.loginEvents.SUCCESSFUL_LOGIN,{action:this.loginActions.SHOW_FIRST_TIME_USER,data:e.firstTime}):e.authenticated&&this.EventBusService.publish(this.loginEvents.SUCCESSFUL_LOGIN,{action:this.loginActions.GO_TO_NEXT_PAGE})}},{key:"_handleCheckPINError",value:function(e){this.flowService.isLoading=!1,this.errorMessage=e.errorMessage,this._cleanUp(e),this.isNative&&(e.authStatus===this.authConstants.status.PIN_LOCKED?(this.isPinLockedInPinPage=!0,this.errorMessage=this.$translate.instant("login.pin.mobilePinLocked"),this.EventBusService.publish(this.loginEvents.PIN_LOCKED)):this.errorMessage=this.$translate.instant("login.pin.mobileInvalidPin"),this.SessionService.errorMessage=this.errorMessage),e.nextStep&&this.onDataUpdate({data:e})}},{key:"_cleanUp",value:function(e){e.nextStep!==this.authConstants.steps.PIN&&(this.pinCredentials.PIN=null),this.isPinLockedInPinPage=e.IsPinLock||e.isPinLockedInPinPage,this.isPINSubmitedEnabled=!e.IsPinLock||!e.isPinLockedInPinPage}}]),e}();c.$inject=["EnvironmentService","AuthService","LoginFlowService","SessionService","loginConstants","authConstants","stateConstants","autoFocusConstants","$scope","$timeout","$element","GlobalModalsService","LocaleService","$state","$document","$translate","$anchorScroll","EventBusService","resetPinConstants","TimerService","menuConstants","LoginTimeoutService"],t.default=c,e.exports=t.default},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(715),a=i(s),o=n(719),r=i(o),l=n(723),c=i(l),u=n(727),d=i(u),h=n(731),_=i(h),g=n(735),S=i(g),f=n(739),v=i(f),E=n(740),p=i(E),T=n(741),m=i(T),C=n(742),A=i(C),I=angular.module("tangerine.app.core.components.firstLogin",[]).component("tngFirstLogin",a.default).component("tngImageSelect",c.default).component("tngUsername",r.default).component("tngPhraseSelect",d.default).component("tngQuestionSelect",_.default).component("tngConfirmation",S.default).service("FirstLoginTPWService",v.default).service("FirstLoginMFPService",p.default).service("FirstLoginFlowService",m.default).constant("firstLoginConstants",A.default);t.default=I,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(716),a=i(s),o=n(717),r=i(o);n(718);var l={template:r.default,controller:a.default,bindings:{onClose:"&",initialState:"<"}};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i,s,o,r,l,c,u,d,h,_,g){(0,a.default)(this,e),this.$log=t,this.isNative=i.isNative(),this.FirstLoginTPWService=s,this.FirstLoginMFPService=o,this.FirstLoginService=this._getFirstLoginService(),this.FirstLoginService.isLogin=!1,this.flowService=n,this.$state=r,this.stateConstants=l,this.EventBusService=c,this.firstLoginConstants=u,this.$scope=d,this.RequesterService=h,this.serviceConstants=_,this.flowService.AnchorService=g}return(0,r.default)(e,[{key:"$onInit",value:function(){var e=angular.isObject(this.initialState)&&this.initialState.Command;if(this.flowService.activate(),this.flowService.isInitialStateSet=e,this.flowService.errorMessage=null,e)switch(this.initialState.Command){case this.firstLoginConstants.COMMANDS.CHANGE_PASSMARK_PHRASE:this.flowService.moveTo(this.flowService.STATES.PHRASE_SELECT);break;case this.firstLoginConstants.COMMANDS.CHANGE_PASSMARK_QUESTION:this.flowService.questionOptions=this.initialState.ChallengeQuestions,this.flowService.moveTo(this.flowService.STATES.QUESTION_SELECT);break;case this.firstLoginConstants.COMMANDS.RESET_PASSMARK_QUESTION:this.flowService.questionOptions=this.initialState.ChallengeQuestions,this.flowService.mobilePassmarkImage=this.initialState.Image,this.flowService.isMobilePassmarkReset=!0,this.flowService.moveTo(this.flowService.STATES.QUESTION_SELECT)}}},{key:"$onDestroy",value:function(){this.flowService.deactivate()}},{key:"_getFirstLoginService",value:function(){return this.isNative?this.FirstLoginMFPService:this.FirstLoginTPWService}},{key:"onGrayBtnClick",value:function(){this.flowService.currentState===this.flowService.STATES.USERNAME||this.flowService.errorMessage?this.flowService.showConfirmExitUI=!0:this.flowService.gotoPreviousState()}},{key:"onModalClose",value:function(){this.flowService.showConfirmExitUI?this.flowService.showConfirmExitUI=!1:this.flowService.showConfirmExitUI=!0}},{key:"onOrgBtnClick",value:function(){this.flowService.currentState===this.flowService.STATES.CONFIRMATION?(this.flowService.enterLoadingMode(),this.closeModal(!0)):this.flowService.updatePassmarkData()}},{key:"closeModal",value:function(e){var t=this,n=this.flowService.$q(function(n){t.flowService.currentState===t.flowService.STATES.CONFIRMATION&&(e={event:t.firstLoginConstants.EVENTS.FIRST_TIME_SETUP_COMPLETE}),t.flowService.deactivate(),n(e)});this.onClose({result:n})}}]),e}();l.$inject=["$log","FirstLoginFlowService","EnvironmentService","FirstLoginTPWService","FirstLoginMFPService","$state","stateConstants","EventBusService","firstLoginConstants","$scope","RequesterService","serviceConstants","AnchorService"],t.default=l,e.exports=t.default},function(e,t){e.exports='<tng-modal-dialog on-close="$ctrl.onModalClose()" class="first-login" analytics-id="login-doublesafe" hide-close="$ctrl.flowService.isLoading"> <header> <span ng-show="!$ctrl.flowService.showConfirmExitUI">{{ $ctrl.flowService.currentState.titleKey | translate }}</span> <span ng-show="$ctrl.flowService.showConfirmExitUI">{{ \'login.firstLogin.warnings.title\' | translate }}</span> </header> <form name="$ctrl.firstLoginForm"> <div id="scroll-to-top"></div> <div ng-if="!$ctrl.flowService.isLoading"> <div ng-if="$ctrl.flowService.showConfirmExitUI"> <tng-confirm-exit></tng-confirm-exit> </div> <div ng-hide="$ctrl.flowService.showConfirmExitUI"> <div class="margin__b--fix2"> <tng-error-message ng-if="!$ctrl.firstLoginForm.$invalid && $ctrl.flowService.errorMessage"> {{ $ctrl.flowService.errorMessage }} </tng-error-message> <tng-error-message ng-if="!$ctrl.firstLoginForm.$invalid && $ctrl.flowService.errorMessageKey"> {{ $ctrl.flowService.errorMessageKey | translate }} </tng-error-message> </div> <tng-username ng-show="$ctrl.flowService.currentState === $ctrl.flowService.STATES.USERNAME" on-update="$ctrl.flowService.onFormUpdate()"></tng-username> <tng-image-select ng-show="$ctrl.flowService.currentState === $ctrl.flowService.STATES.IMAGE_SELECT" first-login-service="$ctrl.FirstLoginService"></tng-image-select> <tng-phrase-select ng-if="$ctrl.flowService.currentState === $ctrl.flowService.STATES.PHRASE_SELECT" first-login-service="$ctrl.FirstLoginService"></tng-phrase-select> <tng-question-select ng-if="$ctrl.flowService.currentState === $ctrl.flowService.STATES.QUESTION_SELECT" first-login-service="$ctrl.FirstLoginService"></tng-question-select> <tng-confirmation ng-if="$ctrl.flowService.currentState === $ctrl.flowService.STATES.CONFIRMATION" first-login-service="$ctrl.FirstLoginService"></tng-confirmation> </div> </div> </form> <tng-loading-in-progress ng-if="$ctrl.flowService.isLoading"> </tng-loading-in-progress> <footer ng-if="!$ctrl.flowService.showConfirmExitUI && !$ctrl.flowService.isLoading"> <button actionable-id="firstLoginModal_grayButton" class="btn btn--edit" ng-click="$ctrl.onGrayBtnClick()" ng-show="$ctrl.flowService.BUTTONS.BTN_GRY.show" ng-disabled="$ctrl.flowService.BUTTONS.BTN_GRY.disable"> {{ $ctrl.flowService.BUTTONS.BTN_GRY.type.label | translate }} </button> <button actionable-id="firstLoginModal_orangeButton" class="btn btn--tangerine" ng-class="{\'CB_ReadOnly\': $ctrl.flowService.CB_DISABLED_BUTTONS.includes($ctrl.flowService.BUTTONS.BTN_ORG.type)}" ng-click="$ctrl.onOrgBtnClick()" ng-show="$ctrl.flowService.BUTTONS.BTN_ORG.show" ng-disabled="$ctrl.flowService.BUTTONS.BTN_ORG.disable || $ctrl.firstLoginForm.$invalid"> {{ $ctrl.flowService.BUTTONS.BTN_ORG.type.label | translate }} </button> </footer> <footer ng-if="$ctrl.flowService.showConfirmExitUI && !$ctrl.flowService.isLoading"> <button actionable-id="firstLoginModal_cancelClose" class="btn btn--edit" ng-click="$ctrl.flowService.showConfirmExitUI = false;">{{ ::\'global.pageFlow.buttons.cancel\' | translate }} </button> <button actionable-id="firstLoginModal_close" class="btn btn--tangerine" ng-click="$ctrl.closeModal()">{{ ::\'global.pageFlow.buttons.confirm\' | translate }}</button> </footer> </tng-modal-dialog> '},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(720),a=i(s),o=n(721),r=i(o);n(722);var l={template:r.default,controller:a.default,bindings:{onUpdate:"&?"}};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=n(34),c=function(){function e(t,n,i){(0,a.default)(this,e),this.$log=t,this.flowService=n,this.autoFocusConstants=i,this.inputName="username_input"}return(0,r.default)(e,[{key:"$onInit",value:function(){delete this.flowService.errorMessage,delete this.flowService.errorMessageKey}},{key:"validateUsername",value:function(){this.flowService.username&&""!==this.flowService.username&&(this.usernameSetup[this.inputName].$setValidity("oneLetter",(0,l.hasAtLeastOneLetter)(this.flowService.username)),this.usernameSetup[this.inputName].$setValidity("specialChars",!(0,l.hasUsernameSpecialChars)(this.flowService.username))),angular.isFunction(this.onUpdate)&&this.onUpdate()}}]),e}();c.$inject=["$log","FirstLoginFlowService","autoFocusConstants"],t.default=c,e.exports=t.default},function(e,t){e.exports='<form class="username-setup" name="$ctrl.usernameSetup"> <p ng-bind-html="\'login.firstLogin.usernameDesc\' | translate"></p> <div class="field"> <input class="input" type="text" actionable-id="{{$ctrl.inputName}}" maxlength="40" ng-model="$ctrl.flowService.username" placeholder="{{ \'login.firstLogin.usernamePlaceholder\' | translate}}" autocapitalize="none" autofocus autocomplete="off" minlength="6" ng-change="$ctrl.validateUsername()" autofocus-device="{{ $ctrl.autoFocusConstants.ALL }}" ng-class="{\'warning\': $ctrl.usernameSetup[$ctrl.inputName].$invalid &&\n                            $ctrl.usernameSetup[$ctrl.inputName].$touched}"> </div> <div ng-messages="$ctrl.usernameSetup.$error" ng-show="$ctrl.usernameSetup[$ctrl.inputName].$touched && $ctrl.usernameSetup[$ctrl.inputName].$invalid" class="field__error"> <p ng-message="required"> {{ ::\'global.validation.required\' | translate }} </p> <p ng-message="minlength"> {{ ::\'global.errorCodes.39202\' | translate }} </p> <p ng-message="oneLetter"> {{ ::\'global.errorCodes.39204\' | translate }} </p> <p ng-message="specialChars"> {{ ::\'global.errorCodes.39206\' | translate }} </p> </div> <p class="username-setup__disclaimer" ng-bind-html="\'login.firstLogin.usernameDisclaimer\' | translate"></p> </form> '},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(724),a=i(s),o=n(725),r=i(o);n(726);var l={template:r.default,controller:a.default,bindings:{firstLoginService:"<"}};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(64),a=i(s),o=n(0),r=i(o),l=n(1),c=i(l),u=n(275),d=i(u),h=function(){function e(t,n,i,s,a,o){(0,r.default)(this,e),this.$log=t,this.apiUrl=n.getAPIUrl(),this.base=this.apiUrl+"/web",this.isNative=n.isNative(),this.flowService=i,this.selectConstants=s,this.categoryList=[],this.nativeImageList=null,this.selectedCategory=null,this.getImageUrl=d.default,this.passmarkImageString=""+this.base+this.getImageUrl(),this.allCategoriesStr=o.instant("login.firstLogin.allCategories"),this.$filter=a}return(0,c.default)(e,[{key:"$onInit",value:function(){var e=this;null!==this.flowService.selectedImageIndex?this.flowService.BUTTONS.BTN_ORG.disable=!1:this.firstLoginService.getCategoryData().then(function(t){e.processCategoryData(t)})}},{key:"selectCategory",value:function(e){e&&(this.flowService.selectedCategory=e,this.getNewImages())}},{key:"processCategoryData",value:function(e){if(this.isNative){if(e.image_category_list){this.flowService.categoryList.push({name:this.allCategoriesStr});var t=!0,n=!1,i=void 0;try{for(var s,o=(0,a.default)(e.image_category_list);!(t=(s=o.next()).done);t=!0){var r=s.value;this.flowService.categoryList.push({name:r})}}catch(e){n=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw i}}this.flowService.categoryOptions=angular.copy(this.flowService.categoryList),this.flowService.selectedCategory=this.flowService.categoryList[0],this.flowService.selectedCategoryName=this.flowService.categoryList[0].name}e.image_list&&(this.flowService.nativeImageList=e.image_list,this.$log.debug("Native Image List: ",this.flowService.nativeImageList)),e.question_list&&(this.flowService.questionOptions=e.question_list.map(function(e){return{Value:e.question_id,question:e.question}}),this.$log.debug("Question Options: ",this.flowService.questionOptions))}else if(e.MessageBody&&e.MessageBody.ChangePassMarkImage&&e.MessageBody.ChangePassMarkImage.CategoryList){this.flowService.categoryList.push({name:this.allCategoriesStr});var l=!0,c=!1,u=void 0;try{for(var d,h=(0,a.default)(e.MessageBody.ChangePassMarkImage.CategoryList.Category);!(l=(d=h.next()).done);l=!0){var _=d.value;this.flowService.categoryList.push({name:this.$filter("firstLetterCapitalize")(_.CategoryName)})}}catch(e){c=!0,u=e}finally{try{!l&&h.return&&h.return()}finally{if(c)throw u}}this.flowService.passmarkUrl=this.passmarkImageString,this.flowService.categoryOptions=angular.copy(this.flowService.categoryList),this.flowService.selectedCategory=this.flowService.categoryList[0],this.flowService.selectedCategoryName=this.flowService.categoryList[0].name}this.$log.debug("Category List Data: ",this.flowService.categoryList)}},{key:"selectImg",value:function(e){this.flowService.selectedImageIndex=this.isNative?this.flowService.nativeImageList[e]:e,this.flowService.BUTTONS.BTN_ORG.disable=!1}},{key:"getNewImages",value:function(){var e=this;this.flowService.selectedCategory.name===this.allCategoriesStr?this.firstLoginService.getCategoryData().then(function(t){e.isNative?(e.$log.debug("GET New Images: ",t),e.flowService.nativeImageList=t.image_list):t.MessageBody.ChangePassMarkImage&&(e.flowService.passmarkUrl=e._getNewImagePath(t.MessageBody.ChangePassMarkImage.timestamp))}):this.getCategoryImages()}},{key:"getCategoryImages",value:function(){var e=this;this.firstLoginService.getImagesByCategory(this.flowService.selectedCategory.name).then(function(t){e.isNative?(e.$log.debug("GET IMAGES BY CATEGORY: ",t),e.flowService.nativeImageList=t.image_list):(e.$log.log("CATEGORY IMAGE DATA: ",t),t.MessageBody.ChangePassMarkImage&&(e.flowService.passmarkUrl=e._getNewImagePath(t.MessageBody.ChangePassMarkImage.timestamp)))})}},{key:"getImageNumber",value:function(e){return new Array(e)}},{key:"_getNewImagePath",value:function(e){return this.base+"/passmarks?"+e+"&imgIdx="}}]),e}();h.$inject=["$log","EnvironmentService","FirstLoginFlowService","tngSelectAutocompleteConstants","$filter","$translate"],t.default=h,e.exports=t.default},function(e,t){e.exports='<div class="image-select"> <p ng-bind-html="\'login.firstLogin.doubleSafeCopy\' | translate"></p> <div> <div> <tng-select-autocomplete input-id="categorySelect" ng-model="$ctrl.flowService.selectedCategoryName" on-select="$ctrl.selectCategory(option)" options="$ctrl.flowService.categoryOptions" option-label-key="name" option-value-key="name" select-type="$ctrl.selectConstants.SELECT_TYPES.STATIC"> </tng-select-autocomplete> </div> </div> <div class="image-list"> <h2 class="heading--title2">{{$ctrl.flowService.selectedCategory.name | translate }}</h2> <div ng-if="$ctrl.flowService.categoryList.length > 0"> <img ng-if="!$ctrl.isNative" ng-repeat="i in $ctrl.getImageNumber(8) track by $index" class="CB_DoNotShow passmarkImage" ng-class="{ \'selected\': $ctrl.flowService.selectedImageIndex === $index }" actionable-id="passmarkImg_{{$index}}" ng-click="$ctrl.selectImg($index)" ng-src="{{$ctrl.flowService.passmarkUrl}}{{$index}}" alt="{{ \'login.common.securityImageTitle\' | translate}}"/> <img ng-if="$ctrl.isNative" ng-repeat="i in $ctrl.flowService.nativeImageList track by $index" class="CB_DoNotShow passmarkImage" ng-class="{ \'selected\': $ctrl.flowService.selectedImageIndex === $ctrl.flowService.nativeImageList[$index] }" actionable-id="passmarkImg_{{$index}}" ng-click="$ctrl.selectImg($index)" data-ng-src="data:image/png;base64,{{ $ctrl.flowService.nativeImageList[$index].image }}" alt="{{ \'login.common.securityImageTitle\' | translate}}"/> </div> <button class="btn btn--tangerine btn--large" actionable-id="imageSelect_getNewImages" ng-click="$ctrl.getNewImages()">{{ \'login.firstLogin.viewMore\' | translate }}</button> </div> </div> '},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(728),a=i(s),o=n(729),r=i(o);n(730);var l={template:r.default,controller:a.default,bindings:{firstLoginService:"<"}};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=n(34),c=function(){function e(t,n,i,s){(0,a.default)(this,e),this.$log=t,this.flowService=n,this.autoFocusConstants=i,this.EnvironmentService=s,this.phraseValidation=l.phraseValidation,this.phraseMaxLength=25,this.phrase=this.flowService.phrase||null,this.validateInput()}return(0,r.default)(e,[{key:"$onInit",value:function(){angular.element("#modalMainContent").scrollTop(0)}},{key:"validateInput",value:function(){this.phrase&&this.phraseValidation(this.phrase)?(this.flowService.phrase=this.phrase,this.flowService.BUTTONS.BTN_ORG.disable=!1):this.flowService.BUTTONS.BTN_ORG.disable=!0}}]),e}();c.$inject=["$log","FirstLoginFlowService","autoFocusConstants","EnvironmentService"],t.default=c,e.exports=t.default},function(e,t){e.exports='<form class="phrase-select"> <p ng-bind-html="\'login.firstLogin.phraseDesc\' | translate"></p> <div class="field"> <textarea class="input CB_DataMask" type="text" actionable-id="phraseSelect_validateInput" maxlength="{{ $ctrl.phraseMaxLength }}" ng-model="$ctrl.phrase" ng-change="$ctrl.validateInput()" ng-attr-placeholder="{{ \'login.firstLogin.placeholder\' | translate}}" autocapitalize="none" ng-attr-rows="1" ng-attr-autofocus="{{$ctrl.EnvironmentService.isMobile() || $ctrl.EnvironmentService.isNative() ? undefined : \'\'}}"></textarea> </div> </form> '},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(732),a=i(s),o=n(733),r=i(o);n(734);var l={template:r.default,controller:a.default,bindings:{firstLoginService:"<"}};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(115),a=i(s),o=n(0),r=i(o),l=n(1),c=i(l),u=n(34),d=function(){function e(t,n,i,s,a){(0,r.default)(this,e),this.$log=t,this.flowService=n,this.selectConstants=s,this.firstLoginConstants=a,this.isNative=i.isNative(),this.questionKey=this.isNative?this.firstLoginConstants.SERVICE_PARAMS.TPW_QUESTION_KEY:this.firstLoginConstants.SERVICE_PARAMS.MFP_QUESTION_KEY,this.answerPattern=u.secretQuestionPattern,this.allQuestionOptions=this.flowService.questionOptions||{},this.questionOptions=[angular.copy(this.allQuestionOptions),angular.copy(this.allQuestionOptions),angular.copy(this.allQuestionOptions)]}return(0,c.default)(e,[{key:"$onInit",value:function(){var e=this;this.hasDuplicateAnswers=Array(3).fill(!1),this.formValid=!0,this.selectedQuestions=(0,a.default)(new Array(3),function(){return{question:{Value:e.flowService.questionOptions[0].value,Description:e.flowService.questionOptions[0].Description},answer:null}})}},{key:"selectQuestion",value:function(e,t){t&&(this.selectedQuestions[e].question=t,this.removeDuplicates())}},{key:"validateInputs",value:function(e){var t=this;if(this.selectedQuestions.some(function(e){return void 0===e.answer||null===e.answer||""===e.answer||null===e.question||null===e.question[t.questionKey]}))return void(this.flowService.BUTTONS.BTN_ORG.disable=!0);this.hasDuplicateAnswers.fill(!1);for(var n=0;n<this.hasDuplicateAnswers.length;n++)for(var i=0;i<this.hasDuplicateAnswers.length;i++)n!==i&&this.selectedQuestions[n].answer===this.selectedQuestions[i].answer&&(this.hasDuplicateAnswers[n]=!0,this.hasDuplicateAnswers[i]=!0);e&&(this.formValid=e.$valid);var s=this.hasDuplicateAnswers.find(function(e){return e});this.formValid&&!s?(this.flowService.BUTTONS.BTN_ORG.disable=!1,this.flowService.selectedQuestions=this.selectedQuestions):this.flowService.BUTTONS.BTN_ORG.disable=!0}},{key:"removeDuplicates",value:function(){var e=this;this.selectedQuestions.forEach(function(t,n){e.questionOptions[n]=e.allQuestionOptions.filter(function(t){return!e.selectedQuestions.some(function(e,i){return n!==i&&!!e.question&&e.question.Value===t.Value})})})}}]),e}();d.$inject=["$log","FirstLoginFlowService","EnvironmentService","tngSelectAutocompleteConstants","firstLoginConstants"],t.default=d,e.exports=t.default},function(e,t){e.exports='<div class="question-select"> <p ng-bind-html="\'login.firstLogin.questionDesc\' | translate"></p> <form name="$ctrl.form"> <div class="field" ng-repeat="question in $ctrl.selectedQuestions track by $index"> <tng-select-autocomplete class="CB_DataMask" input-id="doubleSafe-questions-{{$index}}" ng-model="$ctrl.selectedQuestions[$index].question.Value" ng-required="true" on-select="$ctrl.selectQuestion($index, option)" options="$ctrl.questionOptions[$index]" option-label-key="{{ $ctrl.questionKey }}" option-value-key="Value" placeholder="{{ ::\'login.firstLogin.questionSelectPlaceholder\' | translate:{index: $index + 1} }}" select-type="$ctrl.selectConstants.SELECT_TYPES.STATIC"> </tng-select-autocomplete> <input name="question_{{$index}}" id="doubleSafe-question_{{$index}}" class="input CB_DataMask" ng-class="{warning:\n          $ctrl.form.question_{{$index}}.$invalid &&\n          $ctrl.form.question_{{$index}}.$touched\n        }" type="text" placeholder="{{ ::\'login.firstLogin.questionInputPlaceholder\' | translate}}" ng-model="$ctrl.selectedQuestions[$index].answer" maxlength="40" ng-required="true" ng-change="$ctrl.validateInputs($ctrl.form)" autocapitalize="none" native-input-scroll ng-pattern="$ctrl.answerPattern"> <div ng-messages="$ctrl.form[\'question_\' + $index].$error" ng-show="$ctrl.form[\'question_\' + $index].$touched" class="field__error question-select__div--inline"> <p ng-message="required"> {{ ::\'login.firstLogin.requiredField\' | translate }} </p> <p ng-message="pattern"> {{ ::\'login.firstLogin.patternValidationError\' | translate }} </p> <p ng-if="$ctrl.form[\'question_\' + $index].$valid && $ctrl.hasDuplicateAnswers[$index]"> {{ ::\'login.firstLogin.duplicateAnswer\' | translate }} </p> </div> </div> </form> </div> '},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(736),a=i(s),o=n(737),r=i(o);n(738);var l={template:r.default,controller:a.default};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=n(275),c=i(l),u=function(){function e(t,n,i,s){(0,a.default)(this,e),this.$log=t,this.customersService=n,this.flowService=i,this.base=s.getAPIUrl()+"/web",this.isNative=s.isNative(),this.getImageUrl=c.default,this.passmarkData=this.flowService.confirmationData,this.phrase=this.isNative?this.flowService.phrase:this.passmarkData&&this.passmarkData.LoginPhrase,this.questionList=[]}return(0,r.default)(e,[{key:"$onInit",value:function(){for(var e=0;e<3;e++)this.questionList.push(this.getQuestionAnswer(e));this.getPassmarkImagePath()}},{key:"getPassmarkImagePath",value:function(){var e=this;this.flowService.isMobilePassmarkReset||this.isNative?this.flowService.isMobilePassmarkReset?this.passmarkImage=this.flowService.mobilePassmarkImage:this.passmarkImage=this.flowService.selectedImageIndex.image:this.customersService.getCustomerPassmark().then(function(t){t&&(e.passmarkImage=t.image)})}},{key:"getQuestionAnswer",value:function(e){return{question:this.isNative?this.flowService.selectedQuestions[e].question.question:this.passmarkData["Question"+(e+1)],answer:this.isNative?this.flowService.selectedQuestions[e].answer:this.passmarkData["Answer"+(e+1)]}}}]),e}();u.$inject=["$log","CustomersService","FirstLoginFlowService","EnvironmentService"],t.default=u,e.exports=t.default},function(e,t){e.exports='<div class="firstLogin-confirmation"> <p ng-bind-html="\'login.firstLogin.confirmationDesc\' | translate"></p> <div class="image-phrase"> <img ng-if="!$ctrl.isNative" class="CB_DoNotShow passmarkImage" ng-src="data:image/png;base64,{{$ctrl.passmarkImage}}" alt="{{ \'login.common.securityImageTitle\' | translate}}"/> <img ng-if="$ctrl.isNative" class="CB_DoNotShow passmarkImage" actionable-id="passmarkImg_{{$index}}" data-ng-src="data:image/png;base64,{{$ctrl.passmarkImage}}" alt="{{ \'login.common.securityImageTitle\' | translate}}"/><br/> {{ $ctrl.phrase }} </div> <div class="setup-list"> <div class="setup-list__container" ng-repeat="question in $ctrl.questionList"> <div class="setup-list__title">{{ \'login.firstLogin.secretQuestion\' | translate}} {{$index + 1}}</div> <div class="setup-list__question">{{ question.question }}</div> <div class="setup-list__answer">{{ question.answer }}</div> </div> </div> </div> '},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i,s,o){(0,a.default)(this,e),this.$log=t,this.$q=n,this.CredentialsService=i,this.SessionService=s,this.firstLoginConstants=o}return(0,r.default)(e,[{key:"getCategoryData",value:function(){return this.CredentialsService.metroGet(this.firstLoginConstants.COMMANDS.DISPLAY_CHANGE_PASSMARK_IMAGE)}},{key:"getImagesByCategory",value:function(e){var t={command:this.firstLoginConstants.COMMANDS.GOTO_PASSMARK_IMAGE_CATEGORY,category:e,TRANSACTION_TOKEN:this.SessionService.transaction_token};return this.CredentialsService.metroPost(t,{acceptedCommands:[{command:this.firstLoginConstants.COMMANDS.DISPLAY_CHANGE_PASSMARK_IMAGE}]})}},{key:"saveChangeImage",value:function(e){var t={command:this.firstLoginConstants.COMMANDS.CHANGE_PASSMARK_IMAGE,imageIDX:e,TRANSACTION_TOKEN:this.SessionService.transaction_token};return this.CredentialsService.metroPost(t,{acceptedCommands:[{command:this.firstLoginConstants.COMMANDS.DISPLAY_CHANGE_PASSMARK_IMAGE}]})}},{key:"sendPhraseData",value:function(e){var t={command:this.firstLoginConstants.COMMANDS.CHANGE_PASSMARK_PHRASE,newPhrase:e,TRANSACTION_TOKEN:this.SessionService.transaction_token};return this.CredentialsService.metroPost(t,{acceptedCommands:[{command:this.firstLoginConstants.COMMANDS.DISPLAY_CHANGE_PASSMARK_QUESTION}]})}},{key:"sendQuestionData",value:function(e){var t={command:this.firstLoginConstants.COMMANDS.CHANGE_PASSMARK_QUESTION,QuestionId1:e[0].question.Value,Answer1:e[0].answer,QuestionId2:e[1].question.Value,Answer2:e[1].answer,QuestionId3:e[2].question.Value,Answer3:e[2].answer,TRANSACTION_TOKEN:this.SessionService.transaction_token};return t[this.firstLoginConstants.SERVICE_PARAMS.SAVE_CONTINUE]=this.firstLoginConstants.SERVICE_PARAMS.NEXT,this.CredentialsService.metroPost(t,{acceptedCommands:[{command:this.firstLoginConstants.COMMANDS.DISPLAY_VALIDATED_ENROLLMENT}]})}},{key:"savePassmarkEnrollment",value:function(){var e={command:this.firstLoginConstants.COMMANDS.SAVE_ENROLLMENT,BUTTON_Save:"Save",TRANSACTION_TOKEN:this.SessionService.transaction_token};return this.CredentialsService.metroPost(e,{acceptedCommands:[{command:this.firstLoginConstants.COMMANDS.DISPLAY_VALIDATED_ENROLLMENT}]})}}]),e}();l.$inject=["$log","$q","CredentialsTPWService","SessionService","firstLoginConstants"],t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i,s,o,r){(0,a.default)(this,e),this.RequesterService=t,this.serviceConstants=n,this.firstLoginConstants=s,this.imageId=null,this.phrase=null,this.enrollmentQuestions=[],this.enrollmentObject=null,this.$q=o,this.$log=r}return(0,r.default)(e,[{key:"getCategoryData",value:function(){var e=this.serviceConstants.AVAILABLE_SERVICES.SETUP_PASSMARK;return this.RequesterService.request(e)}},{key:"getImagesByCategory",value:function(e){var t={urlVars:{image_category:e}};return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.PASSMARK_IMAGES_BY_CATEGORY,t)}},{key:"saveChangeImage",value:function(e){return this.imageId=e.image_id,this.$q.resolve(e)}},{key:"sendPhraseData",value:function(e){this.phrase=e;var t=e.split(" "),n=t.reduce(function(e,t){return e+" "+btoa(t.toLowerCase())},"");return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.GET_RESTRICTED_WORDS,{urlVars:{phrase:n}})}},{key:"sendQuestionData",value:function(e){this.$log.debug("questionsArray: ",e),this.enrollmentQuestions=[];for(var t=0;t<e.length;t++){var n={answer:e[t].answer,question_id:e[t].question.Value};this.enrollmentQuestions.push(n),this.$log.debug("Selected Question: ",this.enrollmentQuestions[t])}return this.$q.resolve(this.enrollmentQuestions)}},{key:"savePassmarkEnrollment",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?(this.enrollmentObject={data:{answers_list:this.enrollmentQuestions}},this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.PUT_PASSMARK,this.enrollmentObject)):(this.enrollmentObject={data:{phrase:this.phrase,answers_list:this.enrollmentQuestions,image_id:this.imageId}},this.$log.debug("ENROLLMENT OBJ: ",this.enrollmentObject),this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.POST_PASSMARK,this.enrollmentObject))}}]),e}();l.$inject=["RequesterService","serviceConstants","SessionService","firstLoginConstants","$q","$log"],t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(98),a=i(s),o=n(13),r=i(o),l=n(81),c=i(l),u=n(0),d=i(u),h=n(1),_=i(h),g=n(94),S=i(g),f=n(96),v=i(f),E=n(95),p=i(E),T=n(97),m=i(T),C=n(204),A=function(e){function t(e,n,i,s,a,o,r,l,u,h,_,g,f,v,E,p,T,m,C){(0,d.default)(this,t);var A=(0,S.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e,n,i,s,a,f,o,v,C));return A.$state=s,A.firstLoginService=null,A.STATES={USERNAME:{titleKey:"login.firstLogin.usernameTitle"},IMAGE_SELECT:{titleKey:"login.firstLogin.doubleSafeTitle"},PHRASE_SELECT:{titleKey:"login.firstLogin.phraseTitle"},QUESTION_SELECT:{titleKey:"login.firstLogin.questionTitle"},CONFIRMATION:{titleKey:"login.firstLogin.confirmationTitle"}},A.isNative=r.isNative(),A.firstLoginTPWService=l,A.firstLoginMFPService=u,A.firstLoginService=A._getFirstLoginService(),A.eventBusService=h,A.firstLoginConstants=_,A.SessionService=g,A.serviceConstants=E,A.RequesterService=p,A.$translate=T,A.NativeService=m,A.isMobilePassmarkReset=!1,A._resetState(),A}return(0,p.default)(t,e),(0,_.default)(t,[{key:"$onInit",value:function(){this._resetState()}},{key:"updatePassmarkData",value:function(){var e=this;switch(this.currentState){case this.STATES.USERNAME:this.username&&this.submittedUsername!==this.username?(this.BUTTONS.BTN_ORG.disable=!0,this.errorMessageKey=null,this.errorMessage=null,this._saveUsername(this.username).then(function(t){e._hasErrorMessage(t)?e._processErrorMessage(t):(e.errorMessage=null,e.$log.debug("Set Username Response: ",t),e.submittedUsername=e.username,e.gotoNextState())}).catch(function(t){e.$log.debug("ERROR DURING USERNAME SETUP: ",t),e._hasErrorMessage(t)&&e._processErrorMessage(t),e._cancelFlowUIUpdate()})):(this.errorMessage=null,this.gotoNextState());break;case this.STATES.IMAGE_SELECT:this.BUTTONS.BTN_ORG.disable=!0,this.enterLoadingMode(),this.firstLoginService.saveChangeImage(this.selectedImageIndex).then(function(t){e.exitLoadingMode(),e._hasErrorMessage(t)?e._processErrorMessage(t):(e.errorMessage=null,e.$log.debug("Set Passmark Image Response: ",t),e.gotoNextState())}).catch(function(t){e.exitLoadingMode(),e.$log.debug("ERROR DURING IMAGE SELECT: ",t),e._hasErrorMessage(t)&&e._processErrorMessage(t),e._cancelFlowUIUpdate()});break;case this.STATES.PHRASE_SELECT:this.errorMessageKey=null,this.errorMessage=null,this.BUTTONS.BTN_ORG.disable=!0,this.enterLoadingMode(),this.firstLoginService.sendPhraseData(this.phrase).then(function(t){e.exitLoadingMode(),e._hasErrorMessage(t)?e._processErrorMessage(t):(e.errorMessage=null,e.isNative||(e.$log.debug("Set Passmark Phrase Response: ",t),e.questionOptions=t.MessageBody.ChangePassMarkQuestion.ChallengeQuestions),e.$log.debug("Passmark Questions: ",e.questionOptions),e.gotoNextState())}).catch(function(t){e.exitLoadingMode(),e.$log.debug("ERROR DURING PHRASE SELECT: ",t),e._hasErrorMessage(t)&&e._processErrorMessage(t),e._cancelFlowUIUpdate()});break;case this.STATES.QUESTION_SELECT:this.BUTTONS.BTN_ORG.disable=!0,this.enterLoadingMode(),this.$log.debug("Selected Questions: ",this.selectedQuestions),this.firstLoginService.sendQuestionData(this.selectedQuestions).then(function(t){if(!e._hasErrorMessage(t)){e.errorMessage=null,e.$log.debug("Set Passmark Question Response: ",t),e.isNative||(e.confirmationData=t.MessageBody.LoginEnrollment);var n=e.isMobilePassmarkReset;return e.firstLoginService.savePassmarkEnrollment(n).then(function(t){e.$log.debug("Save Enrollement Response: ",t),e.isNative&&(e.confirmationData=t),e.SessionService.authenticated=!0,e.NativeService.setSession(e.SessionService.getSession())}).then(function(){e.gotoNextState()}).catch(function(t){e.$log.error("Save Enrollment Error: ",t)}).finally(function(){e.exitLoadingMode()})}e.exitLoadingMode(),e._processErrorMessage(t)}).catch(function(t){e.exitLoadingMode(),e.$log.debug("ERROR DURING QUESTION SELECT: ",t),e._hasErrorMessage(t)&&e._processErrorMessage(t),e._cancelFlowUIUpdate()})}}},{key:"onEnableNext",value:function(e){this.nextCurrentlyDisabled=!e}},{key:"onUpdateNext",value:function(e){this.nextButtonIsSubmit=e}},{key:"gotoNextState",value:function(){switch(this.currentState){case this.STATES.USERNAME:this.moveTo(this.STATES.IMAGE_SELECT);break;case this.STATES.IMAGE_SELECT:this.moveTo(this.STATES.PHRASE_SELECT);break;case this.STATES.PHRASE_SELECT:this.moveTo(this.STATES.QUESTION_SELECT);break;case this.STATES.QUESTION_SELECT:this.moveTo(this.STATES.CONFIRMATION)}}},{key:"_updateUI",value:function(){switch(this.BUTTONS.BTN_GRY.show=!0,this.BUTTONS.BTN_GRY.disable=!0,this.BUTTONS.BTN_ORG.show=!0,this.BUTTONS.BTN_ORG.disable=!0,this.currentState){case this.STATES.USERNAME:this.BUTTONS.BTN_GRY.type=this.BUTTON_TYPES.CANCEL,this.BUTTONS.BTN_GRY.disable=!1,this.BUTTONS.BTN_ORG.disable=!1;break;case this.STATES.IMAGE_SELECT:this.BUTTONS.BTN_GRY.type=this.BUTTON_TYPES.BACK,this.BUTTONS.BTN_GRY.disable=!1,null!==this.selectedImageIndex&&(this.BUTTONS.BTN_ORG.disable=!1);break;case this.STATES.PHRASE_SELECT:case this.STATES.QUESTION_SELECT:this.BUTTONS.BTN_GRY.show=!this.isInitialStateSet,this.BUTTONS.BTN_GRY.disable=!1,this.BUTTONS.BTN_GRY.type=this.BUTTON_TYPES.BACK;break;case this.STATES.CONFIRMATION:this.BUTTONS.BTN_GRY.show=!1,this.BUTTONS.BTN_ORG.disable=!1,this.BUTTONS.BTN_ORG.type=this.BUTTON_TYPES.DONE}}},{key:"_cancelFlowUIUpdate",value:function(){this.BUTTONS.BTN_GRY.show=!0,this.BUTTONS.BTN_GRY.disable=!1,this.BUTTONS.BTN_GRY.type=this.BUTTON_TYPES.CANCEL,this.BUTTONS.BTN_ORG.show=!1,this.BUTTONS.BTN_ORG.disable=!0}},{key:"_resetState",value:function(){var e=this;(0,v.default)(t.prototype.__proto__||(0,c.default)(t.prototype),"_resetState",this).call(this),this._initialState=this.STATES.USERNAME,this.totalSteps=(0,r.default)(this.STATES).length,this._getUsername().then(function(t){e.$log.debug("Get Username Response: ",t),e.username=t.username,e.submittedUsername=e.username}).catch(function(t){e.$log.debug("ERROR DURING GETTING USERNAME: ",t),e.username=null,e.submittedUsername=null}),this.selectedImageIndex=null,this.phrase=null,this.questionOptions=null,this.selectedQuestions={},this.confirmationData=null,this.errorMessage=null,this.categoryList=[],this.nativeImageList=null,this.selectedCategory=null,this.BUTTONS={BTN_GRY:new C.ModalFooterButton(this.BUTTON_TYPES.CANCEL,!0,!1),BTN_ORG:new C.ModalFooterButton(this.BUTTON_TYPES.NEXT,!1,!0)},this.currentState=this._initialState,this._updateUI()}},{key:"_getFirstLoginService",value:function(){return this.isNative?this.firstLoginMFPService:this.firstLoginTPWService}},{key:"_hasErrorMessage",value:function(e){var t=[this.serviceConstants.STATUS_CODES.SYSTEM_ERROR,this.serviceConstants.STATUS_CODES.VALIDATION_ERROR,this.serviceConstants.STATUS_CODES.INVALID_PROFANITY];return e.errorMessage||e.response_status&&e.response_status.status_code&&-1!==t.indexOf(e.response_status.status_code)||e.MessageHeader&&e.MessageHeader.ErrorMessages&&e.MessageHeader.ErrorMessages.length>0}},{key:"_processErrorMessage",value:function(e){var t=this;if(this.$log.error("Login Retrieval Err: ",e),this.BUTTONS.BTN_ORG.disable=!1,e.MessageHeader&&e.MessageHeader.ErrorMessages&&e.MessageHeader.ErrorMessages.length>0)this.errorMessage=e.MessageHeader.ErrorMessages[0];else if(e.errorMsg)this.errorMessage=e.errorMsg;else if(e.response_status&&e.response_status.details){var n=(0,a.default)(e.response_status.details,1),i=n[0];this.errorMessageKey=i.details_code.replace("MESSAGE_","global.errorCodes."),"INVALID"===this.errorMessageKey&&e.response_status.details.forEach(function(e){if(e.field_name&&0===e.field_name.indexOf("username")){var n=e.technical_description.split(" ")[0],i=Math.floor(9e3*Math.random())+1e3,s=Math.floor(9e3*Math.random())+1e3;t.errorMessageKey=t.$translate.instant("global.errorCodes.USERNAME_EXISTS_WITH_SUGGESTIONS",{prefix:i+n,suffix:n+s})}})}else e.response_status&&e.response_status.status_code?this.errorMessageKey="global.errorCodes."+e.response_status.status_code:this.errorMessage=e.errorMessage||e.response_status.technical_description}},{key:"onFormUpdate",value:function(){this.errorMessageKey=null,this.errorMessage=null}},{key:"_saveUsername",value:function(){var e={data:{username:this.username}};return this.$log.debug("PUT Customer Username Payload/Request from first time login: ",this.username),this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.PUT_CUSTOMER_USERNAME,e)}},{key:"_getUsername",value:function(){return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.GET_CUSTOMER_USERNAME)}},{key:"_getAnalyticsID",value:function(){return"firstlogin"}},{key:"errorMessageKey",get:function(){return this._errorMessageKey},set:function(e){this._errorMessageKey=e}},{key:"errorMessage",get:function(){return this._errorMessage},set:function(e){this._errorMessage=e}}]),t}(m.default);A.$inject=["$log","$q","$transitions","$state","$window","pageFlowConstants","EnvironmentService","FirstLoginTPWService","FirstLoginMFPService","EventBusService","firstLoginConstants","SessionService","$rootScope","AnalyticsService","serviceConstants","RequesterService","$translate","NativeService","modalDialogConstants"],t.default=A,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={DISPLAY_CHANGE_PASSMARK_IMAGE:"displayChangePassMarkImage",GOTO_PASSMARK_IMAGE_CATEGORY:"gotoPassMarkImageCategory",CHANGE_PASSMARK_IMAGE:"changePassMarkImage",DISPLAY_CHANGE_PASSMARK_PHRASE:"displayChangePassMarkPhrase",CHANGE_PASSMARK_PHRASE:"changePassMarkPhrase",DISPLAY_CHANGE_PASSMARK_QUESTION:"displayChangePassMarkQuestion",CHANGE_PASSMARK_QUESTION:"changePassMarkQuestion",RESET_PASSMARK_QUESTION:"resetPassMarkQuestion",DISPLAY_VALIDATED_ENROLLMENT:"displayValidatedEnrollment",SAVE_ENROLLMENT:"saveEnrollment"},s={SAVE_CONTINUE:"SAVE ANY CHANGES AND CONTINUE TO NEXT PAGE",NEXT:"Next",MFP_QUESTION_KEY:"Description",TPW_QUESTION_KEY:"question"},a={CLOSE:"close",FIRST_TIME_SETUP_COMPLETE:"FIRST_TIME_SETUP_COMPLETE"},o={COMMANDS:i,EVENTS:a,SERVICE_PARAMS:s};t.default=o,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(744),a=i(s),o=n(748),r=i(o),l=n(749),c=i(l),u=n(750),d=i(u),h=angular.module("tangerine.app.core.components.stepUp",[]).component("tngMobileStepUp",a.default).service("StepUpService",r.default).service("StepUpFlowService",c.default).constant("stepUpConstants",d.default);t.default=h,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(745),a=i(s),o=n(746),r=i(o);n(747);var l={template:r.default,controller:a.default,bindings:{onClose:"&"}};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i,s,o,r,l,c,u,d,h,_,g,S,f){(0,a.default)(this,e),this.$q=t,this.$log=n,this.$scope=i,this.StepUpService=s,this.flowService=o,this.SessionService=r,this.LoginMFPService=l,this.LoginOptionService=c,this.authConstants=u,this.securityConstants=d,this.EventBusService=h,this.loginConstants=_,this.stepUpConstants=g,this.LoginFlowService=S,this.MenuService=f,this.optionType=d.LOGIN_OPTION_TYPE,this.isStandardLogin=!0,this.showForgotPinLink=!0,this.uiSettings={showHeader:!0,showDoubleSafe:!0},this.isAccountLocked=!1}return(0,r.default)(e,[{key:"$onInit",value:function(){var e=this;this.flowService.activate(),this.SessionService.securityQuestion?this.flowService.moveTo(this.flowService.STATES.SECRET_QUESTION):(this.showForgotPinLink=!this.SessionService.hideForgotLink,this.flowService.moveTo(this.flowService.STATES.PIN)),this.EventBusService.subscribe(this.$scope,this.loginConstants.LOGIN_EVENTS.SUCCESSFUL_LOGIN,function(t,n){var i=n&&n.action;i!==e.loginConstants.LOGIN_ACTIONS.GO_TO_NEXT_PAGE&&i!==e.loginConstants.LOGIN_ACTIONS.SHOW_FIRST_TIME_USER||(e.LoginFlowService.isLoading=!1,e.onStepUpSuccess())}),[this.loginConstants.LOGIN_EVENTS.PASSMARK_LOCKED,this.loginConstants.LOGIN_EVENTS.PIN_LOCKED].forEach(function(t){return e.EventBusService.subscribe(e.$scope,t,function(){e.$log.debug("DB - accountLockedEvents "+t+"."),e.isAccountLocked=!0})}),this.initTouchID()}},{key:"initTouchID",value:function(){var e=this;this.SessionService.userHasExistingTouchId().then(function(t){return e.showTouchLoading=!0,t},function(){return e.$q.reject("noTouch")}).then(function(){return e.LoginOptionService.submitLoginOption(e.optionType.TOUCH_ID,!0)}).then(function(t){t&&t.authStatus===e.authConstants.status.COMPLETE&&e.onStepUpSuccess()},function(t){t&&t.errorCode&&(t.errorCode===e.securityConstants.NATIVE_ERROR_CODE.TOUCH_ID_PASSWORD_FALLBACK||t.errorCode===e.securityConstants.NATIVE_ERROR_CODE.TOUCH_ID_NOT_AVAILABLE)||"noTouch"===t||e.onStepUpCancelled()}).finally(function(){e.showTouchLoading=!1})}},{key:"$onDestroy",value:function(){this.flowService.deactivate()}},{key:"handleStateChange",value:function(e){if(void 0!==e.nextStep)switch(e.nextStep){case this.loginConstants.LOGIN_STATES.SECRET_QUESTION:this.flowService.moveTo(this.flowService.STATES.SECRET_QUESTION);break;case this.loginConstants.LOGIN_STATES.PIN:this.flowService.moveTo(this.flowService.STATES.PIN)}}},{key:"onModalClose",value:function(){this.onStepUpCancelled(),this.isAccountLocked&&(this.isAccountLocked=!1,this.MenuService.logout())}},{key:"onStepUpSuccess",value:function(){this.onClose({result:this.stepUpConstants.RESULT_TYPES.SUCCESS}),this.StepUpService.onStepUpSuccess()}},{key:"onStepUpCancelled",value:function(){this.onClose({result:this.stepUpConstants.RESULT_TYPES.CANCELLED}),this.LoginMFPService.cancelLogin(),this.StepUpService.onStepUpCancelled()}},{key:"onStepUpFailed",value:function(){this.onClose({result:this.stepUpConstants.RESULT_TYPES.FAILED}),this.StepUpService.onStepUpFailed()}}]),e}();l.$inject=["$q","$log","$scope","StepUpService","StepUpFlowService","SessionService","LoginMFPService","LoginOptionService","authConstants","mobileSecurityConstants","EventBusService","loginConstants","stepUpConstants","LoginFlowService","MenuService"],t.default=l,e.exports=t.default},function(e,t){e.exports='<tng-modal-dialog on-close="$ctrl.onModalClose(result)" hide-close="$ctrl.flowService.inLoadingMode"> <header> <div ng-if="$ctrl.flowService.showConfirmExitUI"> <tng-confirm-exit></tng-confirm-exit> </div> </header> <div class="states"> <secret-question-section ng-if="$ctrl.flowService.currentState == $ctrl.flowService.STATES.SECRET_QUESTION" ng-hide="$ctrl.flowService.isLoading || $ctrl.showTouchLoading" on-data-update="$ctrl.handleStateChange(data)" question="$ctrl.SessionService.securityQuestion" error-message="$ctrl.SessionService.errorMessage" is-timeout="$ctrl.SessionService.isTimeout"> </secret-question-section> <pin-section ng-if="$ctrl.flowService.currentState == $ctrl.flowService.STATES.PIN" ng-hide="$ctrl.flowService.isLoading || $ctrl.showTouchLoading" on-data-update="$ctrl.handleStateChange(data)" error-message="$ctrl.SessionService.errorMessage" is-timeout="$ctrl.SessionService.isTimeout" parent-ctrl="$ctrl"> </pin-section> <div ng-if="$ctrl.flowService.isLoading || $ctrl.showTouchLoading" class="loginLoadingIndicator"> <tng-loading-in-progress></tng-loading-in-progress> </div> </div> </tng-modal-dialog>'},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(29),a=i(s),o=n(0),r=i(o),l=n(1),c=i(l),u=function(){function e(t,n,i,s,a,o,l,c,u,d,h){(0,r.default)(this,e),this.$rootScope=t,this.$q=n,this.$log=i,this.EnvironmentService=s,this.GlobalModalsService=a,this.RequesterService=o,this.serviceConstants=l,this.stepUpConstants=c,this.stepUpModalName=u.AVAILABLE_MODALS.MOBILE_STEP_UP,this.EventBusService=d,this.appStateConstants=h,this._isLevel2Granted=!1,this._isModalOpen=!1,this._stepUpDeferred=void 0,this._initEventSubscription()}return(0,c.default)(e,[{key:"_initEventSubscription",value:function(){var e=this;this.EventBusService.subscribe(this.$rootScope,this.appStateConstants.APPLICATION_LOGOUT,function(){return e.reset()})}},{key:"_publishLevel2Auth",value:function(e){this.EventBusService.publish("Level2AuthChange",e)}},{key:"stepUpInProgress",value:function(){return!!this._stepUpDeferred}},{key:"reset",value:function(){this._isLevel2Granted=!1,this._publishLevel2Auth(!1),this.onStepUpCancelled()}},{key:"requestLevel2",value:function(){var e=this;if(!this.EnvironmentService.isNative()||this._isLevel2Granted)return this.$q.when({result:this.stepUpConstants.RESULT_TYPES.SUCCESS});var t=this._generateStepUpPromise(),n=this.serviceConstants.AVAILABLE_SERVICES.TEST_LEVEL2_AUTHORIZATION;return this.RequesterService.request(n).then(function(t){e.$log.debug("DB - requestLevel2 success: "+(0,a.default)(t)),e.onStepUpSuccess()}).catch(function(t){e.$log.error("DB - requestLevel2 failure: "+(0,a.default)(t)),e.onStepUpFailed()}),t}},{key:"isStepUpModalOpen",value:function(){return this._isModalOpen}},{key:"openStepUpModal",value:function(){var e=this;if(!this._isModalOpen){this._isModalOpen=!0;var t=function(){e.GlobalModalsService.showMobileStepUp()};this.$rootScope.$$phase?t():this.$rootScope.$apply(t)}return this._generateStepUpPromise()}},{key:"_generateStepUpPromise",value:function(){return this._stepUpDeferred||(this._stepUpDeferred=this.$q.defer()),this._stepUpDeferred.promise}},{key:"onStepUpSuccess",value:function(){this._stepUpDeferred&&(this.$log.info("Step Up request succeeded"),this._stepUpDeferred.resolve({result:this.stepUpConstants.RESULT_TYPES.SUCCESS}),this._stepUpDeferred=void 0,this._isLevel2Granted=!0,this._isModalOpen=!1,this._publishLevel2Auth(!0))}},{key:"onStepUpCancelled",value:function(){this._stepUpDeferred&&(this.$log.info("Step Up request cancelled"),this._stepUpDeferred.reject({result:this.stepUpConstants.RESULT_TYPES.CANCELLED}),this._stepUpDeferred=void 0,this._isModalOpen=!1,this.GlobalModalsService.closeModal(this.stepUpModalName))}},{key:"onStepUpFailed",value:function(){this._stepUpDeferred&&(this.$log.info("Step Up request failed"),this._stepUpDeferred.reject({result:this.stepUpConstants.RESULT_TYPES.FAILED}),this._stepUpDeferred=void 0,this._isModalOpen=!1,this.GlobalModalsService.closeModal(this.stepUpModalName))}},{key:"isLevel2Granted",get:function(){return this._isLevel2Granted}}]),e}();u.$inject=["$rootScope","$q","$log","EnvironmentService","GlobalModalsService","RequesterService","serviceConstants","stepUpConstants","globalModalsConstants","EventBusService","appStateConstants"],t.default=u,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(81),a=i(s),o=n(0),r=i(o),l=n(1),c=i(l),u=n(94),d=i(u),h=n(96),_=i(h),g=n(95),S=i(g),f=n(97),v=i(f),E=function(e){function t(e,n,i,s,o,l,c,u,h,_,g,S){(0,r.default)(this,t);var f=(0,d.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e,n,i,s,o,l,S,u));return f.$state=s,f.RequesterService=c,f.serviceConstants=h,f.stateConstants=_,f.loginConstants=g,f.STATES={SECRET_QUESTION:{titleKey:f.loginConstants.LOGIN_STATES.SECRET_QUESTION},PIN:{titleKey:f.loginConstants.LOGIN_STATES.PIN},LOADING:{titleKey:f.loginConstants.LOGIN_STATES.LOADING}},f._initialState=f.STATES.USER_ID,f}return(0,S.default)(t,e),(0,c.default)(t,[{key:"_resetState",value:function(){(0,_.default)(t.prototype.__proto__||(0,a.default)(t.prototype),"_resetState",this).call(this),this.currentState=this._initialState}},{key:"$onInit",value:function(){}},{key:"onEnableNext",value:function(e){this.nextCurrentlyDisabled=!e}},{key:"gotoNextState",value:function(){switch(this.currentState){case this.STATES.SECRET_QUESTION:this.moveTo(this.STATES.PIN)}}},{key:"moveTo",value:function(e){(0,_.default)(t.prototype.__proto__||(0,a.default)(t.prototype),"moveTo",this).call(this,e),this.hideWarning()}},{key:"moveBackTo",value:function(e){(0,_.default)(t.prototype.__proto__||(0,a.default)(t.prototype),"moveBackTo",this).call(this,e)}}]),t}(v.default);E.$inject=["$log","$q","$transitions","$state","$window","$rootScope","RequesterService","AnalyticsService","serviceConstants","stateConstants","loginConstants","pageFlowConstants"],t.default=E,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={SUCCESS:"success",CANCELLED:"cancelled",FAILED:"failed"},s={RESULT_TYPES:i,LEVEL2_AUTH_ATTRIBUTE:"level2Auth"};t.default=s,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),a=i(s),o=n(0),r=i(o),l=n(1),c=i(l),u=function(){function e(t,n,i,s,a,o,l,c,u,d,h,_){(0,r.default)(this,e),this.$q=t,this.$http=n,this.$log=i,this.ErrorService=a,this.SessionService=o,this.CredentialsTPWService=d,this.EnvironmentService=s,this.loginConstants=l,this.loginCIFTypes=l.LOGIN_CIF_TYPES,this.authConstants=c,this.errorConstants=u,this.IovationTPWService=h,this.iovationConstants=_}return(0,c.default)(e,[{key:"initLogin",value:function(e,t){var n=this,i=this.$q.defer();return this.$http({method:"get",url:this.base+"/InitialTangerine.html?command="+t+"&device=web&locale="+e,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","x-web-flavour":"fbe"},withCredentials:!0}).success(function(e,t,s){n.SessionService.transaction_token=s().transaction_token?s().transaction_token:s()["x-transaction-token"],n.CredentialsTPWService.saveResponseToSession(e),n.CredentialsTPWService.handleHTTPSuccess(n.SessionService.getSession(),void 0,i)}).error(function(e){n.CredentialsTPWService.processError(e,i)}),i.promise}},{key:"submitCIF",value:function(e){var t=this.loginCIFTypes.NONE;e.rememberMe&&(t=this.loginCIFTypes.REMEMBER_CIF),e.removeID&&(t=this.loginCIFTypes.REMOVE_CIF),e.ddCIF&&(t=this.loginCIFTypes.SAVED_CIF);var n={command:this.SessionService.nextCommand||this.loginConstants.LOGIN_COMMANDS.PERSONALCIF,locale:this.SessionService.locale,device:this.SessionService.device};switch(t){case this.loginCIFTypes.REMEMBER_CIF:n=(0,a.default)(n,{ACN:e.acn,cbRemember:"on",tbNickname:"",ddCIF:"addAnother"}),this.SessionService.shouldOptIn=!0,this.SessionService.rememberMe=!0;break;case this.loginCIFTypes.SAVED_CIF:n=(0,a.default)(n,{ddCIF:e.acn,savedUserIdsExist:!0});break;case this.loginCIFTypes.REMOVE_CIF:n=(0,a.default)(n,{ddCIF:e.acn,savedUserIdsExist:!0,cbRemoveNo:"Remove"});break;default:n=(0,a.default)(n,{ACN:e.acn})}return this.IovationTPWService.collectIovationData(),this.CredentialsTPWService.metroPost(n,{acceptedCommands:[{command:this.loginConstants.LOGIN_COMMANDS.VALIDATE_BUSINESS_CIF?this.loginConstants.LOGIN_COMMANDS.VALIDATE_AICIF:this.loginConstants.LOGIN_COMMANDS.DISPLAY_CHALLENGE_QUESTION}]})}},{key:"checkSecret",value:function(e){var t={command:e.nextCommand,BUTTON:"Next",Answer:e.challengeAnswer,Next:"Next"};return void 0!==e.Captcha&&(t.Captcha=e.Captcha),e&&e.skipSecurityQuestion&&(t.Register="on"),this.CredentialsTPWService.metroPost(t,{acceptedCommands:[{command:"displayPIN"}]})}},{key:"checkPin",value:function(e){var t={locale:e.locale,command:e.nextCommand,BUTTON:"Go",PIN:e.pin,Go:"Next",fp_bb:this.IovationTPWService.iovation.fpBb,io_bb:this.IovationTPWService.iovation.ioBb,callSource:this.iovationConstants.CALL_SOURCES.FBE_LOGIN_WEB};return this.CredentialsTPWService.metroPost(t,{acceptedCommands:[{command:"PINPADPersonal"}]})}},{key:"logout",value:function(){return this.CredentialsTPWService.metroGet(this.loginConstants.LOGIN_COMMANDS.LOGOUT,{locale:this.SessionService.locale},{bypassRedirect:!0},"InitialTangerine.html")}},{key:"base",get:function(){return this.EnvironmentService.getAPIUrl()+"/web"}}]),e}();u.$inject=["$q","$http","$log","EnvironmentService","ErrorService","SessionService","loginConstants","authConstants","errorConstants","CredentialsTPWService","IovationTPWService","iovationConstants"],t.default=u,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(29),a=i(s),o=n(0),r=i(o),l=n(1),c=i(l),u=function(){function e(t,n,i,s,a,o,l,c,u,d,h,_,g,S,f,v,E,p,T,m,C,A,I,O,N,y,b,L,M,R){var D=this;(0,r.default)(this,e),this.$q=t,this.$log=i,this.$window=n,this.$timeout=a,this.$location=o,this.$rootScope=s,this.authConstants=l,this.errorConstants=c,this.SessionService=h,this.ErrorService=d,this.EnvironmentService=u,this.IovationMFPService=_,this.StepUpService=g,this.nativeService=S,this.orangeAlertsService=f,this.iovationConstants=E,this.cifTypeService=p,this.RequesterService=T,this.firstLoginConstants=m,this.serviceConstants=C,this.loginConstants=A,this.$translate=I,this.BundleService=O,this.appStateConstants=y,this.buildConstants=b,this.AnalyticsService=L,this.analyticsConstants=M,this.LoginTimeoutService=R,this._useMock=!1,this._triggerQueue=[],this._inChallenge=!1,this._challengeAPI=null,this._hasAIF=!1,this._isInit=!1,this._isInsideLoginOptionFlow=!1,this.optionType=v.LOGIN_OPTION_TYPE,this.optionResults=v.LOGIN_OPTION_RESULT,this.EventBusService=N,N.subscribe(s,y.APPLICATION_LOGOUT,function(){D._hasAIF=!1}),this.EnvironmentService.isNative()&&(this.initChallengeAPI(),this._isInit=!0)}return(0,c.default)(e,[{key:"initLogin",value:function(){return this.$q.resolve()}},{key:"initChallengeAPI",value:function(){var e=this;this.$log.debug("LN loginMFPService initChallengeAPI is called"),this._challengeAPI=WL.Client.createChallengeHandler("Level1Realm"),this._challengeAPI.isCustomResponse=this._isCustomResponse,this._challengeAPI.handleChallenge=function(t,n){e._handleChallenge(t,n)},this.$window.challengeAPI=this._challengeAPI,this.EventBusService.publish(this.appStateConstants.MOBILE_CHALLENGEAPI_INIT)}},{key:"submitCIF",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.$q.defer(),s={},o=this.SessionService.getUserByRememberMeHash(e.acn);if(!1===this._hasAIF&&this._cleanChallenge(),!e.removeID&&o?(s.remember_me=!0,s.name_to_remember=o.nameToRemember):s.remember_me=e.rememberMe,s.userId=e.acn,s.business=e.isBusiness,s.locale=this.SessionService.locale,s.flavour=this.authConstants.authFlavour,this.SessionService.lastSubmittedCif=s.userId,this.IovationMFPService.collectIovationData(),this._hasChallengeAPI())if(this.AnalyticsService.sendAction(this.analyticsConstants.AVAILABLE_EVENTS.CHALLENGE_HANDLER_CHECK,"success"),this._hasAIF)s.business=!0,s.aif=s.userId,s.loginToken=this.SessionService.loginToken,this._challengeAPI.submitLoginForm(this.authConstants.authAifUri,{parameters:s},function(e){t._handleChallenge(e,function(e){e?i.resolve(e):i.reject()})});else{var r=n?this.$q.when():this.logout();r.then(function(){return t.nativeService.validateTrustedCertificate()}).then(function(){s.remember_me&&(t.SessionService.shouldOptIn=!0,t.SessionService.rememberMe=!0),t._triggerChallengeHandler().then(function(){t._challengeAPI.submitLoginForm(t.authConstants.authCifUri,{parameters:s},function(e){t._handleChallenge(e,function(e){e?i.resolve(e):i.reject()})})})},function(e){return t.$log.error("DB - logout error: "+(0,a.default)(e)),i.reject(e),t.$q.reject()})}else this.AnalyticsService.sendAction(this.analyticsConstants.AVAILABLE_EVENTS.CHALLENGE_HANDLER_CHECK,"failed"),i.reject();return i.promise}},{key:"checkSecret",value:function(e){var t=this;if(!e.challengeAnswer)return this.$q.reject(!1);var n=this.$q.defer();return this.SessionService.shouldOptIn=this.SessionService.shouldOptIn&&!0===e.skipSecurityQuestion,this._hasChallengeAPI()&&this._challengeAPI.submitLoginForm(this.authConstants.authPassmarkUri,{parameters:{securityAnswer:e.challengeAnswer,skipItNextTime:e.skipSecurityQuestion,loginToken:this.SessionService.loginToken}},function(e){t._handleChallenge(e,function(e){e?n.resolve(e):n.reject()},function(){return n.reject(),t.$q.reject()})}),n.promise}},{key:"checkPin",value:function(e){var t=this;if(this.$log.debug("checkPin",e),!e.pin)return this.$q.reject(!1);var n=this.$q.defer();return this._hasChallengeAPI()?this._challengeAPI.submitLoginForm(this.authConstants.authPinUri,{parameters:{pin:e.pin,loginToken:this.SessionService.loginToken,skipUserData:"true"}},function(e){t.$log.debug("SUBMIT LOGIN FORM RESPONSE: ",e),t._handleChallenge(e,function(e){e?n.resolve(e):n.reject()},function(){return n.reject(),t.$q.reject()})}):this.$timeout(function(){t.SessionService.authenticated=!0,n.resolve({authStatus:"complete"})},500),n.promise}},{key:"checkNetworkConnection",value:function(){var e=this,t=this.$q.defer();return WL.Device.getNetworkInfo(function(n){"false"===n.isNetworkConnected&&(e.$log.debug("*** loginMFPService.WL.Device.getNetworkInfo failed ***"),e.AnalyticsService.sendAction(e.analyticsConstants.AVAILABLE_EVENTS.WL_DEVICE_GET_NETWORK_INFO,"failed"),e.LoginTimeoutService.triggerLoginTimeoutEvent(),t.reject({})),t.resolve()}),t.promise}},{key:"logout",value:function(e,t){var n=this;if(this.$log.debug("*** loginMFPService.logout...",e,t),!this._useMock){var i=this.$q.defer();return this._cancelLogin(),this.checkNetworkConnection().then(function(){n.$rootScope.windowError=window.onerror,n.$rootScope.logoutPromise=i;var e=n.authConstants.level2Realm,t=n.$rootScope,s=n;WL.Client.logout(n.authConstants.level1Realm,{onSuccess:function(){WL.Client.logout(e,{onSuccess:function(){WLAuthorizationManager.obtainAuthorizationHeader("").then(function(){i.resolve()})},onFailure:function(e){var t="Level2 logout err: "+(0,a.default)(e);s._processError(t,"",function(e){i.reject(e)},!1)}}),window.onerror=t.windowError},onFailure:function(e){var n="Level1 logout err: "+(0,a.default)(e);s._processError(n,"",function(e){i.reject(e)},!1),window.onerror=t.windowError}})}).catch(function(e){return i.reject(e)}),i.promise}return this._resetSession(),this.$location.path("/"),this.$q.when()}},{key:"initTriggerChallengeHandler",value:function(){return this._hasChallengeAPI()?(this.AnalyticsService.sendAction(this.analyticsConstants.AVAILABLE_EVENTS.CHALLENGE_HANDLER_CHECK,"loginOption_success"),this.triggerChallengeHandler()):(this.AnalyticsService.sendAction(this.analyticsConstants.AVAILABLE_EVENTS.CHALLENGE_HANDLER_CHECK,"loginOption_failed"),this.$q.reject())}},{key:"_hasChallengeAPI",value:function(){return this._challengeAPI||(this.$log.debug("loginMFPService attempt to init challengeAPI one last time prior to call"),this.initChallengeAPI()),this._challengeAPI}},{key:"_handleChallenge",value:function(e,t){var n=this,i=void 0;if(this.$log.debug("*** loginMFPService._handleChallenge",e,t),this._flushChallengeTriggerQ(),this._inChallenge=!0,this._isCustomResponse(e)){if(i=e.responseJSON,"code"!==e.request.parameters.response_type&&(this.SessionService.errorMessage=i.errorMessage),this.SessionService.authStatus=i.authStatus,i.loginToken&&(this.SessionService.loginToken=i.loginToken),i.name_to_remember&&(this.SessionService.nameToRemember=i.name_to_remember),i.authStatus===this.authConstants.status.COMPLETE){if(i.userhash=i.userhashV2?i.userhashV2:i.userhash,i.aif_hash&&i.aif_hashV2&&(i.aif_hash=i.aif_hashV2),this.SessionService.authenticated=!0,this.SessionService.userhash=i.userhash,this.SessionService.authCompleteBody=i,this.SessionService.userInfo=i.customer,this._addToRemembered(),this._hasChallengeAPI()&&(this._challengeAPI.submitSuccess(),this._inChallenge=!1),this.SessionService.authenticated||(this.SessionService.roadblocks=i.roadblocks||null),this.SessionService.firstTime=i.nextStep===this.authConstants.steps.PASSMARK,this.SessionService.clientIdentifier=this.SessionService.lastSubmittedCif,this.SessionService.lastSubmittedCif=null,this.SessionService.lastSubmittedAif=null,i.customer&&(this.SessionService.userInfo.full_name=i.customer.first_name+" "+i.customer.last_name),this.$timeout(function(){n.orangeAlertsService.registerDeviceForAlerts(),n._registerWithIovation()},1e3),this.$log.debug("DB - check if passmark is reset: "+(0,a.default)(i)),i.passmark_reset)return this._getPassmarkData().then(function(e){e&&e.questions&&(i.firstTime={ChallengeQuestions:e.questions,Command:n.firstLoginConstants.COMMANDS.RESET_PASSMARK_QUESTION,Image:e.image},n.SessionService.firstTime=i.firstTime)}).finally(function(){t&&t(i)});t&&t(i)}else if(i.authStatus===this.authConstants.status.INVALID_TOKEN)this._processError(i,this.authConstants.status.INVALID_TOKEN,t);else if(i.authStatus===this.authConstants.status.PASSMARK_LOCKED)this._processError(i,this.authConstants.status.PASSMARK_LOCKED,t);else if(i.authStatus===this.authConstants.status.PIN_LOCKED)this.SessionService.isPinLocked=!0,this._processError(i,this.authConstants.status.PIN_LOCKED,t,!1);else if(i.authStatus===this.authConstants.status.REQUIRED){if(!0===this.SessionService.authenticated)return void(i.hasLevel1?(this.SessionService.securityQuestion=i.security_question||i.securityQuestion||this.SessionService.securityQuestion||null,this.SessionService.passmark=i.passmark||this.SessionService.passmark||null,this.SessionService.nextStep=i.nextStep,"IN_PROGRESS"===i.auth_status&&(i.errorMessage=null,this.SessionService.errorMessage=null),this.StepUpService.isStepUpModalOpen()||(this.$log.debug("DB - STEPUP flow: "+(0,a.default)(i)),this.StepUpService.openStepUpModal()),t&&t(i)):this.logout(!0,"showReauth"));switch("IN_PROGRESS"===i.auth_status&&(this.SessionService.errorMessage=null),void 0!==i.pin_reset_available&&(this.SessionService.showForgotPinLink=!0===i.pin_reset_available),this.SessionService.nextStep=i.nextStep,this.SessionService.nextCommand=i.nextStep,i.nextStep){case this.authConstants.steps.CIF:this.SessionService.securityQuestion=null,this.SessionService.passmark=null,this._hasAIF=!1,"post"===e.request.method&&i.errorMessage&&this._cancelLogin();break;case this.authConstants.steps.QUESTION:if(i.errorMessage)return void this._processError(i,this.authConstants.status.PASSMARK_INVALID,t,!1);this.SessionService.securityQuestion=i.securityQuestion||this.SessionService.securityQuestion,this.SessionService.passmark=i.passmark||this.SessionService.passmark;break;case this.authConstants.steps.AIF:if(this._hasAIF=!0,this.SessionService.hasAIF=!0,"IN_PROGRESS"!==i.auth_status)return void this._processError(i,this.authConstants.status.PASSMARK_LOCKED,t);break;case this.authConstants.steps.PIN:this.SessionService.securityQuestion=null,this.SessionService.passmark=i.passmark||this.SessionService.passmark;break;default:this._hasAIF=!1}t&&t({nextStep:i.nextStep})}}else t(!1)}},{key:"_addToRemembered",value:function(){var e=this;if(this.$log.debug("Adding id to remember",this.SessionService.authCompleteBody),this.SessionService.authCompleteBody){var t=this.SessionService.authCompleteBody;if(t.aif_hash&&t.aif_name_to_remember)!this.SessionService.savedBusinessIds.find(function(t){return t.userHash===e.SessionService.userhash})&&t.remember_me_hash&&this.SessionService.savedBusinessIds.push({userHash:t.userhash,rememberMeHash:t.remember_me_hash,nameToRemember:t.name_to_remember}),!this.SessionService.savedUserIds.find(function(e){return e.userHash===t.aif_hash})&&t.aif_remember_me_hash&&(this.SessionService.savedUserIds.push({userHash:t.aif_hash,rememberMeHash:t.aif_remember_me_hash,nameToRemember:t.aif_name_to_remember}),this.SessionService.savedAuthorizedIds=this.SessionService.savedUserIds);else if(t.name_to_remember&&t.remember_me_hash)if(t.customer&&t.customer.business_name){var n=this.SessionService.savedBusinessIds.find(function(t){return t.userHash===e.SessionService.userhash});n||this.SessionService.savedBusinessIds.push({userHash:this.SessionService.userhash,rememberMeHash:t.remember_me_hash,nameToRemember:t.name_to_remember})}else{var i=this.SessionService.savedUserIds.find(function(t){return t.userHash===e.SessionService.userhash});i||(this.SessionService.shouldOptIn||this.SessionService.addToOptIn(),this.SessionService.savedUserIds.push({userHash:this.SessionService.userhash,rememberMeHash:t.remember_me_hash,nameToRemember:t.name_to_remember}),this.SessionService.savedAuthorizedIds=this.SessionService.savedUserIds)}}}},{key:"_isCustomResponse",value:function(e){return!!(e&&e.responseJSON&&null!==e.responseText&&(e.responseJSON.authStatus||e.responseJSON.Level1Realm&&e.responseJSON.Level1Realm.isUserAuthenticated))}},{key:"_triggerChallengeHandler",value:function(){var e=this.$q.defer();return this._inChallenge?this.$q.when():(new WLResourceRequest("adapters/AuthenticationAdapterFBE/authentication/level1",WLResourceRequest.GET).send(),this._triggerQueue.push(e),e.promise)}},{key:"_flushChallengeTriggerQ",value:function(){this._triggerQueue.map(function(e){return e.resolve()}),this._triggerQueue=[]}},{key:"_cancelLogin",value:function(){var e=this;if(this._hasChallengeAPI()){if(!this._inChallenge)return;this.SessionService.name_to_remember=null,setTimeout(function(){e.$log.debug(e._challengeAPI.submitFailure("Cancelled login from challenge.")),e._inChallenge=!1},1)}}},{key:"_cleanChallenge",value:function(){this.SessionService.cleanChallenge()}},{key:"_resetSession",value:function(){this.SessionService.resetSession(),this.$rootScope.mevo={hidden:!1}}},{key:"_processLogoutFailure",value:function(e,t){this._processError(e,this.errorConstants.LOGIN_ERRORS.LOGOUT_ERROR,function(){return t.reject()})}},{key:"_processError",value:function(e,t,n){(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])&&this._cancelLogin(),this.ErrorService.processError(t&&t.toUpperCase(),this.errorConstants.AVAILABLE_EVENTS.LOGIN_MOBILE_ERROR).then(function(i){n({data:e,status:t,errorMessage:i.message})})}},{key:"_registerWithIovation",value:function(){try{this.$log.debug("calling WL.Analytics with bb: "+this.IovationMFPService.getBlackBox()),this.IovationMFPService.sendBlackBoxMfp(this.iovationConstants.CALL_SOURCES.FBE_LOGIN_MOBILE)}catch(e){this.$log.debug("MFP: analytics-info for iovation had failed. Error ",e)}}},{key:"_getOptionTypeLoginUrl",value:function(e){switch(e){case this.optionType.TOUCH_ID:return this.authConstants.authTouchId;case this.optionType.DEFER_PIN:return this.authConstants.authDeferPin;case this.optionType.EYE_VERIFY:return this.authConstants.authEyePrint;case this.optionType.VOICE_PASSWORD:return this.authConstants.authVoicePassword;default:return null}}},{key:"submitLoginOption",value:function(e,t){var n=this;this.$log.debug("*** loginMFPService.submitLoginForm...",e,t);var i=this.$q.defer(),s=this._getOptionTypeLoginUrl(e),a={parameters:{token:t.security_token,skipUserData:"true"}};return this.optionType.VOICE_PASSWORD===e&&(a.parameters.vocal_password=t.vocal_password),s?this.challengeAPI.submitLoginForm(s,a,function(e){n._handleChallenge(e,function(e){if(e)e.passmark_reset?n.BundleService.loadCommonBundle().then(function(){return n.SessionService.hideForgotLink=!0,n.StepUpService.requestLevel2()}).then(function(){return i.resolve(e)}).catch(function(){var e=n.optionResults.PASSMARK_RESET_PIN_CANCEL;i.reject({errorCode:e})}).finally(function(){return delete n.SessionService.hideForgotLink}):i.resolve(e);else{var t=n.errorConstants.LOGIN_ERRORS.LOGIN_ERROR;n._processError("Login Error",t,function(e){return i.reject(e)},!1)}})}):i.reject("Unsupported login option"),i.promise}},{key:"_getPassmarkData",value:function(){var e=this;return this._getCustomerPassmark().then(function(t){if(t&&t.question_list){var n=t.question_list.map(function(e){return{Value:e.question_id,question:e.question}}),i=e.$translate.instant("global.salutationSelect.select");return n.unshift({Value:"",question:i}),{questions:n,image:t.image}}return null}).catch(function(t){e.$log.error(t)})}},{key:"setLoginOptionFlowFlag",value:function(e){this._isInsideLoginOptionFlow=e}},{key:"isInsideLoginOptionFlow",value:function(){return!0===this._isInsideLoginOptionFlow}},{key:"_getCustomerPassmark",value:function(){return this.cifTypeService.didParentSwitchToChild()?this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.GET_PASSMARK_DEPENDENT,{urlVars:{id:this.cifTypeService.selectedCif.customerInfo.dependent_id}}):this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.GET_PASSMARK)}},{key:"isAIF",get:function(){return this._hasAIF}},{key:"challengeAPI",get:function(){return this._challengeAPI}},{key:"handleChallenge",get:function(){return this._handleChallenge}},{key:"triggerChallengeHandler",get:function(){return this.$log.debug("*** loginMFPService.triggerChallengeHandler..."),this._triggerChallengeHandler}},{key:"cancelLogin",get:function(){return this._cancelLogin}}]),e}();u.$inject=["$q","$window","$log","$rootScope","$timeout","$location","authConstants","errorConstants","EnvironmentService","ErrorService","SessionService","IovationMFPService","StepUpService","NativeService","OrangeAlertsService","mobileSecurityConstants","iovationConstants","CifTypeService","RequesterService","firstLoginConstants","serviceConstants","loginConstants","$translate","BundleService","EventBusService","appStateConstants","buildConstants","AnalyticsService","analyticsConstants","LoginTimeoutService"],t.default=u,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(13),a=i(s),o=n(81),r=i(o),l=n(0),c=i(l),u=n(1),d=i(u),h=n(94),_=i(h),g=n(96),S=i(g),f=n(95),v=i(f),E=n(97),p=i(E),T=function(e){function t(e,n,i,s,o,l,u,d,h,g,S,f){(0,c.default)(this,t);var v=(0,_.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n,i,s,o,S,g,f));return v.$state=s,v.RequesterService=l,v.serviceConstants=u,v.stateConstants=d,v.loginConstants=h,v.VISIBILITY_TIMEOUT=g.MODAL_VISIBILITY_TIMEOUT,v.STATES={USER_ID:{titleKey:v.loginConstants.LOGIN_STATES.CIF},SECRET_QUESTION:{titleKey:v.loginConstants.LOGIN_STATES.SECRET_QUESTION},PIN:{titleKey:v.loginConstants.LOGIN_STATES.PIN},BUSINESS_LOGIN:{titleKey:v.loginConstants.LOGIN_STATES.BUSINESS},AUTHORIZED_USER:{titleKey:v.loginConstants.LOGIN_STATES.AUTHORIZED_USER},LOADING:{titleKey:v.loginConstants.LOGIN_STATES.LOADING}},v._initialState=v.STATES.USER_ID,v.totalSteps=(0,a.default)(v.STATES).length,v.progressBarButtons=[v.STATES.USER_ID,v.STATES.SECRET_QUESTION,v.STATES.PIN],v.isBusiness=!1,v}return(0,v.default)(t,e),(0,d.default)(t,[{key:"_resetState",value:function(){(0,S.default)(t.prototype.__proto__||(0,r.default)(t.prototype),"_resetState",this).call(this),this._updateUI()}},{key:"$onInit",value:function(){this.nextCurrentlyDisabled=!1,this.backCurrentlyDisabled=!1}},{key:"activateOnEmptyState",value:function(){this.currentState||this.activate()}},{key:"onEnableNext",value:function(e){this.nextCurrentlyDisabled=!e}},{key:"gotoNextState",value:function(){switch(this.currentState){case this.STATES.USER_ID:this.moveTo(this.STATES.SECRET_QUESTION);break;case this.STATES.SECRET_QUESTION:this.moveTo(this.STATES.PIN)}}},{key:"moveTo",value:function(e){e===this.STATES.BUSINESS_LOGIN&&(this.isBusiness=!0),(0,S.default)(t.prototype.__proto__||(0,r.default)(t.prototype),"moveTo",this).call(this,e),this.hideWarning()}},{key:"moveBackTo",value:function(e){(0,S.default)(t.prototype.__proto__||(0,r.default)(t.prototype),"moveBackTo",this).call(this,e)}},{key:"_getAnalyticsID",value:function(){return"login"}},{key:"stateSet",get:function(){return!!this.currentState}}]),t}(p.default);T.$inject=["$log","$q","$transitions","$state","$window","RequesterService","serviceConstants","stateConstants","loginConstants","pageFlowConstants","$rootScope","AnalyticsService"],t.default=T,e.exports=t.default},function(e,t,n){"use strict";function i(e){return{link:function(t,n,i){var s=function s(){"password"!==i.type&&(n.off("focus",s),i.$set("type","password"),e.debug("input type => password"),t.$evalAsync(function(){var e=n[0];e.focus&&e.focus(),e.setSelectionRange&&e.setSelectionRange(0,0)}))};n.on("focus",s)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i,i.$inject=["$log"],e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={CIF:"cif",SECRET_QUESTION:"security_question",PIN:"pin",BUSINESS:"business",AUTHORIZED_USER:"authorizedUser",LOADING:"loading"},s={BUSINESS:"displayBusinessLoginRegular",PERSONAL:"displayLoginRegular"},a={SET_PANEL_VISIBILITY:"setPanelVisibility",SUCCESSFUL_LOGIN:"successfulLogin",SET_USER_ID:"setUserId",SET_SECURITY_QUESTION:"setSecurityQuestion",SET_PIN_PHRASE:"setPinPhrase",PASSMARK_LOCKED:"loginPassmarkLocked",PIN_LOCKED:"loginPinLocked"},o={INVOKE_LOGIN_TIMER:"invokeLoginTimer",CANCEL_LOGIN_TIMER:"cancelLoginTimer",INVOKE_LOGIN_TIMEOUT:"invokeLoginTimeout"},r={INIT:"init",VERIFY_CHALLENGE_QUESTION:"verifyChallengeQuestion",VALID_PIN_COMMAND:"validatePINCommand",VALIDATE_BUSINESS_CIF:"validateBusinessCIF",AIF:"aif",VALIDATE_AICIF:"validateAICIF",DISPLAY_CHALLENGE_QUESTION:"displayChallengeQuestion",PERSONALCIF:"PersonalCIF",LOGOUT:"displayLogout",DISPLAY_ACCOUNT_SUMMARY:"displayAccountSummary"},l={NONE:"NONE",REMEMBER_CIF:"REMEMBER_CIF",REMOVE_CIF:"REMOVE_CIF",SAVED_CIF:"SAVED_CIF"},c={TANG_HTML:"/web/Tangerine.html"},u={ERROR_MOBILEPLUS:"/error/Error_mobileplus.html",ERROR_MOBILEPLUS_NATIVE:"/error/Error_mobileplus_native.html",ERROR:"/error/Error.html",TIMEOUT:"/timeout/TimeOut.html"},d={GO_TO_NEXT_PAGE:"GO_TO_NEXT_PAGE",SHOW_FIRST_TIME_USER:"SHOW_FIRST_TIME_USER"},h={VISITOR_ENROLLMENT:"visitorEnrollment"},_={VS_TIMEOUT:"VS_timeout"},g=/replace\("\/web([\w\/\W\/.?=]+)"\)/,S={PLEASE_SELECT:-2,USE_ANOTHER:-1},f={LOGIN_STATES:i,LOGIN_TYPES:s,LOGIN_EVENTS:a,LOGIN_TIMEOUT:o,LOGIN_COMMANDS:r,LOGIN_CIF_TYPES:l,LOGIN_PATHS:c,REDIRECT_PATHS:u,LOGIN_ACTIONS:d,SPECIAL_MODES:h,LOGIN_ERRORS:_,REGEX_REDIRECT:g,LOGIN_PLACEHOLDER_INDICATOR:S};t.default=f,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(757),a=i(s),o=n(758),r=i(o),l=n(759),c=i(l),u=angular.module("MobileLoginOptionModule",[]).constant("mobileSecurityConstants",a.default).config(r.default).service("LoginOptionService",c.default);t.default=u,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={LOGIN_OPTIONS:{VALUE:"LOGIN_OPTIONS",LABEL:"userSettings.security.nav.login",URL:"/login-options",action:"userSettings.security.loginOptions"},CLIENT_PIN:{VALUE:"CLIENT_PIN",LABEL:"userSettings.security.nav.client_pin",URL:"/client-pin",action:""},DOUBLE_SAFE:{VALUE:"DOUBLE_SAFE",LABEL:"userSettings.security.nav.double_safe",URL:"/double-safe",action:""},DEVICES:{VALUE:"DEVICES",LABEL:"userSettings.security.nav.devices",URL:"/devices",action:"userSettings.security.devices"}},s={DEFER_PIN:"DEFER_PIN",TOUCH_ID:"TOUCH_ID",EYE_VERIFY:"EYE_PRINT",VOICE_PASSWORD:"VOICE_PASSWORD"},a={DEFER_PIN:"DEFER_PIN",TOUCH_ID:"TOUCH_ID",EYE_VERIFY:"EYE_VERIFY",VOICE_PASSWORD:"VOCAL_PASSWD",REMEMBER:"REMEMBER"},o={TOUCH_ID_FAILED_BY_USER:1010,TOUCH_ID_CANCELLED_BY_USER:1011,TOUCH_ID_CANCELLED_BY_SYSTEM:1012,TOUCH_ID_PASSWORD_FALLBACK:1013,TOUCH_ID_NOT_AVAILABLE:1014,EYE_VERIFY_FAILED:1020,EYE_VERIFY_CANCELLED:1021,VOCAL_PASSWORD_FAILED:1030,VOCAL_PASSWORD_CANCELLED:1031},r={SUCCESS:"SUCCESS",CANCEL:"CANCEL",NO_DATA:"NO_DATA",TRY_AGAIN:"TRY_AGAIN",SHOW_ERROR:"SHOW_ERROR",SHOW_DISABLE_MODAL:"SHOW_DISABLE_MODAL",SHOW_EYE_VERIFY_FAILURE_MODAL:"SHOW_EYE_VERIFY_FAILURE_MODAL",SHOW_TOUCH_ID_FAILURE_MODAL:"SHOW_TOUCH_ID_FAILURE_MODAL",FALL_BACK_TO_PIN:"FALL_BACK_TO_PIN",PASSMARK_RESET_PIN_CANCEL:"PASSMARK_RESET_PIN_CANCEL"},l=["vocal","defer","touch","eye"],c={enrollVoicePassword:{method:"POST",WL:{adapter:"AuthenticationAdapterFBE",path:"security/passes/voice_password/token"},MOCK:{url:""}},enrollEyeVerify:{method:"POST",WL:{adapter:"AuthenticationAdapterFBE",path:"security/passes/eye_print/enroll"},MOCK:{url:""}},deleteLoginOption:{method:"DELETE",WL:{adapter:"AuthenticationAdapterFBE",path:"security/passes"},MOCK:{url:""}}},u={ENROLL_VOICE_PASSWORD:"enrollVoicePassword",ENROLL_EYE_VERIFY:"enrollEyeVerify",ENROLL_INSTANT_ACCESS:"enrollDeferPin",DELETE_LOGIN_OPTION:"deleteLoginOption"},d={COMPONENT:i,LOGIN_OPTION_TYPE:s,LOGIN_OPTION_REMOVAL_TOKENS:a,LOGIN_OPTION_RESULT:r,NATIVE_ERROR_CODE:o,LOGIN_OPTION_SESSION_NAMES:l,SERVICE_CONFIG:c,AVAILABLE_SERVICES:u};t.default=d,e.exports=t.default},function(e,t,n){"use strict";function i(e,t,n){e.appendGlobalConstants(n.SERVICE_CONFIG,t.SERVICE_CONFIG)}Object.defineProperty(t,"__esModule",{value:!0}),i.$inject=["dynamicConstantsProvider","mobileSecurityConstants","serviceConstants"],t.default=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),a=i(s),o=n(29),r=i(o),l=n(0),c=i(l),u=n(1),d=i(u),h=function(){function e(t,n,i,s,a,o,r,l,u,d,h,_,g,S,f,v,E){(0,c.default)(this,e),this.$q=t,this.$log=n,this.$injector=i,this.$rootScope=s,this.RequesterService=a,this.EnvironmentService=o,this.SessionService=l,this.NativeService=u,this.authConstants=d,this.LoginMFPService=h,this.serviceConstants=_,this.EventBusService=g,this.appStateConstants=S,this.LocaleService=v,this.LoginTimeoutService=E,this.mobileSecurityConstants=r,this.optionType=r.LOGIN_OPTION_TYPE,this.optionToken=r.LOGIN_OPTION_REMOVAL_TOKENS,this.optionResult=r.LOGIN_OPTION_RESULT,this.optionSessionNames=r.LOGIN_OPTION_SESSION_NAMES,this.loginEvents=f.LOGIN_EVENTS,this.NATIVE_ERROR_CODE=r.NATIVE_ERROR_CODE,this.loginOption={},this.failedCount=0,this._resetUserData(),this._initEventSubscription()}return(0,d.default)(e,[{key:"_resetUserData",value:function(){this.removeSavedCif=null,this.currentUserHash=null,this.rememberMeHash=null}},{key:"_initEventSubscription",value:function(){var e=this;[this.appStateConstants.APPLICATION_LOGOUT,this.appStateConstants.APPLICATION_INIT].forEach(function(t){return e.EventBusService.subscribe(e.$rootScope,t,function(){e.$log.debug("DB - initLoginOptions refresh after "+t+"."),e.failedCount=0,e.initLoginOptions().then(function(t){e.$log.debug("*** initLoginOptions res: ",t)},function(t){e.$log.debug("*** initLoginOptions err: ",t)})})}),this.EventBusService.subscribe(this.$rootScope,this.loginEvents.SUCCESSFUL_LOGIN,function(){return e._handlePendingDisabledLoginOptions()})}},{key:"initLoginOptions",value:function(){var e=this;return this.EnvironmentService.isNative()?this.SessionService.getSavedUsers().then(function(t){return e.$log.debug("DB - SaveUsers tokens: "+(0,r.default)(t)),t?(e.optionSessionNames.forEach(function(n){return e._setLoginOption(t,n)}),e.loginOption):e.loginOption}):this.$q.when(this.loginOption)}},{key:"getAlternativeLoginOption",value:function(e){if(this.$log.debug("DB - LoginOptions: "+(0,r.default)(this.loginOption)),this.$log.debug("DB - RememberMeObj: "+(0,r.default)(e)),!this.LoginMFPService.isAIF&&e){if(this.removeSavedCif=e.removeID,this.rememberMeHash=e.acn,this.currentUserHash=e.userHash,this.loginOption.defer&&this.loginOption.defer.userHash===this.currentUserHash)return this.optionType.DEFER_PIN;if(this.loginOption.vocal&&this.loginOption.vocal.userHash===this.currentUserHash){var t=this.LocaleService.locale;if(t&&t.toLowerCase().startsWith("en"))return this.optionType.VOICE_PASSWORD}if(this.loginOption.eye&&this.loginOption.eye.userHash===this.currentUserHash)return this.optionType.EYE_VERIFY;if(this.loginOption.touch&&this.loginOption.touch.userHash===this.currentUserHash)return this.optionType.TOUCH_ID}return this._resetUserData(),null}},{key:"submitLoginOption",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.LoginTimeoutService.invokeTimer();var i=n?this.LoginMFPService.checkNetworkConnection():this.LoginMFPService.logout();return this.LoginMFPService.setLoginOptionFlowFlag(!0),i.then(function(){return t.NativeService.validateTrustedCertificate()}).then(function(){return t.LoginMFPService.initTriggerChallengeHandler()}).then(function(){return t._getOptionToken(e)}).then(function(n){return t.LoginMFPService.submitLoginOption(e,n)}).then(function(n){return t._processResult(e,n,!0)}).then(function(n){return t._removeSavedCif(e),t.LoginTimeoutService.revokeTimer(),n}).catch(function(n){return t._processResult(e,n)}).finally(function(){return t.LoginMFPService.setLoginOptionFlowFlag(!1)})}},{key:"_processResult",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t)return n&&this.LoginMFPService.cancelLogin(),this.$q.when({loginOptionResult:this.optionResult.NO_DATA});var i=(0,a.default)({},"string"==typeof t?{message:t}:t);return this._isCancelled(t)?i.loginOptionResult=this.optionResult.CANCEL:this._isInvalidToken(t)?i.loginOptionResult=this._handleInvalidToken(e):this._isFallBackToPin(t)?i.loginOptionResult=this.optionResult.FALL_BACK_TO_PIN:this._isOptionFailed(t)?i.loginOptionResult=this._handleOptionFailure(e):this._isPassmarkResetPinCancel(t)?i.loginOptionResult=this.optionResult.PASSMARK_RESET_PIN_CANCEL:n?i.loginOptionResult=this.optionResult.SUCCESS:(t.errorMessage&&(this.SessionService.errorMessage=t.errorMessage),i.loginOptionResult=this.optionResult.SHOW_ERROR),this.$q.when(i)}},{key:"disableLoginOption",value:function(e){if(this.$log.debug("DB - disableLoginOption "+e),e){switch(e){case this.optionType.VOICE_PASSWORD:this.loginOption.vocal=null;break;case this.optionType.EYE_VERIFY:this.loginOption.eye=null;break;case this.optionType.DEFER_PIN:this.loginOption.defer=null;break;case this.optionType.TOUCH_ID:this.loginOption.touch=null}return this.clearLocalTokens(e)}return this.$q.reject("Invalid option type: "+e)}},{key:"clearLocalTokens",value:function(e){switch(e){case this.optionType.DEFER_PIN:return this.NativeService.clearDeferredPin();case this.optionType.EYE_VERIFY:return this.$q.all({token:this.NativeService.clearEyeVerify(),security_token:this.NativeService.clearEyeVerifyToken()});case this.optionType.TOUCH_ID:return this.$q.all({token:this.NativeService.clearTouchId(),security_token:this.NativeService.clearTouchIdToken()});case this.optionType.VOICE_PASSWORD:return this.$q.all({token:this.NativeService.clearVocalPassword(),security_token:this.NativeService.clearVocalPasswordToken()});default:return this.$q.reject("clearLocalTokens: Invlaid option type!")}}},{key:"revokeLoginOption",value:function(e){var t=this,n=void 0;switch(e){case this.optionType.DEFER_PIN:n=this.optionToken.DEFER_PIN;break;case this.optionType.TOUCH_ID:n=this.optionToken.TOUCH_ID;break;case this.optionType.EYE_VERIFY:n=this.optionToken.EYE_VERIFY;break;case this.optionType.VOICE_PASSWORD:n=this.optionToken.VOICE_PASSWORD;break;default:return this.$q.reject("Invalid option type")}var i={urlVars:{type:n}},s=this.mobileSecurityConstants.AVAILABLE_SERVICES.DELETE_LOGIN_OPTION;return this.RequesterService.request(s,i).then(function(n){t.$log.debug("DB - revokeLoginOption "+e+" result: "+(0,r.default)(n))}).finally(function(){return t.clearLocalTokens(e)})}},{key:"_getOptionToken",value:function(e){var t=this;switch(e){case this.optionType.TOUCH_ID:return this.LoginTimeoutService.revokeTimer(),this.$log.debug("disabled LoginTimeoutService timer to proceed with touchIdNativeCall"),this.NativeService.getTouchIdToken().then(function(e){return t.LoginTimeoutService.invokeTimer(),t.$log.debug("response returned from touchId, reinvoke LoginTimeoutService timer"),e&&e.security_token?e:t.$q.reject(e)});case this.optionType.VOICE_PASSWORD:return this.LoginTimeoutService.revokeTimer(),this.$log.debug("disabled LoginTimeoutService timer to proceed with vocalPasswordNativeCall"),this.NativeService.getVocalPasswordToken().then(function(e){return t.LoginTimeoutService.invokeTimer(),t.$log.debug("response returned from vocalPassword, reinvoke LoginTimeoutService timer"),e&&e.security_token?e:t.$q.reject("missing vocalPassword token.")});case this.optionType.EYE_VERIFY:return this.LoginTimeoutService.revokeTimer(),this.$log.debug("disabled LoginTimeoutService timer to proceed with eyeVerifyNativeCall"),this.NativeService.getEyeVerifyToken().then(function(e){return t.LoginTimeoutService.invokeTimer(),t.$log.debug("response returned from eyeVerify, reinvoke LoginTimeoutService timer"),e&&e.security_token?e:t.$q.reject("missing eyeVerify token.")});case this.optionType.DEFER_PIN:return this.NativeService.getDeferredPin().then(function(e){return e&&e.security_token?e:t.$q.reject("missing security token.")});default:return this.$q.reject("unsupported option: "+e)}}},{key:"_setLoginOption",value:function(e,t){this.loginOption[t]=null,e&&e[t]&&(this.loginOption[t]={userHash:e[t].userhash,nameToRemember:e[t].name_to_remember,rememberMeHash:e[t].remember_me_hash})}},{key:"_isCancelled",value:function(e){return e.errorCode===this.NATIVE_ERROR_CODE.VOCAL_PASSWORD_CANCELLED||e.data&&e.data.errorCode===this.NATIVE_ERROR_CODE.VOCAL_PASSWORD_CANCELLED||e.errorCode===this.NATIVE_ERROR_CODE.EYE_VERIFY_CANCELLED||e.data&&e.data.errorCode===this.NATIVE_ERROR_CODE.EYE_VERIFY_CANCELLED||e.errorCode===this.NATIVE_ERROR_CODE.TOUCH_ID_CANCELLED_BY_USER||e.errorCode===this.NATIVE_ERROR_CODE.TOUCH_ID_CANCELLED_BY_SYSTEM}},{key:"_isInvalidToken",value:function(e){return e.authStatus===this.authConstants.status.INVALID_TOKEN||e.status===this.authConstants.status.INVALID_TOKEN}},{key:"_isFallBackToPin",value:function(e){return e.errorCode===this.NATIVE_ERROR_CODE.TOUCH_ID_NOT_AVAILABLE||e.errorCode===this.NATIVE_ERROR_CODE.TOUCH_ID_PASSWORD_FALLBACK}},{key:"_isOptionFailed",value:function(e){return e.errorCode===this.NATIVE_ERROR_CODE.EYE_VERIFY_FAILED||e.data&&e.data.errorCode===this.NATIVE_ERROR_CODE.EYE_VERIFY_FAILED||e.errorCode===this.NATIVE_ERROR_CODE.TOUCH_ID_FAILED_BY_USER}},{key:"_isPassmarkResetPinCancel",value:function(e){return e.errorCode===this.optionResult.PASSMARK_RESET_PIN_CANCEL}},{key:"_getMaxRetries",value:function(e){switch(e){case this.optionType.VOICE_PASSWORD:return 3;case this.optionType.TOUCH_ID:return 2;default:return 1}}},{key:"_handleInvalidToken",value:function(e){return this.LoginMFPService.cancelLogin(),this.optionType.VOICE_PASSWORD===e?this._handleOptionFailure(e):(this.disableLoginOption(e).then(function(){}),this.optionResult.SHOW_DISABLE_MODAL)}},{key:"_handleOptionFailure",value:function(e){var t=this;this.failedCount+=1;var n=void 0;if(this.failedCount>=this._getMaxRetries(e)){var i=void 0;switch(e){case this.optionType.VOICE_PASSWORD:n=this.optionResult.SHOW_DISABLE_MODAL,i=this.authConstants.emailTypes.voice,this.disableLoginOption(e).then(function(){return t._sendEmail(i,t.rememberMeHash)}).then(function(){return t.SessionService.addPendingDisabledLoginOption(t.currentUserHash)});break;case this.optionType.EYE_VERIFY:n=this.optionResult.SHOW_EYE_VERIFY_FAILURE_MODAL,i=this.authConstants.emailTypes.eye,this._sendEmail(i,this.rememberMeHash);break;case this.optionType.TOUCH_ID:n=this.optionResult.SHOW_TOUCH_ID_FAILURE_MODAL,i=this.authConstants.emailTypes.touch,this.disableLoginOption(e).then(function(){return t._sendEmail(i,t.rememberMeHash)})}}else n=this.optionResult.TRY_AGAIN;return n}},{key:"_sendEmail",value:function(e,t){var n=this,i=this.serviceConstants.AVAILABLE_SERVICES.SEND_EMAIL,s={data:{template_id:e,remember_me_hash:t}};return this.RequesterService.request(i,s).then(function(e){n.$log.debug("DB - sendEmail "+(0,r.default)(s)+" result: "+(0,r.default)(e))},function(e){n.$log.error("DB - sendEmail "+(0,r.default)(s)+" error: "+(0,r.default)(e))})}},{key:"_handlePendingDisabledLoginOptions",value:function(){var e=this,t=this.SessionService.userhash;return this.SessionService.getPendingDisabledLoginOptions(t).then(function(n){e.$log.debug("DB - pendingDisabledOptions: "+(0,r.default)(n)),Array.isArray(n)&&n.forEach(function(n){e.revokeLoginOption(n).finally(function(){return e.SessionService.removePendingDisabledLoginOption(t,n)})})})}},{key:"_removeSavedCif",value:function(e){this.removeSavedCif&&(this.SessionService.removeSavedId(this.rememberMeHash),this.disableLoginOption(e))}}]),e}();h.$inject=["$q","$log","$injector","$rootScope","RequesterService","EnvironmentService","mobileSecurityConstants","SessionService","NativeService","authConstants","LoginMFPService","serviceConstants","EventBusService","appStateConstants","loginConstants","LocaleService","LoginTimeoutService"],t.default=h,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(761),s=function(e){return e&&e.__esModule?e:{default:e}}(i),a=angular.module("tangerine.app.core.components.visitorSearch",[]).component("tngVisitorSearch",s.default);t.default=a,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(762),a=i(s),o=n(763),r=i(o);n(764);var l={template:r.default,controller:a.default,bindings:{onClose:"&"}};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i){(0,a.default)(this,e),this.$log=t,this.$translate=n,this.EnvironmentService=i}return(0,r.default)(e,[{key:"$onInit",value:function(){this.searchText=""}},{key:"search",value:function(){window.open(this.getSearchUrl(),"_self")}},{key:"getSearchUrl",value:function(){var e=this.EnvironmentService.get("searchResourcesUrl"),t=this.EnvironmentService.getBaseUrl(),n=this.$translate.instant("visitorSearch.searchUrl")+this.searchText;return e?e.concat(n):t.concat(n)}}]),e}();l.$inject=["$log","$translate","EnvironmentService"],t.default=l,e.exports=t.default},function(e,t){e.exports='<tng-modal-dialog on-close="$ctrl.onClose()" class="c-visitor-search" analytics-id="visitorsearch" show-header="true"> <header> <div id="searchOverlay" class=""> <div class="search-overlay__bar"> <form ng-submit="$ctrl.search()"> <div class="grid"> <div class="grid__container"> <div class="grid__column grid__column--2of3"> <span class="icon-search padding-fix"></span> <input class="search-overlay__input" type="text" placeholder="{{ \'visitorSearch.searchPlaceholder\' | translate }}" ng-model="$ctrl.searchText"/> </div> <div class="grid__column grid__column--1of3 search-overlay__bar__last-column"> <button actionable-id="visitor-search-search-btn" type="submit" class="btn btn--medium btn--orange search-overlay__search-button">{{ \'visitorSearch.searchPlaceholder\' | translate }}</button> </div> </div> </div> </form> </div> </div> </header> </tng-modal-dialog> '},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(766),s=function(e){return e&&e.__esModule?e:{default:e}}(i),a=angular.module("LiftAndLoadContainerModule",[]).component("tngLiftAndLoadContainer",s.default);t.default=a,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(767),a=i(s),o=n(768),r=i(o);n(769);var l={template:a.default,controller:r.default,transclude:!0,bindings:{}};t.default=l,e.exports=t.default},function(e,t){e.exports='<div class="c-lift-and-load-container" ng-transclude> </div> '},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),a=i(s),o=n(0),r=i(o),l=n(1),c=i(l),u=function(){function e(t,n){(0,r.default)(this,e),(0,a.default)(this,{$element:t,$timeout:n})}return(0,c.default)(e,[{key:"$onInit",value:function(){var e=this;this.BASE_DELAY=150,this.$timeout(function(){e.applyAnimationsSequentially()},0)}},{key:"applyAnimationsSequentially",value:function(){var e=this,t=angular.element(this.$element)[0].querySelectorAll('[lift-and-load-child=""]'),n=0;[].forEach.bind(t)(function(t){t.classList.add("c-animations__liftAndLoadOnEnterReady"),n+=e.BASE_DELAY,e.$timeout(function(){t.classList.remove("c-animations__liftAndLoadOnEnterReady"),t.classList.add("c-animations__liftAndLoadOnEnter")},n)})}}]),e}();u.$inject=["$element","$timeout"],t.default=u,e.exports=t.default},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(771),s=function(e){return e&&e.__esModule?e:{default:e}}(i);n(772);var a=angular.module("tangerine.app.core.components.mobileFooterDirective",[]).directive("tngMobileFooter",s.default);t.default=a,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t){return{restrict:"AE",link:function(n,i){if(t.isNative()){i.parent().addClass("c-mobile-footer");var s=e.find("div[ui-view='page-content']");s.addClass("c-mobile-ui-view");var a=s.children().first();a.addClass("c-mobile-page-wrapper"),a.children().first().addClass("c-mobile-page-content"),n.$on("$destroy",function(){s.removeClass("c-mobile-ui-view")})}}}};i.$inject=["$document","EnvironmentService"],t.default=i,e.exports=t.default},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(774),a=i(s),o=n(777),r=i(o),l=n(778),c=i(l),u=angular.module("tangerine.feedbackSurvey",[]).service("FeedbackSurveyService",r.default).component("tngFeedbackSurvey",a.default).constant("FeedbackSurveyConstants",c.default);t.default=u,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(775),a=i(s),o=n(776),r=i(o),l={controller:a.default,template:r.default};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i){(0,a.default)(this,e),this.$window=t,this.FeedbackSurveyService=n,this.$timeout=i,this.isAnyModalOpen=!1,this.isMedalliaSupported=this.$window.MEDALLIA_BUTTON_ENABLED}return(0,r.default)(e,[{key:"$onInit",value:function(){var e=this;this.$timeout(function(){e.isMedalliaSupported=e.$window.MEDALLIA_BUTTON_ENABLED},1e3)}},{key:"feedbackClicked",value:function(){var e={EN:this.$window.MEDALLIA_FEEDBACK_ID_EN,FR:this.$window.MEDALLIA_FEEDBACK_ID_FR};this.FeedbackSurveyService.launchFeedbackSurvey(e)}}]),e}();l.$inject=["$window","FeedbackSurveyService","$timeout"],t.default=l,e.exports=t.default},function(e,t){e.exports='<tng-sticky-button class="main-nav__medalliaFeedbackBtn main-nav--laptop" ng-click="$ctrl.feedbackClicked()" ng-if="$ctrl.isMedalliaSupported"> <span translate>{{ \'global.menu.header.feedback\' }}</span> </tng-sticky-button> '},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i,s,o,r,l,c,u){(0,a.default)(this,e),this.$log=t,this.LocaleService=n,this.$window=i,this.$timeout=s,this.isMedalliaSupported=this.$window.MEDALLIA_BUTTON_ENABLED,this.localeConstants=o,this.LOCALES=o.LOCALES,this.serviceConstants=r,this.RequesterService=l,this.SessionService=c,this.FeedbackSurveyConstants=u}return(0,r.default)(e,[{key:"launchFeedbackSurvey",value:function(e){var t=this.LocaleService.locale===this.LOCALES.EN_CA?e.EN:e.FR;t&&(this.$window.KAMPYLE_EVENT_DISPATCHER.trigger("neb_buttonClicked",{formId:t}),this.SessionService.isAuthenticated()&&(t!==this.FeedbackSurveyConstants.MEDALLIA_FORM_IDS.AFTER_CHAT_SURVEY.EN&&t!==this.FeedbackSurveyConstants.MEDALLIA_FORM_IDS.AFTER_CHAT_SURVEY.FR||this.$window.KAMPYLE_EVENT_DISPATCHER.subscribeOnce("neb_formClosed",this.onFeedbackSurveyClosed.bind(this))))}},{key:"onFeedbackSurveyClosed",value:function(){return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.PUT_MEDALLIA_FEEDBACK)}},{key:"isMedalliaEnabled",value:function(){return this.$window.KAMPYLE_ONSITE_SDK&&this.$window.MEDALLIA_INTERCEPT_ENABLED?(this.$window.MedalliaEnabled=!0,!0):(this.$log.debug("Medallia sdk unavailable"),!1)}},{key:"updatePageViewAndLocale",value:function(){this.$window.MedalliaLanguage=this.LocaleService.locale,this.$window.KAMPYLE_ONSITE_SDK.updatePageView()}}]),e}();l.$inject=["$log","LocaleService","$window","$timeout","localeConstants","serviceConstants","RequesterService","SessionService","FeedbackSurveyConstants"],t.default=l,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={AFTER_CHAT_SURVEY:{EN:"156",FR:"157"},BUDGET_FEEDBACK:{EN:"196",FR:"197"},BUDGET_OVERVIEW_FEEDBACK:{EN:"216",FR:"217"}},s={MEDALLIA_FORM_IDS:i};t.default=s,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(780),a=i(s),o=n(785),r=i(o),l=n(132),c=i(l),u=n(789),d=i(u),h=angular.module("tangerine.app.core.components.dateSelector",[]).constant("tngDateSelectorConstants",c.default).component("tngDateSelector",a.default).component("tngDateSelectorIncrementer",r.default).service("tngDateSelectorCalendarFactory",d.default);t.default=h,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(781),a=i(s),o=n(782),r=i(o);n(784);var l={template:a.default,controller:r.default,require:{form:"?^form"},bindings:{selectedDate:"=?",endDate:"=?",frequency:"=?",selectionMode:"=?",hideDateIncrementer:"<?",hideSelectionModeSelector:"=?",hideCalendar:"=?",hideFrequencySelector:"=?",minDate:"<?",maxDate:"<?",isDateOfBirth:"<?",onDateChange:"&?",selectionModeExcludeSingle:"<",frequencyExclude:"<?",frequencyExcludeDaily:"<",frequencyExcludeNone:"<",frequencyQuarterlyAndYearlyExcluded:"<",startDateHeader:"@?",endDateHeader:"@?",fixedDateFrom:"<?",inlineFrequency:"<",showNextMontIndefinitely:"<?",showInputDisplay:"<?",selectedDateOnCalendarShown:"<?",inputDisplayLabel:"@?",inputDisplayLabelTooltip:"@?",showValidationOnLoad:"<?",ngRequired:"<?",forceUserSelection:"<?",componentName:"@?"}};t.default=l,e.exports=t.default},function(e,t){e.exports='<div ng-if="$ctrl.showInputDisplay" class="field tng-dp-input"> <label class="heading--sub3"> {{ $ctrl.inputDisplayLabel | translate }} <tng-help-bubble ng-if="$ctrl.inputDisplayLabelTooltip"> {{ $ctrl.inputDisplayLabelTooltip | translate}} </tng-help-bubble> </label> <div class="field tng-dp-input__input-wrapper" ng-click="$ctrl.showDatePicker()"> <div class="field__icon icon-calendar"></div> <input type="text" class="input date-selector-input" ng-class="{ \'warning\': $ctrl.form[$ctrl._componentName+\'_input\'].$invalid\n        && ($ctrl.form[$ctrl._componentName+\'_input\'].$touched || $ctrl.showValidationOnLoad)}" id="{{$ctrl._componentName}}" name="{{$ctrl._componentName}}_input" ng-model="$ctrl.selectedDate" date-format="DD/MM/YYYY" placeholder="{{ ::\'newClientEnrollment.identityInfo.dateOfBirthPlaceholder\' | translate }}" ng-required="$ctrl.ngRequired" readonly="readonly"/> <div class="field__error" ng-messages="$ctrl.form[$ctrl._componentName+\'_input\'].$error" ng-show="$ctrl.form[$ctrl._componentName+\'_input\'].$touched || $ctrl.showValidationOnLoad"> <p ng-message="required">{{ ::\'validation.isRequired\' | translate }}</p> </div> </div> </div> <div ng-show="$ctrl.datePickerVisible"> <div class="tng-dp__selection-mode-wrapper" ng-if="$ctrl.frequencySelectorShown() && !$ctrl.inlineFrequency"> <div class="tng-dp__selection-mode-label"> {{ ::(\'global.datePicker.frequency\' | translate) }}: </div> <div ng-show="$ctrl.frequency === $ctrl.FREQUENCY_MODE_CONSTANTS.NONE && $ctrl.isDirty" class="field__error"> {{ ::\'global.datePicker.required\' | translate }} </div> <tng-select-autocomplete ng-model="$ctrl.frequency" input-id="dateSelector_frequency" on-select="$ctrl.isDirty = true;" options="$ctrl.availableFrequencies" option-label-key="name" option-value-key="value" placeholder="global.datePicker.selectFrequency" select-type="$ctrl.selectConstants.SELECT_TYPES.STATIC"> </tng-select-autocomplete> <div ng-show="!$ctrl.frequency || $ctrl.frequency === \'\'"> <tng-error-message> <p>{{::\'accountDetails.savings.editPayment.errors.requiredInfo\' | translate }}</p> </tng-error-message> </div> </div> <div class="tng-dp__selection-mode-wrapper" ng-if="!$ctrl.hideSelectionModeSelector"> <div class="tng-dp__selection-mode-button"> <input id="{{$ctrl._componentName}}_continueIndefinitely" ng-model="$ctrl.selectionMode" type="radio" class="input input--tangerine-radio" value="INDEFINITE"> <label id="label_dateSelector_continueIndefinitely" for="{{$ctrl._componentName}}_continueIndefinitely">{{ ::(\'global.datePicker.continueIndefinitely\' | translate) }}</label> </div> <div class="tng-dp__selection-mode-button" ng-if="!$ctrl.selectionModeExcludeSingle"> <input id="{{$ctrl._componentName}}_single" ng-model="$ctrl.selectionMode" type="radio" value="SINGLE" class="input input--tangerine-radio"> <label for="{{$ctrl._componentName}}_single">{{ ::(\'global.datePicker.single\' | translate) }}</label> </div> <div class="tng-dp__selection-mode-button"> <input id="{{$ctrl._componentName}}_continueUntil" ng-model="$ctrl.selectionMode" type="radio" value="RANGE" class="input input--tangerine-radio"> <label id="label_dateSelector_continueUntils" for="{{$ctrl._componentName}}_continueUntil">{{ ::(\'global.datePicker.continueUntil\' | translate) }}</label> </div> </div> <div class="tng-dp__incrementer-wrapper" ng-if="!$ctrl.hideDateIncrementer"> <div class="tng-dp__incrementer--start" ng-show="!$ctrl.fixedDateFrom"> <div ng-if="!$ctrl.inlineFrequency" class="tng-dp__incrementer-label"> <span ng-show="$ctrl.startDateHeader">{{ ::($ctrl.startDateHeader | translate) }}:</span> <span ng-show="$ctrl.incrementerEndVisible && !$ctrl.startDateHeader">{{ ::(\'global.datePicker.startDate\' | translate) }}:</span> <span ng-hide="$ctrl.incrementerEndVisible || $ctrl.startDateHeader">{{ ::(\'global.datePicker.date\' | translate) }}:</span> </div> <div ng-if="$ctrl.inlineFrequency" class="tng-dp__selection-mode-label-inline-frequency"> <span ng-show="$ctrl.startDateHeader">{{ ::($ctrl.startDateHeader | translate) }}:</span> <span ng-show="$ctrl.incrementerEndVisible && !$ctrl.startDateHeader">{{ ::(\'global.datePicker.startDate\' | translate) }}:</span> <span ng-hide="$ctrl.incrementerEndVisible || $ctrl.startDateHeader">{{ ::(\'global.datePicker.date\' | translate) }}:</span> </div> <tng-date-selector-incrementer selected-date="$ctrl.selectedDate" locale="$ctrl.$locale" min-date="$ctrl.minDate" max-date="$ctrl.maxDate" force-user-selection="$ctrl.forceUserSelection"></tng-date-selector-incrementer> </div> <div class="tng-dp__incrementer--end" ng-show="$ctrl.incrementerEndVisible"> <div ng-if="!$ctrl.endDateHeader" class="tng-dp__incrementer-label">{{ ::(\'global.datePicker.endDate\' | translate) }}:</div> <div ng-if="$ctrl.endDateHeader" class="tng-dp__incrementer-label">{{ ::($ctrl.endDateHeader | translate) }}:</div> <tng-date-selector-incrementer selected-date="$ctrl.endDate" locale="$ctrl.$locale" min-date="$ctrl.minDate" max-date="$ctrl.maxDate"></tng-date-selector-incrementer> </div> <div class="tng-dp__selection-mode-wrapper-inline-frequency" ng-if="$ctrl.frequencySelectorShown() && $ctrl.inlineFrequency"> <div class="tng-dp__selection-mode-label-inline-frequency"> {{ ::(\'global.datePicker.frequency\' | translate) }}: </div> <div ng-show="$ctrl.frequency === $ctrl.FREQUENCY_MODE_CONSTANTS.NONE && $ctrl.isDirty" class="field__error" class="field__error"> {{ ::\'global.datePicker.required\' | translate }} </div> <tng-select-autocomplete ng-model="$ctrl.frequency" input-id="dateSelector_frequency_inline" on-select="$ctrl.isDirty = true;" options="$ctrl.availableFrequencies" option-label-key="name" option-value-key="value" select-type="$ctrl.selectConstants.SELECT_TYPES.STATIC"> </tng-select-autocomplete> <div ng-show="!$ctrl.frequency || $ctrl.frequency === \'\'"> <tng-error-message> <p>{{::\'accountDetails.savings.editPayment.errors.requiredInfo\' | translate }}</p> </tng-error-message> </div> </div> </div> <div class="tng-dp__date-selector" ng-hide="$ctrl.hideCalendar"> <button actionable-id="date-selector-move-calendar-left" ng-if="$ctrl.showPrevMonthArrow" class="tng-dp__month-button--left" ng-click="$ctrl.moveCalendar(-1)"> <span class="icon-leftarrow"></span> </button> <div class="tng-dp__month-container js-calendar-container"></div> <button actionable-id="date-selector-move-calendar-right" ng-if="$ctrl.showNextMonthArrow" class="tng-dp__month-button--right" ng-click="$ctrl.moveCalendar(1)"> <span class="icon-rightarrow"></span> </button> </div> </div>'},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),a=i(s),o=n(0),r=i(o),l=n(1),c=i(l),u=n(18),d=i(u),h=n(131),_=i(h),g=n(783),S=i(g),f=function(){function e(t,n,i,s,o,l,c,u,d,h,_){(0,r.default)(this,e),(0,a.default)(this,{$element:t,$scope:s,$attrs:o,$translate:l,$locale:n,tngDateSelectorCalendarFactory:c,tngSelectAutocompleteConstants:u,$log:d,$window:h,tngDateSelectorConstants:_}),this._domElement=t[0],this._domRefs={},i.enabled(!1,t),this._selectionModel=new S.default,this._componentName=this.componentName?this.componentName:"date-selector",this.selectConstants=u,this.isDirty=!1,this.FREQUENCY_MODE_CONSTANTS=_.FREQUENCY_MODE_CONSTANTS,this.DATE_SELECTOR_CSS_CLASSES=_.DATE_SELECTOR_CSS_CLASSES,this.DATE_SELECTOR_MODES=_.DATE_SELECTOR_MODES,this.THRESHOLDS=_.THRESHOLDS,this.LATEST_CHANGES_OPTIONS=_.LATEST_CHANGES_OPTIONS,this.DEFAULT_END_DATE_CONSTANTS=_.DEFAULT_END_DATE_CONSTANTS,this.DEFAULT_MIN_DATE_OF_BIRTH=_.DEFAULT_MIN_DATE_OF_BIRTH,this.DEFAULT_MAX_DATE_OF_BIRTH=_.DEFAULT_MAX_DATE_OF_BIRTH}return(0,c.default)(e,[{key:"$onInit",value:function(){var e=this;this.isDateOfBirth&&(this.minDate||(this.minDate=this.DEFAULT_MIN_DATE_OF_BIRTH),this.maxDate||(this.maxDate=this.DEFAULT_MAX_DATE_OF_BIRTH),this.selectionMode=this.DATE_SELECTOR_MODES.SINGLE),this.datePickerVisible=!this.showInputDisplay,this._domRefs.calendarContainer=this._domElement.querySelector("."+this.DATE_SELECTOR_CSS_CLASSES.jsCalendarContainerClass),this.showPrevMonthArrow=!0,this.showNextMonthArrow=!0,this._slotsRendered=0,this._prepareSlots(),this._windowSizeChanged=d.default.throttle(this._windowSizeChanged.bind(this),this.THRESHOLDS.RESIZE_THROTTLE_MS),this._addEventListeners(),this._selectionModel.onUpdate(this._selectionUpdated.bind(this)),this._initSelection(),this.fixedDateFrom&&this._selectionModel.setHandlingToDate(!0),[function(){return e.selectedDate},function(){return e.endDate},function(){return e.frequency},function(){return e.selectionMode},function(){return e.minDate},function(){return e.maxDate}].forEach(function(t){e.$scope.$watch(t,e._selectionUpdatedExternally.bind(e))}),this._prepareFrequencies(),this.originalSelectedDate=_.default.parseMoment(this.selectedDate)||this._getDefaultSelectedDate(),this.originalEndDate=_.default.parseMoment(this.endDate)||this._getDefaultEndDate()}},{key:"$onDestroy",value:function(){this._removeEventListeners()}},{key:"moveCalendar",value:function(e){this._focusedMonth+=e,13===this._focusedMonth?(this._focusedYear+=1,this._focusedMonth=1):0===this._focusedMonth&&(this._focusedYear-=1,this._focusedMonth=12),this._renderCalendars()}},{key:"frequencySelectorShown",value:function(){return!this.hideFrequencySelector&&this.selectionMode!==this.DATE_SELECTOR_MODES.SINGLE}},{key:"_prepareFrequencies",value:function(){var e=this,t=function(t){return e.$translate.instant("global.datePicker.frequencies."+t)};this.availableFrequencies=[{value:this.FREQUENCY_MODE_CONSTANTS.WEEKLY,name:t("weekly")},{value:this.FREQUENCY_MODE_CONSTANTS.BIWEEKLY,name:t("biWeekly")},{value:this.FREQUENCY_MODE_CONSTANTS.MONTHLY,name:t("monthly")}],this.frequencyQuarterlyAndYearlyExcluded||(this.availableFrequencies.push({value:this.FREQUENCY_MODE_CONSTANTS.QUARTERLY,name:t("quarterly")}),this.availableFrequencies.push({value:this.FREQUENCY_MODE_CONSTANTS.YEARLY,name:t("yearly")})),this.frequencyExcludeDaily||this.availableFrequencies.unshift({value:this.FREQUENCY_MODE_CONSTANTS.DAILY,name:t("daily")}),this.frequencyExcludeNone||this.availableFrequencies.unshift({value:this.FREQUENCY_MODE_CONSTANTS.NONE,name:this.$translate.instant("global.components.buttons.select")}),Array.isArray(this.frequencyExclude)&&(this.availableFrequencies=this.availableFrequencies.filter(function(t){return-1===e.frequencyExclude.indexOf(t.value)}))}},{key:"_windowSizeChanged",value:function(){this._prepareSlots(),this._renderCalendars()}},{key:"_getDefaultSelectedDate",value:function(){return _.default.parseMoment(moment())}},{key:"_getDefaultEndDate",value:function(){return _.default.parseMoment(moment().add(this.DEFAULT_END_DATE_CONSTANTS[this.frequency]))}},{key:"_initSelection",value:function(){this.selectedDate||this._selectionModel.setDateFrom(this._getDefaultSelectedDate(),!0),void 0===this.$attrs.endDate||this.endDate||this._selectionModel.setDateTo(this._getDefaultEndDate(),!0)}},{key:"_notifyBoundCallback",value:function(){angular.isFunction(this.onDateChange)&&this.onDateChange({selectedDate:this.selectedDate,endDate:this.endDate,frequency:this.frequency,selectionMode:this.selectionMode,selectedDaysCount:this._selectionModel.getSelectedDaysCount(),isHandlingToDate:this._selectionModel.isHandlingToDate()})}},{key:"_selectionUpdated",value:function(e){if(e.fromDate){var t=e.fromDate;!_.default.sameDates(_.default.parseMoment(this.selectedDate),t)&&(null!==this.selectedDate||this.forceUserSelection&&this.datePickerVisible)&&(this.selectedDate=_.default.toMoment(t)),e.latestChange===this.LATEST_CHANGES_OPTIONS.FROM_DATE&&this._moveFocusTo(t)}if(e.toDate){var n=e.toDate;_.default.sameDates(_.default.parseMoment(this.endDate),n)||(this.endDate=_.default.toMoment(n)),e.latestChange===this.LATEST_CHANGES_OPTIONS.TO_DATE&&this._selectionModel.getSelectionMode()===this.DATE_SELECTOR_MODES.RANGE&&this._moveFocusTo(n)}null!==this.selectedDate&&this._notifyBoundCallback(),this._renderCalendars()}},{key:"_selectionUpdatedExternally",value:function(){var e=this._selectionModel.getDateFrom(),t=_.default.parseMoment(this.selectedDate),n=t&&!_.default.sameDates(e,t);n&&this._selectionModel.setDateFrom(t,!0);var i=this._selectionModel.getDateTo(),s=_.default.parseMoment(this.endDate);s&&!_.default.sameDates(i,s)&&this._selectionModel.setDateTo(s,!0);var a=this._selectionModel.getMinDate(),o=_.default.parseMoment(this.minDate);o&&!_.default.sameDates(a,o)&&this._selectionModel.setMinDate(o);var r=this._selectionModel.getMaxDate(),l=_.default.parseMoment(this.maxDate);l&&!_.default.sameDates(r,l)&&this._selectionModel.setMaxDate(l);var c=this.frequency;this._selectionModel.getFrequency()!==c&&this._selectionModel.setFrequency(c);var u=this.selectionMode;this._selectionModel.getSelectionMode()!==u&&(this._selectionModel.setSelectionMode(u),this.incrementerEndVisible=u===this.DATE_SELECTOR_MODES.RANGE,n||u!==this.DATE_SELECTOR_MODES.INDEFINITE||(this.selectedDate=_.default.toMoment(this.originalSelectedDate),this.endDate=_.default.toMoment(this.originalEndDate),this._selectionModel.setDateTo(this.originalEndDate,!0),this._selectionModel.setDateFrom(this.originalSelectedDate,!0)))}},{key:"_addEventListeners",value:function(){var e=this;this._transitionListener=null,angular.element(this._domRefs.calendarContainer).on("click touchstart",function(t){e._processClick(t),e.$scope.$$phase||e.$scope.$apply()}),angular.element(window).on("resize",this._windowSizeChanged)}},{key:"_removeEventListeners",value:function(){angular.element(window).off("resize",this._windowSizeChanged),angular.element(this._domRefs.calendarContainer).on("click touchstart")}},{key:"_parseClickedDay",value:function(e){for(var t=e;t;){if(t.dataset&&void 0!==t.dataset.day)return t.dataset.day;if(t.classList.contains(this.DATE_SELECTOR_CSS_CLASSES.jsCalendarContainerClass))return null;t=t.parentNode}return null}},{key:"_processClick",value:function(e){var t=this._parseClickedDay(e.target);if(t){var n=_.default.parseDateString(t);if(n){var i=this._selectionModel.getDateFrom();if(this._selectionModel.getSelectionMode()===this.DATE_SELECTOR_MODES.RANGE){var s=this._selectionModel.getDateTo();if(_.default.sameDates(n,i)&&!this.fixedDateFrom)return void this._selectionModel.setHandlingToDate(!1);if(_.default.sameDates(n,s))return void this._selectionModel.setHandlingToDate(!0);if(this._selectionModel.isHandlingToDate())return void this._selectionModel.setDateTo(n)}this._selectionModel.setDateFrom(n)}}}},{key:"_moveFocusTo",value:function(e){if(e){var t=e.month,n=e.year;this._focusedMonth=t,this._focusedYear=n}}},{key:"_prepareSlots",value:function(){if(this.$window.innerWidth>this.THRESHOLDS.TABLET_PX?(this._fitSlots=this.THRESHOLDS.MONTH_SLOTS_DESKTOP,this._extraSlots=this.THRESHOLDS.MONTH_BACKWARD_SLOTS_DESKTOP):(this._fitSlots=this.THRESHOLDS.MONTH_SLOTS_TABLET,this._extraSlots=this.THRESHOLDS.MONTH_BACKWARD_SLOTS_TABLET),this._slotsRendered!==this._fitSlots){for(;this._domRefs.calendarContainer.firstChild;)this._domRefs.calendarContainer.removeChild(this._domRefs.calendarContainer.firstChild);this._monthObjects=[];for(var e=0;e<this._fitSlots;e++){var t=this.tngDateSelectorCalendarFactory.createEmptyMonth(this.$locale,this._selectionModel);this._monthObjects[e]=t,t.renderIn(this._domRefs.calendarContainer)}this._slotsRendered=this._fitSlots}}},{key:"_renderCalendars",value:function(){for(var e=this._selectionModel.getMaxDate(),t=this._selectionModel.getMinDate(),n=0;n<this._fitSlots;n++){var i=n+this._extraSlots;if(this._monthObjects[n].setMonthYear(this._focusedMonth+i,this._focusedYear),0===n&&t&&(this.showPrevMonthArrow=_.default.lessThan(t,{day:1,month:this._focusedMonth,year:this._focusedYear})),n===this._fitSlots-1&&e){var s={day:1,month:this._focusedMonth,year:this._focusedYear},a=i+(this._fitSlots===this.THRESHOLDS.MONTH_SLOTS_TABLET?1:-1);s=_.default.addMonths(s,a),this.showNextMonthArrow=_.default.greaterThan(e,s)||_.default.sameDates(e,s)||this.showNextMontIndefinitely}}}},{key:"showDatePicker",value:function(){this.datePickerVisible||(this.datePickerVisible=!0,this.forceUserSelection?(this._moveFocusTo(_.default.parseMoment(this.maxDate)),this._renderCalendars()):this.selectedDate||(this.selectedDateOnCalendarShown?this.selectedDate=this.selectedDateOnCalendarShown:this.selectedDate=this.maxDate,this._notifyBoundCallback()))}}]),e}();f.$inject=["$element","$locale","$animate","$scope","$attrs","$translate","tngDateSelectorCalendarFactory","tngSelectAutocompleteConstants","$log","$window","tngDateSelectorConstants"],t.default=f,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),a=i(s),o=n(0),r=i(o),l=n(1),c=i(l),u=n(132),d=n(131),h=i(d),_=function(){function e(){(0,r.default)(this,e),this._frequencyMode=u.FREQUENCY_MODE_CONSTANTS.NONE,this._selectionMode=u.DATE_SELECTOR_MODES.SINGLE,this._fromDate=null,this._toDate=null,this._minDate=null,this._maxDate=null,this._updateListener=null,this._handleToDate=!1,this._latestExternalChange=u.LATEST_CHANGES_OPTIONS.NONE}return(0,c.default)(e,[{key:"getSelectionMode",value:function(){return this._selectionMode}},{key:"setSelectionMode",value:function(e){this._selectionMode=e,this._selectionMode===u.DATE_SELECTOR_MODES.RANGE&&this._toDate&&this._fromDate&&!h.default.greaterThan(this._toDate,this._fromDate)&&this.setDateTo(h.default.addDays(this.getDateFrom(),1)),this._update()}},{key:"setFrequency",value:function(e){this._frequencyMode=e,this._update()}},{key:"getFrequency",value:function(){return this._frequencyMode}},{key:"setMinDate",value:function(e){this._maxDate&&!h.default.lessThan(e,this._maxDate)||(this._minDate=e),this._update()}},{key:"getSelectedDaysCount",value:function(){return h.default.getHighlightedDaysCount(this._fromDate,this._toDate,this._frequencyMode,this._selectionMode)}},{key:"setMaxDate",value:function(e){this._minDate&&!h.default.greaterThan(e,this._minDate)||(this._maxDate=e),this._update()}},{key:"setDateFrom",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!this._toDate||this._selectionMode!==u.DATE_SELECTOR_MODES.RANGE||h.default.lessThan(e,this._toDate),i=!(this._minDate&&h.default.lessThan(e,this._minDate)),s=!(this._maxDate&&h.default.greaterThan(e,this._maxDate));if(i&&s){if(this._fromDate=e,t&&(this._latestExternalChange=u.LATEST_CHANGES_OPTIONS.FROM_DATE),n)return void this._update();this._toDate=h.default.addDays(e,1),this._update()}}},{key:"setDateTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!this._fromDate||this._selectionMode!==u.DATE_SELECTOR_MODES.RANGE||h.default.greaterThan(e,this._fromDate),i=!(this._minDate&&h.default.lessThan(e,this._minDate)),s=!(this._maxDate&&h.default.greaterThan(e,this._maxDate));n&&i&&s&&(this._toDate=e,t&&(this._latestExternalChange=u.LATEST_CHANGES_OPTIONS.TO_DATE)),this._update()}},{key:"setHandlingToDate",value:function(e){this._handleToDate=e,this._update()}},{key:"isHandlingToDate",value:function(){return this._handleToDate}},{key:"getMinDate",value:function(){return this._minDate?(0,a.default)({},this._minDate):null}},{key:"getMaxDate",value:function(){return this._maxDate?(0,a.default)({},this._maxDate):null}},{key:"getDateFrom",value:function(){return this._fromDate?(0,a.default)({},this._fromDate):null}},{key:"getDateTo",value:function(){return this._toDate?(0,a.default)({},this._toDate):null}},{key:"onUpdate",value:function(e){this._updateListener=e}},{key:"_prepareModelObject",value:function(){var e={};return this._fromDate&&(e.fromDate=this.getDateFrom()),this._toDate&&(e.toDate=this.getDateTo()),e.latestChange=this._latestExternalChange,e}},{key:"_update",value:function(){this._updateListener&&this._updateListener(this._prepareModelObject()),this._latestExternalChange=u.LATEST_CHANGES_OPTIONS.NONE}}]),e}();t.default=_,e.exports=t.default},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(786),a=i(s),o=n(787),r=i(o);n(788);var l={template:a.default,controller:r.default,bindings:{selectedDate:"=",locale:"<",minDate:"<?",maxDate:"<?",forceUserSelection:"<?"}};t.default=l,e.exports=t.default},function(e,t){e.exports='<div class="tng-dp-incrementer"> <div ng-if="!$ctrl.isFrench()" class="tng-dp-incrementer__block" ng-keydown="$ctrl.onKeyMonth($event)" ng-click="$ctrl.onKeyMonth($event)"> <button actionable-id="date-selector-incrementer-months-up" ng-click="$ctrl.changeMonth(1)" class="tng-dp-incrementer__button--up" tabindex="-1" ng-disabled="!$ctrl.isDateChangeable(1, \'months\')"> <span class="icon-uparrow"></span> </button> <span class="tng-dp-incrementer__label" ng-click="$ctrl.editMonth()" tabindex="-1"> <span class="tng-dp-incrementer__label-text" ng-hide="$ctrl.monthChanging" id="dateSelectorIncrementer-month-name-en"> {{ $ctrl.monthList[$ctrl.month-1].name }} </span> <select actionable-id="tng-ds-incrementer__month" class="tng-dp-incrementer__label-input js-month-input" ng-model="$ctrl.monthTemporary" ng-if="$ctrl.monthChanging" tng-click-outside="$ctrl.saveMonth()" ng-change="$ctrl.saveMonth()" ng-options="month.value as month.name for month in $ctrl.monthList" tabindex="-1"> </select> </span> <button actionable-id="date-selector-incrementer-months-down" ng-click="$ctrl.changeMonth(-1)" class="tng-dp-incrementer__button--down" tabindex="-1" ng-disabled="!$ctrl.isDateChangeable(-1, \'months\')"> <span class="icon-downarrow"></span> </button> </div> <div ng-if="!$ctrl.isFrench()" class="tng-dp-incrementer__block" ng-keydown="$ctrl.onKeyDay($event)" ng-click="$ctrl.onKeyDay($event)"> <button actionable-id="date-selector-incrementer-days-up" ng-click="$ctrl.changeDay(1)" class="tng-dp-incrementer__button--up" tabindex="-1" ng-disabled="!$ctrl.isDateChangeable(1, \'days\')"> <span class="icon-uparrow"></span> </button> <span class="tng-dp-incrementer__label" ng-click="$ctrl.editDay()" tabindex="-1"> <span class="tng-dp-incrementer__label-text" id="dateSelectorIncrementer-day-en" ng-hide="$ctrl.dayChanging"> {{ $ctrl.day }} </span> <input actionable-id="tng-ds-incrementer__day" class="tng-dp-incrementer__label-input js-day-input" ng-model="$ctrl.dayTemporary" type="number" ng-if="$ctrl.dayChanging" ng-keypress="$ctrl.saveDay($event)" tng-click-outside="$ctrl.saveDay($event)" min="1" max="31" tng-focus="$ctrl.dayFocused" tabindex="-1"/> </span> <button actionable-id="date-selector-incrementer-days-down" ng-click="$ctrl.changeDay(-1)" class="tng-dp-incrementer__button--down" tabindex="-1" ng-disabled="!$ctrl.isDateChangeable(-1, \'days\')"> <span class="icon-downarrow"></span> </button> </div> <div ng-if="$ctrl.isFrench()" class="tng-dp-incrementer__block" ng-keydown="$ctrl.onKeyDay($event)" ng-click="$ctrl.onKeyDay($event)"> <button actionable-id="date-selector-incrementer-days-up" ng-click="$ctrl.changeDay(1)" class="tng-dp-incrementer__button--up" tabindex="-1" ng-disabled="!$ctrl.isDateChangeable(1, \'days\')"> <span class="icon-uparrow"></span> </button> <span class="tng-dp-incrementer__label" ng-click="$ctrl.editDay()" tabindex="-1"> <span class="tng-dp-incrementer__label-text" id="dateSelectorIncrementer-day-fr" ng-hide="$ctrl.dayChanging"> {{ $ctrl.day }} </span> <input actionable-id="tng-ds-incrementer__day" class="tng-dp-incrementer__label-input js-day-input" ng-model="$ctrl.dayTemporary" type="number" ng-if="$ctrl.dayChanging" ng-keypress="$ctrl.saveDay($event)" tng-click-outside="$ctrl.saveDay($event)" min="1" max="31" tng-focus="$ctrl.dayFocused" tabindex="-1"/> </span> <button actionable-id="date-selector-incrementer-days-down" ng-click="$ctrl.changeDay(-1)" class="tng-dp-incrementer__button--down" tabindex="-1" ng-disabled="!$ctrl.isDateChangeable(-1, \'days\')"> <span class="icon-downarrow"></span> </button> </div> <div ng-if="$ctrl.isFrench()" class="tng-dp-incrementer__block" ng-keydown="$ctrl.onKeyMonth($event)" ng-click="$ctrl.onKeyMonth($event)"> <button actionable-id="date-selector-incrementer-months-up" ng-click="$ctrl.changeMonth(1)" class="tng-dp-incrementer__button--up" tabindex="-1" ng-disabled="!$ctrl.isDateChangeable(1, \'months\')"> <span class="icon-uparrow"></span> </button> <span class="tng-dp-incrementer__label" ng-click="$ctrl.editMonth()" tabindex="-1"> <span class="tng-dp-incrementer__label-text" id="dateSelectorIncrementer-month-name-fr" ng-hide="$ctrl.monthChanging"> {{ $ctrl.monthList[$ctrl.month-1].name }} </span> <select actionable-id="tng-ds-incrementer__month" class="tng-dp-incrementer__label-input js-month-input" ng-model="$ctrl.monthTemporary" ng-if="$ctrl.monthChanging" tng-click-outside="$ctrl.saveMonth()" ng-change="$ctrl.saveMonth()" ng-options="month.value as month.name for month in $ctrl.monthList" tabindex="-1"> </select> </span> <button actionable-id="date-selector-incrementer-months-down" ng-click="$ctrl.changeMonth(-1)" class="tng-dp-incrementer__button--down" tabindex="-1" ng-disabled="!$ctrl.isDateChangeable(-1, \'months\')"> <span class="icon-downarrow"></span> </button> </div> <div class="tng-dp-incrementer__block" ng-keydown="$ctrl.onKeyYear($event)" ng-click="$ctrl.onKeyYear($event)"> <button actionable-id="date-selector-incrementer-years-up" ng-click="$ctrl.changeYear(1)" class="tng-dp-incrementer__button--up" tabindex="-1" ng-disabled="!$ctrl.isDateChangeable(1)"> <span class="icon-uparrow"></span> </button> <span class="tng-dp-incrementer__label" ng-click="$ctrl.editYear()" tabindex="-1"> <span class="tng-dp-incrementer__label-text" id="dateSelectorIncrementer-year" ng-hide="$ctrl.yearChanging"> {{$ctrl.year}} </span> <input actionable-id="tng-ds-incrementer__year" class="tng-dp-incrementer__label-input js-year-input" ng-model="$ctrl.yearTemporary" type="number" ng-if="$ctrl.yearChanging" ng-keypress="$ctrl.saveYear($event)" tng-click-outside="$ctrl.saveYear($event)" tng-focus="$ctrl.yearFocused" tabindex="-1"/> </span> <button actionable-id="date-selector-incrementer-years-down" ng-click="$ctrl.changeYear(-1)" class="tng-dp-incrementer__button--down" tabindex="-1" ng-disabled="!$ctrl.isDateChangeable(-1)"> <span class="icon-downarrow"></span> </button> </div> </div> '},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),a=i(s),o=n(0),r=i(o),l=n(1),c=i(l),u=n(55),d=i(u),h=n(131),_=i(h),g=function(){function e(t,n,i){(0,r.default)(this,e),(0,a.default)(this,{$scope:t,$log:n,LocaleService:i})}return(0,c.default)(e,[{key:"$onInit",value:function(){var e=this,t=this.locale.DATETIME_FORMATS.MONTH;this.$scope.$watch(function(){return e.selectedDate},this._selectedDateChanged.bind(this)),this.yearChanging=!1,this.dayChanging=!1,this.monthChanging=!1,this.monthList=t.map(function(e,t){return{name:e,value:t+1}}),this.date=this._getDate()}},{key:"_getDate",value:function(){return this.selectedDate?this.selectedDate:this.maxDate&&this.forceUserSelection?this.maxDate:(0,d.default)()}},{key:"_selectedDateChanged",value:function(){this.date=this._getDate();var e=_.default.parseMoment(this.date);e&&(this.day=e.day,this.month=e.month,this.year=e.year)}},{key:"changeMonth",value:function(e){this._updateDate(e,"months")}},{key:"changeDay",value:function(e){this._updateDate(e,"days")}},{key:"changeYear",value:function(e){this._updateDate(e,"years")}},{key:"_updateDate",value:function(e,t){this.isMoment()&&this._updateSelectedDate(this.date.clone().add(e,t))}},{key:"onKeyMonth",value:function(e){this.onKeyEvent(e,this.changeMonth)}},{key:"onKeyDay",value:function(e){this.onKeyEvent(e,this.changeDay)}},{key:"onKeyYear",value:function(e){this.onKeyEvent(e,this.changeYear)}},{key:"onKeyEvent",value:function(e,t){var n=void 0;38===e.keyCode?n=1:40===e.keyCode&&(n=-1),n&&(e.stopPropagation(),e.preventDefault(),t.bind(this)(n))}},{key:"editYear",value:function(){this.yearChanging||(this.yearTemporary=this.year,this.yearChanging=!0,this.yearFocused=!0)}},{key:"editDay",value:function(){this.dayChanging||(this.dayTemporary=this.day,this.dayChanging=!0,this.dayFocused=!0)}},{key:"editMonth",value:function(){this.monthChanging||(this.monthTemporary=this.month,this.monthChanging=!0)}},{key:"saveYear",value:function(e){if(e&&13===e.which)e.preventDefault(),e.stopPropagation();else if(e)return;this.changeYear(this.yearTemporary-this.year),this.yearChanging=!1}},{key:"saveDay",value:function(e){if(e&&13===e.which)e.preventDefault(),e.stopPropagation();else if(e)return;this.changeDay(this.dayTemporary-this.day),this.dayChanging=!1}},{key:"saveMonth",value:function(){this.changeMonth(this.monthTemporary-this.month),this.monthChanging=!1}},{key:"_updateSelectedDate",value:function(e){this._canDateBeChanged(e)&&(this.selectedDate=e,this.date=e)}},{key:"_canDateBeChanged",value:function(e){return(!this.minDate||e.startOf("day").diff(this.minDate.clone().startOf("day"),"days")>=0)&&(!this.maxDate||e.startOf("day").diff(this.maxDate.clone().startOf("day"),"days")<=0)}},{key:"isDateChangeable",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"years";return this.isMoment()?this._canDateBeChanged(this.date.clone().add(e,t)):(this.$log.debug("isDateChangeable: selectedDate is not instance of moment"),!1)}},{key:"isMoment",value:function(){return this.date instanceof d.default}},{key:"isFrench",value:function(){return this.LocaleService.isFrench()}}]),e}();g.$inject=["$scope","$log","LocaleService"],t.default=g,e.exports=t.default},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=n(790),c=i(l),u=function(){function e(){(0,a.default)(this,e),this._monthDOMTemplate=null}return(0,r.default)(e,[{key:"createEmptyMonth",value:function(e,t){this._monthDOMTemplate||(this._monthDOMTemplate=c.default.createMonthDOM(e));var n=this._monthDOMTemplate.cloneNode(!0);return new c.default(n,e,t)}}]),e}();t.default=u,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(115),a=i(s),o=n(0),r=i(o),l=n(1),c=i(l),u=n(131),d=i(u),h=n(132),_=function(){function e(t,n,i){(0,r.default)(this,e),this._element=t,this._month=null,this._year=null,this._locale=n,this._selectionModel=i,this._renderedDaysMonth=null,this._renderedDaysYear=null,this._startWithMonday=0===this._locale.DATETIME_FORMATS.FIRSTDAYOFWEEK}return(0,c.default)(e,[{key:"renderIn",value:function(e){return e?(e.appendChild(this._element),this):this}},{key:"setMonthYear",value:function(e,t){for(var n=e,i=t;n<1;)n+=12,i-=1;for(;n>12;)n-=12,i+=1;return this._month=n,this._paddedMonth=d.default.padMonthDay(n),this._year=i,this._startOfTheMonth=d.default.monthStart(this._month,this._year),this._endOfTheMonth=d.default.monthEnd(this._month,this._year),this._render(),this}},{key:"_canRender",value:function(){var e=this._selectionModel.getDateFrom();if(this._selectionModel.getSelectionMode()===h.DATE_SELECTOR_MODES.RANGED){var t=this._selectionModel.getDateTo();return e&&!!t}return!!e}},{key:"_render",value:function(){var e=h.DATE_SELECTOR_CSS_CLASSES.calendarMonthOddClass;this._renderHeader(),this._canRender()&&(this._renderedDaysYear===this._year&&this._renderedDaysMonth===this._month||this._renderDays(),this._renderSelectionElements(),this._month%2?this._element.classList.add(e):this._element.classList.remove(e))}},{key:"_renderHeader",value:function(){var e=this._locale.DATETIME_FORMATS.MONTH,t=h.DATE_SELECTOR_CSS_CLASSES.jsMonthHeaderClass;this._month&&this._year&&this._element&&(this._element.querySelector("."+t).textContent=e[this._month-1]+" "+this._year)}},{key:"_renderDays",value:function(){var e=h.DATE_SELECTOR_CSS_CLASSES.calendarWeekPopulatedClass,t=h.DATE_SELECTOR_CSS_CLASSES.calendarDayPreRangeClass,n=h.DATE_SELECTOR_CSS_CLASSES.calendarDayPostRangeClass,i=h.DATE_SELECTOR_CSS_CLASSES.jsWeekClass,s=h.DATE_SELECTOR_CSS_CLASSES.jsWeekdayClass;if(this._clearClassAllElements(e),this._clearClassAllElements(t),this._clearClassAllElements(n),this._month&&this._year&&this._element){var a=moment(this._year+"-"+this._month+"-01","YYYY-MM-DD"),o=void 0;this._startWithMonday?0===(o=a.day())&&(o=7):o=a.day()+1;for(var r=a.daysInMonth(),l=0,c=1;c<7;c++){for(var u=this._element.querySelector("."+i+"-"+c),_=!1,g=1;g<8;g++){var S=u.querySelector("."+s+"-"+g);if(g<o&&1===c)S.classList.add(t),S.textContent="",S.dataset.day="";else if(l>=r)S.classList.add(n),S.textContent="",S.dataset.day="";else{l+=1,S.textContent=l,_=!0;var f=d.default.padMonthDay(l);S.dataset.day=""+this._year+this._paddedMonth+f}}_&&u.classList.add(e)}}this._renderedDaysMonth=this._month,this._renderedDaysYear=this._year}},{key:"_clearClassSingleElement",value:function(e){var t=this._element.querySelector("."+e);t&&t.classList.remove(e)}},{key:"_clearClassAllElements",value:function(e){(0,a.default)(this._element.querySelectorAll("."+e)).forEach(function(t){t.classList.remove(e)})}},{key:"_clearRangeSelectionElements",value:function(){var e=h.DATE_SELECTOR_CSS_CLASSES.calendarDayEndSelectedClass,t=h.DATE_SELECTOR_CSS_CLASSES.calendarDayRangedClass,n=h.DATE_SELECTOR_CSS_CLASSES.calendarMonthRangedClass,i=h.DATE_SELECTOR_CSS_CLASSES.calendarMonthRangedPreClass,s=h.DATE_SELECTOR_CSS_CLASSES.calendarMonthRangedPostClass,a=h.DATE_SELECTOR_CSS_CLASSES.calendarDayHighlightedClass,o=h.DATE_SELECTOR_CSS_CLASSES.calendarHandleClass;this._clearClassSingleElement(e),this._clearClassAllElements(t),this._element.classList.remove(n),this._element.classList.remove(i),this._element.classList.remove(s),this._clearClassAllElements(a);var r=document.querySelector("."+o);r&&r.parentNode.removeChild(r)}},{key:"_renderSelectionElements",value:function(){var e=h.DATE_SELECTOR_CSS_CLASSES.calendarDaySelectedClass,t=h.DATE_SELECTOR_CSS_CLASSES.calendarDayEndSelectedClass,n=this._selectionModel.getDateFrom(),i=this._selectionModel.getMinDate(),s=this._selectionModel.getMaxDate();if(this._renderEnabledDays(i,s),this._renderSelectedDay(n,e),this._selectionModel.getSelectionMode()!==h.DATE_SELECTOR_MODES.SINGLE){var a=this._selectionModel.getDateTo();this._selectionModel.getSelectionMode()===h.DATE_SELECTOR_MODES.INDEFINITE&&(a=d.default.getEndOfTime()),this._renderSelectedDay(a,t),this._renderRange(n,a),this._renderHighlights(n,a,this._selectionModel.getFrequency()),this._selectionModel.isHandlingToDate()?this._renderHandles(a):this._renderHandles(n)}else this._clearRangeSelectionElements()}},{key:"_renderHighlights",value:function(e,t,n){var i=this,s=h.DATE_SELECTOR_CSS_CLASSES.calendarDayHighlightedClass;this._clearClassAllElements(s),d.default.getHighlightedDaysList(e,t,this._startOfTheMonth,n).forEach(function(e){var t=i._element.querySelector("[data-day='"+d.default.stringify(e)+"']");t&&t.classList.add(s)})}},{key:"_addClassToElementSeries",value:function(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=d.default.stringify(e),o=d.default.stringify(t),r=this._element.querySelector("[data-day='"+a+"']");if(r)for(var l=r,c=r.parentNode;l;){if(l.dataset&&l.dataset.day===o)return void(s&&l.classList.add(n));if((r!==l||i)&&l.classList.add(n),!(l=l.nextSibling)){if(!(c=c.nextSibling))return;if(!(l=c.firstChild))return}}}},{key:"_renderEnabledDays",value:function(e,t){var n=h.DATE_SELECTOR_CSS_CLASSES.calendarMonthDisabledClass,i=h.DATE_SELECTOR_CSS_CLASSES.calendarDayDisabledClass;return this._clearClassAllElements(i),this._element.classList.remove(n),e&&d.default.greaterThan(e,this._endOfTheMonth)?void this._element.classList.add(n):t&&d.default.lessThan(t,this._startOfTheMonth)?void this._element.classList.add(n):(e&&e.month===this._month&&e.year===this._year&&this._addClassToElementSeries(this._startOfTheMonth,e,i,!0,!1),void(t&&t.month===this._month&&t.year===this._year&&this._addClassToElementSeries(t,this._endOfTheMonth,i,!1,!0)))}},{key:"_renderSelectedDay",value:function(e,t){if(this._clearClassSingleElement(t),this._month===e.month&&this._year===e.year){var n=d.default.stringify(e),i=this._element.querySelector("[data-day='"+n+"']");i&&i.classList.add(t)}}},{key:"_renderRange",value:function(e,t){var n=h.DATE_SELECTOR_CSS_CLASSES.calendarMonthRangedClass,i=h.DATE_SELECTOR_CSS_CLASSES.calendarDayRangedClass,s=h.DATE_SELECTOR_CSS_CLASSES.calendarMonthRangedPreClass,a=h.DATE_SELECTOR_CSS_CLASSES.calendarMonthRangedPostClass;return d.default.greaterThan(t,this._endOfTheMonth)&&d.default.lessThan(e,this._startOfTheMonth)?void this._element.classList.add(n):(this._clearClassAllElements(i),this._element.classList.remove(n),this._element.classList.remove(s),this._element.classList.remove(a),e.month===this._month&&t.month===this._month&&e.year===this._year&&t.year===this._year?void this._addClassToElementSeries(e,t,i):(e.month===this._month&&e.year===this._year&&(this._element.classList.add(a),this._addClassToElementSeries(e,this._endOfTheMonth,i)),void(t.month===this._month&&t.year===this._year&&(this._element.classList.add(s),this._addClassToElementSeries(this._startOfTheMonth,t,i)))))}},{key:"_renderHandles",value:function(e){var t=h.DATE_SELECTOR_CSS_CLASSES.calendarHandleClass,n=document.querySelector("."+t);n||(n=document.createElement("DIV"),n.classList.add(t));var i=d.default.stringify(e),s=this._element.querySelector("[data-day='"+i+"']");s&&s.appendChild(n)}}],[{key:"createMonthDOM",value:function(e){var t=h.DATE_SELECTOR_CSS_CLASSES.jsMonthClass,n=h.DATE_SELECTOR_CSS_CLASSES.calendarMonthClass,i=h.DATE_SELECTOR_CSS_CLASSES.jsMonthHeaderClass,s=h.DATE_SELECTOR_CSS_CLASSES.calendarMonthHeaderClass,a=h.DATE_SELECTOR_CSS_CLASSES.calendarWeekHeaderClass,o=h.DATE_SELECTOR_CSS_CLASSES.jsWeeksHeaderClass,r=h.DATE_SELECTOR_CSS_CLASSES.jsWeekClass,l=h.DATE_SELECTOR_CSS_CLASSES.calendarWeekClass,c=h.DATE_SELECTOR_CSS_CLASSES.jsWeekdayClass,u=h.DATE_SELECTOR_CSS_CLASSES.calendarDayClass,d=document.createElement("DIV");d.classList.add(t),d.classList.add(n);var _=document.createElement("DIV");_.classList.add(i),_.classList.add(s),d.appendChild(_);var g=document.createElement("DIV");g.classList.add(a),g.classList.add(o);for(var S=1;S<8;S++){var f=(e.DATETIME_FORMATS.FIRSTDAYOFWEEK+S)%7,v=e.DATETIME_FORMATS.SHORTDAY[f].substr(0,1),E=document.createElement("DIV");E.textContent=v,g.appendChild(E)}d.appendChild(g);for(var p=1;p<7;p++){var T=document.createElement("DIV");T.classList.add(r+"-"+p),T.classList.add(l);for(var m=1;m<8;m++){var C=document.createElement("DIV");C.classList.add(c+"-"+m),C.classList.add(u),T.appendChild(C)}d.appendChild(T)}return d}}]),e}();t.default=_,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(792),a=i(s),o=n(276),r=i(o),l=angular.module("tangerine.feesCalculator",[]).component("tngFeesCalculator",a.default).service("feesCalculatorService",r.default);t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(793),a=i(s),o=n(794),r=i(o),l=n(276),c=i(l);n(795);var u={template:a.default,controller:r.default,service:c.default,bindings:{onClose:"&",currentFee:"<?"}};t.default=u,e.exports=t.default},function(e,t){e.exports='<tng-modal-dialog on-close="$ctrl.onModalClose(result)" analytics-id="feesCalculator" class="c-feesCalculator-modal"> <header> {{ ::\'account.overview.quickAccess.feesHeader\' | translate }} </header> <div class="dialog-content"> <div class="dialog__content-wrapper"> <div class="medium-width-section"> <p class="">{{ ::\'account.overview.quickAccess.feesText\' | translate }}</p> <h2>{{ ::\'account.overview.quickAccess.feesSubheader\' | translate }}</h2> <tng-amount-input input-type="$ctrl.AMOUNT_INPUT_TYPES.STANDARD" ng-model="$ctrl.monthlyFees" disable-autofocus="true" input-max-length="9" on-amount-change="$ctrl.onFeesChange(amount)"> </tng-amount-input> <br/> <p class="body--4 margin__t--fix2">{{ ::\'account.overview.quickAccess.feesText2\' | translate }}</p> </div> </div> </div> <footer> <button class="btn btn--edit" actionable-id="feesCalculator_closeModal" ng-click="$ctrl.onModalClose()"> {{::\'global.components.buttons.cancel\' | translate }} </button> <button class="btn btn--orange" actionable-id="feesCalculator_closeModal" ng-click="$ctrl.calculateFees()" ng-disabled="!$ctrl.inputValid"> {{::\'account.overview.quickAccess.feesCalculate\' | translate }} </button> </footer> </tng-modal-dialog> '},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i,s,o){(0,a.default)(this,e),this.$log=t,this.$translate=n,this.UrlService=i,this.feesCalculatorService=s,this.DEFAULT_FEE="",this.inputValid=!1,this.AMOUNT_INPUT_TYPES=o.AMOUNT_INPUT_TYPES}return(0,r.default)(e,[{key:"$onInit",value:function(){this.monthlyFees=this.currentFee||this.DEFAULT_FEE}},{key:"calculateFees",value:function(){var e=this;return this.feesCalculatorService.putMonthlyFees(this.monthlyFees).then(function(){e.onClose()})}},{key:"onFeesChange",value:function(){this.inputValid=this.monthlyFees>0}},{key:"onModalClose",value:function(){this.onClose()}}]),e}();l.$inject=["$log","$translate","UrlService","feesCalculatorService","amountInputConstants"],t.default=l,e.exports=t.default},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(797),a=i(s),o=n(798),r=i(o);n(799);var l={template:r.default,controller:a.default,transclude:!0,bindings:{messageOnly:"<?"}};t.default=l,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(i),a=function e(){(0,s.default)(this,e)};a.$inject=[],t.default=a,e.exports=t.default},function(e,t){e.exports='<div class="c-error-message panel"> <p class="heading--sub2" ng-if="!$ctrl.messageOnly">{{ \'global.errorMessage.title\' | translate }}</p> <p ng-transclude></p> </div> '},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(801),a=i(s),o=n(802),r=i(o);n(803);var l={template:r.default,controller:a.default,transclude:!0,bindings:{warningTitle:"<?"}};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(){(0,a.default)(this,e)}return(0,r.default)(e,[{key:"$onInit",value:function(){this._setTitle()}},{key:"_setTitle",value:function(){this.title="global.warningMessage.title",this.warningTitle&&(this.title=this.warningTitle)}}]),e}();l.$inject=[],t.default=l,e.exports=t.default},function(e,t){e.exports='<div class="c-warning-message panel"> <p class="heading--sub2">{{ ::$ctrl.title | translate }}</p> <p ng-transclude></p> </div> '},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(805),a=i(s),o=n(807),r=i(o);n(808);var l={template:r.default,controller:a.default};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(35),a=i(s),o=n(65),r=i(o),l=n(0),c=i(l),u=n(1),d=i(u),h=n(18),_=i(h),g=n(57),S=n(806),f=function(){function e(t,n,i,s,a,o,l,u,d,h,_,g,S,f,v,E,p,T,m,C,A,I,O,N,y,b,L){(0,c.default)(this,e),this.SessionService=t,this.MenuService=a,this.InboxService=o,this.LocaleService=_,this.CustomersService=h,this.GlobalModalsService=n,this.EventBusService=i,this.EnvironmentService=g,this.BackButtonService=S,this.localeConstants=f,this.LOCALES=f.LOCALES,this.AVAILABLE_ENVIRONMENTS=this.EnvironmentService.getAvailableEnvironments(),this.currentEnvironment=this.EnvironmentService.getCurrentEnvironment(),this.AVAILABLE_GENESYS_ENVIRONMENTS=this.EnvironmentService.getAvailableGenesysEnvironments(),this.IS_AVAILABLE_GENESYS_ENVIRONMENTS="object"===(0,r.default)(this.AVAILABLE_GENESYS_ENVIRONMENTS),this.currentGenesysEnvironment=this.EnvironmentService.getCurrentGenesysEnvironment(),this.menuConstants=l,this.serviceConstants=u,this.stateConstants=v,this.ModalDialogConstants=E,this.backButtonConstants=p,this.$state=s,this.$filter=d,this.$log=T,this.$scope=m,this.$window=C,this.$timeout=A,this.$ngRedux=I,this.FeedbackSurveyService=b,this.TimerService=L,this.isMobileHidden=!0,this.isDropdownMenuHidden=!0,this.isUserMenuHidden=!0,this.isAnyModalOpen=!1,this.isMedalliaSupported=this.$window.MEDALLIA_SUPPORTED,this.isMobileNativeIOS=g.isNative()&&g.isIOS(),this.userInfo=null,this.$translate=O,this.$document=N,this.$location=y,this._loadingUserInfo=!1}return(0,d.default)(e,[{key:"$onInit",value:function(){var e=this;this.unsubscribe=this.$ngRedux.connect(this.mapStateToThis,(0,a.default)({},g.ContactUsActions,g.MainNavMenuActions))(this),this.MenuService.subscribe(this.$scope,function(t,n,i,s){s&&s.isTopLevel&&(e.lastTopLevelState=s),e.getUserInfo(),e._setMenuItems()}),this.BackButtonService.addBackButtonListener(this.$scope,this.backButtonConstants.PRIORITY.IS_HAMBURGER_MENU,function(){return!e.isMobileHidden&&(e.$log.debug("onHamburgerMenuClose callback"),e._hideMobileMenu(),!0)}),this.BackButtonService.addBackButtonListener(this.$scope,this.backButtonConstants.PRIORITY.LOW,function(){return!!_.default.get(e.$state,"current.data.isApplicationRoot")&&(e.EventBusService.publish(e.backButtonConstants.EVENTS.CONFIRM_EXIT),!0)}),this.$timeout(function(){e.isMedalliaSupported=e.$window.MEDALLIA_BUTTON_ENABLED,e.$window.MEDALLIA_INTERCEPT_ENABLED&&(e._subscribeModalEventBusServices(),e.idle=(0,S.idleTrigger)(e.$window.MEDALLIA_INTERCEPT_TIMEOUT,e._feedbackTimeout.bind(e),!0))},1e3);var t=function(){var t=angular.element(window)[0].innerWidth;!e.isMobileHidden&&t>=1024&&(e.isMobileHidden=!0,e.toggleFreezeBody(!0),e.$scope.$apply())};angular.element(this.$window).on("resize",t.bind(this)),this.statesWithSearchIconHiddenList=[this.stateConstants.ABM_LOCATIONS],this.statesWithSearchIconHiddenMap=this.statesWithSearchIconHiddenList.reduce(function(e,t){return e[t]=!0,e},{})}},{key:"_setMenuItems",value:function(){this.MENU_ITEMS={PRIMARY:this.MenuService.getPrimaryMenuItems(),SECONDARY:this.MenuService.getMenuItems(this.menuConstants.MENU_TYPES.SECONDARY),UTILITY:this.MenuService.getMenuItems(this.menuConstants.MENU_TYPES.UTILITY),LOGIN:this.MenuService.getMenuItems(this.menuConstants.MENU_TYPES.LOGIN)},this.topPrimaryMenuItems=this.MenuService.getPrimaryMenuItems().filter(function(e){return"home"!==e.id})}},{key:"getUserInfo",value:function(){var e=this;if(!this.SessionService.isAuthenticated())return void(this.userInfo=null);this.userInfo||this._loadingUserInfo||(this._loadingUserInfo=!0,this.CustomersService.getCustomerInfo({include_servicing_systems:!0}).then(function(t){e.$log.debug("GET Customers Info response: ",t),e.userInfo=t.customer,e._loadingUserInfo=!1}).catch(function(t){e.$log.error("GET Customers Info Error: ",t),e._loadingUserInfo=!1})),this.isMedalliaSupported&&this.$window.MEDALLIA_INTERCEPT_TIMEOUT&&(this._subscribeModalEventBusServices(),this.idle=(0,S.idleTrigger)(this.$window.MEDALLIA_INTERCEPT_TIMEOUT,this._feedbackTimeout.bind(this),!0))}},{key:"$onDestroy",value:function(){this.unsubscribe(),this.toggleFreezeBody(!0),this.idle&&this.idle.stop()}},{key:"mapStateToThis",value:function(e){return{isContactUsMenuOpen:e.contactUs.isContactUsMenuOpen,isMainNavMenuOpen:e.mainNavMenu.isMainNavMenuOpen}}},{key:"toggleMobileMenu",value:function(){this.isMobileHidden=!this.isMobileHidden,this.toggleFreezeBody(),this.isDropdownMenuHidden=!0,this.SessionService.isAuthenticated()&&this.getUserNotificationCount()}},{key:"toggleFreezeBody",value:function(e){var t=document.querySelector("body");return this.isMobileHidden||e?(t.style.overflow="",t.style.position="",t.style.width="",t.classList.remove("mobile_nav_open"),!1):(t.style.overflow="hidden"===t.style.overflow?"":"hidden",t.style.position="fixed"===t.style.position?"":"fixed",t.style.width="fixed"===t.style.position?"100%":"",t.classList.add("mobile_nav_open"),!0)}},{key:"displayName",value:function(){return this.userInfo?this.userInfo.first_name+" "+this.userInfo.last_name.charAt(0)+".":""}},{key:"_hideMobileMenu",value:function(){this.isMobileHidden=!0,this.toggleFreezeBody(!0)}},{key:"toggleDropdownMenu",value:function(){this.isDropdownMenuHidden=!this.isDropdownMenuHidden}},{key:"toggleUserMenu",value:function(){this.getUserNotificationCount(),this.isUserMenuHidden=!this.isUserMenuHidden}},{key:"closeUserMenu",value:function(){this.isUserMenuHidden=!0}},{key:"getSecondaryNavItems",value:function(){return(this.EnvironmentService.isNative()||this.$state.current.name!==this.stateConstants.EXISTING_CLIENT_ONBOARDING)&&this.MENU_ITEMS.SECONDARY.length>0?this.MENU_ITEMS.SECONDARY:this.MENU_ITEMS.PRIMARY}},{key:"getUserNotificationCount",value:function(){var e=this;this.InboxService.getNewMessageCount().then(function(t){t.response_status.status_code===e.serviceConstants.STATUS_CODES.SUCCESS&&(e.userNotificationCount=t.total_number_of_new_emessages)})}},{key:"handleNavItemClick",value:function(e,t){e===this.menuConstants.LINK_TYPES.METHOD&&t===this.menuConstants.ACTION_METHODS.DISPLAY_CONTACT_US_MENU?(this.toggleContactUsMenu(),this.toggleMobileMenu()):e===this.menuConstants.LINK_TYPES.METHOD&&t===this.menuConstants.ACTION_METHODS.OPEN_FEEDBACK?(this.toggleMobileMenu(),this.feedbackClicked()):e===this.menuConstants.LINK_TYPES.ROUTE&&t===this.stateConstants.LOGIN?(this.toggleMobileMenu(),this.reInitLoginFlow()):(this._logPerformanceMetrics(e,t),this.closeUserMenu(),this.MenuService.handleMenuInteraction(e,t),this._hideMobileMenu())}},{key:"_logPerformanceMetrics",value:function(e,t){t===this.stateConstants.MOBILE_NAVIGATION?this.TimerService.startTimerForAction(this.TimerService.EVENTS.VIEW_PROFILE_SETTINGS):t===this.stateConstants.TRANSACTIONS&&this.TimerService.startTimerForAction(this.TimerService.EVENTS.VIEW_TRANSACTIONS)}},{key:"handleGoHome",value:function(){this.MenuService.handleGoHome(),this._hideMobileMenu()}},{key:"handleNavigateToParent",value:function(){if(this.parentNavigation)return this.parentNavigation===this.menuConstants.ACTION_METHODS.GO_BACK?void window.history.go(-1):void(window.location.href=this.parentNavigation)}},{key:"getActiveNavItem",value:function(e){var t=this.MENU_ITEMS.PRIMARY.filter(function(t){return-1!==t.activeOn.indexOf(e)});return t.length>0?t[0].displayName:"global.menu.header.home"}},{key:"handleToggleLocale",value:function(){var e=this.LocaleService.locale===this.LOCALES.EN_CA?this.LOCALES.FR_CA:this.LOCALES.EN_CA;this.handleSwitchLocale(e)}},{key:"handleSwitchLocale",value:function(e){var t=this;this.$state.current.name!==this.stateConstants.LOGIN&&this.LocaleService.locale===e||(this.$location.search("locale",null),this.LocaleService.locale=e,this.EventBusService.publish(this.menuConstants.EVENTS.RESET_LOGIN,this.LocaleService.locale),this.LocaleService.setMomentLocale(),this.$timeout(function(){t.$document[0].title=t.$translate.instant("login.userID.pageTitle")},500))}},{key:"handleGoToFAQ",value:function(){var e=this.LocaleService.localeDisplay.toLowerCase();this.$window.location="/"+e+"/faq",this._hideMobileMenu()}},{key:"showLocaleMenu",value:function(){return!this.EnvironmentService.isNative()&&this.$state.current.name===this.stateConstants.LOGIN}},{key:"getLocaleDisplay",value:function(){return"EN"===this.LocaleService.localeDisplay?"FR":"EN"}},{key:"_subscribeModalEventBusServices",value:function(){var e=this;this.EventBusService.subscribe(this.$scope,this.ModalDialogConstants.EVENTS.MODAL_OPENED,function(){e.isAnyModalOpen=!0,e._feedbackTimeout()}),this.EventBusService.subscribe(this.$scope,this.ModalDialogConstants.EVENTS.MODAL_CLOSED,function(){e.isAnyModalOpen=!1,e._feedbackTimeout()})}},{key:"feedbackClicked",value:function(){var e={EN:this.$window.MEDALLIA_FEEDBACK_ID_EN,FR:this.$window.MEDALLIA_FEEDBACK_ID_FR};this.FeedbackSurveyService.launchFeedbackSurvey(e)}},{key:"_feedbackTimeout",value:function(){this.FeedbackSurveyService.isMedalliaEnabled()&&(this.$window.MedalliaEnabled=!this.isAnyModalOpen,this.FeedbackSurveyService.updatePageViewAndLocale())}},{key:"handleSearch",value:function(){this.showVisitorSiteSearch=!0}},{key:"closeSearch",value:function(){this.showVisitorSiteSearch=!1}},{key:"handleHelp",value:function(){this.toggleContactUsMenu()}},{key:"handleEnvChange",value:function(){var e=this;this.EnvironmentService.switchEnvironment(this.currentEnvironment).then(function(){return e.MenuService.logout(!1).finally(function(){e.$state.go(e.stateConstants.LOGIN,{},{reload:!0})})}).catch(function(t){return e.$log.error("Unable to switch environments",t)})}},{key:"handleGenesysEnvChange",value:function(){this.EnvironmentService.setGenesysAPIUrl(this.currentGenesysEnvironment)}},{key:"getFullName",value:function(){return this.userInfo?this.userInfo.first_name+" "+this.userInfo.last_name:""}},{key:"reInitLoginFlow",value:function(){this.$state.current.name===this.stateConstants.NEW_CLIENT_ENROLLMENT&&this.SessionService.getAndSetNewClientEnrollmentSession(!1),this.$state.current.name!==this.stateConstants.LOGIN&&this.$state.current.name!==this.stateConstants.RESET_PIN?this.$state.go(this.stateConstants.LOGIN,{},{reload:!0}):this.EventBusService.publish(this.menuConstants.EVENTS.RESET_LOGIN)}},{key:"showSearchButton",value:function(){return!this.statesWithSearchIconHiddenMap[this.$state.current.name]}},{key:"isTitleLogoNotClickable",value:function(){return!this.SessionService.isAuthenticated()||this.$state.current.name===this.stateConstants.MOBILE_TERMS_AND_CONDITIONS}},{key:"inboxCount",get:function(){return"0"===this.userNotificationCount?"":this.userNotificationCount>50?"50+":this.userNotificationCount}},{key:"parentNavigation",get:function(){var e=this.$state.current&&this.$state.current.data&&this.$state.current.data.parentNavigation;if(!e)return null;if(e===this.menuConstants.ACTION_METHODS.EXIT_NAVIGATION_MENU){var t=this.lastTopLevelState;return t?this.$state.href(t.name):this.$state.href(this.stateConstants.ACCOUNT_SUMMARY)}return e===this.menuConstants.ACTION_METHODS.GO_BACK?e:this.$state.href(e)}}]),e}();f.$inject=["SessionService","GlobalModalsService","EventBusService","$state","MenuService","InboxService","menuConstants","serviceConstants","$filter","CustomersService","LocaleService","EnvironmentService","BackButtonService","localeConstants","stateConstants","modalDialogConstants","backButtonConstants","$log","$scope","$window","$timeout","$ngRedux","$translate","$document","$location","FeedbackSurveyService","TimerService"],t.default=f,e.exports=t.default},function(e,t,n){"use strict";function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s={};return s.idleTimeout=e,s.onIdleEndCallback=t,s.stopped=!0,s.repeat=i,s._idleSecondsCounter=0,s._interval={},s._setEventListeners=function(){["mousemove","mousedown","keydown"].forEach(function(e){return window.addEventListener(e,function(){s.resetCounter()})})},s._checkIdleTime=function(){s.stopped||(s._idleSecondsCounter+=1,s._idleSecondsCounter>=s.idleTimeout&&(s.repeat?s.resetCounter():s.stop(),s.onIdleEndCallback.call(s)))},s.start=function(){s.stopped=!1,s._interval=window.setInterval(function(){s._checkIdleTime()},1e3)},s.stop=function(){window.clearInterval(s._interval),s.stopped=!0},s.restart=function(){s.resetCounter(),s.start()},s.resetCounter=function(){s._idleSecondsCounter=0},s._setEventListeners(),n&&s.start(),s}Object.defineProperty(t,"__esModule",{value:!0}),t.idleTrigger=i,t.default=i},function(e,t){e.exports='<nav class="navbar print-hide" ng-class="{\'nativeNav\' : $ctrl.EnvironmentService.isNative()}"> <a id="mainNav_home" class="brand" href="" ng-click="$ctrl.handleGoHome()" ng-class="{\'nonclickable\' : $ctrl.isTitleLogoNotClickable()}"> <img ng-src="assets/images/brand-white.png" alt="Tangerine" class="logo-white print-hide"/> <img ng-src="assets/images/brand-orange.png" alt="Tangerine" class="logo-orange print-only-inline"/> </a> <button class="navbar__btn navbar__btn--menu icon-hamburgermenu" ng-if="!$ctrl.parentNavigation" actionable-id="menu_HamburgerMenu" ng-click="$ctrl.toggleMobileMenu()"></button> <a class="navbar__btn navbar__btn--menu icon-leftarrow" ng-if="$ctrl.parentNavigation" actionable-id="navbar_leftarrow" ng-click="$ctrl.handleNavigateToParent()"> </a> <button ng-show="showSearchButton()" actionable-id="main-nav-btn-search" class="navbar__btn navbar__btn--search icon-search" ng-click="$ctrl.handleSearch()"></button> <button actionable-id="main-nav-btn-feedback" class="navbar__btn navbar__btn--feedback icon-feedback" ng-class="{ \'ios-native\': $ctrl.isMobileNativeIOS }" ng-click="$ctrl.feedbackClicked()"> <span class="main-nav-btn-icon-copy"> {{ \'global.menu.header.feedback\' | translate}} </span> </button> <button actionable-id="main-nav-btn-help" class="navbar__btn navbar__btn--help icon-question" ng-class="{ \'ios-native\': $ctrl.isMobileNativeIOS }" ng-click="$ctrl.handleHelp()"> <span class="main-nav-btn-icon-copy"> {{ \'global.menu.utility.help\' | translate}} </span> </button> </nav> <header class="header print-hide"> <nav class="nav" ng-class="{\'nav-no-pad\': $ctrl.SessionService.isAuthenticated()}"> <div class="container"> <a actionable-id="main-nav-handle_go_home" class="brand" href="" ng-click="$ctrl.handleGoHome()"> <img ng-src="assets/images/brand-white.png" alt="Tangerine" class="print-hide"/> <img ng-src="assets/images/brand-orange.png" alt="Tangerine" class="print-only-inline"/> </a> <ul class="nav__list"> <li class="nav__item" ng-repeat="menuItem in $ctrl.topPrimaryMenuItems"> <a class="nav__link" href="" actionable-id="menu_{{::menuItem.displayName }}" ng-click="$ctrl.handleNavItemClick(menuItem.type, menuItem.action)" ng-class="{\'is-active\': menuItem.activeOn.indexOf($ctrl.$state.current.name) > -1}"> <span>{{ menuItem.displayName | translate }}</span> </a> </li> <li class="nav__item print-hide nav-small-padding" ng-if="$ctrl.AVAILABLE_ENVIRONMENTS.length > 0"> <div class="env-switcher"> <select class="select" ng-model="$ctrl.currentEnvironment" ng-change="$ctrl.handleEnvChange(event)" ng-options="env for env in $ctrl.AVAILABLE_ENVIRONMENTS"> <option value=""> Select environment (default config) </option> </select> </div> </li> <li class="nav__item print-hide nav-small-padding" ng-if="$ctrl.IS_AVAILABLE_GENESYS_ENVIRONMENTS"> <div class="env-switcher"> <select id="genesys-env-switcher" class="select" ng-model="$ctrl.currentGenesysEnvironment" ng-change="$ctrl.handleGenesysEnvChange(event)" ng-options="env for env in $ctrl.AVAILABLE_GENESYS_ENVIRONMENTS"> <option value=""> Select environment (default config) </option> </select> </div> </li> </ul> <nav class="navtools"> <ul class="navtools__list"> <li class="navtools__item" ng-if="$ctrl.$state.current.name === $ctrl.stateConstants.LOGIN"> <a class="navtools__link--lang" href="" actionable-id="menu_Language" title="{{ ::\'global.commonWords.language\' | translate }}" ng-click="$ctrl.handleToggleLocale()"> {{ $ctrl.getLocaleDisplay() }} </a> </li> <li class="navtools__item"> <a class="navtools__link navtools__link--circle" href="" actionable-id="menu_Search" ng-click="$ctrl.handleSearch()" title="{{ \'global.commonWords.search\' | translate }}"> <span class="navtools__icon icon-search"></span> </a> </li> <li class="navtools__item"> <a class="navtools__link navtools__link--circle" href="" actionable-id="menu_FAQ" ng-click="$ctrl.handleGoToFAQ()" title="{{ \'global.metaTitles.help\' | translate }}"> <span class="navtools__icon icon-question"></span> </a> </li> <li class="navtools__item navtools__dropdown" ng-show="$ctrl.SessionService.isAuthenticated()"> <a class="navtools__link navtools--bold" href="" actionable-id="menu_Username" tng-click-outside-for-nav-menu="$ctrl.closeUserMenu()" ng-click="$ctrl.toggleUserMenu()"> {{ $ctrl.displayName() }}<span class="icon-downarrow" ng-show="$ctrl.MENU_ITEMS.LOGIN.length > 0"></span> </a> <ul class="navtools__userMenu" ng-show="!$ctrl.isUserMenuHidden"> <li class="navtools__userMenuItem" ng-repeat="menuItem in $ctrl.MENU_ITEMS.LOGIN" ng-click="$ctrl.handleNavItemClick(menuItem.type, menuItem.action)"> <a actionable-id="menu_{{::menuItem.displayName}}"> {{ menuItem.displayName | translate }} <span class="icon" ng-show="menuItem.notifications"> {{ $ctrl.inboxCount }} </span> </a> </li> </ul> </li> <li class="navtools__item" ng-hide="$ctrl.SessionService.isAuthenticated()"> <button class="btn btn--largest btn--reversed" actionable-id="menu_Login" ng-click="$ctrl.reInitLoginFlow()"> <span translate>{{ \'global.menu.header.login\' }}</span> </button> </li> </ul> </nav> </div> </nav> <tng-sub-nav></tng-sub-nav> <nav class="nav-mobile animate-if" ng-if="!$ctrl.isMobileHidden"> <div class="nav-mobile__drawer"> <div class="navdrawer__clientSection"> <button class="btn btn--larger btn--reversed" actionable-id="menu_Login" ng-click="$ctrl.handleNavItemClick($ctrl.menuConstants.LINK_TYPES.ROUTE, $ctrl.stateConstants.LOGIN)" ng-hide="$ctrl.SessionService.isAuthenticated()">{{ \'global.menu.header.login\' | translate }} </button> <div class="userSection" ng-show="$ctrl.SessionService.isAuthenticated()"> <div class="userName"> {{ $ctrl.userInfo.first_name }} {{ $ctrl.userInfo.last_name.charAt(0) }}. </div> <div class="userNotifications" ng-if="$ctrl.userNotificationCount > 0">{{ $ctrl.userNotificationCount }} <span>{{ \'global.menu.header.notifications\' | translate }}</span> </div> <button class="btn btn--large btn--reversed" actionable-id="menu_Logout" ng-click="$ctrl.handleNavItemClick($ctrl.menuConstants.LINK_TYPES.METHOD, $ctrl.menuConstants.ACTION_METHODS.LOGOUT)" ng-show="$ctrl.SessionService.isAuthenticated()"> {{ \'global.menu.header.signOut\' | translate }} </button> </div> </div> <div class="navdrawer__menu-section"> <div class="navdrawer__dropdownSection" ng-if="$ctrl.SessionService.isAuthenticated() || (!$ctrl.SessionService.isAuthenticated() && !$ctrl.EnvironmentService.isNative())"> <button class="btn" ng-click="$ctrl.toggleDropdownMenu()" actionable-id="menu_dropdownSection" ng-class="{active: !$ctrl.isDropdownMenuHidden}" ng-if="!$ctrl.EnvironmentService.isNative()"> <span class="icon-downarrow"></span>{{ $ctrl.getActiveNavItem($ctrl.$state.current.name) | translate }} </button> <ul class="dropdown-menu" ng-show="!$ctrl.isDropdownMenuHidden" ng-if="!$ctrl.EnvironmentService.isNative()"> <li class="dropdown-menu__item" ng-repeat="menuItem in $ctrl.MENU_ITEMS.PRIMARY"> <a href="" ng-click="$ctrl.handleNavItemClick(menuItem.type, menuItem.action)" actionable-id="menu_{{::menuItem.displayName}}" ng-class="{\'is-active\': menuItem.activeOn.indexOf($ctrl.$state.current.name) > -1}"> {{ menuItem.displayName | translate }} </a> </li> </ul> <ul class="secondary-nav"> <li class="secondary-nav__item" ng-click="$ctrl.handleNavItemClick(menuItem.type, menuItem.action)" ng-repeat="menuItem in $ctrl.getSecondaryNavItems()"> <a href="" ng-class="{ \'is-active\': $ctrl.$state.includes(menuItem.action) }" actionable-id="menu_{{::menuItem.displayName}}">{{ menuItem.displayName | translate }}</a> </li> <li ng-if="$ctrl.SessionService.isAuthenticated()" class="secondary-nav__item" ng-click="$ctrl.handleNavItemClick($ctrl.menuConstants.LINK_TYPES.ROUTE, $ctrl.stateConstants.MOBILE_NAVIGATION)"> <a href="" ng-class="{ \'is-active\': $ctrl.$state.includes($ctrl.stateConstants.MOBILE_NAVIGATION) }">{{ \'userSettings.header.profileAndSettings\' | translate }}</a> </li> <li class="nav__item print-hide" ng-if="$ctrl.IS_AVAILABLE_GENESYS_ENVIRONMENTS"> <div class="env-switcher"> <select id="genesys-env-switcher-mobile" class="select" ng-model="$ctrl.currentGenesysEnvironment" ng-change="$ctrl.handleGenesysEnvChange(event)" ng-options="env for env in $ctrl.AVAILABLE_GENESYS_ENVIRONMENTS"> <option value=""> Select environment (default config) </option> </select> </div> </li> </ul> </div> <div class="navdrawer__utilitySection"> <div class="navdrawer__languageBtns btn__row" ng-if="$ctrl.showLocaleMenu()"> <button class="btn" actionable-id="menu_Locale_en_CA" ng-class="{\'selected\': ($ctrl.LocaleService.locale === \'en_CA\')}" ng-click="$ctrl.handleSwitchLocale($ctrl.LOCALES.EN_CA)">{{ \'global.menu.utility.english\' | translate }} </button> <button class="btn" actionable-id="menu_Locale_fr_CA" ng-class="{\'selected\': $ctrl.LocaleService.locale === \'fr_CA\'}" ng-click="$ctrl.handleSwitchLocale($ctrl.LOCALES.FR_CA)">{{ \'global.menu.utility.french\' | translate }} </button> </div> <ul class="navdrawer__utilityLinks"> <li class="navdrawer__utilityLinks__item" ng-click="$ctrl.handleNavItemClick(menuItem.type, menuItem.action)" ng-repeat="menuItem in $ctrl.MENU_ITEMS.UTILITY"> <a href="" actionable-id="menu_{{::menuItem.displayName}}"> <span class="icon {{ ::menuItem.icon }}"></span> <span>{{ menuItem.displayName | translate }}</span> </a> </li> </ul> </div> </div> </div> </nav> <div class="nav-mobile__backdrop" ng-if="!$ctrl.isMobileHidden" ng-click="$ctrl.toggleMobileMenu()"></div> </header> <tng-contact-us-menu class="main-nav--mobile" ng-if="$ctrl.isContactUsMenuOpen"></tng-contact-us-menu> <tng-feedback-survey></tng-feedback-survey> <tng-print-header name="$ctrl.getFullName()"></tng-print-header> <tng-visitor-search ng-if="$ctrl.showVisitorSiteSearch" on-close="$ctrl.closeSearch()"></tng-visitor-search> '},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(810),a=i(s),o=n(811),r=i(o),l={template:r.default,controller:a.default};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i,s,o,r,l,c){(0,a.default)(this,e),this.SessionService=t,this.MenuService=n,this.menuConstants=i,this.stateConstants=s,this.$state=o,this.$scope=r,this.$log=l,this.$rootScope=c,this.fetchMenuItems()}return(0,r.default)(e,[{key:"$onInit",value:function(){var e=this;this.MenuService.subscribe(this.$scope,function(){e.fetchMenuItems()})}},{key:"fetchMenuItems",value:function(){this.menuItems=this.MenuService.getMenuItems(this.menuConstants.MENU_TYPES.SECONDARY),this.actionMenuItems=this.MenuService.getMenuItems(this.menuConstants.MENU_TYPES.SECONDARY_ACTIONS)}},{key:"isSubNavVisible",value:function(){return(this.menuItems.length>0||this.actionMenuItems.length>0)&&this.$state.$current.name!==this.stateConstants.EXISTING_CLIENT_ONBOARDING}},{key:"handleNavItemClick",value:function(e,t){this.MenuService.handleMenuInteraction(e,t)}}]),e}();l.$inject=["SessionService","MenuService","menuConstants","stateConstants","$state","$scope","$log","$rootScope"],t.default=l,e.exports=t.default},function(e,t){e.exports='<nav class="nav--sub" ng-if="$ctrl.isSubNavVisible()"> <div class="container"> <ul class="nav__list"> <li class="nav__item" ng-repeat="menuItem in $ctrl.menuItems"> <a class="nav__link" actionable-id="menu_{{menuItem.action | translate}}" title="{{ menuItem.displayName | translate }}" ng-class="{ \'is-active\': $ctrl.$state.includes(menuItem.action) }" href="" ng-click="$ctrl.handleNavItemClick(menuItem.type, menuItem.action)"> {{ menuItem.displayName | translate }} </a> </li> </ul> <nav class="navtools--sub"> <ul class="navtools__list"> <li class="navtools__item navtools__item--sub" ng-repeat="menuItem in $ctrl.actionMenuItems"> <a class="navtools__link--sub" ng-click="$ctrl.handleNavItemClick(menuItem.type, menuItem.action)" href="" actionable-id="submenu_{{menuItem.action | translate}}" title="{{ menuItem.displayName | translate }}"> <span class="navtools__link-label">{{ menuItem.displayName | translate }}</span> <span class="navtools__icon {{ menuItem.icon }}"></span> </a> </li> </ul> </nav> </div> </nav> '},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(813),a=i(s),o=n(814),r=i(o);n(815);var l={template:r.default,controller:a.default};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(64),a=i(s),o=n(0),r=i(o),l=n(1),c=i(l),u=function(){function e(t,n,i){(0,r.default)(this,e),this.menuConstants=n,this.MenuService=t,this.$state=i,this.navItems=[],this.activeState=null}return(0,c.default)(e,[{key:"$onInit",value:function(){this.getNavItems()}},{key:"getNavItems",value:function(){if(this.navItems.length>0)return this.navItems;this.navItems=this.MenuService.getMenuItems(this.menuConstants.MENU_TYPES.TERTIARY);var e=!0,t=!1,n=void 0;try{for(var i,s=(0,a.default)(this.navItems);!(e=(i=s.next()).done);e=!0){var o=i.value;if(o.action===this.$state.current.name){this.activeState=o;break}}}catch(e){t=!0,n=e}finally{try{!e&&s.return&&s.return()}finally{if(t)throw n}}return this.navItems}},{key:"handleNavItemClick",value:function(e){this.activeState=e,this.MenuService.handleMenuInteraction(e.type,e.action)}},{key:"handleNavItemChange",value:function(){this.MenuService.handleMenuInteraction(this.activeState.type,this.activeState.action)}}]),e}();u.$inject=["MenuService","menuConstants","$state"],t.default=u,e.exports=t.default},function(e,t){e.exports='<div class="c-tertiary-nav"> <div class="c-tertiary-nav__nav--tablet"> <nav class="container"> <a class="c-tertiary-nav__nav-item" ng-repeat="navItem in $ctrl.getNavItems() track by $index" ng-class="{ \'active\': $ctrl.$state.is(navItem.action) }" ng-click="$ctrl.handleNavItemClick(navItem)" href="" actionable-id="tertiary_navItem_{{ $index }}"> {{ navItem.displayName | translate }} </a> </nav> </div> <div class="c-tertiary-nav__nav--mobile container"> <select class="select select--light" ng-model="$ctrl.activeState" ng-change="$ctrl.handleNavItemChange()" ng-options="navItem as navItem.displayName | translate for navItem in $ctrl.navItems" actionable-id="tertiary_navSelect"> </select> </div> </div> '},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(817),s=function(e){return e&&e.__esModule?e:{default:e}}(i);n(818);var a={template:s.default,controller:function(){},bindings:{flowService:"<",asFooterBar:"@?"}};t.default=a,e.exports=t.default},function(e,t){e.exports='<div ng-class="{\'c-page-flow-controls__footer-bar\': $ctrl.asFooterBar}"> <div ng-class="{\'c-page-flow-controls__footer-bar__container\': $ctrl.asFooterBar}"> <div class="c-page-flow-controls" ng-if="!$ctrl.flowService.showConfirmExitUI" ng-class="{\'c-page-flow-controls__footer-bar__buttons\': $ctrl.asFooterBar}"> <button actionable-id="page-flow-controls-cancel" class="btn btn--edit" ng-show="$ctrl.flowService.currentFlow.BUTTONS.BTN_GRY.show" ng-disabled="$ctrl.flowService.currentFlow.BUTTONS.BTN_GRY.disable" ng-click="$ctrl.flowService.currentFlow.onButtonClick($ctrl.flowService.currentFlow.BUTTONS.BTN_GRY)"> {{ $ctrl.flowService.currentFlow.BUTTONS.BTN_GRY.type.label | translate }} </button> <button actionable-id="page-flow-controls-next" class="btn btn--orange" ng-class="{\'CB_ReadOnly\': $ctrl.flowService.CB_DISABLED_BUTTONS.includes($ctrl.flowService.BUTTONS.BTN_ORG.type)}" ng-show="$ctrl.flowService.currentFlow.BUTTONS.BTN_ORG.show" ng-disabled="$ctrl.flowService.currentFlow.BUTTONS.BTN_ORG.disable" ng-click="$ctrl.flowService.currentFlow.onButtonClick($ctrl.flowService.currentFlow.BUTTONS.BTN_ORG)"> {{ $ctrl.flowService.currentFlow.BUTTONS.BTN_ORG.type.label | translate }} </button> <button actionable-id="page-flow-controls-discard" class="btn btn--warn" ng-show="$ctrl.flowService.currentFlow.BUTTONS.BTN_RED.show" ng-disabled="$ctrl.flowService.currentFlow.BUTTONS.BTN_RED.disable" ng-click="$ctrl.flowService.currentFlow.onButtonClick($ctrl.flowService.currentFlow.BUTTONS.BTN_RED)"> {{ $ctrl.flowService.currentFlow.BUTTONS.BTN_RED.type.label | translate }} </button> </div> <div class="c-page-flow-controls" ng-if="$ctrl.flowService.showConfirmExitUI" ng-class="{\'c-page-flow-controls__footer-bar__buttons\': $ctrl.asFooterBar}"> <button actionable-id="page-flow-controls-deny" class="btn btn--edit" ng-click="$ctrl.flowService.denyExit()"> {{ ::\'global.pageFlow.buttons.cancel\' | translate }} </button> <button actionable-id="page-flow-controls-allow" class="btn" ng-click="$ctrl.flowService.allowExit()"> {{ ::\'global.pageFlow.buttons.confirm\' | translate }} </button> </div> </div> </div> '},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(820),s=function(e){return e&&e.__esModule?e:{default:e}}(i);n(821);var a={template:s.default,controller:function(){},bindings:{flowService:"<",buttons:"<"}};t.default=a,e.exports=t.default},function(e,t){e.exports='<div ng-if="$ctrl.flowService.showConfirmExitUI" class="btn__row"> <button actionable-id="page-flow-footer-btn-deny" class="btn btn--edit" ng-click="$ctrl.flowService.denyExit()"> {{ ::\'global.pageFlow.buttons.cancel\' | translate }} </button> <button actionable-id="page-flow-footer-btn-allow" class="btn btn--tangerine" ng-click="$ctrl.flowService.allowExit()"> {{ ::\'global.pageFlow.buttons.exit\' | translate }} </button> </div> <div ng-if="!$ctrl.flowService.showConfirmExitUI" class="btn__row c-page-flow-dialog-footer__buttons"> <button actionable-id="page-flow-footer-btn__{{$index}}" ng-repeat="button in $ctrl.buttons" class="btn" ng-class="{\'btn--edit\': (button.isDisabled && button.isDisabled()),\n               \'btn--prev\': (button.isBack || button.isCancel)}" ng-click="button.click()" ng-disabled="(button.isDisabled && button.isDisabled()) || $ctrl.flowService.inLoadingMode" ng-bind="button.label"> </button> </div> '},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(823),a=i(s),o=n(824),r=i(o);n(825);var l={template:a.default,controller:r.default,transclude:!0};t.default=l,e.exports=t.default},function(e,t){e.exports='<div class="c-loading-spinner"> <div class="c-loading-spinner__container"> <div class="c-loading-spinner__spinner"> </div> <div class="c-loading-spinner__text" ng-transclude></div> </div> </div> '},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(i),a=function e(){(0,s.default)(this,e)};a.$inject=[],t.default=a,e.exports=t.default},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(827),a=i(s),o=n(828),r=i(o);n(829);var l={template:a.default,controller:r.default,bindings:{onClose:"&"}};t.default=l,e.exports=t.default},function(e,t){e.exports='<tng-modal-dialog class="c-idle-notice-modal" is-visible="$ctrl.showWarning" analytics-id="idle-notice" ng-if="$ctrl.showWarning"> <span class="c-idle-notice-modal__icon icon-clock"></span> <h3 translate>{{ ::\'global.idleNotice.title\' }}</h3> <p translate>{{ ::\'global.idleNotice.tagLine\' }}</p> <footer> <button actionable-id="idle-notice-logout" class="btn--reversed" ng-click="$ctrl.logout()" translate> {{ ::\'global.idleNotice.logout\' }} </button> <button actionable-id="idle-notice-continue" class="btn--reversed" ng-click="$ctrl.restartIdleTimeout()" translate> {{ ::\'global.idleNotice.continue\' }} </button> </footer> </tng-modal-dialog> '},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(13),a=i(s),o=n(0),r=i(o),l=n(1),c=i(l),u=function(){function e(t,n,i,s,a,o,l,c,u,d,h,_,g,S){var f=this;(0,r.default)(this,e),this.$log=t,this.$rootScope=n,this.$scope=i,this.$state=s,this.$translate=a,this.AuthService=o,this.SessionService=l,this.stateConstants=c,this.EnvironmentService=u,this.EventBusService=d,this.gmConstants=h,this.GlobalModalsService=_,this.appStateConstants=g,this.timeRemaining=null,this.showWarning=!1,this.Idle=S,this.idleEvents={IdleWarn:{callback:function(e,t){f._updateTimeRemaining(t)},cleanup:null},IdleTimeout:{callback:function(){f._updateTimeRemaining(0),f.$translate("global.errorCodes.SESSION_TIMEOUT").then(function(e){f.SessionService.errorMessage=e,f.SessionService.isTimeout=!0,f.AuthService.logout(!0,!0),f.showWarning=!1,f.GlobalModalsService.closeAllModals()})},cleanup:null},Keepalive:{callback:function(){f.EventBusService.publish(f.appStateConstants.TPW_KEEP_ALIVE)},cleanup:null}}}return(0,c.default)(e,[{key:"$onInit",value:function(){var e=this;(0,a.default)(this.idleEvents).forEach(function(t){var n=e.idleEvents[t];e.$log.debug("idleNotice: registering",t,"listener"),n.cleanup=e.$rootScope.$on(t,n.callback)})}},{key:"$onDestroy",value:function(){var e=this;(0,a.default)(this.idleEvents).forEach(function(t){e.idleEvents[t].cleanup&&(e.$log.debug("idleNotice: unregistering",t,"listener"),e.idleEvents[t].cleanup())})}},{key:"logout",value:function(){this.$log.debug("Logout"),this.AuthService.logout(!0,!0),this.timeRemaining=0,this.showWarning=!1}},{key:"restartIdleTimeout",value:function(){this.$log.debug("Restart idle timeout"),this.showWarning=!1,this.EventBusService.publish(this.appStateConstants.KEEP_ALIVE),this.Idle.watch(),this.Idle._options().autoResume="idle"}},{key:"_updateTimeRemaining",value:function(e){var t=this;this.$scope.$evalAsync(function(){t.timeRemaining=e,t.showWarning=!0}),this.Idle._options().autoResume="off"}}]),e}();u.$inject=["$log","$rootScope","$scope","$state","$translate","AuthService","SessionService","stateConstants","EnvironmentService","EventBusService","globalModalsConstants","GlobalModalsService","appStateConstants","Idle"],t.default=u,e.exports=t.default},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(831),a=i(s),o=n(832),r=i(o);n(833);var l={template:a.default,controller:r.default,bindings:{onClose:"&",title:"@?",tagLine:"@?"}};t.default=l,e.exports=t.default},function(e,t){e.exports='<tng-modal-dialog class="c-idle-notice-modal" is-visible="$ctrl.showPopup" analytics-id="idle-notice" ng-if="$ctrl.showPopup"> <span class="c-idle-notice-modal__icon icon-clock"></span> <h3>{{::$ctrl.title | translate }}</h3> <p>{{::$ctrl.tagLine | translate }}</p> <footer> <button actionable-id="idle-notice-logout" class="btn--reversed" ng-click="$ctrl.logout()" translate> {{ ::\'global.yes\' }} </button> <button actionable-id="idle-notice-continue" class="btn--reversed" ng-click="$ctrl.continue()" translate> {{ ::\'global.no\' }} </button> </footer> </tng-modal-dialog> '},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i,s,o,r){(0,a.default)(this,e),this.$log=t,this.$scope=n,this.AuthService=i,this.EventBusService=s,this.backButtonConstants=o,this.appStateConstants=r,this.showPopup=!1}return(0,r.default)(e,[{key:"$onInit",value:function(){var e=this;this.title=this.title||"global.appConfirmExit.title",this.tagLine=this.tagLine||"global.appConfirmExit.tagLine",this.EventBusService.subscribe(this.$scope,this.backButtonConstants.EVENTS.CONFIRM_EXIT,function(){e.openPopup()})}},{key:"logout",value:function(){this.$log.debug("Logout"),this.AuthService.logout(),this.closePopup()}},{key:"continue",value:function(){this.$log.debug("Restart idle timeout"),this.EventBusService.publish(this.appStateConstants.KEEP_ALIVE),this.closePopup()}},{key:"openPopup",value:function(){this.showPopup=!0}},{key:"closePopup",value:function(){this.showPopup=!1}}]),e}();l.$inject=["$log","$scope","AuthService","EventBusService","backButtonConstants","appStateConstants"],t.default=l,e.exports=t.default},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(835),a=i(s),o=n(836),r=i(o);n(837);var l={controller:a.default,template:r.default,bindings:{confirmTitleKey:"@?"}};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t){(0,a.default)(this,e),this.$log=t}return(0,r.default)(e,[{key:"$onInit",value:function(){this.$log.debug("confirm exit controller $onInit",this.confirmTitleKey),this.confirmTitleKey=this.confirmTitleKey||"global.warning.subTitle"}}]),e}();l.$inject=["$log"],t.default=l,e.exports=t.default},function(e,t){e.exports='<div class="c-confirm-exit"> <p class="c-confirm-exit__exit-info"> {{::$ctrl.confirmTitleKey | translate }} </p> <div class="c-confirm-exit__icon icon icon--warning"> <span class="icon-warning"></span> </div> </div> '},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(839),a=i(s),o=n(840),r=i(o);n(841);var l={template:a.default,controller:r.default,bindings:{onClose:"&"}};t.default=l,e.exports=t.default},function(e,t){e.exports='<tng-modal-dialog class="c-connection-lost-modal" is-visible="$ctrl.showPopup" analytics-id="connection-lost" ng-if="$ctrl.showPopup"> <span class="c-connection-lost-modal__icon icon-clock"></span> <h3>{{::$ctrl.title | translate }}</h3> <p>{{::$ctrl.description | translate }}</p> <footer> <button actionable-id="connection-lost" class="btn--reversed" ng-click="$ctrl.closePopup()" translate> {{ ::\'global.components.buttons.close\' }} </button> </footer> </tng-modal-dialog> '},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i,s){(0,a.default)(this,e),this.$log=t,this.$scope=n,this.EventBusService=i,this.eventConstants=s,this.showPopup=!1}return(0,r.default)(e,[{key:"$onInit",value:function(){var e=this;this.EventBusService.subscribe(this.$scope,this.eventConstants.CONNECTION_LOST,function(){e.title="global.connectionLost.title",e.description="global.connectionLost.tagLine",e.openPopup()}),this.EventBusService.subscribe(this.$scope,this.eventConstants.LOGIN_CONNECTION_LOST,function(){e.title="",e.description="global.errorCodes.LOGIN_CONNECTION_LOST",e.openPopup()})}},{key:"openPopup",value:function(){this.showPopup=!0}},{key:"closePopup",value:function(){this.showPopup=!1}}]),e}();l.$inject=["$log","$scope","EventBusService","eventConstants"],t.default=l,e.exports=t.default},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(843),a=i(s),o=n(844),r=i(o);n(845);var l={controller:a.default,template:r.default,bindings:{isLoadingKey:"@?"}};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t){(0,a.default)(this,e),this.$log=t}return(0,r.default)(e,[{key:"$onInit",value:function(){this.$log.debug("in progress controller $onInit",this.isLoadingKey),this.isLoadingKey=this.isLoadingKey||"global.commonWords.loading"}}]),e}();l.$inject=["$log"],t.default=l,e.exports=t.default},function(e,t){e.exports='<div class="c-loading-in-progress loading-container__is-loading"> <div class="c-loading-in-progress__loader"></div> <div class="c-loading-in-progress__label"> {{ $ctrl.isLoadingKey | translate }} </div> </div> '},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(847),a=i(s),o=n(848),r=i(o);n(849);var l={controller:a.default,template:r.default,bindings:{loadingDoneKey:"@?"}};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t){(0,a.default)(this,e),this.$log=t}return(0,r.default)(e,[{key:"$onInit",value:function(){this.$log.debug("in progress controller $onInit",this.loadingDoneKey),this.loadingDoneKey=this.loadingDoneKey||"global.commonWords.success"}}]),e}();l.$inject=["$log"],t.default=l,e.exports=t.default},function(e,t){e.exports='<div class="c-loading-done loading-container__done-loading"> <div class="icon icon--loading-done"> <span class="icon-complete2"></span> </div> <p class="c-loading-done__label"> {{::$ctrl.loadingDoneKey | translate }} </p> </div> '},function(e,t){},function(e,t,n){"use strict";function i(){return{bindToController:{tngNavList:"<"},controller:a.default,controllerAs:"navList",restrict:"A",template:"<ng-transclude></ng-transclude>",transclude:!0}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(851),a=function(e){return e&&e.__esModule?e:{default:e}}(s);i.$inject=[],t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t){(0,a.default)(this,e),this.MenuService=t,this.items=[]}return(0,r.default)(e,[{key:"$onChanges",value:function(e){e.tngNavList&&(this.items=this.MenuService.getMenuItems(e.tngNavList.currentValue))}}]),e}();l.$inject=["MenuService"],t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(853),a=i(s),o=n(854),r=i(o);n(855);var l={template:r.default,controller:a.default,transclude:!0,bindings:{position:"<"}};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(){(0,a.default)(this,e),this.$scope={}}return(0,r.default)(e,[{key:"$onInit",value:function(){this.position=void 0===this.position?1:this.position}}]),e}();l.$inject=[],t.default=l,e.exports=t.default},function(e,t){e.exports='<div class="c-sticky-button c-sticky-button--right"> <ng-transclude></ng-transclude> </div>'},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(857),a=i(s),o=n(858),r=i(o);n(859);var l={template:r.default,controller:a.default,require:{ngModel:"?ngModel"},bindings:{onUpdate:"&",ngDisabled:"<",customErrorMsg:"@",inputName:"@"}};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n){(0,a.default)(this,e),this.$scope=t,this.$timeout=n}return(0,r.default)(e,[{key:"$onInit",value:function(){var e=this;this.ngModel&&(this.switchValue=!1,this.deregisterWatch=this.$scope.$watch(function(){return e.ngModel.$viewValue},this._updateInternalValue.bind(this)))}},{key:"updateExternal",value:function(){var e=this;this.ngModel&&(this.onUpdate&&this.$timeout(function(){e.onUpdate({$event:{key:"switchValue",switchValue:e.switchValue}})},1),this.ngModel.$setViewValue(this.switchValue))}},{key:"_updateInternalValue",value:function(){this.ngModel&&this.ngModel.$viewValue?this.switchValue=this.ngModel.$viewValue:this.switchValue=!1}}]),e}();l.$inject=["$scope","$timeout"],t.default=l,e.exports=t.default},function(e,t){e.exports='<label class="c-switch"> <input type="checkbox" ng-model="$ctrl.switchValue" ng-change="$ctrl.updateExternal()" ng-disabled="$ctrl.ngDisabled" actionable-id="{{ $ctrl.inputName }}"/> <div class="slider round"> <div class="slider-thumb"></div> </div> </label>'},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(861);var i=n(862),s=function(e){return e&&e.__esModule?e:{default:e}}(i),a={template:s.default,controller:function(){},transclude:{footer:"?footer"},require:{ngModel:"?ngModel"},bindings:{ngDisabled:"<"}};t.default=a,e.exports=t.default},function(e,t){},function(e,t){e.exports='<div class="c-tile__item" ng-init="$ctrl.c_tile_hover = false" ng-class="{\'c-tile__item--hover\' : $ctrl.c_tile_hover}" ng-disabled="$ctrl.ngDisabled" ng-mouseenter="$ctrl.c_tile_hover = true" ng-mouseleave="$ctrl.c_tile_hover = false" ng-transclude></div> <div class="c-tile--footer" ng-transclude="footer"> </div>'},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(864),a=i(s),o=n(865),r=i(o);n(866);var l={template:a.default,controller:r.default,bindings:{height:"@",color:"@",width:"<",secondWidth:"<",secondColor:"@"}};t.default=l,e.exports=t.default},function(e,t){e.exports="<div class=\"c-progress-bar__wrapper\" ng-style=\"{'height': $ctrl.height + 'px'}\"> <div class=\"c-progress-bar__bar c-progress-bar__bar--lighter\" ng-show=\"$ctrl.secondWidth\" ng-style=\"{\n       'width': $ctrl.secondWidth + '%',\n       'background-color': $ctrl.getSecondColor(),\n       'height': $ctrl.height + 'px'\n       }\"> </div> <div class=\"c-progress-bar__bar c-progress-bar__bar--darker\" ng-style=\"{\n       'width':  $ctrl.width + '%',\n       'background-color': $ctrl.color,\n       'height': $ctrl.height + 'px'\n       }\"> </div> </div> "},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t){(0,a.default)(this,e),this.$log=t}return(0,r.default)(e,[{key:"getSecondColor",value:function(){return this.secondColor?this.secondColor:this.color}}]),e}();l.$inject=["$log"],t.default=l,e.exports=t.default},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(868),a=i(s),o=n(869),r=i(o);n(870);var l={template:r.default,controller:a.default,bindings:{states:"<",currentState:"<",totalSteps:"<",currentStepInSubFlow:"<?",totalStepsInSubFlow:"<?",currentStateInParentFlow:"<?",subflowFractionOverride:"<?"}};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(64),a=i(s),o=n(0),r=i(o),l=n(1),c=i(l),u=function(){function e(){(0,r.default)(this,e),this.progressWidth=0,this.visibleStatesCount=0}return(0,c.default)(e,[{key:"$onInit",value:function(){this.calculateVisibleStatesCount(),this.calculateProgressWidth()}},{key:"$onChanges",value:function(){this.currentStateInParentFlow&&!this.currentState.subFlow&&(this.currentState.subFlow={parentState:this.currentStateInParentFlow.parentStateKey}),this.calculateVisibleStatesCount(),this.calculateProgressWidth()}},{key:"isInProgress",value:function(e){return!(!e||!this.currentState)&&(this.currentState===e||"subFlow"in this.currentState&&this.currentState.subFlow.parentState===e.parentStateKey)}},{key:"calculateVisibleStatesCount",value:function(){var e=0,t=!0,n=!1,i=void 0;try{for(var s,o=(0,a.default)(this.states);!(t=(s=o.next()).done);t=!0)s.value.subState||(e+=1)}catch(e){n=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw i}}this.visibleStatesCount=e}},{key:"calculateProgressWidth",value:function(){var e=this,t=100,n=1;void 0!==this.subflowFractionOverride&&(n=this.subflowFractionOverride);var i=this.states.findIndex(function(t){return e.isInProgress(t)});this.currentStepInSubFlow&&this.totalStepsInSubFlow&&(n=(this.currentStepInSubFlow-1)/this.totalStepsInSubFlow),t=(i+n)/this.visibleStatesCount*100,t>=100&&(t=100),this.progressWidth=t+"%"}}]),e}();u.$inject=[],t.default=u,e.exports=t.default},function(e,t){e.exports='<div class="c-progress-bar-buttons"> <div class="c-progress-bar-buttons__bar"> <div class="c-progress-bar-buttons__bar__completed" ng-style="{ \'width\': $ctrl.progressWidth }"></div> </div> <div class="progress-bar-buttons-all progress-bar-buttons-{{$ctrl.visibleStatesCount}}"> <div class="c-progress-bar-button small" ng-repeat="state in $ctrl.states" ng-class="{ \'c-progress-bar-button--in-progress\': $ctrl.isInProgress(state) }"> <div class="c-progress-bar-button__inner"> <div class="c-progress-bar-button__inner-step-name"> <strong class="c-progress-bar-button__inner-step-index">{{ $index + 1 }}</strong> <span class="c-progress-bar-button__inner-step-title">{{ state.titleKey | translate }}</span> </div> </div> </div> </div> </div> '},function(e,t){},function(e,t,n){"use strict";function i(){return{restrict:"A",link:function(e,t,n){var i=e.$watch(n.actionableId,function(){n.actionableId&&(i(),n.$set("id",n.actionableId),"FORM"!==t[0].tagName&&n.$set("name",n.actionableId))})}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i,i.$inject=[],e.exports=t.default},function(e,t,n){"use strict";function i(){return{scope:!0,restrict:"A",controller:a.default,controllerAs:"$ctrl"}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(873),a=function(e){return e&&e.__esModule?e:{default:e}}(s);n(874),i.$inject=[],t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i,s,o,r,l,c,u,d,h){var _=this;(0,a.default)(this,e),this.$state=n,this.AppStateService=s,this.EnvironmentService=o,this.flowService=r,this.SessionService=l,this.EventBusService=c,this.stateConstants=u,this.appStateConstants=d,this.loginEvents=h.LOGIN_EVENTS,this._hasLogin=!1,this.isNative=o.isNative(),this.isAndroidNative=o.isNative()&&o.isAndroid(),this.EventBusService.subscribe(t,this.loginEvents.SUCCESSFUL_LOGIN,function(){_._hasLogin=!0}),this.EventBusService.subscribe(t,this.appStateConstants.APPLICATION_LOGOUT,function(){_._hasLogin=!1})}return(0,r.default)(e,[{key:"getStyleClass",value:function(){var e=angular.element(document).find("body");this.removeClass(e),this.isNative?(this.isUsingNativeGlobalBackground()&&e.addClass("application-theme-native"),this.isUsingBusinessNativeLoginTheme()?(e.addClass("application-theme-native--mobile-login"),e.addClass("application-theme-native--business-login")):this.isUsingPersonalNativeLoginTheme()&&(e.addClass("application-theme-native--mobile-login"),e.addClass("application-theme-native--personal-login"))):e.addClass("application-theme-web")}},{key:"removeClass",value:function(e){e.removeClass("application-theme-web"),e.removeClass("application-theme-native"),e.removeClass("application-theme-native--mobile-login"),e.removeClass("application-theme-native--business-login"),e.removeClass("application-theme-native--personal-login")}},{key:"isUsingBusinessNativeLoginTheme",value:function(){var e=this._isBusinessLoginTheme();return this.isNative&&e}},{key:"isUsingPersonalNativeLoginTheme",value:function(){var e=!this.flowService.inLoadingMode&&!this._hasLogin&&this._isPersonalLoginTheme();return this.isNative&&(e||!this.$state.current.name||!this.AppStateService.hasAppLaunched())}},{key:"_isPersonalLoginTheme",value:function(){return this.$state.current.name===this.stateConstants.LOGIN&&this.flowService.currentState===this.flowService.STATES.USER_ID}},{key:"_isBusinessLoginTheme",value:function(){return this.$state.current.name===this.stateConstants.LOGIN&&(this.flowService.currentState===this.flowService.STATES.BUSINESS_LOGIN||this.flowService.currentState===this.flowService.STATES.AUTHORIZED_USER)}},{key:"isMobileLoginPage",value:function(){return this.isNative&&this._isLoginPage()}},{key:"_isLoginPage",value:function(){return this._isPersonalLoginTheme()||this._isBusinessLoginTheme()}},{key:"isUsingWebTheme",value:function(){return!this.isNative&&this.$state.current.name}},{key:"isUsingNativeTheme",value:function(){var e=!this._isLoginPage()||this._isLoginPage()&&this.flowService.inLoadingMode||this._hasLogin;return this.isNative&&e&&this.$state.current.name}}]),e}();l.$inject=["$scope","$state","$timeout","AppStateService","EnvironmentService","LoginFlowService","SessionService","EventBusService","stateConstants","appStateConstants","loginConstants"],t.default=l,e.exports=t.default},function(e,t){},function(e,t,n){"use strict";function i(e,t,n){return{restrict:"A",link:function(i,s,a){var o=angular.isArray(a)?a[0].autofocusDevice:a.autofocusDevice;switch(o=o||n.DESKTOP_ONLY){case n.NONE:return;case n.MOBILE_ONLY:if(!t.isMobile())return;break;case n.DESKTOP_ONLY:if(t.isMobile())return}e(function(){s[0].focus()})}}}Object.defineProperty(t,"__esModule",{value:!0}),i.$inject=["$timeout","EnvironmentService","autoFocusConstants"],t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e,t){return{restrict:"A",link:function(n,i,s){if(s.tngClickOutside){var a=i[0],o=e(s.tngClickOutside),r=function(e){a===e.target||a.contains(e.target)||n.$apply(o)},l=t.isIOS()?"touchstart":"click";window.addEventListener(l,r,!0),n.$on("$destroy",function(){return window.removeEventListener(l,r)})}}}}Object.defineProperty(t,"__esModule",{value:!0}),i.$inject=["$parse","EnvironmentService"],t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e){return{restrict:"A",link:function(t,n,i){if(i.tngClickOutsideForNavMenu){var s=n[0],a=e(i.tngClickOutsideForNavMenu),o=function(e){s===e.target||s.contains(e.target)||t.$apply(a)};window.addEventListener("click",o,!0),t.$on("$destroy",function(){return window.removeEventListener("click",o)})}}}}Object.defineProperty(t,"__esModule",{value:!0}),i.$inject=["$parse"],t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(){return{scope:{trigger:"=tngFocus"},link:function(e,t){e.$watch("trigger",function(n){!0===n&&(t[0].focus(),e.trigger=!1)})}}}Object.defineProperty(t,"__esModule",{value:!0}),i.$inject=[],t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e){function t(t,n,i){n.bind("mousewheel",function(t){var n=-1*t.originalEvent.wheelDelta+e.scrollTop();t.preventDefault(),"false"!==i.tngIgnoreMouseWheel&&e.scrollTop(n)})}return{restrict:"A",link:t}}Object.defineProperty(t,"__esModule",{value:!0}),i.$inject=["$document"],t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(){return{restrict:"A",link:function(e,t){angular.element(t)[0].addEventListener("focusin",function(){angular.element(t)[0].classList.add(s)}),angular.element(t)[0].addEventListener("focusout",function(){angular.element(t)[0].classList.remove(s)})}}}Object.defineProperty(t,"__esModule",{value:!0});var s="c-list-with-focusable-element--has-focused-element";i.$inject=[],t.default=i,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t,n,i,s){return{restrict:"A",compile:function(a,o){var r=t(o.tngClick),l=o[s.LEVEL2_AUTH_ATTRIBUTE],c=angular.isDefined(l)&&"false"!==l;return o.$observe(s.LEVEL2_AUTH_ATTRIBUTE,function(e){c="false"!==e}),function(t,s){s.on("click",function(s){var a=function(){return e.$$phase?r(t,{$event:s}):t.$apply(function(){r(t,{$event:s})})};if(!n.isNative()||!c)return void a();i.requestLevel2().then(a)})}}}};i.$inject=["$rootScope","$parse","EnvironmentService","StepUpService","stepUpConstants"],t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(){return{require:"^ngModel",restrict:"A",link:function(e,t,n,i){function s(e){return angular.isString(e)?e.substring(0,o):e}function a(e){if(i.$isEmpty(e))return e;var t=e.substring(0,o);return e!==t&&(i.$setViewValue(t),i.$render()),t}var o=Number(n.maxlength);i.$formatters.unshift(s),i.$parsers.unshift(a)}}}Object.defineProperty(t,"__esModule",{value:!0}),i.$inject=[],t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(){return{require:"^ngModel",restrict:"A",link:function(e,t,n,i){function s(e){return i.$isEmpty(e)?e:i.$isEmpty(e)?e:e.replace(/[^\d]/g,"")}function a(e){if(i.$isEmpty(e))return e;var t=e.replace(/[^\d]/g,"");return t!==e&&(i.$setViewValue(t),i.$render()),t}i.$formatters.unshift(s),i.$parsers.unshift(a)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i,i.$inject=[],e.exports=t.default},function(e,t,n){"use strict";function i(e){return{restrict:"A",link:function(t,n,i){var s=t.$watch(i.target,function(){s(),e.isNative()&&i.$set("target","_system")})}}}Object.defineProperty(t,"__esModule",{value:!0}),i.$inject=["EnvironmentService"],t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e,t){return{restrict:"A",link:function(e,n,i){var s=t.isWebKit()?"tel":"password";n.addClass("masked-pin"),i.$set("type",s)}}}Object.defineProperty(t,"__esModule",{value:!0}),i.$inject=["$compile","EnvironmentService"],t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e,t){return{restrict:"A",link:function(n,i,s){if(t.isMobile()||t.isNative()){var o={TARGET_TOP:150,PADDING_BOTTOM:window.innerHeight,TOLERANCE:5},r=void 0;try{r=JSON.parse(s.nativeInputScroll)}catch(e){r={}}if(!1!==r.enabled){var l=r.targetTop?r.targetTop:o.TARGET_TOP,c=r.paddingBottom?r.paddingBottom:o.PADDING_BOTTOM,u=void 0,d=void 0;r.anchorElement?u=i.closest(r.anchorElement)[0]:i.closest("tng-modal-dialog").length>0&&(u=i.closest(".dialog__content")[0]),d=r.paddingElement?i.closest(r.paddingElement)[0]:u,n.anchorElementScrollTop=u.scrollTop;var h=function(){e(function(){var t=i[0].getBoundingClientRect();Math.abs(t.top-l)<o.TOLERANCE||t.top<l||(angular.element(d).css({"padding-bottom":c+"px"}),e(function(){(0,a.default)(n.scrollIntervalId,u,u.scrollTop+(t.top-l))}))})},_=function(){e(function(){angular.element(d).css({"padding-bottom":""}),u.scrollTop=n.anchorElementScrollTop})};i.bind("focus",h),i.bind("blur",_),n.$on("$destroy",function(){angular.element(i).unbind("focus",h),angular.element(i).unbind("blur",_),n.scrollIntervalId&&clearInterval(n.scrollIntervalId)})}}}}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(887),a=function(e){return e&&e.__esModule?e:{default:e}}(s);i.$inject=["$timeout","EnvironmentService"],t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,s=Math.ceil(Math.max((n-t.scrollTop)/(i/16),3)),a=void 0;e=setInterval(function(){if(a===t.scrollTop&&clearInterval(e),Math.abs(n-t.scrollTop)<=s)clearInterval(e);else{a=t.scrollTop;var i=t.scrollTop;t.scrollTop=i+s}},16)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t,n){return{restrict:"A",link:function(i,s,a){var o=e.isNative(),r=e.getBaseUrl(),l=a.tngAbsoluteHref;s.on("click",function(){o&&l&&"string"==typeof l&&(0===l.indexOf("/")?t.location.href=r+l:0===l.indexOf("http")?t.location.href=l:n.url(l))})}}};i.$inject=["EnvironmentService","$window","$location"],t.default=i,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t){return{restrict:"A",replace:!0,link:function(n,i,s){n.$watch(s.tngBindHtml,function(s){var a=t.getTrustedHtml(s);i.html(a),e(i.contents())(n)})}}};i.$inject=["$compile","$sce"],t.default=i,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(891),s=function(e){return e&&e.__esModule?e:{default:e}}(i),a=angular.module("tangerine.app.core.providers",[]).provider("dynamicConstants",s.default);t.default=a,e.exports=t.default},function(e,t,n){"use strict";function i(){return{appendGlobalConstants:function(e,t){if(e&&t){var n=(0,a.default)(e);(0,a.default)(t).forEach(function(i){-1===n.indexOf(i)&&(e[i]=t[i])})}},$get:function(){return{}}}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(13),a=function(e){return e&&e.__esModule?e:{default:e}}(s);t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(893),a=i(s),o=n(894),r=i(o),l=n(895),c=i(l),u=n(896),d=i(u),h=n(897),_=i(h),g=n(898),S=i(g),f=n(899),v=i(f),E=n(900),p=i(E),T=n(901),m=i(T),C=n(902),A=i(C),I=n(903),O=i(I),N=n(904),y=i(N),b=n(905),L=i(b),M=n(906),R=i(M),D=n(907),P=i(D),$=n(908),U=i($),k=n(909),w=i(k),B=n(910),F=i(B),G=n(329),V=i(G),x=n(911),H=i(x),Y=n(912),q=i(Y),W=n(913),j=i(W),K=n(914),Q=i(K),z=n(915),X=i(z),Z=n(916),J=i(Z),ee=n(917),te=i(ee),ne=n(920),ie=i(ne),se=n(208),ae=i(se),oe=n(921),re=i(oe),le=n(922),ce=i(le),ue=n(923),de=i(ue),he=n(924),_e=i(he),ge=n(925),Se=i(ge),fe=n(926),ve=i(fe),Ee=n(927),pe=i(Ee),Te=n(928),me=i(Te),Ce=n(330),Ae=i(Ce),Ie=n(929),Oe=i(Ie),Ne=n(930),ye=i(Ne),be=n(933),Le=i(be),Me=n(934),Re=i(Me),De=n(331),Pe=i(De),$e=n(335),Ue=i($e),ke=n(935),we=i(ke),Be=n(936),Fe=i(Be),Ge=n(937),Ve=i(Ge),xe=angular.module("tangerine.app.core.services",[]).service("AccountHelpersService",a.default).service("AnalyticsService",c.default).service("AppStateService",d.default).service("AuthService",_.default).service("AnchorService",S.default).service("BackButtonService",U.default).service("BusinessDaysService",v.default).service("CustomerInfoService",p.default).service("EventBusService",m.default).service("MenuService",A.default).service("InboxService",O.default).service("GlobalModalsService",y.default).service("CurrencyService",L.default).service("EnvironmentService",R.default).service("EnvironmentSwitchService",P.default).service("ExternalLinkService",w.default).service("UserService",V.default).service("PollerService",H.default).service("ErrorService",F.default).service("EventBusService",m.default).service("NativeService",q.default).service("RequesterService",j.default).service("RequesterMobileService",Q.default).service("StorageService",X.default).service("ReferenceDataService",J.default).service("LocaleService",te.default).service("ScrollService",ie.default).service("DateService",ae.default).service("ScrollService",ie.default).service("CredentialsTPWService",re.default).service("CredentialsMFPService",ce.default).service("IovationService",_e.default).service("IovationTPWService",Se.default).service("IovationMFPService",ve.default).service("ConfigDataService",de.default).service("ModalErrorHandlerService",pe.default).service("OrangeAlertsService",me.default).service("CustomersService",Ae.default).service("CifTypeService",Oe.default).service("BundleService",ye.default).service("UrlService",Le.default).service("TlocService",Re.default).service("eNotificationService",Pe.default).service("KYCPendingService",Ue.default).service("TimerService",we.default).service("FlowFooterService",Fe.default).service("LoginTimeoutService",Ve.default).service("AccountSummaryPrefetchService",r.default);t.default=xe,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i,s,o,r,l){(0,a.default)(this,e),this.$log=t,this.$translate=n,this.$q=i,this.$filter=o,this.ACCOUNT_TYPES=s.ACCOUNT_TYPES,this.PRODUCT_CODE_MAP=s.PRODUCT_CODE_MAP,this.CurrencyService=r,this.transPrefix="global.accountType.",this.localeService=l}return(0,r.default)(e,[{key:"getMaskedAccountNumber",value:function(e){var t=e;return t&&("number"==typeof t&&(t=t.toString()),"string"==typeof t)?"***"+t.substr(-4):""}},{key:"getMaskedCCNumber",value:function(e){var t=e;return t&&("number"==typeof t&&(t=t.toString()),"string"==typeof t&&(t=t.replace(" ",""),16===t.length))?t.substr(0,4)+" xxxx xxxx "+t.substr(-4):""}},{key:"sanitizeAccountDescription",value:function(e){var t=e;return"string"==typeof t?(t=t.replace(/tangerine|account/gi,""),t=t.replace(/\s\s/g," "),t.trim()):""}},{key:"_getProductCode",value:function(e,t){return this.PRODUCT_CODE_MAP[""+e+t]}},{key:"_getNicknameByProductCode",value:function(e){return this.$translate.instant("accountNicknames."+e)}},{key:"_getProductCodeFromAccount",value:function(e){return this._getProductCode(e.product_code||e.profile_product_type,e.currency_type||e.currency)}},{key:"_hasDefaultNickname",value:function(e){return!!this._getProductCodeFromAccount(e)}},{key:"_getDefaultNicknameFromAccount",value:function(e){var t=this._getProductCodeFromAccount(e);return this._getNicknameByProductCode(t)}},{key:"getDisplayName",value:function(e){return this.$q.resolve(this.getDisplayNameInstant(e))}},{key:"getDisplayNameInstant",value:function(e){var t="";return e?t=e.fi_name?e.fi_name:e.nickname||e.account_nick_name?e.nickname||e.account_nick_name:this._hasDefaultNickname(e)?this._getDefaultNicknameFromAccount(e):e.description||e.product_description?this.sanitizeAccountDescription(e.description||e.product_description):e.name||t:t}},{key:"getAmountDisplay",value:function(e,t,n){var i=this.$filter("currency")(e,void 0,n);return this.CurrencyService.isCanadian(t)||t&&(i=i+" "+t),i}},{key:"isAmountValid",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;return e=parseFloat(e),angular.isNumber(e)&&e>=t&&e<=n}}]),e}();l.$inject=["$log","$translate","$q","accountConstants","$filter","CurrencyService","LocaleService"],t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i,s,o){(0,a.default)(this,e),this.$q=t,this.$log=n,this.RequesterService=i,this.UserService=s,this.serviceConstants=o,this._accountsPromise=void 0,this._capabilitiesPromise=void 0}return(0,r.default)(e,[{key:"invalidate",value:function(){this._accountsPromise=void 0,this._capabilitiesPromise=void 0}},{key:"preloadAccounts",value:function(e){this._accountsPromise||(this._accountsPromise=this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.ACCOUNT_SUMMARY,{},{resetCache:e}))}},{key:"preloadCapabilities",value:function(){this._capabilitiesPromise||(this._capabilitiesPromise=this.UserService.getCapabilities())}},{key:"getAccountsPromise",value:function(){return this._accountsPromise}},{key:"getCapabilitiesPromise",value:function(){return this._capabilitiesPromise}}]),e}();l.$inject=["$q","$log","RequesterService","UserService","serviceConstants"],t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),a=i(s),o=n(29),r=i(o),l=n(0),c=i(l),u=n(1),d=i(u),h=function(){function e(t,n,i,s,a,o){(0,c.default)(this,e),this.$log=t,this.$state=n,this.$translate=i,this.$cookies=a,this.config=s.CONFIG,this.availableEvents=s.AVAILABLE_EVENTS,this.basketCheckoutSteps=s.BASKET_CHECKOUT_STEPS,this.ANALYTICS_COOKIES=s.ANALYTICS_COOKIES,this.DYNATRACE_HEADERS=s.DYNATRACE_HEADERS,this._isMobileNative="undefined"!=typeof WL,this._dynaTrace=null,this._currentPageView=null,this.$filter=o;var r=a.get(this.ANALYTICS_COOKIES.GTMOK);r&&(this._tagDynaTrace(r),this._tagGTM(r,a.get(this.ANALYTICS_COOKIES.GTMCSD)))}return(0,d.default)(e,[{key:"tagSession",value:function(e){if(e){this._customer=e;var t=moment().add(1,"months").toDate();this.$cookies.put(this.ANALYTICS_COOKIES.GTMOK,this._customer.orange_key,{expires:t,path:"/"}),this._customer.client_since_date?this.$cookies.put(this.ANALYTICS_COOKIES.GTMCSD,this._customer.client_since_date,{expires:t,path:"/"}):this.$cookies.remove(this.ANALYTICS_COOKIES.GTMCSD),this._tagDynaTrace(this._customer.orange_key),this._tagGTM(this._customer.orange_key,this._customer.client_since_date)}}},{key:"_tagDynaTrace",value:function(e){var t=this.getDynaTrace();!this._isMobileNative&&t&&(t.tagVisit(e),this.$log.debug("Tagging Dynatrace session:",e))}},{key:"_tagGTM",value:function(e,t){var n=this._getGTM();n&&n.push({orange_key:e,client_since_date:t,language:this.$translate.use(),mobile_app:this._isMobileNative,mobile_app_version:window.AppVersion})}},{key:"sendAction",value:function(e,t,n){var i=this.config[e],s=void 0===i.debug||!0===i.debug;i.dynatrace&&this._sendToDynaTrace(e,t),i.gtm&&this._sendToGTM(e,t,n),s&&this._logDebugAction(e,t,n)}},{key:"_sendToDynaTrace",value:function(e,t){var n=this.getDynaTrace();n&&(n.leaveAction(n.enterAction(e+"."+t)),this.$log.debug("Sending Dynatrace action:",e,t))}},{key:"_sendToGTM",value:function(e,t,n){var i=this,s=this._getGTM();if(s){var a={orange_key:this.$cookies.get(this.ANALYTICS_COOKIES.GTMOK),client_since_date:this.$cookies.get(this.ANALYTICS_COOKIES.GTMCSD),language:this.$translate.use(),mobile_app:this._isMobileNative,mobile_app_version:window.AppVersion};if(a.page_url=this._constructStateUrl(t,void 0),"/"!==a.page_url||e!==this.availableEvents.STATE_CHANGE_SUCCESS){if(n&&n.products&&n.products.forEach(function(e){e.name=i._normalizeOB2ProductName(e),e.quantity=e.quantity||1,e.price=e.price||1}),e===this.availableEvents.STATE_CHANGE_SUCCESS)a.event="pageview";else if(e===this.availableEvents.FLOW_STATE_CHANGE)a.event="pageview",a.page_url=t;else if(e===this.availableEvents.MODAL_SHOW)a.event="pageview",a.page_url=this.$state.$current?this._constructStateUrl(this.$state.$current.name,t):t;else if(e===this.availableEvents.NEW_CLIENT_ENROLLMENT)a.event="newClientEnrollment";else if(e===this.availableEvents.CUSTOM_EVENT)a.event="customEvent",a.eventAction=t,a.eventLabel=n&&n.label,a.eventCategory=n&&n.category,a.eventValue=n&&n.value;else if(e===this.availableEvents.BASKET_ADD_TO_CART)a.event="addToCart",a.ecommerce={add:{products:n.products}};else if(e===this.availableEvents.BASKET_REMOVE_FROM_CART)a.event="removeFromCart",a.ecommerce={remove:{products:n.products}};else if(e===this.availableEvents.BASKET_CHECKOUT_STEP)a.event="checkoutStep",a.ecommerce={checkout:{actionField:{step:n.step},products:n.products}};else if(e===this.availableEvents.BASKET_CONFIRMATION)a.event="basketConfirmation",a.productCodes=Array.isArray(n.products)?n.products.map(function(e){return e.id}).join(","):"",a.ecommerce={purchase:{actionField:{id:n.transaction_id},products:n.products}};else if(e===this.availableEvents.PROMOTION_VIEW)a.event="promotionView",a.ecommerce={event:{promoView:{promotions:[{id:n.id,name:n.name,creative:n.interactionPoint,position:n.pos}]}}};else{if(e!==this.availableEvents.PROMOTION_CLICK)return;a.event="promotionClick",a.ecommerce={event:{promoClick:{promotions:[{id:n.id,name:n.name,creative:n.interactionPoint,position:n.pos}]}}}}s.push(a),this._currentPageView=a.page_url,this.$log.debug("Sending GTM event:",e,t,a)}}}},{key:"_constructStateUrl",value:function(e,t){if(t=t||"",!e)return t;var n=this.$state.get(e);if(!n||!n.url)return t;var i=n.url.replace(/\/:[a-z0-9_-]+/gi,""),s=i.indexOf("?");s>-1&&(i=i.substr(0,s)),t=i+t;var a=n.parent;if(!a){var o=e.split(".");o.length>1&&(o.pop(),a=o.join("."))}return a?this._constructStateUrl(a,t):t}},{key:"_logDebugAction",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.$log.debug("Tracking action:",e,t,n,{title:"params stringified for ease of reporting",params:(0,r.default)(n)})}},{key:"getDynaTrace",value:function(){return this._dynaTrace||(this._isMobileNative?this._dynaTrace=void 0!==window.Dynatrace?new window.Dynatrace:void 0:this._dynaTrace=void 0!==window.dynaTrace?window.dynaTrace:void 0),this._dynaTrace}},{key:"_getGTM",value:function(){return this._dataLayer||(this._dataLayer=window.dataLayer),this._dataLayer}},{key:"sendActionOB2CheckoutStep",value:function(e,t){try{if(!t)return;var n=Array.isArray(t)?t:[t];n.length>0&&this.sendAction(this.availableEvents.BASKET_CHECKOUT_STEP,"",{step:e,products:n.map(function(e){return(0,a.default)({},{id:e.profile_product_type,name:e.product_description})})})}catch(e){}}},{key:"_normalizeOB2ProductName",value:function(e){try{if(window.TNG_PRODUCT_CODE_MAP_EN){var t=window.TNG_PRODUCT_CODE_MAP_EN[e.id];return this.$log.debug("Normalizing product name: "+e.id+" => "+t),t||e.name||e.id}}catch(e){}return e.name||e.id}},{key:"getCurrentPageView",value:function(){return this._currentPageView}},{key:"getMsgForErrCode",value:function(e){var t="global.errorCodes."+e,n=this.$translate.instant(t);if(n===t){var i=this.$filter("date")(new Date,"dd-MMM-yyyy hh:mm");t="global.errorCodes.generic",n=this.$translate.instant(t),n=n+" (Error Code: "+e+") ("+i+")"}return n}}]),e}();h.$inject=["$log","$state","$translate","analyticsConstants","$cookies","$filter","$translate"],t.default=h,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i,s,o,r,l,c,u){(0,a.default)(this,e),this.$q=t,this.$log=n,this._isInit=!1,this._applicationLaunched=!1,this.appStateConstants=i,this.EventBusService=s,this.LocaleService=o,this.SessionService=r,this.AuthService=l,this.LoginOptionService=c,this.EnvironmentService=u}return(0,r.default)(e,[{key:"initialize",value:function(){var e=this;if(this.$log.debug("AppState init"),this.isInit())return void this.$log.debug("AppState already init");this.$log.debug("AppState initializing session"),this.SessionService.initSession().then(function(){e.$log.debug("AppState initializing session Success"),e._isInit=!0,e.LocaleService.initLocale().finally(function(){e.EventBusService.publish(e.appStateConstants.APPLICATION_INIT),e._applicationLaunched=!0})}).catch(function(){e.$log.error("Application can't initialized")})}},{key:"isInit",value:function(){return this._isInit}},{key:"hasAppLaunched",value:function(){return this._applicationLaunched}},{key:"subscribe",value:function(e,t,n){this.EventBusService.subscribe(e,t,n)}}]),e}();l.$inject=["$q","$log","appStateConstants","EventBusService","LocaleService","SessionService","AuthService","LoginOptionService","EnvironmentService"],t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(29),a=i(s),o=n(0),r=i(o),l=n(1),c=i(l),u=function(){function e(t,n,i,s,a,o,l,c,u,d,h,_,g,S,f){(0,r.default)(this,e),this.$q=t,this.$state=n,this.$cookies=i,this.$log=s,this.SessionService=a,this.LoginTPWService=o,this.LoginMFPService=l,this.NativeService=d,this.LocaleService=u,this.EnvironmentService=c,this.isNative=c.isNative(),this.LoginService=this._getLoginService(),this.stateConstants=h,this.reinitLogin=!1,this.EventBusService=_,this.appStateConstants=g,this.InsightsSessionService=S,this.LoginTimeoutService=f}return(0,c.default)(e,[{key:"isAuthenticated",value:function(){return this.SessionService.isAuthenticated()}},{key:"initLogin",value:function(e,t){var n=this;return this._processRequest(function(){return n.LoginService.initLogin(e,t)})}},{key:"submitCIF",value:function(e){var t=this;this.SessionService.clientIdentifierDisplay=e.displayId||e.acn,this.SessionService.isBusiness=e.isBusiness,this._clearSessionSubmit();var n=this._processRequest(function(e){return t.LoginService.submitCIF(e)},e);return n.then(function(){e.removeID&&t._removeSavedId(e.acn)}),n}},{key:"removeCIF",value:function(e){this._removeSavedId(e.acn),this.NativeService.setSession(this.SessionService.getSession())}},{key:"checkSecret",value:function(e){var t=this;return this._clearSessionSubmit(),this._processRequest(function(e){return t.LoginService.checkSecret(e)},e)}},{key:"submitPin",value:function(e){var t=this;return this._clearSessionSubmit(),this._processRequest(function(e){return t.LoginService.checkPin(e)},e)}},{key:"getPassmarks",value:function(){return this._clearSessionSubmit(),this.isNative||(this.SessionService.passmark.url=this.base+"/passmarks"),this.$q.resolve(this.SessionService.passmark)}},{key:"logout",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.SessionService.setLastLoggedUserHash(),this.LoginService.logout().catch(function(t){e.$log.error("Logout error: "+t),"undefined"!=typeof dynaTrace&&"function"==typeof dynaTrace.reportError&&dynaTrace.reportError("MFP logout error: "+(0,a.default)(t))}).finally(function(){e.SessionService.destroyCache(),e.SessionService.cleanChallenge(),e.EnvironmentService.isNative()&&e.InsightsSessionService.deleteSession(),e.NativeService.setSession(e.SessionService.getSession()).finally(function(){if(e.EventBusService.publish(e.appStateConstants.APPLICATION_LOGOUT),t)if(e.isNative)e.$state.go(e.stateConstants.LOGIN,{sessionTimeOut:n},{reload:!0,custom:{noReturnTo:!0}});else{var i=e.LocaleService.localeDisplay.toLowerCase();window.location="/"+i+"/logout"}})})}},{key:"_getLoginService",value:function(){return this.isNative?this.LoginMFPService:this.LoginTPWService}},{key:"_clearSessionSubmit",value:function(){this.SessionService.errorMessage=null,this.SessionService.isTimeout=!1}},{key:"_processSession",value:function(){this.SessionService.isAuthenticated()&&this.NativeService.setSession(this.SessionService.getSession())}},{key:"_processRequest",value:function(e,t){var n=this,i=this.$q.defer();return e&&this.LoginTimeoutService.invokeTimer(),e(t).then(function(e){n.LoginTimeoutService.revokeTimer(),e&&e.errorMessage?n._processError(e,i):(n._processSession(),i.resolve(n.SessionService.getSession()))}).catch(function(e){n._processError(e,i)}),i.promise}},{key:"_processError",value:function(e,t){this.SessionService.errorMessage=e.errorMessage,t.reject(this.SessionService.getSession())}},{key:"_removeSavedId",value:function(e){var t=this.SessionService.savedUserIds.filter(function(t){return t.rememberMeHash!==e});if(this.SessionService.savedUserIds.length!==t.length)return this.SessionService.savedUserIds=t,void(this.isNative&&(this.SessionService.savedAuthorizedIds=this.SessionService.savedUserIds));var n=this.SessionService.savedBusinessIds.filter(function(t){return t.rememberMeHash!==e});if(this.SessionService.savedBusinessIds.length!==n.length)return void(this.SessionService.savedBusinessIds=n);this.SessionService.savedAuthorizedIds=this.SessionService.savedAuthorizedIds.filter(function(t){return t.rememberMeHash!==e})}},{key:"getPassName",value:function(e,t){return this._getExistingNameToRemember(e).then(function(e){return e&&(t.name_to_remember=e),t},function(){return t})}},{key:"_getExistingNameToRemember",value:function(e){return this.SessionService.getSavedUsers().then(function(t){var n=t.remember,i=t.defer,s=t.touch,a=t.eye,o=t.vocal;if(n&&n.length){var r=t.remember.find(function(t){return t&&t.userhash===e&&t.name_to_remember});if(r)return r.name_to_remember}var l=[i,s,a,o],c=l.find(function(t){return t&&t.userhash===e&&t.name_to_remember});return c?c.name_to_remember:null})}},{key:"saveUserInRememberMeList",value:function(e){if(e&&e.userhash&&e.name_to_remember){var t=this.SessionService.savedUserIds.find(function(t){return t.userHash===e.userhash});t?t.rememberMeHash=e.remember_me_hash:this.SessionService.savedUserIds.unshift({userHash:e.userhash,rememberMeHash:e.remember_me_hash,nameToRemember:e.name_to_remember}),this.NativeService.setSession(this.SessionService.getSession())}}},{key:"base",get:function(){return this.EnvironmentService.getAPIUrl()+"/web"}}]),e}();u.$inject=["$q","$state","$cookies","$log","SessionService","LoginTPWService","LoginMFPService","EnvironmentService","LocaleService","NativeService","stateConstants","EventBusService","appStateConstants","InsightsSessionService","LoginTimeoutService"],t.default=u,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i,s){(0,a.default)(this,e),this.$location=t,this.$anchorScroll=n,this.$timeout=i,this.EnvironmentService=s}return(0,r.default)(e,[{key:"scrollToPageContentTop",value:function(){this.$anchorScroll()}},{key:"scrollToModalTop",value:function(){this.$timeout(function(){angular.element(".dialog__main-content").scrollTop(0,0),angular.element(".dialog__content").scrollTop(0,0)},200)}},{key:"scrollToTop",value:function(){this.scroll("scroll-to-top")}},{key:"scroll",value:function(e){this._scroll(e,0)}},{key:"scrollWithOffset",value:function(e){this._scroll(e,this._getOffset())}},{key:"_scroll",value:function(e,t){var n=this;this.$anchorScroll.yOffset=t,this.$timeout(function(){n.$anchorScroll()},200)}},{key:"_getOffset",value:function(){return this.isMobile?this.mobileYoffset:this.desktopYoffset}},{key:"isMobile",get:function(){return this.EnvironmentService.isTouchDevice()}},{key:"mobileYoffset",get:function(){return 100}},{key:"desktopYoffset",get:function(){return 150}}]),e}();l.$inject=["$location","$anchorScroll","$timeout","EnvironmentService"],t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(){(0,a.default)(this,e)}return(0,r.default)(e,[{key:"isHoliday",value:function(e){var t=e.localeData();return!!(t._holidays&&t._holidays.indexOf(e.format(t._holidayFormat))>=0)}},{key:"isBusinessDay",value:function(e){return 0!==e.day()&&6!==e.day()&&!this.isHoliday(e)}},{key:"add",value:function(e,t){for(var n=t<0?-1:1,i=Math.abs(t),s=e.clone();i;)s.add(n,"d"),this.isBusinessDay(s)&&(i-=1);return s}},{key:"subtract",value:function(e,t){return this.add(e,-t)}},{key:"nextBusinessDay",value:function(e){for(var t=1,n=e.clone();t<7&&!this.isBusinessDay(n.add(1,"d"));)t+=1;return n}},{key:"prevBusinessDay",value:function(e){for(var t=1,n=e.clone();t<7&&!this.isBusinessDay(n.subtract(1,"d"));)t+=1;return n}}]),e}();t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),a=i(s),o=n(13),r=i(o),l=n(64),c=i(l),u=n(0),d=i(u),h=n(1),_=i(h),g=n(18),S=i(g),f=n(55),v=i(f),E=n(317),p=i(E),T=n(324),m=function(){function e(t,n,i,s){(0,d.default)(this,e),this.$q=t,this.RequesterService=n,this.serviceConstants=i,this.customerConstants=s}return(0,_.default)(e,[{key:"get",value:function(){var e=this;return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.GET_CUSTOMER_INFO).then(function(t){var n=t.customer;if(n.dateOfBirth=(0,v.default)(n.date_of_birth),n.sin&&(n.sinMasked=n.sin.replace(/^(\d{3})(\d{3})(\d{3})$/,"***-***-$3")),n.phoneNumbers={},n.phone_list){var i=!0,s=!1,a=void 0;try{for(var o,l=(0,c.default)(n.phone_list);!(i=(o=l.next()).done);i=!0){var u=o.value;n.phoneNumbers[u.type]=u,u.preferred&&(n.primaryPhoneType=u.type)}}catch(e){s=!0,a=e}finally{try{!i&&l.return&&l.return()}finally{if(s)throw a}}var d=!0,h=!1,_=void 0;try{for(var g,S=(0,c.default)((0,r.default)(e.customerConstants.API.PHONE_TYPE));!(d=(g=S.next()).done);d=!0){var f=g.value;n.phoneNumbers[f]||(n.phoneNumbers[f]={number:"",type:f})}}catch(e){h=!0,_=e}finally{try{!d&&S.return&&S.return()}finally{if(h)throw _}}}if(n.addresses={},n.address_list){var E=!0,p=!1,T=void 0;try{for(var m,C=(0,c.default)(n.address_list);!(E=(m=C.next()).done);E=!0){var A=m.value;n.addresses[A.address_type]=A}}catch(e){p=!0,T=e}finally{try{!E&&C.return&&C.return()}finally{if(p)throw T}}}return t})}},{key:"update",value:function(e){var t=this,n=angular.copy(e),i={};i.phone_list=n.phone_list,i.address_list=n.address_list,i.title=n.title,i.first_name=n.first_name,i.last_name=n.last_name,i.email=n.email,i.employment_status=n.employment_status,i.occupation=n.occupation,n.address_list&&n.address_list.length&&n.address_list.forEach(function(e){e.street_number&&(e.address_line1=e.street_number+" "+e.address_line1,e.street_number=void 0)}),n.employer&&n.employer.company_name&&(i.employer=n.employer),n.employer&&n.employer.company_address&&(i.employer||(i.employer={}),i.employer.company_address=n.employer.company_address),n.sin&&!n.sin.match(/\*\*\*/)&&(i.sin=n.sin),S.default.remove(i.phone_list,function(e){return!(e&&e.number)});var s=!1;return i.phone_list&&n.phone_list.length&&(i.phone_list.forEach(function(e){e.number=e.number.replace(/\D/g,""),n.primaryPhoneType!==e.type&&n.primaryPhoneType?delete e.preferred:s||(e.preferred=!0,s=!0)}),1===i.phone_list.length&&(i.phone_list[0].preferred=!0)),n.confirm_event&&(i.confirm_event=n.confirm_event),this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.PUT_CUSTOMER_INFO,{data:{customer:i}}).then(function(e){if(e.response_status.status_code===t.serviceConstants.STATUS_CODES.SUCCESS)return e;var n=(0,p.default)(e);throw angular.extend(e,{customer:{errors:n}}),e})}},{key:"getCustomer",value:function(){return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.GET_CUSTOMER_INFO).then(function(e){var t=(0,T.mapPhoneAndAddresses)(e.customer);return t.dateOfBirth=(0,v.default)(e.customer.date_of_birth),(0,a.default)(e,{customer:t})})}},{key:"migrateCustomer",value:function(e){return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.MIGRATE_CUSTOMER,{data:{products:e}})}}]),e}();m.$inject=["$q","RequesterService","serviceConstants","customerConstants"],t.default=m,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t){(0,a.default)(this,e),this.$rootScope=t}return(0,r.default)(e,[{key:"subscribe",value:function(e,t,n){var i=this.$rootScope.$on(t,n);return e.$on("$destroy",i),i}},{key:"publish",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.$rootScope.$emit(e,t)}}]),e}();l.$inject=["$rootScope"],t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(64),a=i(s),o=n(65),r=i(o),l=n(13),c=i(l),u=n(0),d=i(u),h=n(1),_=i(h),g=function(){function e(t,n,i,s,a,o,r,l,c,u,h,_,g,S,f,v,E,p,T,m,C){(0,d.default)(this,e),this.$log=t,this.$rootScope=n,this.SessionService=l,this.UserService=u,this.$state=c,this.menuConstants=o,this.loginConstants=r,this.currentMenu={},this.$window=a,this.GlobalModalsService=h,this.EnvironmentService=_,this.EventBusService=g,this.AuthService=S,this.LocaleService=v,this.stateConstants=f,this.$interpolate=i,this.$translate=s,this.KYCPendingService=E,this.UrlService=p,this.userConstants=T,this.isFirstTimeUser=!1,this.storageConstants=m,this.StorageService=C,this.init()}return(0,_.default)(e,[{key:"init",value:function(){var e=this;this.EventBusService.subscribe(this.$rootScope,this.loginConstants.LOGIN_EVENTS.SUCCESSFUL_LOGIN,function(t,n){n.action===e.loginConstants.LOGIN_ACTIONS.SHOW_FIRST_TIME_USER?e.isFirstTimeUser=n.data:e.isFirstTimeUser=!1}),this.EventBusService.subscribe(this.$rootScope,this.userConstants.EVENTS.USER_CAPABILITIES_UPDATED,function(t,n){e.EventBusService.publish(e.menuConstants.EVENTS.SETUP)})}},{key:"getPrimaryMenuItems",value:function(){var e=this.menuConstants,t=e.menuConfig[e.MENU_TYPES.PRIMARY].default.items;return t=this.SessionService.isAuthenticated()?this._pruneVisitorItems(t):this._pruneAuthItems(t)}},{key:"getMenuItems",value:function(e){var t=this._pruneItemsByPlatform(this.getMenuObjByType(e).items);return this.SessionService.isAuthenticated()?(t=this._pruneVisitorItems(t),t=this._pruneItemsBasedOnKycStatus(t),t=this._pruneItemsBasedOnCapabilities(t),t=this._pruneItemsBasedOnFirstTimeEnrollment(t,e),t=this._pruneBusinessItems(t)):t=this._pruneAuthItems(t),t}},{key:"getMenuObjByType",value:function(e){var t=this,n={};if(!this.menuConstants.menuConfig[e])return n;var i=this.menuConstants.menuConfig[e];return(0,c.default)(i).forEach(function(e){var s=i[e];s.availableOn?s.availableOn.some(function(e){return!!t.$state.includes(e)||t.$state.current.parent===e})&&(n=s):n=s}),n}},{key:"handleMenuInteraction",value:function(e,t){switch(e){case this.menuConstants.LINK_TYPES.ROUTE:this.$state.go(t);break;case this.menuConstants.LINK_TYPES.EXTERNAL_LINK:this.$window.open(this.UrlService.fixRelativeLink(t),this.EnvironmentService.isNative()?"_system":void 0);break;case this.menuConstants.LINK_TYPES.INTERNAL_LINK:this._handleInternalLink(t);break;case this.menuConstants.LINK_TYPES.METHOD:this._handleActionMethods(t)}}},{key:"handleGoHome",value:function(){this.EnvironmentService.isNative()?this.$state.go(this.stateConstants.ACCOUNT_SUMMARY):this.$window.location=this._interpolate("/{{locale}}")}},{key:"_handleInternalLink",value:function(e){var t=this._interpolate(e);if(this.EnvironmentService.isNative()){var n=this.UrlService.fixRelativeLink(t);this.$window.open(n,"_system")}else this.$window.location=t}},{key:"_pruneAuthItems",value:function(e){return e.length>0?e.slice().filter(function(e){return!1===e.authRequired}):[]}},{key:"_pruneVisitorItems",value:function(e){return e.length>0?e.slice().filter(function(e){return!0!==e.visitorOnly}):[]}},{key:"_pruneItemsByPlatform",value:function(e){var t=this;return!angular.isDefined(e)||e.length<1?[]:this.EnvironmentService.isNative()?e.filter(function(e){return!0!==e.onlyWeb}).map(function(e){return"object"===(0,r.default)(e.displayName)&&(t.EnvironmentService.isAndroid()?e.displayName=e.displayName.android:e.displayName=e.displayName.apple),e}):e.filter(function(e){return!0!==e.onlyNative})}},{key:"_pruneItemsBasedOnCapabilities",value:function(e){var t=this;if(!angular.isDefined(e)||e.length<1)return[];if(this.UserService.userCapabilities){var n=[];return e.slice().forEach(function(e){if(0===e.capabilities.length)n.push(e);else{var i=!0,s=!1,o=void 0;try{for(var r,l=(0,a.default)(e.capabilities);!(i=(r=l.next()).done);i=!0){var c=r.value;if(t.UserService.userCapabilities.indexOf(c)>-1){n.push(e);break}}}catch(e){s=!0,o=e}finally{try{!i&&l.return&&l.return()}finally{if(s)throw o}}}}),n}return[]}},{key:"_pruneItemsBasedOnKycStatus",value:function(e){if(!angular.isDefined(e)||e.length<1)return[];if(this.UserService.userCapabilities){var t=[],n=e.slice(),i=this.KYCPendingService.checkCapabilities(this.UserService.userCapabilities);return n.forEach(function(e){(!e.onlyKycComplete||e.onlyKycComplete&&!i)&&t.push(e)}),t}return e}},{key:"_pruneItemsBasedOnFirstTimeEnrollment",value:function(e,t){return!angular.isDefined(e)||e.length<1?[]:t===this.menuConstants.MENU_TYPES.SECONDARY&&this.isFirstTimeUser?[]:e}},{key:"_pruneBusinessItems",value:function(e){var t=this;return!angular.isDefined(e)||e.length<1?[]:e.filter(function(e){return!e.onlyPersonal||!t.SessionService.isBusiness})}},{key:"_handleActionMethods",value:function(e){switch(e){case this.menuConstants.ACTION_METHODS.OPEN_MOVE_MONEY:this.GlobalModalsService.showMoveMoney();break;case this.menuConstants.ACTION_METHODS.OPEN_BILL_PAY:this.GlobalModalsService.showPayBill();break;case this.menuConstants.ACTION_METHODS.OPEN_RDC:this.GlobalModalsService.showRDC();break;case this.menuConstants.ACTION_METHODS.OPEN_EMT:this.GlobalModalsService.showEMT();break;case this.menuConstants.ACTION_METHODS.OPEN_ASP:this.GlobalModalsService.showASP();break;case this.menuConstants.ACTION_METHODS.OPEN_DDF:this.GlobalModalsService.showDirectDepositForm();break;case this.menuConstants.ACTION_METHODS.CREATE_GOAL:this.GlobalModalsService.showCreateGoal();break;case this.menuConstants.ACTION_METHODS.LOGOUT:this.logout();break;case this.menuConstants.ACTION_METHODS.GO_TO_BLOG:this.$window.location=this.$translate.instant("global.menu.header.blogLink")}}},{key:"logout",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.AuthService.logout(e)}},{key:"_interpolate",value:function(e){return this.$interpolate(e)({locale:this.LocaleService.localeDisplay.toLowerCase()})}},{key:"subscribe",value:function(e,t){this.EventBusService.subscribe(e,this.menuConstants.EVENTS.SETUP,t),this.EventBusService.subscribe(e,"$stateChangeSuccess",t)}}]),e}();g.$inject=["$log","$rootScope","$interpolate","$translate","$window","menuConstants","loginConstants","SessionService","$state","UserService","GlobalModalsService","EnvironmentService","EventBusService","AuthService","stateConstants","LocaleService","KYCPendingService","UrlService","userConstants","storageConstants","StorageService"],t.default=g,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n){(0,a.default)(this,e),this.RequesterService=t,this.serviceConstants=n}return(0,r.default)(e,[{key:"getNewMessageCount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={urlVars:{queryString:"channel="+e+"&unread-count=true"}};return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.INBOX_NEW_MESSAGE_COUNT,t)}},{key:"getAllMessages",value:function(e,t,n){var i={urlVars:{queryString:"channel="+n+"&start-item="+e+"&count="+t}};return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.INBOX_ALL_MESSAGES,i)}},{key:"getSingleMessage",value:function(e){var t={urlVars:{id:e}};return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.INBOX_SINGLE_MESSAGE,t)}},{key:"setMessageStatus",value:function(e,t){var n={data:{message_ids:e,status:t}};return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.INBOX_UPDATE_STATUS,n)}}]),e}();l.$inject=["RequesterService","serviceConstants"],t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i,s,o){(0,a.default)(this,e),this.$log=t,this.EventBusService=n,this.globalModalsConstants=i,this.eNotificationConstants=o,this.moveMoneyConstants=s,this.lastModalClosed=""}return(0,r.default)(e,[{key:"showModalFromState",value:function(e,t){this.EventBusService.publish(this.globalModalsConstants.EVENTS.SHOW_MODAL,{state:e,params:t})}},{key:"showDoubleSafeModal",value:function(){this.EventBusService.publish(this.globalModalsConstants.EVENTS.SHOW_MODAL,{modal:this.globalModalsConstants.AVAILABLE_MODALS.SHOW_DOUBLE_SAFE_MODAL})}},{key:"showMoveMoney",value:function(){this.EventBusService.publish(this.globalModalsConstants.EVENTS.SHOW_MODAL,{modal:this.globalModalsConstants.AVAILABLE_MODALS.MOVE_MONEY})}},{key:"showMoveMoneyCCFullPay",value:function(e){this.EventBusService.publish(this.globalModalsConstants.EVENTS.SHOW_MODAL,{modal:this.globalModalsConstants.AVAILABLE_MODALS.MOVE_MONEY_CC,account:e})}},{key:"showMoveMoneySelectedAccount",value:function(e,t){this.EventBusService.publish(this.globalModalsConstants.EVENTS.SHOW_MODAL,{modal:this.globalModalsConstants.AVAILABLE_MODALS.MOVE_MONEY_SELECTED_ACCOUNT,account:e,modalType:t})}},{key:"showMoveMoneyEdit",value:function(e){e.frequency&&"string"==typeof e.frequency&&(e.frequency=e.frequency.toUpperCase()),this.EventBusService.publish(this.globalModalsConstants.EVENTS.SHOW_MODAL,{modal:this.globalModalsConstants.AVAILABLE_MODALS.MOVE_MONEY_EDIT,transaction:e})}},{key:"showEmtReclaim",value:function(e){this.EventBusService.publish(this.globalModalsConstants.EVENTS.SHOW_MODAL,{modal:this.globalModalsConstants.AVAILABLE_MODALS.EMT_RECLAIM,emt:e})}},{key:"showRDC",value:function(){this.EventBusService.publish(this.globalModalsConstants.EVENTS.SHOW_MODAL,{modal:this.globalModalsConstants.AVAILABLE_MODALS.RDC})}},{key:"showEMT",value:function(){this.EventBusService.publish(this.globalModalsConstants.EVENTS.SHOW_MODAL,{modal:this.globalModalsConstants.AVAILABLE_MODALS.EMT})}},{key:"showOtherCommunications",value:function(e,t,n){this.EventBusService.publish(this.globalModalsConstants.EVENTS.SHOW_MODAL,{modal:this.globalModalsConstants.AVAILABLE_MODALS.OTHER_COMMUNICATIONS,userData:e,accounts:t,capabilities:n})}},{key:"showPendingApplications",value:function(){this.EventBusService.publish(this.globalModalsConstants.EVENTS.SHOW_MODAL,{modal:this.globalModalsConstants.AVAILABLE_MODALS.PENDING_APPLICATIONS})}},{key:"showRewardsModal",value:function(e,t){this.EventBusService.publish(this.globalModalsConstants.EVENTS.SHOW_MODAL,{modal:this.globalModalsConstants.AVAILABLE_MODALS.REWARDS,currentStep:e,modalObj:t})}},{key:"showPayBill",value:function(){this.EventBusService.publish(this.globalModalsConstants.EVENTS.SHOW_MODAL,{modal:this.globalModalsConstants.AVAILABLE_MODALS.PAY_BILL})}},{key:"showAddBill",value:function(){this.EventBusService.publish(this.globalModalsConstants.EVENTS.SHOW_MODAL,{modal:this.globalModalsConstants.AVAILABLE_MODALS.ADD_BILL})}},{key:"showASP",value:function(){this.EventBusService.publish(this.globalModalsConstants.EVENTS.SHOW_MODAL,{modal:this.globalModalsConstants.AVAILABLE_MODALS.ASP})}},{key:"showDirectDepositForm",value:function(){this.EventBusService.publish(this.globalModalsConstants.EVENTS.SHOW_MODAL,{modal:this.globalModalsConstants.AVAILABLE_MODALS.DIRECT_DEPOSIT_FORM})}},{key:"showUncategorizedTransactions",value:function(){this.EventBusService.publish(this.globalModalsConstants.EVENTS.SHOW_MODAL,{modal:this.globalModalsConstants.AVAILABLE_MODALS.UNCATEGORIZED_TRANSACTIONS})}},{key:"showUnconfirmedTransactions",value:function(){this.EventBusService.publish(this.globalModalsConstants.EVENTS.SHOW_MODAL,{modal:this.globalModalsConstants.AVAILABLE_MODALS.UNCONFIRMED_TRANSACTIONS})}},{key:"showMobileStepUp",value:function(){this.EventBusService.publish(this.globalModalsConstants.EVENTS.SHOW_MODAL,{modal:this.globalModalsConstants.AVAILABLE_MODALS.MOBILE_STEP_UP})}},{key:"showCSAConversion",value:function(e){this.EventBusService.publish(this.globalModalsConstants.EVENTS.SHOW_MODAL,{modal:this.globalModalsConstants.AVAILABLE_MODALS.CSA_CONVERSION,dealId:e})}},{key:"showENotification",value:function(e,t,n,i){this.$log.log("showENotification:",e);var s={};return s=n?{template_id:e.template_id,template_data:e.template_data}:"AML_MISSING_INFO"===e.roadblock_subtype?{template_id:"AML_MISSING_INFO",template_data:e.roadblock_data}:this.eNotificationConstants.ROADBLOCK_TYPE[e.roadblock_type]?this._getHighestPriorityTemplate(e.roadblock_data):{template_id:this.eNotificationConstants.CATCH_ALL,template_data:e.roadblock_data},this.$log.log("eNotification template:",s),this.EventBusService.publish(this.globalModalsConstants.EVENTS.SHOW_MODAL,{modal:this.globalModalsConstants.AVAILABLE_MODALS.E_NOTIFICATION,roadblockType:e.roadblock_type,roadblockData:e.roadblock_data,templateId:s.template_id,data:s.template_data,highRiskClient:t,nextState:i.state,nextStateParams:i.params})}},{key:"showVisitorSearch",value:function(){this.EventBusService.publish(this.globalModalsConstants.EVENTS.SHOW_MODAL,{modal:this.globalModalsConstants.AVAILABLE_MODALS.VISITOR_SEARCH})}},{key:"showOverdraftPreApprovedModal",value:function(e){this.EventBusService.publish(this.globalModalsConstants.EVENTS.SHOW_MODAL,{modal:this.globalModalsConstants.AVAILABLE_MODALS.OVERDRAFT_PRE_APPROVED,accountDetails:e})}},{key:"showOverdraftProtectionApplyInfoModal",value:function(e){this.EventBusService.publish(this.globalModalsConstants.EVENTS.SHOW_MODAL,{modal:this.globalModalsConstants.AVAILABLE_MODALS.OVERDRAFT_PROTECTION_APPLY,accountDetails:e})}},{key:"showOverdraftConsentModal",value:function(e){this.EventBusService.publish(this.globalModalsConstants.EVENTS.SHOW_MODAL,{modal:this.globalModalsConstants.AVAILABLE_MODALS.OVERDRAFT_CONSENT_MODAL,accountDetails:e})}},{key:"showRifSummaryModal",value:function(e){this.EventBusService.publish(this.globalModalsConstants.EVENTS.SHOW_MODAL,{modal:this.globalModalsConstants.AVAILABLE_MODALS.RIF_SUMMARY_MODAL,accountNumber:e})}},{key:"showCreditCardBalanceTransfer",value:function(e){this.EventBusService.publish(this.globalModalsConstants.EVENTS.SHOW_MODAL,{modal:this.globalModalsConstants.AVAILABLE_MODALS.CREDIT_CARD_BALANCE_TRANSFER,accountDetails:e})}},{key:"showCreateGoal",value:function(){this.EventBusService.publish(this.globalModalsConstants.EVENTS.SHOW_MODAL,{modal:this.globalModalsConstants.AVAILABLE_MODALS.CREATE_GOAL})}},{key:"showDonationHistory",value:function(){this.EventBusService.publish(this.globalModalsConstants.EVENTS.SHOW_MODAL,{modal:this.globalModalsConstants.AVAILABLE_MODALS.DONATIONS,flags:{showHistory:!0}})}},{key:"_getHighestPriorityTemplate",value:function(e){return e.reduce(function(e,t){return e.priority<t.priority?e:t})}},{key:"closeAllModals",value:function(){this.EventBusService.publish(this.globalModalsConstants.EVENTS.CLOSE_MODALS)}},{key:"closeModal",value:function(e){this.EventBusService.publish(this.globalModalsConstants.EVENTS.CLOSE_MODALS,e)}},{key:"subscribe",value:function(e,t){this.EventBusService.subscribe(e,this.globalModalsConstants.EVENTS.SHOW_MODAL,t)}},{key:"subscribeToClose",value:function(e,t){this.EventBusService.subscribe(e,this.globalModalsConstants.EVENTS.CLOSE_MODALS,t)}}]),e}();l.$inject=["$log","EventBusService","globalModalsConstants","moveMoneyConstants","eNotificationConstants"],t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(){(0,a.default)(this,e)}return(0,r.default)(e,[{key:"isCanadian",value:function(e){return"CAD"===e}}]),e}();t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(65),a=i(s),o=n(147),r=i(o),l=n(0),c=i(l),u=n(1),d=i(u),h=function(){function e(t,n,i,s){(0,c.default)(this,e),this.$log=t,this.$http=n,this.buildConstants=i,this.EnvironmentSwitchService=s,this._config=this.EnvironmentSwitchService.getCurrentConfig(),this._isMock=i.MOCK_ENV,this._isMFPSimulator=i.MFP_ENV,this._isNative="undefined"!=typeof WL,this._platformInfo=this._getPlatformInfo(),this.ROOT_PATH="/assets/environments",this.ENV_SESSION_KEY="savedEnv",this._isCafeApp=!1,this._isMock&&this.$log.debug("-- running on Mock API -- "),this._genesysUrl=this.getGenesysAPIUrl()}return(0,d.default)(e,[{key:"get",value:function(e){return this._config[e]}},{key:"getAPIUrl",value:function(){return this.get("apiUrl")}},{key:"getBaseUrl",value:function(){return this.get("marketingResourcesUrl")}},{key:"isCafeApp",value:function(){return this._isCafeApp}},{key:"getGenesysAPIUrl",value:function(){return this._genesysUrl?this._genesysUrl:this.get("genesys").chat.real?this.get("genesys").chat.real:this.get("genesys").chat}},{key:"getGenesysAvailableAPIUrls",value:function(){return this.get("genesys").chat}},{key:"setGenesysAPIUrl",value:function(e){this._genesysUrl=e}},{key:"isNative",value:function(){return this._isNative}},{key:"isMFPSimulator",value:function(){return this._isMFPSimulator}},{key:"isMock",value:function(){return this._isMock}},{key:"switchEnvironment",value:function(e){var t=this;return this.EnvironmentSwitchService.switchEnvironment(e).then(function(){t._config=t.EnvironmentSwitchService.getCurrentConfig()})}},{key:"getAvailableEnvironments",value:function(){return this.EnvironmentSwitchService.getAvailableEnvironments()}},{key:"getCurrentEnvironment",value:function(){return this.EnvironmentSwitchService.getCurrentEnvironment()}},{key:"getAvailableGenesysEnvironments",value:function(){return this.getGenesysAvailableAPIUrls()}},{key:"getCurrentGenesysEnvironment",value:function(){return this.getGenesysAPIUrl()}},{key:"isPortrait",value:function(){return 0===window.orientation||180===window.orientation}},{key:"isLandscape",value:function(){return!this.isPortrait()}},{key:"getOrientation",value:function(){return this.isPortrait()?"portrait":"landscape"}},{key:"isTouchDevice",value:function(){return this._platformInfo&&this._platformInfo.isTouchDevice}},{key:"isEdge",value:function(){return this._platformInfo&&"Edge"===this._platformInfo.layoutEngine}},{key:"isWebKit",value:function(){return this._platformInfo&&("Chromium"===this._platformInfo.layoutEngine||"WebKit"===this._platformInfo.layoutEngine||"Edge"===this._platformInfo.layoutEngine)}},{key:"isChromium",value:function(){return this._platformInfo&&"Chromium"===this._platformInfo.layoutEngine}},{key:"isAndroid",value:function(){return this._platformInfo&&"Android"===this._platformInfo.platform}},{key:"isIOS",value:function(){return this._platformInfo&&"iOS"===this._platformInfo.platform}},{key:"isMobile",value:function(){return this.isPhone()||this.isTablet()}},{key:"isBlackBerry",value:function(){return this._platformInfo&&"BlackBerry"===this._platformInfo.platform}},{key:"isBB10",value:function(){return this._platformInfo&&"BB10"===this._platformInfo.platform}},{key:"isSafari",value:function(){var e=navigator.userAgent;return!this._isNative&&(e.indexOf("iPhone")>=0||e.indexOf("iPad")>=0||e.indexOf("iPod")>=0||e.indexOf("Mac")>=0)&&!!e.match(/Version\/[\d.]+.*Safari/)}},{key:"isIE",value:function(){return this._platformInfo&&("IE"===this._platformInfo.platform||"IEWL"===this._platformInfo.platform)}},{key:"isIEWL",value:function(){return this._platformInfo&&"IEWL"===this._platformInfo.platform}},{key:"isFF",value:function(){return this._platformInfo&&"FF"===this._platformInfo.platform}},{key:"isPhone",value:function(){return this._platformInfo&&"phone"===this._platformInfo.formFactor}},{key:"isTablet",value:function(){return this._platformInfo&&"tablet"===this._platformInfo.formFactor}},{key:"isSamsungGalaxy",value:function(){return this._platformInfo&&"SamsungGalaxy"===this._platformInfo.model}},{key:"isClickDelayed",value:function(){return this.isTouchDevice()&&(!this.isChromium()||this.getLayoutEngineVersionNumber()<32)}},{key:"getPlatformVersion",value:function(){return this._platformInfo&&this._platformInfo.version}},{key:"getPlatformVersionNumber",value:function(){return this._platformInfo&&this._platformInfo.version&&this._platformInfo.version.versionNumber}},{key:"getLayoutEngineVersion",value:function(){return this._platformInfo&&this._platformInfo.layoutEngineVersion}},{key:"getLayoutEngineVersionNumber",value:function(){return this._platformInfo&&this._platformInfo.layoutEngineVersion&&this._platformInfo.layoutEngineVersion.versionNumber}},{key:"getDevicePrint",value:function(){var e=this;return new r.default(function(t,n){e.isNative()&&WL.Device.getId(function(e){t(e.deviceId)},function(){n()}),t(encode_deviceprint())})}},{key:"getDeviceModel",value:function(){return window.device&&window.device.model||"Unknown"}},{key:"getEsignLiveUrl",value:function(){return this.get("esignLive").pdfUrl}},{key:"_getVersion",value:function(e,t){var n=[];e.split(t).every(function(e){return n.push(parseInt(e)),!0});var i="";return n.length>0&&(i=parseFloat(n[0].toString()+(n.length>1?"."+n[1]:""))),{versionString:e,versionArray:n,versionNumber:i}}},{key:"_getPlatformInfo",value:function(){var e=navigator.userAgent,t={};if(this.$log.debug("User Agent String is",e),t.isTouchDevice="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,e.indexOf("Edge")>=0){t.layoutEngine="Edge";var n=/Edge\/((\d+\.)+\d+)/.exec(e);t.layoutEngineVersion=this._getVersion(n[1],".")}else if(e.indexOf("Chrome")>=0){t.layoutEngine="Chromium";var i=/Chrome\/((\d+\.)+\d+)/.exec(e);t.layoutEngineVersion=this._getVersion(i[1],".")}else if(e.indexOf("AppleWebKit")>=0){t.layoutEngine="WebKit";var s=/AppleWebKit\/((\d+\.)+\d+)/.exec(e),o=/Version\/((\d+\.)+\d+)/.exec(e);t.layoutEngineVersion=this._getVersion(s[1],"."),o&&(t.version=this._getVersion(o[1],".")),t.platform="Safari"}if(e.indexOf("Android")>=0){var r=/Android\s+([\d+\.]+)/.exec(e);t.platform="Android",t.version=this._getVersion(r[1],"."),e.search(/ (GT|SHV|SGH|SCH|SPH|SM)-[\d\w]+ Build/)>=0&&(t.model="SamsungGalaxy")}else if(e.indexOf("iPhone")>=0||e.indexOf("iPad")>=0){var l=/OS\s+((\d+_)+\d+)/.exec(e);t.platform="iOS",t.version=this._getVersion(l[1],"_"),t.model=e.indexOf("iPad")>=0?"iPad":"iPhone"}else if(e.indexOf("BB10;")>=0){var c=/Version\/(\d+(\.\d+)*)/.exec(e);t.platform="BB10",t.version=this._getVersion(c[1],".")}else if(e.indexOf("BlackBerry;")>=0){var u=/Version\/(\d+(\.\d+)*)/.exec(e);t.platform="BlackBerry",t.version=this._getVersion(u[1],".")}else if(e.indexOf("Trident")>=0){t.platform="IE","object"===("undefined"==typeof WL?"undefined":(0,a.default)(WL))&&WL.Client.getEnvironment()===WL.Environment.WINDOWS8&&(t.platform="IEWL");var d=/MSIE\s+([\d+\.]+)/.exec(e);d||(d=/rv:([\d+\.]+)/.exec(e)),d&&(t.version=this._getVersion(d[1],"."))}else e.indexOf("Firefox")>=0&&(t.platform="FF");var h=this._getDeviceDimension(),_="desktop";return h<768?_="phone":h<980&&(_="tablet"),t.formFactor=_,t}},{key:"_getDeviceDimension",value:function(){return this._isNative?window.innerWidth<window.innerHeight?window.innerWidth:window.innerHeight:window.innerWidth<window.innerHeight?window.innerHeight:window.innerWidth}}]),e}();h.$inject=["$log","$http","buildConstants","EnvironmentSwitchService"],t.default=h,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(29),a=i(s),o=n(0),r=i(o),l=n(1),c=i(l),u=function(){function e(t,n,i,s){(0,r.default)(this,e),this.$q=t,this.$log=n,this.$http=i,this.buildConstants=s,this._isNative="undefined"!=typeof WL,this.ROOT_PATH="/assets/environments",this.ENV_SESSION_KEY="savedEnvKey",this.ENV_SESSION_CONFIG="savedEnvConfig"}return(0,c.default)(e,[{key:"switchEnvironment",value:function(e){var t=this;return this.$http({method:"get",url:this.ROOT_PATH+"/"+e+".json"}).then(function(n){t._setConfig(e,n.data)}).catch(function(){var n="API Configuration for '"+e+"' was not found";throw t.$log.warn(n),n})}},{key:"getAvailableEnvironments",value:function(){return this.buildConstants.AVAILABLE_ENVIRONMENTS}},{key:"getCurrentConfig",value:function(){if(this._config)return this._config;if(this._canSwitch()){var e=localStorage.getItem(this.ENV_SESSION_CONFIG);if(e)return JSON.parse(e)}return this.buildConstants.CONFIG}},{key:"getCurrentEnvironment",value:function(){return this._env?this._env:localStorage.getItem(this.ENV_SESSION_KEY)||this.buildConstants.DEFAULT_ENVIRONMENT}},{key:"_setConfig",value:function(e,t){this._env=e,this._config=t,localStorage.setItem(this.ENV_SESSION_KEY,e),localStorage.setItem(this.ENV_SESSION_CONFIG,(0,a.default)(this._config)),this._isNative}},{key:"_canSwitch",value:function(){return this.buildConstants.AVAILABLE_ENVIRONMENTS.length>0}}]),e}();u.$inject=["$q","$log","$http","buildConstants"],t.default=u,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=n(18),c=i(l),u=function(){function e(t,n,i,s,o,r,l,u,d,h){var _=this;(0,a.default)(this,e),this.$rootScope=t,this.$state=n,this.$window=i,this.$log=s,this.SessionService=o,this.EnvironmentService=r,this.EventBusService=l,this.LoginFlowService=u,this.backButtonConstants=d,this.stateConstants=h,this.onBackButtonListeners=[],this.EnvironmentService.isNative()&&WL.App.overrideBackButton(function(){var e=!1;c.default.forEach(_.onBackButtonListeners,function(t){if(t&&t.callbackFn())return e=!0,_.$rootScope.$apply(),!1}),e||(_.$log.info("Manually invoke browser back"),_.$window.history.back())})}return(0,r.default)(e,[{key:"addBackButtonListener",value:function(e,t,n){var i=this;this.$log.info("listener with priority: ",t),this.$log.info("Callback being added",n);var s={priority:t,callbackFn:n};e&&e.$on("$destroy",function(){i.$log.info("destroying listener",n),i.removeBackButtonListener(n)}),this._addBackButtonListener(s)}},{key:"_addBackButtonListener",value:function(e){if(c.default.find(this.onBackButtonListeners,function(t){return t.callbackFn===e.callbackFn}))return void this.$log.debug("duplicate listener Returning");if(c.default.isEmpty(this.onBackButtonListeners))this.onBackButtonListeners.push(e);else{var t=c.default.sortedIndexBy(this.onBackButtonListeners,e,function(t){return e.priority>=t.priority});-1===t?this.onBackButtonListeners.push(e):this.onBackButtonListeners.splice(t,0,e)}}},{key:"removeBackButtonListener",value:function(e){this.$log.info("removing listener",e);var t=c.default.filter(this.onBackButtonListeners,function(t){return t.callbackFn!==e});this.$log.info("updated listener list",t),this.onBackButtonListeners=t}}]),e}();u.$inject=["$rootScope","$state","$window","$log","SessionService","EnvironmentService","EventBusService","LoginFlowService","backButtonConstants","stateConstants"],t.default=u,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i){(0,a.default)(this,e),this.EnvironmentService=t,this.$window=n,this.$document=i,this._isInit=!1}return(0,r.default)(e,[{key:"init",value:function(){var e=this;!this._isInit&&this.EnvironmentService.isNative()&&angular.element(this.$document).on("click",function(t){for(var n=angular.element(t.target);"a"!==e._nodeName(n[0]);)if(n=n.parent(),!n[0])return;var i=n.attr("href");if(i&&0===i.lastIndexOf("http",0)){var s=e.$window.device.platform.toUpperCase();t.preventDefault(),t.stopPropagation(),"IOS"===s?e.$window.open(i,"_system"):"ANDROID"===s&&e.$window.navigator.app.loadUrl(i,{openExternal:!0})}}),this._isInit=!0}},{key:"_nodeName",value:function(e){return angular.lowercase(e.nodeName||e[0]&&e[0].nodeName)}}]),e}();l.$inject=["EnvironmentService","$window","$document"],t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i,s,o){(0,a.default)(this,e),this.$q=t,this.$log=n,this.$translate=i,this.$window=s,this.EnvironmentService=o,this.transPrefix="global.errorCodes",this._dynaTrace=null,this._native=!1}return(0,r.default)(e,[{key:"processError",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=this.$q.defer();return this._getError(e).then(function(e){t._sendToDynaTrace(n,i.toString(),e.message),s.resolve(e)}).catch(function(){return s.reject()}),s.promise}},{key:"_sendToDynaTrace",value:function(e,t,n){var i=(t||n).toString();if(this._isNative()&&e){var s=this._getDynaTrace();s&&s.reportEvent(i,s.enterAction(e))}this.$log.debug("Reporting Error:",e,i)}},{key:"_isNative",value:function(){return void 0!==this._native?this._native:(this._native=this.EnvironmentService.isNative(),this._native)}},{key:"_getDynaTrace",value:function(){return this._dynaTrace?this._dynaTrace:(this._isNative()&&(this._dynaTrace=dynaTrace),this._dynaTrace)}},{key:"_getError",value:function(e){var t=this,n=this.$q.defer(),i=e;if(angular.isObject(e))if(i="generic","response_status"in e){var s=e.response_status;angular.isString(s)?i=s:"return_code"in s?i=s.return_code:"status_code"in s&&(i=s.status_code)}else"return_code"in e?i=e.return_code:"status_code"in e&&(i=e.status_code);return this.$translate(this.transPrefix+"."+i).then(function(e){n.resolve({code:i,message:e})}).catch(function(){t.$translate(t.transPrefix+".generic").then(function(e){n.resolve({code:i,message:e})}).catch(function(){return n.reject()})}),n.promise}}]),e}();l.$inject=["$q","$log","$translate","$window","EnvironmentService"],t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i){(0,a.default)(this,e),this.$log=t,this.$q=n,this.$interval=i}return(0,r.default)(e,[{key:"_errorOut",value:function(e,t){return this.$log.error(t),e.reject(),e.promise}},{key:"pollNTimes",value:function(e,t,n,i){var s=this,a=this.$q.defer();if(!this._validateParameters(e,t,n,i,a))return a.promise;var o=null,r=0,l=function(){s.$log.debug("cancelling poller"),s.$log.log("CC-cancelling poller"),o&&(s.$log.log("CC-start calling $interval.cancel"),s.$interval.cancel(o),s.$log.log("CC-done calling $interval.cancel")),o=null},c=function(){r+=1,s.$log.debug("polling"),s.$log.log("CC-start polling"),e().then(function(e){s.$log.debug("promise was resolved:",e),s.$log.log("CC-promise was resolved",e),t(e)?(s.$log.log("CC-start calling cancelPoller"),l(),s.$log.log("CC-end calling cancelPoller"),a.resolve(e)):r===n&&(s.$log.log("CC-max polling numTimesPolled=",r),a.reject(e)),s.$log.log("CC-end polling numTimesPolled=",r)}).catch(function(e){s.$log.error("promise was rejected:",e),s.$log.log("CC-promise was rejected:",e),l(),a.reject(e)})};return this.$log.debug("initializing poller"),o=this.$interval(c,i,n),o.finally(function(){l()}),a.promise}},{key:"_validateParameters",value:function(e,t,n,i,s){return!n||n<1?(this._errorOut(s,"You must specify a maxNumPolls greater than 0"),!1):!i||i<1e3?(this._errorOut(s,"You must specify a pollIntervalMS greater than 1000"),!1):"function"!=typeof e?(this._errorOut(s,"promiseFn must be a function"),!1):"function"==typeof t||(this._errorOut(s,"successCheckFn must be a function"),!1)}}]),e}();l.$inject=["$log","$q","$interval"],t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(36),a=i(s),o=n(29),r=i(o),l=n(13),c=i(l),u=n(115),d=i(u),h=n(0),_=i(h),g=n(1),S=i(g),f=function(){function e(t,n,i,s,a,o,r,l,c,u,d,h,g,S,f,v,E){(0,_.default)(this,e),this.$q=t,this.$rootScope=n,this.$injector=i,this.$timeout=s,this.http=a,this.StorageService=o,this.EnvironmentService=r,this.storageConstants=l,this.nativeCMD=c,this.$log=u,this.localeConstants=d,this.mobilePaySessionService=h,this.$state=S,this.stateConstants=g,this._isMFPEmulator=f.MFP_ENV,this.AnalyticsService=v,this.analyticsConstants=E,this._outstandingPromises={},this._deviceType="",this._deviceAlias="",this._mfpRequestCount=0,this._certCheckRequestThreshold=this.nativeCMD.CERT_CHECK_THRESHOLD,this._certCheckRequestPromise=void 0,this._certCheckEnabled=this.EnvironmentService.get("trustedCertificateValidation"),this._setDeviceReadyListener()}return(0,S.default)(e,[{key:"signalHybridLoaded",value:function(){return this.nativeCall(this.nativeCMD.CMD_HYBRID_LOADED)}},{key:"verifyWorklightInitialized",value:function(){return this.$rootScope.mfpOnSuccessDeferred.promise}},{key:"validateTrustedCertificate",value:function(){var e=this;if(this.$log.debug("executing cert pinning request check"),this._logValidateCertificateEvent(this.analyticsConstants.AVAILABLE_EVENTS.CERT_CHECK_START),!this._certCheckEnabled)return this._logValidateCertificateEvent(this.analyticsConstants.AVAILABLE_EVENTS.CERT_CHECK_END),this.$q.when();if(this._certCheckRequestPromise)return this._certCheckRequestPromise;var t=this.$q.defer();return(this._isMFPEmulator?this.$q.when():this.nativeCall(this.nativeCMD.CMD_CHECK_TRUSTED_CERTIFICATE)).then(function(e){e&&"error"===e.status?t.reject(e):t.resolve()}).catch(function(e){t.reject(e)}).finally(function(){e._certCheckRequestPromise=void 0,e._logValidateCertificateEvent(e.analyticsConstants.AVAILABLE_EVENTS.CERT_CHECK_END)}),this._certCheckRequestPromise=t.promise,this._certCheckRequestPromise}},{key:"_logValidateCertificateEvent",value:function(e){this.AnalyticsService.sendAction(e,"success")}},{key:"setSession",value:function(e){var t={authenticated:e.authenticated,device:e.device,locale:e.locale,transaction_token:e.transaction_token,clientIdentifier:e.clientIdentifier,savedUserIds:this._filterRememberMe(e.savedUserIds),savedBusinessIds:this._filterRememberMe(e.savedBusinessIds),savedAuthorizedIds:this._filterRememberMe(e.savedAuthorizedIds),amlEventConfirmed:e.amlEventConfirmed,enrolledWithOrangeKey:e.enrolledWithOrangeKey};return this.StorageService.setItem(this.storageConstants.KEYS.SESSION,t)}},{key:"getLocale",value:function(){return this.EnvironmentService.isMFPSimulator()?this.$q.when({locale:this.localeConstants.DEFAULT}):(this.$log.info("fetching locale from device"),this.nativeCall(this.nativeCMD.CMD_GET_LOCALE))}},{key:"_setDeviceReadyListener",value:function(){var e=this;document.addEventListener("deviceready",function(){WL.App.addActionReceiver("WLActionReceiverService",function(t){return e._actionReceiver(t)}),e.$rootScope.deviceReady=!0,e.$rootScope.$broadcast("deviceready"),e.$rootScope.$digest()},!1)}},{key:"getPendingPasses",value:function(e){e&&e.values&&e.values.length&&(this.mobilePaySessionService.addPasses(e.values),this.$state.go(this.stateConstants.MOBILE_PAY,void 0,{location:"replace"}))}},{key:"openHybridUrl",value:function(){this.$state.go(this.stateConstants.INBOX,void 0,{location:"replace"})}},{key:"_actionReceiver",value:function(e){void 0!==this._outstandingPromises[e.action]?(e.data&&void 0===e.data.errorCode?this._outstandingPromises[e.action].resolve(e.data):this.$q.reject(!(!e.data||void 0===e.data.errorCode)&&e.data.errorCode),delete this._outstandingPromises[e.action]):e.action===this.nativeCMD.CMD_GET_PASSES_PENDING?this.getPendingPasses(e.data):e.action===this.nativeCMD.CMD_OPEN_URL?this.openHybridUrl(e.data):this.StorageService.handleNativeResponse(e.action,e.data)}},{key:"_filterRememberMe",value:function(e){return e?e.filter(function(e){return-1!==e.rememberMeHash}):[]}},{key:"openPDF",value:function(e,t){e.documents&&e.documents[0]&&e.documents[0].bytes&&(e.pdf_bytes=e.documents[0].bytes),this.EnvironmentService.isNative()?this.sendActionToNative(this.nativeCMD.OPEN_PDF,e):this._handleDownload(e,t)}},{key:"_handleDownload",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"download.pdf";if(!e.pdf_bytes)return void this.$log.error("_handleDownload: no pdf bytes in response");var n=new Uint8Array((0,d.default)(window.atob(e.pdf_bytes),function(e){return e.charCodeAt(0)})),i=new Blob([n],{type:"application/pdf"});if(window.navigator.msSaveOrOpenBlob)return window.navigator.msSaveBlob(i,e.file_name||t);var s=window.document.createElement("a");return s.target="_blank",s.href=window.URL.createObjectURL(i),s.download=e.file_name||t,document.body.appendChild(s),this.$timeout(function(){s.click(),document.body.removeChild(s)})}},{key:"sendLogoutToNative",value:function(){this.sendActionToNative(this.nativeCMD.CMD_USER_LOGOUT)}},{key:"sendUpdateBadge",value:function(e){this.EnvironmentService.isIOS()&&this.sendActionToNative(this.nativeCMD.CMD_UPDATE_BADGE,{badgeCount:e})}},{key:"getDeviceType",value:function(){return this._deviceType||(this.EnvironmentService.isIOS()?this._deviceType=this.EnvironmentService.isTablet()?"iPad":"iPhone":this._deviceType=this.EnvironmentService.isTablet()?"Android Tablet":"Android Phone"),this._deviceType}},{key:"getDeviceAlias",value:function(){var e=this,t=this.$q.defer();return this._deviceAlias?(t.resolve(this._deviceAlias),t.promise):this.getDeviceName().then(function(n){n&&n.deviceName&&(e._deviceAlias=n.deviceName.slice(0,20),t.resolve(e._deviceAlias))})}},{key:"getDeviceName",value:function(){function e(e){e?(n.deviceName=e.deviceName,t.resolve(n)):t.resolve({deviceName:null})}var t=this.$q.defer(),n={deviceName:null};return"undefined"!=typeof cordova&&cordova.exec?(t=this.$q.defer(),cordova.exec(e,t.reject,"Device","getDeviceInfo",[]),t.promise):this.$q.when(n)}},{key:"getDeviceBuildNumber",value:function(){function e(e){e?(n.buildNumber=e.buildnumber,t.resolve(n)):t.resolve(n)}var t=this.$q.defer(),n={buildNumber:null};return"undefined"!=typeof cordova&&cordova.exec?(cordova.exec(e,t.reject,"Device","getDeviceInfo",[]),t.promise):this.$q.when(n)}},{key:"getDevicePlatform",value:function(){function e(e){e?(n.devicePlatform=e.platform,t.resolve(n)):t.resolve(n)}var t=this.$q.defer(),n={devicePlatform:null};return"undefined"!=typeof cordova&&cordova.exec?(cordova.exec(e,t.reject,"Device","getDeviceInfo",[]),t.promise):this.$q.when(n)}},{key:"getUserhashWasUpgraded",value:function(){return this.StorageService.getItem(this.storageConstants.KEYS.USERHASH_UPGRADED)}},{key:"setUserhashWasUpgraded",value:function(e){return this.StorageService.setItem(this.storageConstants.KEYS.USERHASH_UPGRADED,e)}},{key:"getRememberedList",value:function(){return this.StorageService.getItem(this.storageConstants.KEYS.REMEMBER)}},{key:"getRememberedBusinessList",value:function(){return this.StorageService.getItem(this.storageConstants.KEYS.REMEMBER_BIZ)}},{key:"getRememberedAIFList",value:function(){return this.StorageService.getItem(this.storageConstants.KEYS.REMEMBER_AIF)}},{key:"getAllRememberedLists",value:function(){var e=["deferred","eyeVerify","touchId","vocalPassword"],t=function(e,t){return e.filter(function(e,n,i){return i.map(function(e){return e[t]}).indexOf(e[t])===n})},n={userIds:this.getRememberedList(),businessIds:this.getRememberedBusinessList(),aiIds:this.getRememberedAIFList(),deferred:this.getDeferredPin(),eyeVerify:this.getEyeVerifyDisplay(),touchId:this.getTouchId(),vocalPassword:this.getVocalPassword()};return this.$q.all(n).then(function(n){return e.forEach(function(e){if(n[e]){var t={userhash:n[e].userhash,remember_me_hash:n[e].remember_me_hash,name_to_remember:n[e].name_to_remember};Array.isArray(n.userIds)?n.userIds.push(t):n.userIds=[t]}}),n.userIds=Array.isArray(n.userIds)?t(n.userIds,"userhash"):n.userIds,n})}},{key:"clearAllRememberedLists",value:function(){var e=[this.StorageService.setItem(this.storageConstants.KEYS.REMEMBER,null),this.StorageService.setItem(this.storageConstants.KEYS.REMEMBER_BIZ,null),this.StorageService.setItem(this.storageConstants.KEYS.REMEMBER_AIF,null)];return this.$q.all(e)}},{key:"setTouchId",value:function(e){return this.StorageService.setItem(this.storageConstants.KEYS.TOUCHID,e)}},{key:"getTouchId",value:function(){return this.$log.debug("*** getTouchId..."),this.StorageService.getItem(this.storageConstants.KEYS.TOUCHID)}},{key:"clearTouchId",value:function(){return this.StorageService.deleteItem(this.storageConstants.KEYS.TOUCHID)}},{key:"setTouchIdToken",value:function(e){return this.StorageService.setItem(this.storageConstants.KEYS.TOUCHID_TOKEN,e,!0,"touchId")}},{key:"getTouchIdToken",value:function(){return this.$log.debug("*** getTouchIdToken..."),this.StorageService.getItem(this.storageConstants.KEYS.TOUCHID_TOKEN)}},{key:"clearTouchIdToken",value:function(){return this.StorageService.deleteItem(this.storageConstants.KEYS.TOUCHID_TOKEN,!0)}},{key:"setDeferredPin",value:function(e){return this.StorageService.setItem(this.storageConstants.KEYS.DEFER,e)}},{key:"getDeferredPin",value:function(){return this.StorageService.getItem(this.storageConstants.KEYS.DEFER)}},{key:"clearDeferredPin",value:function(){return this.StorageService.deleteItem(this.storageConstants.KEYS.DEFER)}},{key:"setVocalPasswordToken",value:function(e){return this.StorageService.setItem(this.storageConstants.KEYS.VOCAL_PWD_TOKEN,e,!0,"vocalPassword")}},{key:"setVocalPasswordDisplay",value:function(e){return this.StorageService.setItem(this.storageConstants.KEYS.VOCAL_PWD,e)}},{key:"getVocalPassword",value:function(){return this.StorageService.getItem(this.storageConstants.KEYS.VOCAL_PWD)}},{key:"getVocalPasswordToken",value:function(){var e=this,t=this.$q.defer();return WLAuthorizationManager.__getClientInstanceId().then(function(n){e.StorageService.getItem(e.storageConstants.KEYS.VOCAL_PWD_TOKEN,{device_print:n}).then(t.resolve,t.reject)}),t.promise}},{key:"clearVocalPassword",value:function(){return this.StorageService.deleteItem(this.storageConstants.KEYS.VOCAL_PWD)}},{key:"clearVocalPasswordToken",value:function(){return this.StorageService.deleteItem(this.storageConstants.KEYS.VOCAL_PWD_TOKEN)}},{key:"authenticateWithEyeVerify",value:function(){var e=this;return this.EnvironmentService.isNative()?this.nativeCall(this.nativeCMD.CMD_AUTHENTICATE_WITH_AUTH_TYPE,{authType:this.nativeCMD.EYE_VERIFY}).then(function(t){return t&&"success"===t.status?t:e.$q.reject(t)}):this.$q.when()}},{key:"setEyeVerifyToken",value:function(e){return this.StorageService.setItem(this.storageConstants.KEYS.EYE_VERIFY_TOKEN,e,!0,"eyeVerify")}},{key:"setEyeVerifyDisplay",value:function(e){return this.StorageService.setItem(this.storageConstants.KEYS.EYE_VERIFY,e)}},{key:"getEyeVerifyToken",value:function(){return this.StorageService.getItem(this.storageConstants.KEYS.EYE_VERIFY_TOKEN)}},{key:"getEyeVerifyDisplay",value:function(){return this.StorageService.getItem(this.storageConstants.KEYS.EYE_VERIFY)}},{key:"clearEyeVerify",value:function(){return this.StorageService.deleteItem(this.storageConstants.KEYS.EYE_VERIFY)}},{key:"clearEyeVerifyToken",value:function(){return this.StorageService.deleteItem(this.storageConstants.KEYS.EYE_VERIFY_TOKEN)}},{key:"nativeCall",value:function(e,t){return this.nativeCallWithCmdId(e,e,t)}},{key:"nativeCallWithCmdId",value:function(e,t,n){if(this._outstandingPromises[t])return this.$q.reject(this.nativeCMD.errors.IN_PROG);if(!this.EnvironmentService.isNative())return this.$q.reject(this.nativeCMD.errors.NOT_SUPPORTED);this.sendActionToNative(e,n);var i=this.$q.defer();return this._outstandingPromises[t]=i,i.promise}},{key:"sendActionToNative",value:function(e,t){this.$rootScope.deviceReadyDeferred.promise.then(function(){WL.App.sendActionToNative(e,t)})}},{key:"authenticateWithTouchId",value:function(){var e=this;return this.EnvironmentService.isNative()?this.nativeCall(this.nativeCMD.CMD_AUTHENTICATE_WITH_AUTH_TYPE,{authType:this.nativeCMD.TOUCH_ID}).then(function(t){return t&&"success"===t.status?t:e.$q.reject(t)}):this.$q.resolve({status:"success"})}},{key:"turnOnLocationService",value:function(){return this.nativeCall(this.nativeCMD.CMD_TURN_ON_LOCATION_SERVICE).then(function(e){if(e&&"success"===e.status)return!0;throw new Error("failure")})}},{key:"getOptInList",value:function(){return this.StorageService.getItem(this.storageConstants.KEYS.OPT_IN)}},{key:"removeOptInList",value:function(e){return this.StorageService.removeItemFromList(this.storageConstants.KEYS.OPT_IN,e)}},{key:"addOptInList",value:function(e){return this.StorageService.addItemToList(this.storageConstants.KEYS.OPT_IN,e)}},{key:"hasOptedIn",value:function(e){var t=this,n=this.$q.defer();return this.getOptInList().then(function(t){t&&t.indexOf(e)>-1?n.resolve():n.reject()},function(e){t.$log.error("getOtpInList",e),n.reject()}),n.promise}},{key:"getTOSList",value:function(){return this.StorageService.getItem(this.storageConstants.KEYS.TOS)}},{key:"removeTOSList",value:function(e){return this.StorageService.removeItemFromList(this.storageConstants.KEYS.TOS,e)}},{key:"addTOSList",value:function(e){return this.EnvironmentService.isNative()?this.StorageService.addItemToList(this.storageConstants.KEYS.TOS,e):this.$q.resolve()}},{key:"hasTOSed",value:function(e){if(!e)return this.$q.when();var t=this.$q.defer();return this.getTOSList().then(function(n){return n&&n.indexOf(e)>-1?t.resolve():t.reject()},function(){t.reject()}),t.promise}},{key:"getAuthMethodAvailability",value:function(){var e=this,t=this.$q.defer(),n={isTouchIDCapable:!0,isTouchIDAvailable:!0,isEyeverifyAvailable:!0},i=function(i){i?(n.isTouchIDAvailable=e.EnvironmentService.isIOS()&&"true"===i.isTouchIDAvailable,n.isEyeverifyAvailable="true"===i.isEyeverifyAvailable,n.isTouchIDCapable=e.EnvironmentService.isIOS()&&"true"===i.isTouchIDExist,t.resolve(n)):t.resolve({isTouchIDCapable:!1,isTouchIDAvailable:!1,isEyeverifyAvailable:!0})};return"undefined"!=typeof cordova&&cordova.exec?(t=this.$q.defer(),cordova.exec(i,t.reject,"Device","getDeviceInfo",[]),t.promise):this.$q.when(n)}},{key:"activateCard",value:function(e,t){var n=this;if(this.EnvironmentService.isNative()){var i=this.nativeCMD.CMD_ACTIVATE_CARD+"_"+t;return this.nativeCallWithCmdId(this.nativeCMD.CMD_ACTIVATE_CARD,i,{activationData:e,deviceAccountIdentifier:t}).then(function(e){return e&&"true"===e.success?e:n.$q.reject(e)})}return this.$q.resolve({success:"true"})}},{key:"openChequeScanner",value:function(e,t){var n=this.$q.defer();if(this.EnvironmentService.isNative()&&!this.EnvironmentService.isMFPSimulator())this.sendActionToNative(this.nativeCMD.OPEN_CHEQUE,{mode:e,type:t});else{if(!this.EnvironmentService.isMock()&&!this.EnvironmentService.isMFPSimulator())return this.$q.reject(this.nativeCMD.errors.NOT_SUPPORTED);var i="front"===t?"/front_cheque.jpg":"/back_cheque.jpg",s=new Image;s.crossOrigin="Anonymous",s.src="../../assets/images/mock/rdc"+i,s.onload=function(){var e=document.createElement("CANVAS"),t=e.getContext("2d");e.height=this.height,e.width=this.width,t.drawImage(this,0,0);var i=e.toDataURL();e=null;var s={image:i};n.resolve(s)}}return this._outstandingPromises[this.nativeCMD.OPEN_CHEQUE]=n,n.promise}},{key:"isWatchAvailable",value:function(){return this.EnvironmentService.isNative()?this.nativeCall(this.nativeCMD.CHECK_WATCH_STATUS):this.$q.resolve({status:"error"})}},{key:"setWatchAuthCode",value:function(e){return this.EnvironmentService.isNative()?this.nativeCall(this.nativeCMD.CMD_SET_WATCH_AUTH_CODE,e):this.$q.resolve({status:"error"})}},{key:"removeWatchAuthCode",value:function(){return this.EnvironmentService.isNative()?this.nativeCall(this.nativeCMD.CMD_REMOVE_WATCH_AUTH_CODE):this.$q.resolve({status:"error"})}},{key:"activateWatch",value:function(){return this.StorageService.setItem(this.storageConstants.KEYS.WATCH_ENABLED,{enabled:!0},!1)}},{key:"isWatchActivated",value:function(){return this.EnvironmentService.isNative()?this.StorageService.getItem(this.storageConstants.KEYS.WATCH_ENABLED).then(function(e){return!(!e||"success"!==e.status)}):this.$q.resolve(!1)}},{key:"isAndroidWatchNotifEnabled",value:function(){return this.EnvironmentService.isNative()?this.nativeCall(this.nativeCMD.CMD_ANDROID_WATCH_NOTIF).then(function(e){return!(!e||"success"!==e.status)}):this.$q.resolve(!1)}},{key:"setDefaultValuesToNative",value:function(e){if(e&&e.dynatrace&&e.tealeaf){var t="";e.rdc&&e.rdc["rdc.ioslowmemorydevices"]&&(t=e.rdc["rdc.ioslowmemorydevices"]),this.EnvironmentService.isNative()&&this.sendActionToNative(this.nativeCMD.DEFAULT_VALUES,{dynatraceUrl:e.dynatrace["dynatrace.baseurl"],tealeafUrl:e.tealeaf["tealeaf.baseurl"],dynatraceEnabled:e.dynatrace["dynatrace.analytics.enabled"],tealeafEnabled:e.tealeaf["tealeaf.analytics.enabled"],iosLowMemoryDevices:t})}}},{key:"getPushToken",value:function(){function e(e){e&&(n.pushToken=e.pushToken,n.model=e.model),t.resolve(n)}var t=this.$q.defer(),n={pushToken:null,model:null};return"undefined"!=typeof cordova&&cordova.exec?(cordova.exec(e,t.reject,"Device","getDeviceInfo",[]),t.promise):this.$q.when(n)}},{key:"getPendingDisabledLoginOptions",value:function(e){var t=this;return e?this.StorageService.getItem(this.storageConstants.KEYS.PENDING_DISABLED_LOGIN_OPTION).then(function(t){var n=null;return t&&(0,c.default)(t).forEach(function(i){i===e&&(n=t[i])}),n}).catch(function(e){return t.$log.error("DB - getPendingDisabledLoginOptions error: "+(0,r.default)(e)),null}):this.$q.when(null)}},{key:"setPendingDisabledLoginOptions",value:function(e,t){var n=this;if(!e||!Array.isArray(t))return this.$q.reject("invalid parameters");var i=this.storageConstants.KEYS;return this.StorageService.getItem(i.PENDING_DISABLED_LOGIN_OPTION).then(function(n){return n&&Array.isArray(n)?(n[e]=t,n):(0,a.default)({},e,t)}).then(function(e){return n.StorageService.setItem(i.PENDING_DISABLED_LOGIN_OPTION,e)}).catch(function(e){return n.$log.error("DB - setPendingDisabledLoginOptions error: "+(0,r.default)(e)),n.$q.reject(e)})}},{key:"activatePaymentPass",value:function(e,t){var n=this;return this.activateCard(t,e).then(function(e){return"true"!==e.success?n.$q.reject():n.$q.resolve(e)})}},{key:"getNativeDeviceBlackBoxData",value:function(){return this.nativeCall(this.nativeCMD.BLACKBOX)}}]),e}();f.$inject=["$q","$rootScope","$injector","$timeout","$http","StorageService","EnvironmentService","storageConstants","nativeCMD","$log","localeConstants","MobilePaySessionService","stateConstants","$state","buildConstants","AnalyticsService","analyticsConstants"],t.default=f,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.CachingPromise=void 0;var s=n(29),a=i(s),o=n(6),r=i(o),l=n(13),c=i(l),u=n(0),d=i(u),h=n(1),_=i(h),g=t.CachingPromise=function(){function e(t,n,i,s,a){(0,d.default)(this,e),this.$log=t,this.deferred=n,this.cache=i,this.cacheKey=s,this.maxAgeSec=a,this.promise=n.promise}return(0,_.default)(e,[{key:"resolve",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.responseHeaders,i=null,s=n&&Object.prototype.hasOwnProperty.call(n,"max-age"),a=n&&"cache-control"in n;try{if(n&&(a||s||this.maxAgeSec)&&e&&!t&&this.cache&&this.cache.$$prefix){if(s)i=parseInt(n["max-age"],10);else if(this.maxAgeSec)i=this.maxAgeSec;else if(a){var o=n["cache-control"].match(this.SERVICE_REGEX.MAX_AGE);o&&(i=parseInt(o[1],10))}i&&(this.cache.setMaxAge(1e3*i),this.cache.put(this.cacheKey,e),this.$log.debug("CACHE: SET: "+i+"sec: "+this.cacheKey,e))}}catch(e){this.$log.warn("Error while saving cache for "+this.cacheKey,e)}return this.deferred.resolve(e)}},{key:"reject",value:function(e){return this.deferred.reject(e)}}]),e}(),S=function(){function e(t,n,i,s,a,o,r,l,u,h,_,g,S,f,v,E,p,T,m,C,A,I,O){var N=this;(0,d.default)(this,e),this.$http=t,this.$log=n,this.$state=i,this.$q=s,this.$interpolate=a,this.ErrorService=r,this.AnalyticsService=l,this.EnvironmentService=o,this.Idle=S,this.SessionService=v,this.EventBusService=E,this.LocaleService=p,this.$rootScope=T,this.eventConstants=m,this.$cookies=C,this.NativeService=A,this.stateConstants=g,this.Keepalive=O,this.cacheFactory=f,this.config=u.SERVICE_CONFIG,this.analyticEvents=h.AVAILABLE_EVENTS,this.errorEvents=_.AVAILABLE_EVENTS,this._isLevel2Granted=!1,this.HTTP_VERBS=u.HTTP_VERBS,this.REQUEST_TYPES=u.REQUEST_TYPES,this.DATA_INVALIDATED=u.DATA_INVALIDATED,this.ROOT_ENDPOINTS=u.ROOT_ENDPOINTS,this.CACHE_CLEARING=u.CACHE_CLEARING,this.CACHE_GROUPS=u.CACHE_GROUPS,this.SUCCESS_STATUS_CODES=u.SUCCESS_STATUS_CODES,this.AVAILABLE_SERVICES=u.AVAILABLE_SERVICES,this.WEB_API_BASE_URL=this.config.defaults.webApiBaseUrl,this.SERVICE_REGEX=u.SERVICE_REGEX,this.headerKeys={TRANSACTION_TOKEN:"x-transaction-token",WEB_FLAVOUR:"x-web-flavour",ACCEPT_LANGUAGE:"Accept-Language"},this.EnvironmentService.isMock()?this.defaultRequestType=this.REQUEST_TYPES.MOCK:this.EnvironmentService.isNative()?this.defaultRequestType=this.REQUEST_TYPES.WL:this.defaultRequestType=this.REQUEST_TYPES.HTTP,this.defaultConfig=this.config.defaults,this._pendingRequestsExcludeList=[this.config.insightsSession],this._pendingRequests={},this._dynatrace=this.AnalyticsService.getDynaTrace(),this.EventBusService.subscribe(this.$rootScope,"Level2AuthChange",function(e,t){N._isLevel2Granted=t}),this.config.groupCacheClearingExclusions=[],(0,c.default)(this.config).forEach(function(e){var t=N.config[e];if(t[N.defaultRequestType]){var n=N._getCacheFactoryKey(N.defaultRequestType,t);t.cacheFactoryKey=n,t.cacheStrategy&&t.cacheStrategy.groupClearingExcluded&&N.config.groupCacheClearingExclusions.push(t.cacheFactoryKey),t.cacheStrategy||(t.cacheStrategy={}),t.method===N.HTTP_VERBS.GET&&(Object.prototype.hasOwnProperty.call(t.cacheStrategy,"cacheResult")||(t.cacheStrategy.cacheResult=!0)),(0,c.default)(N.CACHE_GROUPS).forEach(function(e){var i=N.CACHE_GROUPS[e];Object.prototype.hasOwnProperty.call(t.cacheStrategy,i.configProperty)||(t.cacheStrategy[i.configProperty]=n.indexOf("/"+i.searchString)>=0),!t.cacheStrategy.maxAgeSec&&t.cacheStrategy[i.configProperty]&&(t.cacheStrategy.maxAgeSec=i.maxAgeSec)})}}),this.lastError={code:"",msg:"",counter:0},this.lastHttpCall=(new Date).getTime(),E.subscribe(this.$rootScope,I.TPW_KEEP_ALIVE,function(){return N.keepAlive()})}return(0,_.default)(e,[{key:"request",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;s||(s=this.defaultRequestType),this.$log.debug("Service request for "+e,t,i);var a=this.config[e],o=a.method;o&&o in this.HTTP_VERBS||(o=this.HTTP_VERBS.GET);var l=this.$q.defer(),c=!1,u=a.cacheFactoryKey,d=this.cacheFactory.get(u),h=this._generateCacheKey(u,t),_=void 0,S=!1;if(a.hasOwnProperty("cacheStrategy")&&a.cacheStrategy.cacheResult){if(d?i&&i.resetCache&&d.removeAll():d=this.cacheFactory.createCache(u,{storageMode:this.cacheFactory.defaults.storageMode,deleteOnExpire:"aggressive"}),h){var f=d.info(h);if(f){var v=d.get(h);v&&(v.cache_status&&v.cache_status.stale||(0,r.default)(v,{cache_status:{stale:f.isExpired}}),v.cache_status.stale?d.remove(h):(l.resolve(v),c=!0,this.$log.debug("CACHE: GET: "+h,v)))}}if(!c){var E=a.cacheStrategy.maxAgeSec;l=new g(this.$log,l,d,h,E),this.$log.debug("CACHE: NO CURRENT DATA FOUND: "+h)}}else o!==this.HTTP_VERBS.GET&&u&&(S=!0);var p=s===this.REQUEST_TYPES.MOCK;if(this._pendingRequests[h]&&!p)return o!==this.HTTP_VERBS.GET&&-1===this._pendingRequestsExcludeList.indexOf(a)?this._processDestructiveDoubleClick(e,t):this._pendingRequests[h].promise;if(p||!c)switch(this._pendingRequests[h]=l,this.Idle.running()&&this.Idle.unwatch(),l.promise.finally(function(){n._pendingRequests[h]=void 0,n.$state.current.name!==n.stateConstants.LOGIN&&n.Idle.watch(),n._onRequestCompleted(_)}),s){case this.REQUEST_TYPES.HTTP:_=this._onRequestStarted(e),this._http(a,o,t,l);break;case this.REQUEST_TYPES.WL:_=this._onRequestStarted(e),this._validateTrustedCertificate(e).then(function(){return n._worklight(a,o,t,l)}).catch(function(e){return l.reject(e)});break;default:this._mockRequest(a,o,t,l)}return l.promise.then(function(e){return!S||t.data&&(t.data.validate_only||t.data.validate_client_eligibility)||i.skipInvalidation||a.cacheStrategy.skipCacheClearing||n._cleanCache(u,a),e})}},{key:"_isValidResponse",value:function(e){return!e.response_status||this.SUCCESS_STATUS_CODES.indexOf(e.response_status.status_code)>-1}},{key:"_processDestructiveDoubleClick",value:function(e,t){var n="Double click occured for "+e;return this.ErrorService.processError(n,this.errorEvents.DOUBLE_CLICK,n),this.$log.warn(n,t),this.$q.defer().promise}},{key:"_worklight",value:function(e,t){function n(e){f.$log.debug("Worklight Success",o,l,s,e),e?(e.responseJSON&&(e.responseJSON.responseHeaders=e.responseHeaders),a.resolve(e.responseJSON)):a.reject(e)}function i(e){var t={errorCode:"UNEXPECTED_ERROR"};e.errorCode===t.errorCode&&WL.Device.getNetworkInfo(function(e){if("false"===e.isNetworkConnected)return void f.EventBusService.publish(f.eventConstants.CONNECTION_LOST)}),f.$log.debug("Worklight Failure",o,l,s,e);var n=e.data?e.data:e;f._processError(n,a)}var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments[3],o=e.WL,l=o.method||t;this.$log.debug("WORKLIGHT WORKING FOR 1",o,l,s);var c=void 0,u=o.adapter,d=WLResourceRequest[l]||WLResourceRequest.GET,h=["adapters/",u,"/",o.path].join("");h=this._interpolate(h,s),this.$log.debug("adapterString",h);var _=new WLResourceRequest(h,d);if(s&&(s.urlVars||s.queries)){var g=(0,r.default)({},s.urlVars,s.queries);_.setQueryParameters(g)}var S=s.headers||{};S[this.headerKeys.ACCEPT_LANGUAGE]=this.LocaleService.localeDisplay.toLowerCase(),this._applyDynaTraceHeaders(S,u+"/"+o.path),_.setHeaders(S),c=s&&s.formBody?_.sendFormParameters(s.formBody):_.send(s&&s.data||null),this.$log.debug("WORKLIGHT WORKING FOR 2:",s," req:",_," headers:",_.getHeaders());var f=this;c.then(n,i)}},{key:"_http",value:function(e,t,n,i){var s=this,a=e.HTTP,o=a.method||t,l=void 0;l=a.skipWebApiBaseUrl?a.url:""+(this.WEB_API_BASE_URL+a.url);var c=""+(this.EnvironmentService.getAPIUrl()+l),u=a.timeout||this.defaultConfig.timeout;c=this._interpolate(c,n),this.$log.debug("_http:",o,c);var d=n.headers||{};d[this.headerKeys.WEB_FLAVOUR]="fbe",d[this.headerKeys.TRANSACTION_TOKEN]=this.SessionService.transaction_token,d[this.headerKeys.ACCEPT_LANGUAGE]=this.SessionService.locale,this._applyDynaTraceHeaders(d,l),o===this.HTTP_VERBS.GET&&(d["If-Modified-Since"]="Mon, 26 Jul 1997 05:00:00 GMT",d["Cache-Control"]="no-cache",d.Pragma="no-cache"),this.lastHttpCall=(new Date).getTime(),this.$log.debug("User has made network request, resetting idle timeout"),this.$http({method:o,url:c,data:n.data,params:n.queries,timeout:u,headers:d,withCredentials:!0}).then(function(e){var t=e.data,n=angular.isFunction(e.headers)?e.headers():{};o===s.HTTP_VERBS.GET&&angular.isDefined(n[s.headerKeys.TRANSACTION_TOKEN])&&(s.SessionService.transaction_token=n[s.headerKeys.TRANSACTION_TOKEN]),s._notAuthorized(t.http_code)&&(s.$log.warn("Not authorized, redirect to Login"),s._goToLogin()),s._accessDenied(t.http_code)?s._goToComingSoonSite():s._errorRequest(t.http_code)?s._processError(e.data,i):(s._isValidResponse(t)||(s.lastError.code=t.response_status.status_code,s.lastError.counter=s.lastError.counter+1),i.resolve((0,r.default)(t,{responseHeaders:n})))},function(e){s.$log.warn("Service error",o,c,e),s._notAuthorized(e.status)?(s.$log.warn("Not authorized, redirect to Login"),s._goToLogin()):s._accessDenied(e.status)?s._goToComingSoonSite():s._processError(e,i)})}},{key:"_mockRequest",value:function(e,t,n,i){var s=e.MOCK,a=this.defaultConfig.mockBaseURL+s.url,o=s.timeout||this.defaultConfig.timeout;a=this._interpolate(a,n),this.$log.debug("_mockRequest",a,t),this.$http({method:this.HTTP_VERBS.GET,url:a,data:n.data,params:n.queries,timeout:o,headers:n.headers}).success(function(e){var t=e;"default"in e&&(t=e.default),"mockResponse"in n&&e[n.mockResponse]&&(t=e[n.mockResponse]),i.resolve(t)}).error(function(e,t){i.reject({data:e,status:t})})}},{key:"_goToLogin",value:function(){this.SessionService.destroyCache(),this.SessionService.cleanChallenge(),this.EnvironmentService.isNative()&&this.InsightsSessionService.deleteSession();var e=this.$state.current.data,t=e&&e.requiresAnon;this.$rootScope.currentTargetState?(delete this.$rootScope.currentTargetState,this.$state.go(this.stateConstants.LOGIN,{skipAnonCheck:!0},{location:!1,custom:{returnTo:this.$rootScope.currentTargetState}}),delete this.$rootScope.currentTargetState):this.$state.go(this.stateConstants.LOGIN,{skipAnonCheck:!0},{location:t})}},{key:"_goToComingSoonSite",value:function(){this.$state.go(this.stateConstants.ACCESS_DENIED)}},{key:"_notAuthorized",value:function(e){return 401===e}},{key:"_accessDenied",value:function(e){return 403===e}},{key:"_interpolate",value:function(e,t){return t&&"urlVars"in t?(this.$log.debug("interpolating",e,t),this.$interpolate(e)(t.urlVars)):e}},{key:"_errorRequest",value:function(e){return e>=400}},{key:"_processError",value:function(e,t){this.ErrorService.processError(e,this.errorEvents.REQUEST_ERROR).then(function(n){t.reject({data:e.data,status:e.status,errorMessage:n.message})}).catch(function(){t.reject({})})}},{key:"_getCacheFactoryKey",value:function(e,t){var n="";switch(e){case this.REQUEST_TYPES.HTTP:n=""+(this.WEB_API_BASE_URL+t.HTTP.url);break;case this.REQUEST_TYPES.WL:n=t.WL.path;break;case this.REQUEST_TYPES.MOCK:}return n}},{key:"_generateCacheKey",value:function(e,t){var n=[e];return t&&(t.queries&&n.push(this._flattenObject(t.queries)),t.urlVars&&n.push(this._flattenObject(t.urlVars)),t.data&&n.push(this._flattenObject(t.data)),this.EnvironmentService.isNative()&&this._isLevel2Granted&&n.push("Level2Auth")),n.join(":")}},{key:"_flattenObject",value:function(e){var t={};!function e(n,i){if(Object(n)!==n)t[i]=n;else if(Array.isArray(n))0===n.length?t[i]=[]:n.forEach(function(t,n){e(t,i+"["+n+"]")});else{var s=!0;(0,c.default)(n).forEach(function(t){s=!1,e(n[t],i?i+"."+t:t)}),s&&i&&(t[i]={})}}(e,"");var n=[];(0,c.default)(t).forEach(function(e){n.push(e)}),n.sort();var i="";return n.forEach(function(e){var n=(0,a.default)(t[e]);i+=e+"="+n+","}),i.slice(0,-1)}},{key:"_cleanCache",value:function(e,t){var n=this;this.$log.debug("CACHE: CLEARING: current caches: ",this.cacheFactory.keys()),this.CACHE_CLEARING.has(t)&&this.CACHE_CLEARING.get(t).forEach(function(e){n.cacheFactory.destroy(e.cacheFactoryKey),n.$log.debug("CACHE: CLEARING SPECIFIC: destroyed cache: ",e.cacheFactoryKey)}),(0,c.default)(this.CACHE_GROUPS).forEach(function(e){var i=n.CACHE_GROUPS[e];t.cacheStrategy[i.configProperty]&&n._invalidateMatchingCaches(i.searchString)}),this.$log.debug("CACHE: CLEARING: remaining caches: ",this.cacheFactory.keys())}},{key:"_hasPath",value:function(e,t){return e.indexOf("/"+t)>=0}},{key:"_invalidateMatchingCaches",value:function(e){var t=this;this.cacheFactory.keys().forEach(function(n){-1===t.config.groupCacheClearingExclusions.indexOf(n)&&t._hasPath(n,e)&&(t.cacheFactory.destroy(n),t.$log.debug("CACHE: CLEARING: destroyed cache: ",n))}),this.EventBusService.publish(this.DATA_INVALIDATED,e)}},{key:"invalidateCapabilitesCache",value:function(){var e=this.config[this.AVAILABLE_SERVICES.USER_CAPABILITIES].cacheFactoryKey,t=this.config[this.AVAILABLE_SERVICES.USER_CAPABILITIES_NO_QUERY].cacheFactoryKey;this.cacheFactory.destroy(e),this.EventBusService.publish(this.DATA_INVALIDATED,e),this.cacheFactory.destroy(t),this.EventBusService.publish(this.DATA_INVALIDATED,t),this.$log.debug("CACHE: CLEARING CAPABILITIES ONLY: destroyed caches: ",e,t)}},{key:"_onRequestStarted",value:function(e){try{if(!this._dynatrace)return;return this._dynatrace.enterAction(this.analyticEvents.API_REQUEST+"."+e)}catch(e){return}}},{key:"_onRequestCompleted",value:function(e){try{if(!e||!this._dynatrace)return;return this._dynatrace.leaveAction(e)}catch(e){return}}},{key:"_applyDynaTraceHeaders",value:function(e,t){try{var n=t.replace(/((\?|&[\w_]+=)?(\/?)\{\{(\w+)}\})/gi,"");e[this.AnalyticsService.DYNATRACE_HEADERS.SERVICE_URL]=n;var i=this.AnalyticsService.getCurrentPageView();i&&(e[this.AnalyticsService.DYNATRACE_HEADERS.PAGE]=i);var s=this.$cookies.get("gtmok");s&&(e[this.AnalyticsService.DYNATRACE_HEADERS.CUSTOMER]=s)}catch(e){}}},{key:"_validateTrustedCertificate",value:function(e){var t=this.config[e];return t&&t.WL&&t.WL.validateCertificate?(this.$log.debug("Verify root cert for request",t.WL.path),this.NativeService.validateTrustedCertificate()):this.$q.when()}},{key:"keepAlive",value:function(){var e=1e3*this.Keepalive._options().interval;isNaN(e)||(new Date).getTime()-this.lastHttpCall>=e&&(this.$log.debug("Processing Tpw Keep Alive Request"),this.request(this.AVAILABLE_SERVICES.KEEP_ALIVE,{}))}}]),e}();S.$inject=["$http","$log","$state","$q","$interpolate","EnvironmentService","ErrorService","AnalyticsService","serviceConstants","analyticsConstants","errorConstants","stateConstants","Idle","CacheFactory","SessionService","EventBusService","LocaleService","$rootScope","eventConstants","$cookies","NativeService","appStateConstants","Keepalive"],t.default=S},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i,s,o,r){(0,a.default)(this,e),this.requesterService=s,this.sessionService=o,this.authService=r,this.$q=t,this.$log=n,this.$timeout=i,this.successCodes=["SUCCESS","CREATED","NO_DATA","RATE_HOLDS_NOT_EXIST","RESTRICTIONS"]}return(0,r.default)(e,[{key:"handleNoSession",value:function(){this.sessionService.isAuthenticated()&&this.authService.logout()}},{key:"validResponse",value:function(e){return!!e&&(!!e.response_status&&("NO_SESSION"===e.response_status.status_code?(this.handleNoSession(),!1):this.successCodes.indexOf(e.response_status.status_code)>=0))}},{key:"request",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.requesterService.request(e,n,i).then(function(s){return t.validResponse(s)?t.$q.resolve(s):(t.$log.error("Error response:",e,n,i),t.$q.reject(s))})}}]),e}();l.$inject=["$q","$log","$timeout","RequesterService","SessionService","AuthService"],t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(29),a=i(s),o=n(0),r=i(o),l=n(1),c=i(l),u=function(){function e(t,n,i,s,a,o,l){(0,r.default)(this,e),this.$q=t,this.$log=n,this.$rootScope=i,this.$window=s,this.$timeout=a,this.storageConstants=o,this.isNative="undefined"!=typeof WL,this.isMFPEmulator=l.MFP_ENV,this._storageService={},this._outstandingPromises={}}return(0,c.default)(e,[{key:"getItem",value:function(e,t){var n=this,i=this.storageConstants.GET+e;if(!e)return this.$q.reject(this.storageConstants.ERRORS.PARAMS);if(this.isNative&&!this.isMFPEmulator){var s=this.$q.defer();return this._outstandingPromises[i]?this._outstandingPromises[i].push(s):(this._outstandingPromises[i]=[s],this.$rootScope.deviceReadyDeferred.promise.then(function(){WL.App.sendActionToNative(n.storageConstants.GET,{key:e,data:t})})),s.promise}var a=localStorage.getItem(e);return a=a&&JSON.parse(a),this.$q.when(a)}},{key:"setItem",value:function(e,t,n,i){var s=this,o=n||!1,r=this.storageConstants.SET+e;if(!e)return this.$q.reject(this.storageConstants.ERRORS.PARAMS);if(this.isNative&&!this.isMFPEmulator){var l=this.$q.defer();return this._outstandingPromises[r]?this._outstandingPromises[r].push(l):(this._outstandingPromises[r]=[l],this.$rootScope.deviceReadyDeferred.promise.then(function(){WL.App.sendActionToNative(s.storageConstants.SET,{key:e,data:(0,a.default)(t),isSecure:o,authMode:i})})),l.promise}return localStorage.setItem(e,(0,a.default)(t)),this.$q.when(!0)}},{key:"deleteItem",value:function(e){var t=this,n=this.storageConstants.DEL+e;if(!e)return this.$q.reject(this.storageConstants.ERRORS.PARAMS);if(this.isNative&&!this.isMFPEmulator){var i=this.$q.defer();return this._outstandingPromises[n]?this._outstandingPromises[n].push(i):(this._outstandingPromises[n]=[i],this.$rootScope.deviceReadyDeferred.promise.then(function(){WL.App.sendActionToNative(t.storageConstants.DEL,{key:e})})),i.promise}return localStorage.setItem(e,null),this.$q.when(!0)}},{key:"addItemToList",value:function(e,t){var n=this,i=this.$q.defer(),s=void 0;return e&&t?(this.getItem(e).then(function(a){s=a||[],angular.isArray(s)||n.$q.reject(n.storageConstants.ERRORS.NOTLIST),s.push(t),n.setItem(e,s).then(function(){i.resolve(!0)},function(e){i.reject(e)})},function(){n.setItem(e,[t]).then(function(){i.resolve(!0)},function(e){i.reject(e)})}),i.promise):this.$q.reject(this.storageConstants.ERRORS.PARAMS)}},{key:"removeItemFromList",value:function(e,t){var n=this,i=this.$q.defer(),s=void 0;return e&&t?(this.getItem(e).then(function(a){s=a||[],angular.isArray(s)||n.$q.reject(n.storageConstants.ERRORS.NOTLIST),s=s.filter(function(e){return!angular.equals(t,e)}),n.setItem(e,s).then(function(){i.resolve(!0)},function(e){n.$log.debug("NativeError "),n.$log.debug(t),i.reject(e)})},function(){i.reject(n.storageConstants.ERRORS.NOTLIST)}),i.promise):this.$q.reject(this.storageConstants.ERRORS.PARAMS)}},{key:"handleNativeResponse",value:function(e,t){if(this._outstandingPromises[e]&&this._outstandingPromises[e].length){var n=void 0;try{n=JSON.parse(t.data)}catch(e){n=void 0!==t&&void 0!==t.data?t.data:""}t&&"success"===t.status?this._outstandingPromises[e].forEach(function(e){e.resolve(n)}):this._outstandingPromises[e].forEach(function(e){e.reject(n)}),delete this._outstandingPromises[e]}else this.$log.debug("No promise registered for this action",e)}}]),e}();u.$inject=["$q","$log","$rootScope","$window","$timeout","storageConstants","buildConstants"],t.default=u,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i,s,o,r,l){(0,a.default)(this,e),this.$log=t,this.$q=n,this.RequesterService=i,this.LocaleService=l,this.serviceConstants=s,this.TYPES=o.TYPES,this.CacheFactory=r,this._init()}return(0,r.default)(e,[{key:"getFromCache",value:function(e){var t=void 0;try{t=this.cache.get(e)}catch(e){this.$log.debug("Cache not available, reinitializing"),this._init()}return t}},{key:"getDataByType",value:function(e){var t=this,n=this.$q.defer(),i=Array.isArray(e)?e:[e],s=[],a={};return i.forEach(function(e){var n=t.getFromCache(e);n?a[e]=n:s.push(e)}),s.length?this._requestReferenceData(s).then(function(e){n.resolve(angular.extend(a,e))}):n.resolve(a),n.promise}},{key:"_init",value:function(){this.requestedTypeCodes=[],this.outstandingRequests={},this.cacheNamespace="referenceData",this.cache=this.CacheFactory.get(this.cacheNamespace),this.cache||(this.cache=this.CacheFactory.createCache(this.cacheNamespace,{deleteOnExpire:"aggressive",recycleFreq:6e4,storageMode:"sessionStorage"}))}},{key:"_requestReferenceData",value:function(e){var t=this,n={};return n.types=Array.isArray(e)?e.join(","):e,this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.REFERENCE_DATA,{queries:n,urlVars:{locale:this.LocaleService.locale}}).then(function(e){var n={};return e.reference_data&&e.reference_data.forEach(function(e){n[e.type]=e.data,t.cache.put(e.type,e.data)}),n})}}]),e}();l.$inject=["$log","$q","RequesterService","serviceConstants","referenceDataConstants","CacheFactory","LocaleService"],t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(98),a=i(s),o=n(0),r=i(o),l=n(1),c=i(l),u=n(55),d=i(u),h=n(18),_=i(h);n(918),n(919);var g={locale:void 0},S=function(){function e(t,n,i,s,a,o,l,c,u){(0,r.default)(this,e),this.$log=t,this.$q=n,this.$translate=i,this.$window=s,this.tmhDynamicLocale=a,this.EnvironmentService=c,this.SessionService=o,this.NativeService=l,this.localeConstants=u,g.locale=null}return(0,c.default)(e,[{key:"initLocale",value:function(){var e=this,t=this.$q.defer();return this._retrieveLocale().then(function(n){return e.$log.debug("Setting initial locale to ",n),!e.EnvironmentService.isNative()&&e.SessionService.locale?e.locale=e.SessionService.locale:e.locale=n,e.setMomentLocale(),t.resolve(e.locale)}).catch(function(n){return e.$log.debug("Failed to retrieve local from Native. Rollback to default",n),e.locale=e.localeConstants.DEFAULT,t.resolve(e.locale)}),t.promise}},{key:"_retrieveLocale",value:function(){var e=this,t=this.$q.defer();return this.EnvironmentService.isNative()?(this.NativeService.getLocale().then(function(n){e.$log.debug("Determining locale from device",n.locale);var i=e._formatNativeLocale(n.locale);return t.resolve(i)}).catch(function(e){return t.reject(e)}),t.promise):this.$q.when(this.localeConstants.DEFAULT)}},{key:"_formatLocale",value:function(e){if(_.default.isEmpty(e))return"";var t=e.replace("-","_"),n=t.split("_"),i=(0,a.default)(n,2),s=i[0],o=i[1];return s&&o?(o=o.toUpperCase(),s+"_"+o):e}},{key:"_formatNativeLocale",value:function(e){return _.default.isEmpty(e)?"":"en"===e.toLowerCase().replace("-","_").split("_")[0]?this.localeConstants.LOCALES.EN_CA:-1!==e.indexOf("fr")?this.localeConstants.LOCALES.FR_CA:this.localeConstants.LOCALES.EN_CA}},{key:"_isSupportedLocale",value:function(e){var t=this.localeConstants.LOCALES;return[t.EN_CA,t.FR_CA].indexOf(e)>=0}},{key:"setMomentLocale",value:function(){d.default.locale(this.isFrench()?"fr-ca":"en-ca")}},{key:"isFrench",value:function(){return this.locale===this.localeConstants.LOCALES.FR_CA}},{key:"isEnglish",value:function(){return this.locale===this.localeConstants.LOCALES.EN_CA}},{key:"locale",set:function(e){var t=this._formatLocale(e);this._isSupportedLocale(t)||(this.$log.info("Failed to set locale as ",e),this.$log.info("Rollback local to ",this.localeConstants.DEFAULT),t=this.localeConstants.DEFAULT),g.locale=t,this.$translate.use(t),this.tmhDynamicLocale.set(t),this.SessionService.locale=t,this.setMomentLocale()},get:function(){return g.locale}},{key:"localeDisplay",get:function(){return g.locale?g.locale.replace("_CA","").toUpperCase():""}},{key:"language",get:function(){return this.isFrench()?this.localeConstants.LANGUAGES.FRENCH:this.localeConstants.LANGUAGES.ENGLISH}},{key:"shortHandLocale",get:function(){return this.localeConstants.SHORTHAND_LOCALE[this.locale]}},{key:"shortHandLocaleUppercase",get:function(){return this.localeConstants.SHORTHAND_LOCALE[this.locale].toUpperCase()}}]),e}();S.$inject=["$log","$q","$translate","$window","tmhDynamicLocale","SessionService","NativeService","EnvironmentService","localeConstants"],t.default=S,e.exports=t.default},,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t){(0,a.default)(this,e),this.$window=t}return(0,r.default)(e,[{key:"guardDialogScroll",value:function(e){if(e&&e.length&&this.$window.MutationObserver){var t=e[0].querySelector(".dialog__content"),n=t.scrollHeight,i=t.scrollTop,s=new this.$window.MutationObserver(function(e){s.disconnect(),e.forEach(function(e){if("childList"===e.type&&e.addedNodes&&Array.prototype.find.call(e.addedNodes,function(e){return e.classList&&e.classList.contains("js-maintain-scroll")})){var s=t.scrollHeight,a=t.scrollTop!==i;s>n&&!a&&(t.scrollTop+=s-n)}})});s.observe(t,{childList:!0,subtree:!0})}}}]),e}();l.$inject=["$window"],t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(13),a=i(s),o=n(0),r=i(o),l=n(1),c=i(l),u=function(){function e(t,n,i,s,a,o,l,c,u,d){(0,r.default)(this,e),this.$q=n,this.$http=i,this.$log=t,this.$location=s,this.SessionService=l,this.ErrorService=o,this.EnvironmentService=a,this.errorConstants=c,this.authConstants=u,this.loginConstants=d,this.isLogin=!0}return(0,c.default)(e,[{key:"metroPost",value:function(e,t){var n=this,i=t;this.$log.debug("post object"),this.$log.debug(e);var s=this.$q.defer();return this.$http({method:"post",url:this.base+"/Tangerine.html",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","x-web-flavour":"fbe"},data:this.buildParam(e,!0),withCredentials:this.isLogin}).success(function(t){e.acn&&(n.SessionService.clientIdentifier=e.acn),n.handleHTTPSuccess(t,i,s)}).error(function(e){n.processError(e,s)}),s.promise}},{key:"metroGet",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Tangerine.html",a=this.$q.defer();return this.$http({method:"get",url:this.base+"/"+s+"?command="+e+"&device=web",headers:{"x-web-flavour":"fbe"},withCredentials:this.isLogin,params:t}).success(function(e){i.bypassRedirect?a.resolve(e):n.handleHTTPSuccess(e,void 0,a)}).error(function(e){n.processError(e,a)}),a.promise}},{key:"handleHTTPSuccess",value:function(e,t,n){var i=this;this.$log.debug("In _handleHTTPSuccess"),this.$log.debug("data is",e),this.$log.debug("params are",t);var s=void 0;try{if(e.indexOf(this.loginConstants.REDIRECT_PATHS.ERROR_MOBILEPLUS)>-1?(this.$log.debug("error on post"),s=this.errorConstants.LOGIN_ERRORS.LOGIN_MOBILE_PLUS):e.indexOf(this.loginConstants.REDIRECT_PATHS.ERROR_MOBILEPLUS_NATIVE)>-1?s=this.errorConstants.LOGIN_ERRORS.LOGIN_MOBILE_PLUS_NATIVE:e.indexOf(this.loginConstants.REDIRECT_PATHS.ERROR)>-1?s=this.errorConstants.LOGIN_ERRORS.LOGIN_ERROR:e.indexOf(this.loginConstants.REDIRECT_PATHS.TIMEOUT)>-1&&(s=this.errorConstants.LOGIN_ERRORS.LOGIN_TIMEOUT,this.SessionService.isTimeout=!0),s)return this.isLogin&&(this.SessionService.nextStep=this.authConstants.steps.INIT),void this.processError(s,n);if(void 0!==t&&e.indexOf(t.currentCommand)>-1)return this.isLogin&&(this.SessionService.nextStep=this.authConstants.steps.INIT),void this.processError("",n);if(void 0!==t&&t.acceptedCommands.length>0){if(this.$log.debug("determine routing"),t.acceptedCommands[0].callback=!0,!(e.indexOf(t.acceptedCommands[0].command)>-1))return void this._followTPWRedirect(e,n).then(function(e){i.$log.debug("_followTPWRedirect, deferData",e)});if(this.$log.debug("found match on command: ",t.acceptedCommands[0].command),void 0!==t.acceptedCommands[0].route)return this.$log.debug("routing to ",t.acceptedCommands[0].route),void this.$location.url(t.acceptedCommands[0].route);if(t.acceptedCommands[0].callback)return void this._followTPWRedirect(e,n).then(function(e){n.resolve(e.data)})}}catch(e){}n.resolve(e)}},{key:"buildParam",value:function(e,t){var n=t,i="",s=void 0,o=void 0,r=void 0;return n=void 0!==n&&!0===n,(0,a.default)(e).forEach(function(t){s=e[t],s instanceof Array?s.forEach(function(s,a){o=n?t:t+"["+a+"]",r={},r[o]=s,i+=e.innerObj}):s instanceof Object?(0,a.default)(s).forEach(function(a){var l=s[a];o=n?t:t+"["+a+"]",r={},r[o]=l,i+=e.innerObj}):i+=void 0!==s&&null!==s?encodeURIComponent(t)+"="+encodeURIComponent(s)+"&":encodeURIComponent(t)+"=&"}),i.length?i.substr(0,i.length-1):i}},{key:"processError",value:function(e,t){var n=e?e.status:"";this.ErrorService.processError(e,this.errorConstants.AVAILABLE_EVENTS.LOGIN_WEB_ERROR).then(function(i){t.reject({data:e,status:n,errorMessage:i.message})}).catch(function(){t.reject({})})}},{key:"_followTPWRedirect",value:function(e,t){var n=this;if("string"==typeof e){var i=e.match(this.loginConstants.REGEX_REDIRECT)[1].trim();return i=this.base+i,this.$log.debug("following: "+i),this.$http({method:"get",url:i,headers:{"x-web-flavour":"fbe"},withCredentials:this.isLogin}).success(function(e){void 0!==e.MessageHeader&&void 0!==e.MessageHeader.ErrorMessage?(n.isLogin&&n.saveResponseToSession(e),t.reject({errorMessage:e.MessageHeader.ErrorMessage})):(n.$log.debug("_followTPWRedirect, data",e),n.isLogin&&n.saveResponseToSession(e),t.resolve(e))}).error(function(e){n.processError(e,t)})}return t}},{key:"saveResponseToSession",value:function(e){var t='location.replace("'+this.loginConstants.LOGIN_PATHS.TANG_HTML+"?command="+this.loginConstants.LOGIN_COMMANDS.DISPLAY_ACCOUNT_SUMMARY;if(e&&e.MessageBody){var n=e.MessageBody;switch(this._setSessionProp("device",n.Device),this._setSessionProp("locale",n.Locale),this._setSessionProp("device",n.device),this._setSessionProp("locale",n.locale),this._setSessionProp("nextStep",this._translateTPWViewToCommand(e.MessageHeader.View)),this._setSessionProp("nextCommand",n.Command),this._setSessionProp("clientIdentifier",n.ClientID),this._setSessionProp("securityQuestion",n.Question),this._setSessionProp("showCaptcha",n.ShowCaptcha),this._setSessionProp("isPinLockedInPinPage","true"===n.IsPinLock||n.LockOut),this._setSessionProp("isPinLocked","true"===n.IsPinLock||"IsPinLock"in n&&void 0===n.IsPinLock||n.LockOut),this._setSessionProp("showForgotPinLink","true"===n.ResetPINAvailable),this._setSessionProp("isDeviceBound","true"===n.IsDeviceBound),n.Phrase&&(this.SessionService.passmark=this.SessionService.passmark||{},this.SessionService.passmark.phrase=n.Phrase),this._setSessionProp("firstTime",!!n.LoginEnrollmentInformation),n.ChangePassMarkQuestion&&this._setSessionProp("firstTime",n.ChangePassMarkQuestion),n.Command){case this.loginConstants.LOGIN_COMMANDS.VALIDATE_BUSINESS_CIF:this.SessionService.savedBusinessIds=n.SavedUserId?this._translateTPWSavedIds(n.SavedUserId):[];break;case this.loginConstants.LOGIN_COMMANDS.PERSONALCIF:this.SessionService.savedUserIds=n.SavedUserId?this._translateTPWSavedIds(n.SavedUserId):[];break;case this.loginConstants.LOGIN_COMMANDS.VALIDATE_AICIF:default:this.SessionService.savedAuthorizedIds=n.SavedUserId?this._translateTPWSavedIds(n.SavedUserId):[]}}else e&&"string"==typeof e&&e.indexOf(t)&&(this.SessionService.authenticated=!0)}},{key:"_setSessionProp",value:function(e,t){void 0!==t&&(this.SessionService[e]=t)}},{key:"_translateTPWViewToCommand",value:function(e){var t=this.authConstants.tpwSteps,n=this.authConstants.steps;switch(e){case t.CIF:return n.CIF;case t.AIF:return n.AIF;case t.QUESTION:return n.QUESTION;case t.PIN:return n.PIN;default:return n.CIF}}},{key:"_translateTPWSavedIds",value:function(e){return e||0!==e.length?e.map(function(e){return{rememberMeHash:e.Index,nameToRemember:e.Label,tpwRaw:e}}):[]}},{key:"base",get:function(){return this.EnvironmentService.getAPIUrl()+"/web"}}]),e}();u.$inject=["$log","$q","$http","$location","EnvironmentService","ErrorService","SessionService","errorConstants","authConstants","loginConstants"],t.default=u,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i,s,o,r,l,c,u,d,h){(0,a.default)(this,e),this.$q=t,this.$log=i,this.$window=n,this.$timeout=o,this.$location=r,this.$rootScope=s,this.authConstants=c,this.errorConstants=u,this.ErrorService=h,this.EnvironmentService=d}return(0,r.default)(e,[{key:"initChallenge",value:function(){var e=this;return this.$log.debug("LN CredentialsMFPService initChallenge is called"),this.challengeAPI=WL.Client.createChallengeHandler("Level1Realm"),this.challengeAPI.isCustomResponse=this._isCustomResponse,this.challengeAPI.handleChallenge=function(t,n){e.handleChallenge(t,n)},this.$window.challengeAPI=this._challengeAPI,this.$q.resolve()}},{key:"handleChallenge",value:function(e,t){var n=void 0;this.$log.debug("handleChallenge",e),this._flushChallengeTriggerQ(),this._inChallenge=!0,this._isCustomResponse(e)?(n=e.responseJSON,n.authStatus===this.authConstants.status.COMPLETE?(this._challengeAPI&&(this._challengeAPI.submitSuccess(),this._inChallenge=!1),t&&t(n)):n.authStatus===this.authConstants.status.INVALID_TOKEN?this.processError(n,this.authConstants.status.INVALID_TOKEN,t):n.authStatus===this.authConstants.status.PASSMARK_LOCKED?this.processError(n,this.authConstants.status.PASSMARK_LOCKED,t):n.authStatus===this.authConstants.status.PIN_LOCKED?this.processError(n,this.authConstants.status.PIN_LOCKED,t):n.authStatus===this.authConstants.status.REQUIRED&&t&&t({nextStep:n.nextStep})):t(!1)}},{key:"processError",value:function(e,t,n){this.ErrorService.processError(t.toUpperCase(),this.errorConstants.AVAILABLE_EVENTS.LOGIN_MOBILE_ERROR).then(function(i){n({data:e,status:t,errorMessage:i.message})})}},{key:"_isCustomResponse",value:function(e){return!!(e&&e.responseJSON&&null!==e.responseText&&(e.responseJSON.authStatus||e.responseJSON.Level1Realm&&e.responseJSON.Level1Realm.isUserAuthenticated))}},{key:"_flushChallengeTriggerQ",value:function(){this._triggerQueue.map(function(e){return e.resolve()}),this._triggerQueue=[]}},{key:"base",get:function(){return this.EnvironmentService.getAPIUrl()+"/web"}}]),e}();l.$inject=["$q","$window","$log","$rootScope","$timeout","$location","$injector","authConstants","errorConstants","EnvironmentService","ErrorService"],t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i,s){(0,a.default)(this,e),this.$q=t,this.$rootScope=n,this.RequesterService=i,this.AVAILABLE_SERVICES=s.AVAILABLE_SERVICES,this.configData=null,this.lastRefresh=-1,this.LAST_REFRESH_DELAY=6e4}return(0,r.default)(e,[{key:"_init",value:function(){var e=this,t=this.$q.defer();return this.RequesterService.request(this.AVAILABLE_SERVICES.GET_CONFIGURATION).then(function(n){n||t.reject(),e.configData=n,e._configRootScopeProperties(n),t.resolve(n)}).catch(function(e){t.reject(e)}),t.promise}},{key:"_configRootScopeProperties",value:function(e){e.voicebanking&&void 0!==e.voicebanking["voicebanking.enable"]?this.$rootScope.enableMicrophone="true"===e.voicebanking["voicebanking.enable"]:this.$rootScope.enableMicrophone=!0,this.$rootScope.showMicrophone=this.$rootScope.showMicrophone&&this.$rootScope.enableMicrophone,e.mevo&&void 0!==e.mevo["mevo.enable"]?this.$rootScope.enableChat=e.mevo["mevo.enable"]:this.$rootScope.enableChat=!0,e.voicebanking&&void 0!==e.voicebanking["voicebanking.url"]&&(this.$rootScope.voicebankingUrl=e.voicebanking["voicebanking.url"]),e.touchId&&void 0!==e.touchId["android.fingerPrint.enabled"]&&void 0!==e.touchId["ios.touchId.enabled"]?(this.$rootScope.android&&"false"===e.touchId["android.fingerPrint.enabled"]||!this.$rootScope.android&&"false"===e.touchId["ios.touchId.enabled"])&&(this.$rootScope.touchIdDisabled=!0):this.$rootScope.touchIdDisabled=!1,e.dynatrace&&void 0!==e.dynatrace["dynatrace.analytics.enabled"]&&(this.$rootScope.dynatraceEnabled=!!e.dynatrace["dynatrace.analytics.enabled"]),e.featureDisable&&void 0!==e.featureDisable["feature.visitor.enroll.disabled"]&&(this.$rootScope.featureDisableVisitorEnroll="true"===e.featureDisable["feature.visitor.enroll.disabled"]),e.featureDisable&&void 0!==e.featureDisable["feature.settings.aboutme.disabled"]&&(this.$rootScope.featureDisableSettingsAboutMe="true"===e.featureDisable["feature.settings.aboutme.disabled"])}},{key:"getConfig",value:function(){var e=this.$q.defer(),t=Date.now();return!this.configData||this.configData&&t-this.lastRefresh<this.LAST_REFRESH_DELAY?(this.lastRefresh=t,this._init().then(function(t){e.resolve(t)})):e.resolve(this.configData),e.promise}},{key:"getRAF",value:function(){return this.RequesterService.request(this.AVAILABLE_SERVICES.GET_RAF)}}]),e}();l.$inject=["$q","$rootScope","RequesterService","serviceConstants"],t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i,s){(0,a.default)(this,e),this.$q=t,this.IovationTPWService=n,this.IovationMFPService=i,this.isNative=s.isNative()}return(0,r.default)(e,[{key:"collectIovationData",value:function(){this._getIovationService().collectIovationData()}},{key:"getBlackBox",value:function(){return this._getIovationService().getBlackBox()}},{key:"_getIovationService",value:function(){return this.isNative?this.IovationMFPService:this.IovationTPWService}}]),e}();l.$inject=["$q","IovationTPWService","IovationMFPService","EnvironmentService"],t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i,s,o,r){(0,a.default)(this,e),this.RequesterService=t,this.serviceConstants=n,this.firstLoginConstants=i,this.$q=s,this.$log=o,this.$window=r,this.iovation={ioBb:"",fpBb:""}}return(0,r.default)(e,[{key:"collectIovationData",value:function(){this.$log.debug("IovationTPWService : Retrieving Iovation Data.");try{this.iovation.fpBb=this.$window.fpGetBlackbox().blackbox,this.iovation.ioBb=this.$window.ioGetBlackbox().blackbox}catch(e){this.$log.debug("TPW: collectIovationData failed. Error ",e)}this.$log.debug("fbBB ="+this.iovation.fpBb),this.$log.debug("ioBB ="+this.iovation.ioBb)}},{key:"getBlackBox",value:function(){return[this.iovation.fpBb,this.iovation.ioBb].filter(function(e){return e}).join(";")}}]),e}();l.$inject=["RequesterService","serviceConstants","firstLoginConstants","$q","$log","$window"],t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i,s,o,r){(0,a.default)(this,e),this.RequesterService=t,this.NativeService=n,this.EnvironmentService=i,this.AVAILABLE_SERVICES=s.AVAILABLE_SERVICES,this.$q=o,this.$log=r,this.iovation={blackbox:""}}return(0,r.default)(e,[{key:"collectIovationData",value:function(){var e=this;this.$log.debug("IovationMFPService : Retrieving Iovation Data.");try{this.iovation.blackbox="",this.NativeService.getNativeDeviceBlackBoxData().then(function(t){return t?(e.iovation.blackbox=t.blackbox,e.$log.debug("blackbox ="+e.iovation.blackbox),e.$q.resolve(t)):e.$q.reject(t)},function(t){e.$q.reject(t),e.$log.debug("error while collecting blackbox ="+t)})}catch(e){this.$log.debug("MFP: collectIovationData failed. Error ",e)}}},{key:"getBlackBox",value:function(){return this.iovation.blackbox}},{key:"sendBlackBoxMfp",value:function(e){var t=this,n=this.EnvironmentService.getDeviceModel(),i=this.EnvironmentService.getPlatformVersion(),s=i&&i.versionString,a=this.EnvironmentService.isTablet()?"TABLET":"PHONE",o="portrait"===this.EnvironmentService.getOrientation()?"PORTRAIT":"LANDSCAPE",r=void 0;r=this.EnvironmentService.isIOS()?this.EnvironmentService.isTablet()?"IPAD":"APPLE":"ANDROID";var l={call_source:e,black_box:this.getBlackBox(),device_type:a,device_model:n,orientation:o,operating_system:r,operating_system_version:s};this.$log.debug("sendBlackBoxMfp:",l),this.RequesterService.request(this.AVAILABLE_SERVICES.SEND_ANALYTICS_INFO,{data:l,noError:!0}).then(function(e){t.$log.debug("sendBlackBoxMfp success:",e)},function(e){t.$log.error("sendBlackBoxMfp error:",e)})}}]),e}();l.$inject=["RequesterService","NativeService","EnvironmentService","serviceConstants","$q","$log"],t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(98),a=i(s),o=n(206),r=i(o),l=n(6),c=i(l),u=n(0),d=i(u),h=n(1),_=i(h),g=function(){function e(t,n,i,s){(0,d.default)(this,e),(0,c.default)(this,{$log:t,$translate:n,serviceConstants:i,$filter:s}),this.init()}return(0,_.default)(e,[{key:"init",value:function(){this.submitErrors=[]}},{key:"showSubmitErrors",value:function(e){var t=this;if(this.serviceConstants.RESPONSE_ERRORS.ERROR_MESSAGE in e&&this.submitErrors.push(e.errorMessage),e.response_status&&this.serviceConstants.RESPONSE_ERRORS.DETAILS in e.response_status){var n=new r.default;e.response_status.details.forEach(function(e){e.details_code===t.serviceConstants.STATUS_CODES.PO_BOX_NOT_ALLOWED?n.add(t.$translate.instant("global.errorCodes."+e.details_code)):n.add(e.field_name?t.parseDescription(e):e.technical_description)}),n.forEach(function(e){return t.submitErrors.push(e)})}0===this.submitErrors.length&&this.serviceConstants.RESPONSE_ERRORS.STATUS_CODE in e.response_status&&-1===this.serviceConstants.SUCCESS_STATUS_CODES.indexOf(e.response_status.status_code)&&this.submitErrors.push(this.$translate.instant("global.errorCodes."+e.response_status.return_code)),this.$log.debug("formatted error:",this.submitErrors)}},{key:"hasErrors",value:function(){return this.submitErrors&&this.submitErrors.length>0}},{key:"resetSubmitErrors",value:function(){this.submitErrors=[]}},{key:"parseDescription",value:function(e){if(-1!==this.serviceConstants.RESPONSE_DETAILS_ERROR_CODES.indexOf(e.details_code))return""+e.technical_description;var t=e.field_name.split(".").slice(-1),n=(0,a.default)(t,1),i=n[0],s=this.$filter("normalizeType")(i);return this.$translate.instant("global.errorCodes."+e.details_code)+": "+s+" - "+e.technical_description}}]),e}();g.$inject=["$log","$translate","serviceConstants","$filter"],t.default=g,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(36),a=i(s),o=n(206),r=i(o),l=n(0),c=i(l),u=n(1),d=i(u),h=function(){function e(t,n,i,s,a,o,r,l){(0,c.default)(this,e),this.$log=t,this.RequesterService=n,this.serviceConstants=i,this.OrangeAlertsConstants=s,this.accountHelpersService=a,this.nativeService=r,this.$q=o,this.environmentService=l,this.AVAILABLE_SERVICES=i.AVAILABLE_SERVICES}return(0,d.default)(e,[{key:"initializeCustomerData",value:function(){var e=this;this._customer||this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.GET_CUSTOMER_INFO).then(function(t){e._customer={address_list:t.customer.address_list,client_number:t.customer.client_number,email:t.customer.email,phone_list:t.customer.phone_list}})}},{key:"initializeAccountDict",value:function(){var e=this;return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.ACCOUNT_SUMMARY).then(function(t){t.accounts&&(e.accountsDict={},t.accounts.forEach(function(t){e.accountsDict[t.display_name]=t}))})}},{key:"initialize",value:function(){return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.GET_ORANGE_ALERTS)}},{key:"update",value:function(e,t){var n=this,i=[];if(this._customer.email=t,!t)for(var s=0;s<e.alert_channels.length;s++)e.alert_channels[s].channel_id.toUpperCase().indexOf("EMLP")>=0&&(e.alert_channels[s].active=!1);return i.push(this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.PUT_ORANGE_ALERTS,{data:{alert_notification_group:e}})),t&&i.push(this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.PUT_CUSTOMER_INFO,{data:{customer:this._customer}})),this.$q.all(i).then(function(e){return n._orangeAlertsPromise=void 0,e.every(function(e){return n.OrangeAlertsConstants.API_CALL_RESPONSES.SUCCESS===e.response_status.status_code})})}},{key:"getDeliverAlertsTo",value:function(e){var t=this;return this.initialize().then(function(n){var i,s={destinations:(i={},(0,a.default)(i,t.OrangeAlertsConstants.DELIVER_ALERT_GROUP.EMAIL,new r.default),(0,a.default)(i,t.OrangeAlertsConstants.DELIVER_ALERT_GROUP.ALT_EMAIL,[]),(0,a.default)(i,t.OrangeAlertsConstants.DELIVER_ALERT_GROUP.DEVICES,[]),i),possibleDevices:[]};return e&&s.destinations[t.OrangeAlertsConstants.DELIVER_ALERT_GROUP.EMAIL].add(e),n.alert_notification_group&&n.alert_notification_group.alert_channels&&n.alert_notification_group.alert_channels.forEach(function(e){t.OrangeAlertsConstants.DELIVER_ALERT_CHANNEL.EMLP===e.channel_id&&e.email?s.destinations[t.OrangeAlertsConstants.DELIVER_ALERT_GROUP.EMAIL].add(e.email):t.OrangeAlertsConstants.DELIVER_ALERT_CHANNEL.EMLA===e.channel_id&&e.email?e.active&&s.destinations[t.OrangeAlertsConstants.DELIVER_ALERT_GROUP.ALT_EMAIL].push(e.email):(e.active&&s.destinations[t.OrangeAlertsConstants.DELIVER_ALERT_GROUP.DEVICES].push(e.nickname),s.possibleDevices.push(e))}),s})}},{key:"getCCalerts",value:function(){var e=this;return this.initialize().then(function(t){var n=[];return e._forEachAlertNotification(t,function(t){t.category===e.OrangeAlertsConstants.ALERT_CATEGORY.CREDITCARD&&n.push(e._addCCDCAlert(t))}),n})}},{key:"getDCalerts",value:function(){var e=this;return this.initialize().then(function(t){var n=[];return e._forEachAlertNotification(t,function(t){e.OrangeAlertsConstants.DEBIT_CARD_ALERTS[t.alert_type]&&n.push(e.addDCAlert(t))}),n})}},{key:"addDCAlert",value:function(e){var t=this,n=!0,i=void 0;return e.criteria.forEach(function(e){t.accountsDict&&e.account_number&&t.accountHelpersService.getDisplayName(t.accountsDict[e.account_number]).then(function(t){e.accountDisplayName=t}),i=e.threshold,e.active||(n=!1)}),{active:e.active,criteria:e.criteria,key:e.alert_type,nrOfAccounts:n?this.OrangeAlertsConstants.ACCOUNT_AND_CACHE_CATEGORY.FOR_ALL_ACCOUNTS:this.OrangeAlertsConstants.ACCOUNT_AND_CACHE_CATEGORY.FOR_SELECTED_ACCOUNTS,allAccountBoolean:n,value:i}}},{key:"_addCCDCAlert",value:function(e){if(e.criteria&&e.criteria[0]&&void 0!==e.criteria[0].threshold){var t=!0,n=void 0;return e.criteria.forEach(function(e){n=e.threshold,e.active||(t=!1)}),{active:e.active,criteria:e.criteria,key:e.alert_type,nrOfAccounts:t?this.OrangeAlertsConstants.ACCOUNT_AND_CACHE_CATEGORY.FOR_ALL_ACCOUNTS:this.OrangeAlertsConstants.ACCOUNT_AND_CACHE_CATEGORY.FOR_SELECTED_ACCOUNTS,allAccountBoolean:void 0,value:n}}return{key:e.alert_type,value:e.criteria&&e.criteria[0]?e.criteria[0].threshold:void 0,active:e.active}}},{key:"getActiveChequingAndSavingsAccountAlerts",value:function(){var e=this;return this.initialize().then(function(t){var n=[];return e._forEachAlertNotification(t,function(t){if(e.OrangeAlertsConstants.ACCOUNT_AND_CACHE_CATEGORY[t.alert_type]&&t.criteria){var i=!0,s=void 0;t.criteria.forEach(function(t){e.accountsDict&&t.account_number&&e.accountHelpersService.getDisplayName(e.accountsDict[t.account_number]).then(function(e){t.accountDisplayName=e}),s=t.threshold,t.active||(i=!1)}),n.push({active:t.active,criteria:t.criteria,key:t.alert_type,nrOfAccounts:i?e.OrangeAlertsConstants.ACCOUNT_AND_CACHE_CATEGORY.FOR_ALL_ACCOUNTS:e.OrangeAlertsConstants.ACCOUNT_AND_CACHE_CATEGORY.FOR_SELECTED_ACCOUNTS,allAccountBoolean:i,value:s})}}),n})}},{key:"getGeneralAlerts",value:function(){var e=this;return this.initialize().then(function(t){var n,i=(n={},(0,a.default)(n,e.OrangeAlertsConstants.GENERAL_ALERTS.SNAPSHOT_ENABLED,!1),(0,a.default)(n,e.OrangeAlertsConstants.GENERAL_ALERTS.ESTMT,!1),n);return t.alert_notification_group&&t.alert_notification_group.snapshot_enabled&&(i[e.OrangeAlertsConstants.GENERAL_ALERTS.SNAPSHOT_ENABLED]=!0),e._forEachAlertNotification(t,function(t){t.active&&e.OrangeAlertsConstants.GENERAL_ALERTS.ESTMT===t.alert_type&&(i[e.OrangeAlertsConstants.GENERAL_ALERTS.ESTMT]=!0)}),i})}},{key:"getTLOCalerts",value:function(){var e=this;return this.initialize().then(function(t){var n=[];return e._forEachAlertNotification(t,function(t){e.OrangeAlertsConstants.TLOC_ALERTS[t.alert_type]&&n.push(e._addTLOCAlert(t))}),n})}},{key:"_addTLOCAlert",value:function(e){if(e.criteria&&e.criteria[0]){var t=void 0;return e.criteria.forEach(function(e){t=e.threshold}),{active:e.active,criteria:e.criteria,key:e.alert_type,value:t}}return{key:e.alert_type,value:e.criteria&&e.criteria[0]?e.criteria[0].threshold:void 0,active:e.active}}},{key:"_forEachAlertNotification",value:function(e,t){e.alert_notification_group&&e.alert_notification_group.alert_notifications&&e.alert_notification_group.alert_notifications.forEach(t)}},{key:"registerDeviceForAlerts",value:function(){var e=this;this.nativeService.getPushToken().then(function(t){t&&t.pushToken&&t.model&&e._requestRegisterDeviceForAlerts({push_id:t.pushToken,channel_id:e._getChannelId(),device_model:t.model}).then(function(t){e.$log.debug("registerDeviceForAlerts success:",t)},function(t){e.$log.error("registerDeviceForAlerts error:",t)})},function(t){e.$log.error("getPushToken error:",t)})}},{key:"_getChannelId",value:function(){return this.environmentService.isIOS()?this.environmentService.isTablet()?this.OrangeAlertsConstants.DELIVER_ALERT_CHANNEL.IPAD:this.OrangeAlertsConstants.DELIVER_ALERT_CHANNEL.APPLE:this.OrangeAlertsConstants.DELIVER_ALERT_CHANNEL.ANDROID}},{key:"_requestRegisterDeviceForAlerts",value:function(e){return this.RequesterService.request(this.AVAILABLE_SERVICES.REGISTER_DEVICE_FOR_ALERTS,{data:e,noError:!0})}}]),e}();h.$inject=["$log","RequesterService","serviceConstants","OrangeAlertsConstants","AccountHelpersService","$q","NativeService","EnvironmentService"],t.default=h,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i){(0,a.default)(this,e),this.$log=t,this.$timeout=n,this.userSettingsConstants=i,this.currentCifType=this.userSettingsConstants.CIF_TYPES.NORMAL.KEY,this.isSwitchingCifs=!1,this.selectedCif=!1,this.parentCifOptions=[]}return(0,r.default)(e,[{key:"findCurrentCifType",value:function(e,t){return e&&t&&0!==t.length?-1!==t.indexOf(this.userSettingsConstants.CIF_TYPES.CHILD.CAPABILITY)?void(this.currentCifType=this.userSettingsConstants.CIF_TYPES.CHILD.KEY):e.dependent_info&&e.dependent_info.length>0&&-1!==t.indexOf(this.userSettingsConstants.CIF_TYPES.PARENT.CAPABILITY)?void(this.currentCifType=this.userSettingsConstants.CIF_TYPES.PARENT.KEY):e.servicing_systems&&1===e.servicing_systems.length&&-1!==e.servicing_systems.indexOf(this.userSettingsConstants.CIF_TYPES.MORTGAGE_ONLY.KEY)&&-1!==t.indexOf(this.userSettingsConstants.CIF_TYPES.MORTGAGE_ONLY.CAPABILITY)?void(this.currentCifType=this.userSettingsConstants.CIF_TYPES.MORTGAGE_ONLY.KEY):-1!==t.indexOf(this.userSettingsConstants.CIF_TYPES.BUSINESS.CAPABILITY)?void(this.currentCifType=this.userSettingsConstants.CIF_TYPES.BUSINESS.KEY):-1!==t.indexOf(this.userSettingsConstants.CIF_TYPES.CC_AU.CAPABILITY)?void(this.currentCifType=this.userSettingsConstants.CIF_TYPES.CC_AU.KEY):(this.currentCifType=this.userSettingsConstants.CIF_TYPES.NORMAL.KEY,void this.$log.debug("CURRENT CIF TYPE: ",this.currentCifType)):void this.$log.debug("To use cifTypeService, you must first pass in the responses from GET /customers/my, and GET customers/my/capabilities")}},{key:"setCurrentCifType",value:function(e){this.currentCifType=e}},{key:"createCifModel",value:function(e){return{isParent:e.isParent,name:e.name,cif:e.cif,accountNumber:e.accountNumber,customerInfo:e.customerInfo}}},{key:"switchSelectedCif",value:function(e){var t=this;this.isSwitchingCifs=!0,this.selectedCif=this.parentCifOptions.find(function(t){return t.cif===e.cif}),this.$timeout(function(){t.isSwitchingCifs=!1},200)}},{key:"switchToParentCif",value:function(){if(this.parentCifOptions.length){var e=this.parentCifOptions[0];this.cifModel=e.cif}}},{key:"isNormal",value:function(){return this.currentCifType===this.userSettingsConstants.CIF_TYPES.NORMAL.KEY||this.isParent()&&!this.didParentSwitchToChild()}},{key:"isParent",value:function(){return this.currentCifType===this.userSettingsConstants.CIF_TYPES.PARENT.KEY}},{key:"isNonChild",value:function(){return this.currentCifType!==this.userSettingsConstants.CIF_TYPES.CHILD.KEY}},{key:"isChild",value:function(){return this.currentCifType===this.userSettingsConstants.CIF_TYPES.CHILD.KEY||this.didParentSwitchToChild()}},{key:"didParentSwitchToChild",value:function(){return this.selectedCif&&!this.selectedCif.isParent}},{key:"isMortgageOnly",value:function(){return this.currentCifType===this.userSettingsConstants.CIF_TYPES.MORTGAGE_ONLY.KEY}},{key:"isBusiness",value:function(){return this.currentCifType===this.userSettingsConstants.CIF_TYPES.BUSINESS.KEY}},{key:"isCCAU",value:function(){return this.currentCifType===this.userSettingsConstants.CIF_TYPES.CC_AU.KEY}}]),e}();l.$inject=["$log","$timeout","UserSettingsConstants"],t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=n(931),c=i(l),u=function(){function e(t,n,i,s,o,r){(0,a.default)(this,e),this.$q=t,this.$injector=n,this.bundleConstants=i,this.$rootScope=s,this.$log=o,this.$timeout=r,this.loadedBundles=[]}return(0,r.default)(e,[{key:"ensureModalBundling",value:function(e){var t=this;if(e&&-1===this.loadedBundles.indexOf(e)){var n=this.bundleConstants.MODAL_BUNDLE_DEPENDENCY[e];if(n&&n.length>0){var i=[];return n.forEach(function(e){var n=c.default[e](t.$q,t.ocLazyLoader);i.push(n)}),this.$q.all(i).then(function(){return t.loadedBundles.push(e)})}}return this.$q.when()}},{key:"loadBundle",value:function(e){var t=this;return-1===this.loadedBundles.indexOf(e)?c.default[e](this.$q,this.ocLazyLoader).then(function(){t.loadedBundles.push(e)}):this.$q.when()}},{key:"loadCommonBundle",value:function(){var e=this;this.$log.debug("Loading common bundle");var t=(new Date).getTime(),n=this.$q.defer();return this.loadBundle("commonBundle").then(function(){e.$rootScope.deferredBundleLoaded=!0;var i=(new Date).getTime(),s=i-t;e.$log.debug("Common bundle loaded after(ms): ",s),e.$timeout(function(){return n.resolve()},150)}),n.promise}},{key:"ocLazyLoader",get:function(){return this.$ocLazyLoad||(this.$ocLazyLoad=this.$injector.get("$ocLazyLoad")),this.$ocLazyLoad}}]),e}();u.$inject=["$q","$injector","bundleConstants","$rootScope","$log","$timeout"],t.default=u,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(932),a=i(s),o=n(86),r=i(o),l=n(268),c=i(l),u=n(270),d=i(u),h=n(47),_=i(h),g={commonBundle:a.default,onboardingBundle:r.default,billsBundle:c.default,rdcBundle:d.default,accountDetailsBundle:_.default};t.default=g,e.exports=t.default},function(e,t,n){"use strict";function i(e,t){return e(function(e){n.e(0).then(function(){var i=n(1389),s=n(1390),a=n(1391),o=n(1392),r=n(1393),l=n(1394),c=n(321),u=n(322),d=n(1395),h=n(1396),_=n(1397),g=n(1398),S=n(1399),f=n(1400),v=n(1401),E=n(1402),p=n(1403),T=n(1404),m=n(1405),C=n(1406);t.load([{name:i.name},{name:s.name},{name:a.name},{name:o.name},{name:r.name},{name:l.name},{name:c.name},{name:u.name},{name:d.name},{name:h.name},{name:_.name},{name:g.name},{name:S.name},{name:f.name},{name:v.name},{name:E.name},{name:p.name},{name:T.name},{name:m.name},{name:C.name}]),e([i,s,a,o,r,l,c,u,d,h,_,g,S,f,v,E,p,T,m,C])}.bind(null,n)).catch(n.oe)})}Object.defineProperty(t,"__esModule",{value:!0}),i.$inject=["$q","$ocLazyLoad"],t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n){(0,a.default)(this,e),this.$sce=n,this.isMobileNative=t.isNative(),this.staticSiteUrl=t.getBaseUrl()}return(0,r.default)(e,[{key:"fixRelativeLink",value:function(e){return this.isMobileNative&&"string"==typeof e&&0===e.indexOf("/")?this.staticSiteUrl+e:e}},{key:"fixTrustHtmlRelativeLinks",value:function(e){if(this.isMobileNative){var t=this.$sce.getTrustedHtml(e);return t=t.replace(/\shref='\//gi,' href="#" tng-absolute-href=\'/').replace(/\shref="\//gi,' href="#" tng-absolute-href="/'),this.$sce.trustAsHtml(t)}return e}}]),e}();l.$inject=["EnvironmentService","$sce"],t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),a=i(s),o=n(0),r=i(o),l=n(1),c=i(l),u=n(18),d=i(u),h=function(){function e(t,n,i,s,o,l,c,u){(0,r.default)(this,e),(0,a.default)(this,{$log:t,$httpParamSerializer:n,RequesterService:i,serviceConstants:s,tlocConstants:o,CustomersService:l,CustomerInfoService:c,STATUS_CODES:s.STATUS_CODES,accountConstants:u})}return(0,c.default)(e,[{key:"getOffers",value:function(){var e=this;return this.CustomersService.getCustomerOffers(this.tlocConstants.OFFER_TYPES.TLOCPREAP,!0,this.tlocConstants.PRODUCT_CODES.TLOC).then(function(t){return e._isResponseSuccessful(t)&&t.offers&&t.offers.length?e.marshallOffer(t.offers.find(function(t){return t.offer_type===e.tlocConstants.OFFER_TYPES.TLOCPREAP})):null})}},{key:"marshallOffer",value:function(e){var t=null;return e&&e.tloc_offer_details?(t=(0,a.default)({},{offerId:e.offer_id,offerType:e.offer_type,productType:e.product_type,productTypeNumber:this.stripProductType(e.product_type),offerStatus:e.offer_status},{offerDetails:e.tloc_offer_details}),t.offerDetails.totalRate=t.offerDetails.primeRate+t.offerDetails.spread,t.offerDetails.validRateDate=moment(t.offerDetails.offerStartDate).format("LL")):this.$log.info("No offers found"),t}},{key:"updateOffer",value:function(e){var t=this,n=this._getOfferId(e),i=this._prepareData(e,this.tlocConstants.OFFER_RESOLUTION.ACCEPTED);return this.CustomersService.updateCustomerOffers(i,n).then(function(e){if(t._isResponseSuccessful(e))return e;throw e})}},{key:"closeOffer",value:function(e){var t=this,n=this._getOfferId(e),i=this._prepareData(e,this.tlocConstants.OFFER_RESOLUTION.CLOSE);return this.CustomersService.updateCustomerOffers(i,n).then(function(e){if(t._isResponseSuccessful(e))return e;throw e})}},{key:"isHighRiskOffer",value:function(e){return e&&this.accountConstants.ACCOUNT_PPTS.TLOC_INTEREST_BAL===e.productTypeNumber}},{key:"_isResponseSuccessful",value:function(e){return!(!e||!e.response_status||e.response_status.status_code!==this.serviceConstants.STATUS_CODES.SUCCESS)}},{key:"stripProductType",value:function(e){return e?e.substring(5):e}},{key:"getTlocSourceAccountsData",value:function(){var e=this,t={validatedExtAcctsOnly:"YES"};return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.TLOC_FUND_SOURCE_ACCOUNTS,{urlVars:{queryString:this.$httpParamSerializer(t)}}).then(function(t){if(e._isResponseSuccessful(t))return t;throw t})}},{key:"getCustomerInfo",value:function(){return this.CustomerInfoService.get()}},{key:"convertTlocAccountInfo",value:function(e){var t=[];return e&&angular.forEach(e,function(e){e.accountBalance&&(e.account_balance=e.accountBalance),t.push(e)}),t}},{key:"isPromoClient",value:function(e){return!!(e&&e.offerDetails&&e.offerDetails.promoRate)}},{key:"_getOfferId",value:function(e){return d.default.get(e.stateData,"account.tlocOffer.offerId")}},{key:"_prepareData",value:function(e,t){var n={offer:{offer_status:t,offer_type:e.stateData.account.tlocOffer.offerType,product_type:e.stateData.account.tlocOffer.productType,tloc_offer_details:{creditLimit:e.stateData.account.tlocOffer.offerDetails.creditLimit,spread:e.stateData.account.tlocOffer.offerDetails.spread,primeRate:e.stateData.account.tlocOffer.offerDetails.primeRate,tlocAdjuHistId:e.stateData.account.tlocOffer.offerDetails.tlocAdjuHistId,tlocPreapprovalInfo:{creditLimitFinal:e.stateData.account.tlocOffer.selectedLimit}}}};e.stateData.customer&&(n.offer.tloc_offer_details.tlocPreapprovalInfo.applicant=(0,a.default)({},{title:e.stateData.customer.title,first_name:e.stateData.customer.first_name,middle_initial:e.stateData.customer.middle_initial,address_list:e.stateData.customer.address_list,phone_list:e.stateData.customer.phone_list,email:e.stateData.customer.email,sin:e.stateData.customer.sin,birth_date:e.stateData.customer.birth_date,pin:e.stateData.customer.pin,social_accounts:e.stateData.customer.social_accounts,annual_income:e.stateData.customer.annual_income,kyc_method:e.stateData.customer.kyc_method,employment_status:e.stateData.customer.employmentStatus.code}),this._isRequiredToSetEmployment(e)&&(this._setStreetNameInEmployerAddress(e),(0,a.default)(n.offer.tloc_offer_details.tlocPreapprovalInfo.applicant,{occupation:{industry_code:d.default.get(e.stateData.customer,"employmentIndustry.code"),occupation_code:d.default.get(e.stateData.customer,"employmentOccupation.code")},employer:{company_name:e.stateData.customer.employer.company_name,address:e.stateData.customer.employer.company_address}}))),e.stateData.showTpiForm&&e.stateData.account.third_party_info&&(n.offer.tloc_offer_details.tlocPreapprovalInfo.thirdPartyInfo=(0,a.default)({},{},e.stateData.account.third_party_info)),(0,a.default)(n.offer.tloc_offer_details.tlocPreapprovalInfo,{scoAcctNum:d.default.get(e.stateData.account,"fromAccount.accountNumber")});var i=d.default.get(e.stateData.account,"fromAccount.bankNumber");i&&(0,a.default)(n.offer.tloc_offer_details.tlocPreapprovalInfo,{scoBankNum:i});var s=d.default.get(e.stateData.account,"fromAccount.transitNumber");return s&&(0,a.default)(n.offer.tloc_offer_details.tlocPreapprovalInfo,{scoTransitNum:s}),(0,a.default)(n.offer.tloc_offer_details.tlocPreapprovalInfo,{intendedAccountUse:e.stateData.account.intendedUse}),this.accountConstants.INTENDED_USE_OTHER===e.stateData.account.intendedUse&&(0,a.default)(n.offer.tloc_offer_details.tlocPreapprovalInfo,{otherIntendedUse:e.stateData.account.otherIntendedUse}),n}},{key:"_isRequiredToSetEmployment",value:function(e){return!!d.default.get(e,"stateData.customer.employmentStatus.require_employment_details")}},{key:"_setStreetNameInEmployerAddress",value:function(e){d.default.get(e,"stateData.customer.employer.company_address")&&(0,a.default)(e.stateData.customer.employer.company_address,{street_name:e.stateData.customer.employer.company_address.address_line1})}}]),e}();h.$inject=["$log","$httpParamSerializer","RequesterService","serviceConstants","tlocConstants","CustomersService","CustomerInfoService","accountConstants"],t.default=h,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n){(0,a.default)(this,e),this.$log=t,this.AnalyticsService=n,this._dynatrace=this.AnalyticsService.getDynaTrace(),this.timerActionMap={},this.EVENTS={LOGOUT:"dyn.perf.logout",SUBMIT_CIF:"dyn.perf.submitCif",SUBMIT_PASSMARK:"dyn.perf.submitPassmark",SUBMIT_PIN:"dyn.perf.submitPin",SUBMIT_TOUCH_ID:"dyn.perf.submitTouchId",SUBMIT_QUICK_VIEW:"dyn.perf.submitQuickView",SUBMIT_MOVE_MONEY:"dyn.perf.submitMoveMoney",SUBMIT_EMT:"dyn.perf.submitEMT",SUBMIT_BILL_PAY:"dyn.perf.submitBillPay",VIEW_PROFILE_SETTINGS:"dyn.perf.viewProfileSettings",VIEW_TRANSACTIONS:"dyn.perf.viewTransactions",VIEW_CHEQUING_ACCOUNT:"dyn.perf.viewChequingAccount",VIEW_SAVING_ACCOUNT:"dyn.perf.viewSavingAccount",VIEW_GOAL_ACCOUNT:"dyn.perf.viewGoalAccount"},this.EVENTS.SUBMIT_LOGIN_EVENTS=[this.EVENTS.SUBMIT_PIN,this.EVENTS.SUBMIT_TOUCH_ID,this.EVENTS.SUBMIT_QUICK_VIEW],this.EVENTS.VIEW_ACCOUNT_DETAILS=[this.EVENTS.VIEW_CHEQUING_ACCOUNT,this.EVENTS.VIEW_SAVING_ACCOUNT,this.EVENTS.VIEW_GOAL_ACCOUNT]}return(0,r.default)(e,[{key:"reset",value:function(){this.$log.debug("Resetting active performance timers"),this.timerActionMap={}}},{key:"startTimerForAction",value:function(e){try{this.timerActionMap[e]={start:(new Date).getTime()},this.timerActionMap[e].actionId=this._onStartAction(e)}catch(e){this.$log.debug(e)}}},{key:"_onStartAction",value:function(e){try{if(this.$log.debug("Timer action start:",e),!e||!this._dynatrace)return;return this._dynatrace.enterAction(e)}catch(e){return}}},{key:"endTimersForActions",value:function(e){var t=this;e.forEach(function(e){return t.endTimerForAction(e)})}},{key:"endTimerForAction",value:function(e){try{var t=this.timerActionMap[e];if(!t||void 0===t.actionId)return;var n=new Date,i=n.getTime()-t.start,s=this._formatDuration(i);this.$log.debug("Timer action end:",e,i,s),this._onEndAction(t.actionId),delete this.timerActionMap[e]}catch(e){this.$log.debug(e)}}},{key:"_onEndAction",value:function(e){try{return this._dynatrace.leaveAction(e)}catch(e){return}}},{key:"cancelTimerForAction",value:function(e){this.$log.debug("Timer action cancelled:",e),delete this.timerActionMap[e]}},{key:"_formatDuration",value:function(e){return 500*Math.round(e/500)}}]),e}();l.$inject=["$log","AnalyticsService"],t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t){(0,a.default)(this,e),this.$log=t,this._enabled=!1}return(0,r.default)(e,[{key:"setupHooks",value:function(e){var t=e.visibility,n=e.gotoPreviousState,i=e.gotoNextState,s=e.footerText,a=e.currentStep,o=e.hideBottomProgressBar,r=e.totalStepsInSubFlow,l=e.flowService;this.visibility=t,this.gotoPreviousState=n,this.gotoNextState=i,this.footerText=s,this.currentStep=a,this.hideBottomProgressBar=o,this.totalStepsInSubFlow=r,this.flowService=l}},{key:"disable",value:function(){this._enabled=!1,this.$log.debug("hiding flow footer")}},{key:"enable",value:function(){this._enabled=!0,this.$log.debug("enabling flow footer")}},{key:"isVisible",get:function(){return this._enabled&&this.visibility()}}]),e}();l.$inject=["$log"],t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i,s,o){(0,a.default)(this,e),this.$rootScope=t,this.$timeout=n,this.EventBusService=i,this.loginConstants=s,this.eventConstants=o,this.loginTimerPromise=null,this.wlInitTimeout=3e4}return(0,r.default)(e,[{key:"invokeTimer",value:function(){this.revokeTimer(),this.loginTimerPromise||(this.loginTimerPromise=this._invokeTimeoutPromise())}},{key:"revokeTimer",value:function(){this.loginTimerPromise&&this._cancelTimeoutPromise()}},{key:"triggerLoginTimeoutEvent",value:function(){this.revokeTimer(),this.EventBusService.publish(this.loginConstants.LOGIN_TIMEOUT.INVOKE_LOGIN_TIMEOUT)}},{key:"subscribe",value:function(e){var t=this;this.EventBusService.subscribe(this.$rootScope,this.loginConstants.LOGIN_TIMEOUT.INVOKE_LOGIN_TIMEOUT,function(){t._cancelTimeoutPromise(),e()})}},{key:"unsubscribe",value:function(){this.revokeTimer()}},{key:"_invokeTimeoutPromise",value:function(){var e=this;return this.$timeout(function(){e.loginTimerPromise&&e.triggerLoginTimeoutEvent()},this.wlInitTimeout)}},{key:"_cancelTimeoutPromise",value:function(){this.$timeout.cancel(this.loginTimerPromise),this.loginTimerPromise=null}}]),e}();l.$inject=["$rootScope","$timeout","EventBusService","loginConstants","eventConstants"],t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(939),a=i(s),o=n(940),r=i(o),l=n(941),c=i(l),u=n(942),d=i(u),h=n(943),_=i(h),g=n(944),S=i(g),f=n(945),v=i(f),E=n(946),p=i(E),T=n(947),m=i(T),C=n(948),A=i(C),I=n(949),O=i(I),N=n(950),y=i(N),b=n(951),L=i(b),M=n(952),R=i(M),D=angular.module("tangerine.app.core.filters",[]).filter("boldifyString",a.default).filter("normalizeType",r.default).filter("camelCaseType",c.default).filter("maskNumber",d.default).filter("maskCCNumber",_.default).filter("yearsAndMonths",S.default).filter("blankIfNotFoundTranslate",v.default).filter("firstLetter",p.default).filter("momentDate",m.default).filter("firstLetterCapitalize",A.default).filter("firstDayOfMonth",O.default).filter("numberPercentage",y.default).filter("absoluteHref",L.default).filter("absoluteNumber",R.default);t.default=D,e.exports=t.default},function(e,t,n){"use strict";function i(){return function(e){return"string"==typeof e?e.replace(/\*b\*/g,"<strong>").replace(/\*\/b\*/g,"</strong>"):e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(){return function(e){var t="";return"string"==typeof e?(e.split("_").forEach(function(e){t+=" "+(e.charAt(0).toUpperCase()+e.slice(1).toLowerCase())}),t.trim()):e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(){return function(e){var t="";return"string"==typeof e?(e.split(" ").forEach(function(e){t+=" "+(e.charAt(0).toUpperCase()+e.slice(1).toLowerCase())}),t.trim()):e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e){return function(t){return"string"==typeof t?e.getMaskedAccountNumber(t):t}}Object.defineProperty(t,"__esModule",{value:!0}),i.$inject=["AccountHelpersService"],t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e){return function(t){return"string"==typeof t?e.getMaskedCCNumber(t):t}}Object.defineProperty(t,"__esModule",{value:!0}),i.$inject=["AccountHelpersService"],t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e){return function(t){if("number"==typeof t){var n=t%12,i=Math.floor(t/12),s=e("translate");return function(e){return e>0?e+"  "+s(e>1?"global.years":"global.year"):""}(i)+(n>0&&i>0?", ":"")+function(e){return e>0?e+" "+s(e>1?"global.months":"global.month"):""}(n)}return t}}Object.defineProperty(t,"__esModule",{value:!0}),i.$inject=["$filter"],t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e){return function(t){var n=e.instant(t);return n===t?"":n}}Object.defineProperty(t,"__esModule",{value:!0}),i.$inject=["$translate"],t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(){return function(e){return"string"==typeof e?e.substring(0,1).toUpperCase()+".":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return function(t,n){var i=e.DATETIME_FORMATS["moment"+n];return i||(i=n),moment(t).locale(e.id).format(i).toString()}};i.$inject=["$locale"],t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(){return function(e){return"string"==typeof e?e.charAt(0).toUpperCase()+e.substr(1).toLowerCase():e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(){return function(e){var t=e;return"string"==typeof e&&e.startsWith("1 ")&&(t=e.charAt(0).concat("<sup>er</sup>").concat(e.substr(1))),t}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e){return function(t,n){var i=e("translate");return e("number")(t,n)+i("global.percentage")}}Object.defineProperty(t,"__esModule",{value:!0}),i.$inject=["$filter"],t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e){var t=e.isNative(),n=e.getBaseUrl();return function(e,i){if(t&&"string"==typeof e){var s=void 0===i?"resource":i.toLowerCase();if("resource"===s){for(var a=e,o=/<a\s*href=["|']\/(.*?)["|']/gi,r=void 0;null!==(r=o.exec(e));){var l="/"+r[1];a=a.replace(l,""+n+l)}return a}if("url"===s&&0===e.indexOf("/"))return n+e}return e}}Object.defineProperty(t,"__esModule",{value:!0}),i.$inject=["EnvironmentService"],t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(){return function(e){return Math.abs(e)}}Object.defineProperty(t,"__esModule",{value:!0}),i.$inject=[],t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(207),a=i(s),o=n(954),r=i(o),l=n(955),c=i(l),u=n(956),d=i(u),h=n(957),_=i(h),g=n(958),S=i(g),f=n(959),v=i(f),E=n(960),p=i(E),T=n(205),m=i(T),C=n(961),A=i(C),I=n(962),O=i(I),N=n(963),y=i(N),b=n(964),L=i(b),M=n(965),R=i(M),D=n(966),P=i(D),$=n(967),U=i($),k=n(968),w=i(k),B=n(969),F=i(B),G=n(970),V=i(G),x=n(971),H=i(x),Y=n(334),q=i(Y),W=n(972),j=i(W),K=n(277),Q=i(K),z=n(973),X=i(z),Z=n(974),J=i(Z),ee=n(975),te=i(ee),ne=n(315),ie=i(ne),se=n(976),ae=i(se),oe=n(977),re=i(oe),le=n(978),ce=i(le),ue=n(101),de=i(ue),he=n(979),_e=i(he),ge=n(980),Se=i(ge),fe=n(981),ve=i(fe),Ee=n(982),pe=i(Ee),Te=n(983),me=i(Te),Ce=n(984),Ae=i(Ce),Ie=n(985),Oe=i(Ie),Ne=n(986),ye=i(Ne),be=n(987),Le=i(be),Me=n(988),Re=i(Me),De=n(989),Pe=i(De),$e=n(990),Ue=i($e),ke=n(991),we=i(ke),Be=n(992),Fe=i(Be),Ge=n(332),Ve=i(Ge),xe=angular.module("tangerine.app.core.constants",[]).constant("accountConstants",a.default).constant("analyticsConstants",r.default).constant("appStateConstants",c.default).constant("authConstants",d.default).constant("autoFocusConstants",_.default).constant("buildConstants",S.default).constant("backButtonConstants",v.default).constant("ccIncomeVerificationConstants",p.default).constant("customerConstants",m.default).constant("emtConstants",O.default).constant("errorConstants",y.default).constant("authConstants",d.default).constant("documentConstants",A.default).constant("localeConstants",L.default).constant("serviceConstants",P.default).constant("storageConstants",U.default).constant("pageFlowConstants",R.default).constant("transactionConstants",w.default).constant("stateConstants",de.default).constant("categoryConstants",F.default).constant("menuConstants",V.default).constant("moveMoneyConstants",H.default).constant("userConstants",q.default).constant("UserSettingsConstants",j.default).constant("analyticsConstants",r.default).constant("errorConstants",y.default).constant("localeConstants",L.default).constant("referenceDataConstants",J.default).constant("standardFeesConstants",te.default).constant("employmentStatusConstants",ie.default).constant("overdraftConstants",ae.default).constant("infoDeliveryConstants",re.default).constant("investmentConstants",ce.default).constant("globalModalsConstants",Q.default).constant("cardsConstants",_e.default).constant("nativeCMD",X.default).constant("timeStateConstants",Se.default).constant("referFriendConstants",ve.default).constant("nativeCMD",X.default).constant("messageTemplatesConstants",pe.default).constant("colorConstants",me.default).constant("momentConstants",Ae.default).constant("dropOffConstants",ye.default).constant("iovationConstants",Oe.default).constant("eventConstants",Re.default).constant("OrangeAlertsConstants",Le.default).constant("PDFRequestConfig",Pe.default).constant("bundleConstants",Ue.default).constant("billPayConstants",we.default).constant("tlocConstants",Fe.default).constant("eNotificationConstants",Ve.default);t.default=xe,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={apiRequest:{dynatrace:!0},certCheckStart:{dynatrace:!0},certCheckEnd:{dynatrace:!0},challengeHandler:{dynatrace:!0},anonymousHeader:{dynatrace:!0},forcedLoginTimeout:{dynatrace:!0},stateChangeStart:{dynatrace:!1},stateChangeSuccess:{dynatrace:!1,gtm:!0},stateChangeError:{dynatrace:!0},wlConnectionSuccess:{dynatrace:!0},promotionView:{gtm:!0},promotionClick:{gtm:!0},basketAddToCart:{gtm:!0},basketRemoveFromCart:{gtm:!0},basketCheckoutStep:{gtm:!0},basketConfirmation:{gtm:!0},flowStateChange:{dynatrace:!1,gtm:!0},modalShow:{dynatrace:!1,gtm:!0},wlDeviceGetNetworkInfo:{dynatrace:!0},customEvent:{gtm:!0},newClientEnrollment:{gtm:!0}},s={GTMOK:"gtmok",GTMCSD:"gtmcsd"},a={CERT_CHECK_START:"certCheckStart",CERT_CHECK_END:"certCheckEnd",CHALLENGE_HANDLER_CHECK:"challengeHandler",FORCED_LOGIN_TIMEOUT:"forcedLoginTimeout",API_REQUEST:"apiRequest",STATE_CHANGE_START:"stateChangeStart",STATE_CHANGE_SUCCESS:"stateChangeSuccess",STATE_CHANGE_ERROR:"stateChangeError",WL_CONNECTION_SUCCESS:"wlConnectionSuccess",PROMOTION_VIEW:"promotionView",PROMOTION_CLICK:"promotionClick",BASKET_ADD_TO_CART:"basketAddToCart",BASKET_REMOVE_FROM_CART:"basketRemoveFromCart",BASKET_CHECKOUT_STEP:"basketCheckoutStep",BASKET_CONFIRMATION:"basketConfirmation",FLOW_STATE_CHANGE:"flowStateChange",MODAL_SHOW:"modalShow",CUSTOM_EVENT:"customEvent",NEW_CLIENT_ENROLLMENT:"newClientEnrollment",WL_DEVICE_GET_NETWORK_INFO:"wlDeviceGetNetworkInfo"},o={START_APPLICATION:1,SUBMIT_APPLICATION:2},r={SERVICE_URL:"x-dynatrace-service",PAGE:"x-dynatrace-page",CUSTOMER:"x-dynatrace-customer"},l={CONTACT:"/contact"};t.default={CONFIG:i,AVAILABLE_EVENTS:a,ANALYTICS_COOKIES:s,DYNATRACE_HEADERS:r,BASKET_CHECKOUT_STEPS:o,IGNORE_PAGES:l},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={APPLICATION_INIT:"applicationInit",APPLICATION_LOGOUT:"applicationLogout",MOBILE_CHALLENGEAPI_INIT:"challengeApiInit",KEEP_ALIVE:"keepAlive",TPW_KEEP_ALIVE:"tpwKeepAlive"};t.default=i,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={level1Realm:"Level1Realm",level2Realm:"Level2Realm",authCifUri:"security/login/cif",authAifUri:"security/login/aif",authPassmarkUri:"security/authentication-step/passmark",authPinUri:"security/authentication-step/pin",authDeferPin:"security/passes/defer_pin",authTouchId:"security/passes/touch_id",authEyePrint:"security/passes/eye_print",authVoicePassword:"security/passes/voice_password",authFlavour:"fbe",challengeReject:"Cancelled login from challenge.",tokens:{deferPin:"DEFER_PIN",touchId:"TOUCH_ID",eyeVerify:"EYE_VERIFY",vocalPwd:"VOCAL_PASSWD",remember:"REMEMBER"},steps:{INIT:"init",CIF:"cif",AIF:"aif",QUESTION:"security_question",PIN:"pin",PASSMARK:"passmark"},tpwSteps:{CIF:"ValidatePersonalCIF",AIF:"ValidateAICIF",QUESTION:"ChallengeQuestion",PIN:"PINPage"},status:{REQUIRED:"required",COMPLETE:"complete",INVALID_TOKEN:"invalid_token",PASSMARK_LOCKED:"passmark_locked",PASSMARK_INVALID:"passmark_invalid",PIN_LOCKED:"pin_locked"},emailTypes:{eye:"EYE_VERIFY_LOGIN_FAILED",voice:"VOCAL_PASSWORD_LOGIN_FAILED",touch:"TOUCH_ID_LOGIN_FAILED"}};t.default=i,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={MOBILE_ONLY:"MOBILE_ONLY",DESKTOP_ONLY:"DESKTOP_ONLY",ALL:"ALL",NONE:"NONE"},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=[],s={apiUrl:"https://secure.tangerine.ca",marketingResourcesUrl:"https://www.tangerine.ca",googleMapKey:"AIzaSyAMWXWNNNTXWLfMJycgMZVb48GO9WmfERg",googleTagManagerKey:"GTM-PN6BP5",googleTagManagerKeyMobile:"GTM-TK4LGF4",facebookAppId:"137600782927194",chatSurvey:{isEnabled:!0},userhashVersioningEnabled:!1,trustedCertificateValidation:!0,genesys:{chat:"https://api.tangerine.ca",cobrowse:"https://share.tangerine.ca",env:"prd",serviceAvailabilityEnv:"prd",serviceAvailabilityEnvAppId:"1c5e09e3-8d70-458f-bcd2-8d364ab4764e"},insights:{apiUrl:"https://api.tangerine.ca/mkt",appId:"aae06631-1eca-4268-a8f1-2426ff7d4e39",channel:"FBEWeb",staticBaseUrl:"https://www.tangerine.ca"},esignLive:{pdfUrl:"https://apps.e-signlive.ca/access?sessionToken="},iovation:{thirdPartyScript:"https://mpsnare.iesnare.com/snare.js",firstPartyScriptDynamic:"https://secure.tangerine.ca/iojs/latest/dyn_wdp.js",firstPartyScriptStatic:"https://secure.tangerine.ca/iojs/latest/static_wdp.js"},ofx:{url:"https://ofx.tangerine.ca/",ofxOrgId:"061400152",qfxOrgId:"10951",sessionId:"tng",institutionNumber:"0614"},preApprovalEnabled:!1},a={DEBUG_ENV:!1,CONFIG:s,MOCK_ENV:!1,MFP_ENV:!1,PLATFORM:"web",DEFAULT_ENVIRONMENT:"production",AVAILABLE_ENVIRONMENTS:i,BUILD_TIME:"2018-03-24T09:58:49.151Z"};t.default=a,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={IS_MODAL:3,IS_HAMBURGER_MENU:3,HIGH:3,MEDIUM:2,LOW:1},s={CONFIRM_EXIT:"onAppExitConfirmation"},a={PRIORITY:i,EVENTS:s};t.default=a,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,s=n(36),a=function(e){return e&&e.__esModule?e:{default:e}}(s),o={code:"RETIRED",name:"Retired"},r={code:"STUDENT",name:"Student"},l={code:"HOMEMAKER",name:"Homemaker"},c={code:"NOT_WORKING",name:"Not working"},u={code:"EMPLOYED",name:"Employed"},d={code:"EMPLOYED_PART_TIME",name:"Employed part time"},h={code:"EMPLOYED_FULL_TIME",name:"Employed full time"},_={code:"SELF_EMPLOYED",name:"Self-employed"},g={code:"UNEMPLOYED",name:"Unemployed"},S={code:"OTHER",name:"Other"},f={code:"SEASONAL",name:"Seasonal"},v={code:"CHILD_PRE_SCHOOL",name:"Child preschool"},E=[o,r,l,c,u,d,h,_,g,S,f,v],p=(i={},(0,a.default)(i,o.code,!1),(0,a.default)(i,r.code,!1),(0,a.default)(i,l.code,!1),(0,a.default)(i,c.code,!1),(0,a.default)(i,u.code,!0),(0,a.default)(i,d.code,!0),(0,a.default)(i,h.code,!0),(0,a.default)(i,_.code,!0),(0,a.default)(i,g.code,!1),(0,a.default)(i,S.code,!1),(0,a.default)(i,f.code,!0),(0,a.default)(i,v.code,!1),i);t.default={EMPLOYMENT_STATUSES:E,MAX_NUM_TIMES_POLL:3,POLL_INTERVAL_MS:2e4,UPDATE_SYNC_POLL_INTERVAL_MS:2e4,REQUIRES_OCCUPATION:p},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={BSTMT:"BSTMT",CHQ:"CHQ",SLC:"SLC",CCSTMT:"CCSTMT",MFSTMT:"MFSTMT",TLOCSTMT:"TLOCSTMT"},s={BSTMT:"SAVINGS",CHQ:"CHEQUING",SLC:"LOAN",CCSTMT:"CREDIT_CARD",MFSTMT:"MUTUAL_FUND",TLOCSTMT:"LINE_OF_CREDIT"};t.default={DOCUMENT_TYPES:i,DOCUMENT_MAP:s},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={EDIT:"EDIT",NEW:"NEW"},s={TANGERINE_EMT:"TANGERINE_EMT",INTERAC_EMT:"INTERAC_EMT",INTERAC:"INTERAC"},a={NOW:"NOW",LATER:"LATER"},o={NOW:{header:"emt.emailMoney.now"},LATER:{header:"emt.emailMoney.later",subHeader:"emt.emailMoney.scheduleTransfer"}},r={EDIT:"EDIT",RESEND:"RESEND",CANCEL:"CANCEL",RECLAIM:"RECLAIM"},l={DISABLE_RECLAIM:"IEMT_CP901",NOT_RECLAIMABLE:"IEMT_CP999"},c={FORM_TYPE:i,TRANSFER_TYPE:s,WHEN_SEND:a,WHEN_TILES:o,EMT_AVAILABLE_ACTIONS:r,RECLAIM_RETURN_CODES:l};t.default=c,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={REQUEST_ERROR:"requestError",LOGIN_WEB_ERROR:"loginWebError",LOGIN_MOBILE_ERROR:"loginMobileError",STATE_CHANGE_ERROR:"stateChangeError",WL_CONNECTION_FAILURE:"wlConnectionFailure",WL_CONNECTION_LOST:"wlConnectionLost",DOUBLE_CLICK:"doubleClick"},s={LOGIN_MOBILE_PLUS:"LOGIN_MOBILE_PLUS",LOGIN_MOBILE_PLUS_NATIVE:"LOGIN_MOBILE_PLUS_NATIVE",LOGIN_ERROR:"LOGIN_ERROR",LOGIN_TIMEOUT:"SESSION_TIMEOUT",LOGOUT_ERROR:"7"};t.default={AVAILABLE_EVENTS:i,LOGIN_ERRORS:s},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,s=n(36),a=function(e){return e&&e.__esModule?e:{default:e}}(s),o={EN_CA:"en_CA",FR_CA:"fr_CA"},r=(i={},(0,a.default)(i,o.EN_CA,"en"),(0,a.default)(i,o.FR_CA,"fr"),i),l={LOCALE_CHANGED:"localeChanged"},c={ENGLISH:"ENGLISH",FRENCH:"FRENCH"},u={LOCALES:o,SHORTHAND_LOCALE:r,DEFAULT:o.EN_CA,LOCALE_EVENTS:l,LANGUAGES:c};t.default=u,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={ADD:{label:"global.components.buttons.add"},ADD_ANOTHER:{label:"global.components.buttons.addAnother"},ADD_ANOTHER_BILL:{label:"global.components.buttons.addAnotherBill"},BACK:{label:"global.components.buttons.back"},CANCEL:{label:"global.components.buttons.cancel"},CHANGE:{label:"global.components.buttons.change"},CONFIRM:{label:"global.components.buttons.confirm"},DELETE:{label:"global.components.buttons.delete"},PAY:{label:"global.pageFlow.buttons.pay"},DONE:{label:"global.components.buttons.done"},EXIT:{label:"global.components.buttons.exit"},NEXT:{label:"global.components.buttons.next"},SKIP:{label:"global.components.buttons.skip"},SUBMIT:{label:"global.components.buttons.submit"},APPLY:{label:"global.pageFlow.buttons.apply"},SAVE:{label:"global.components.buttons.save"},SEND:{label:"global.components.buttons.send"},DECLINE:{label:"global.components.buttons.decline"},CONFIRM_DECLINE:{label:"global.components.buttons.decline"},ACCEPT:{label:"global.components.buttons.accept"},VERIFY:{label:"global.components.buttons.verify"},OPTIMIZE:{label:"global.components.buttons.optimize"},REVIEW:{label:"global.components.buttons.review"},CONTINUE:{label:"global.components.buttons.continue"},EMAIL:{label:"global.components.buttons.email"},BUY:{label:"global.components.buttons.buy"},SELL:{label:"global.components.buttons.sell"},RESTART:{label:"global.components.buttons.restart"},RECLAIM:{label:"global.components.buttons.reclaim"},DOWNLOAD:{label:"global.components.buttons.download"},CLOSE:{label:"global.components.buttons.close"},MODIFY:{label:"global.components.buttons.modify"},YES:{label:"global.yes"},NO:{label:"global.no"}},s={SET_BUTTONS:"SET_BUTTONS",SET_TITLE:"SET_TITLE",CLOSE:"CLOSE"},a={DEFAULT:"default",CC:"creditCard"},o=t.MODAL_VISIBILITY_TIMEOUT=1500,r={BUTTON_TYPES:i,EVENTS:s,MODAL_TYPES:a,MODAL_VISIBILITY_TIMEOUT:o,ANALYTICS_TIMEOUT:500,ANALYTICS_DIVIDER:"/"};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ROOT_ENDPOINTS=t.SERVICE_REGEX=void 0;var i=n(316),s=function(e){return e&&e.__esModule?e:{default:e}}(i),a={GET:"GET",POST:"POST",PUT:"PUT",DELETE:"DELETE"},o={HTTP:"HTTP",WL:"WL",MOCK:"MOCK"},r={SUCCESS:"SUCCESS",CREATED:"CREATED",MAX_ACCOUNT_LIMIT_REACHED:"MAX_ACCOUNT_LIMIT_REACHED",VALIDATION_ERROR:"VALIDATION_ERROR",BAD_REQUEST:"BAD_REQUEST",RESOURCE_NOT_FOUND:"RESOURCE_NOT_FOUND",ONLY_ONE_SINGLE_CHEQUING_ACCOUNT_ALLOWED:"ONLY_ONE_SINGLE_CHEQUING_ACCOUNT_ALLOWED",SYSTEM_ERROR:"SYSTEM_ERROR",INVALID_PROFANITY:"INVALID_PROFANITY",INVDISCID:"INVDISCID",NO_DATA:"NO_DATA",INVALID_REQUEST_BODY:"INVALID_REQUEST_BODY",NOT_APPLICABLE:"NOT_APPLICABLE",NOT_ELIGIBLE_FOR_ENROLL:"NOT_ELIGIBLE_FOR_ENROLL",NO_ENROLL_CAPBILITY:"NO_ENROLL_CAPBILITY",RANGE:"RANGE",TSYSERROR:"TSYSERROR",OPEN_CC_ACCOUNT_EXCEPTION:"OPEN_CC_ACCOUNT_EXCEPTION",MISSING_REQUIRED_FIELD:"MISSING_REQUIRED_FIELD",INVALID:"INVALID",CLIENT_ALREADY_PREAPPROVED:"CLIENT_ALREADY_PREAPPROVED",RESTRICT:"RESTRICT",RESTRICT_CO:"RESTRICT_CO",PO_BOX_NOT_ALLOWED:"PO_BOX_NOT_ALLOWED"},l=["SUCCESS","CREATED","NO_DATA"],c=["EMPTY","INVALID_EXPRESSION","INVALID"],u=(t.SERVICE_REGEX={MAX_AGE:/max-age=([0-9]+)/,ROOT_ELEMENT:/v\d\/([\w]+)/},t.ROOT_ENDPOINTS={ACCOUNTS:"accounts",CUSTOMERS:"customers",CARDS:"cards",GENERAL:"general",PFM:"pfm",GOALS:"goals"}),d={ERROR_MESSAGE:"errorMessage",DETAILS:"details",STATUS_CODE:"status_code"},h={timeout:2e4,mockBaseURL:"/assets/res/mock",webApiBaseUrl:"/web/rest"},_={defaults:h,accountServicesByPPT:{3e3:"OPEN_SAVINGS",3010:"OPEN_SAVINGS",3100:"OPEN_SAVINGS_RSP",3400:"OPEN_SAVINGS",3200:"OPEN_SAVINGS_TFSA",3201:"OPEN_SAVINGS_TFSA_KS",4e3:"OPEN_CHEQUING",1100:"OPEN_CREDIT_CARD",3300:"OPEN_CSA",3500:"OPEN_GIC",3510:"OPEN_GIC",3514:"OPEN_GIC",3600:"OPEN_GIC_RSP",3800:"OPEN_GIC_TFSA",3900:"OPEN_GIC_RIF",2e3:"OPEN_MUTUAL_FUND_ELIGIBILITY",2100:"OPEN_MUTUAL_FUND_ELIGIBILITY",2200:"OPEN_MUTUAL_FUND_ELIGIBILITY",2300:"OPEN_MUTUAL_FUND_ELIGIBILITY",3333:"OPEN_BUSINESS_SAVINGS",3343:"OPEN_BUSINESS_US_SAVINGS",3533:"OPEN_BUSINESS_GIC",3543:"BUSINESS_GIC_USD",5100:"OPEN_RSP_LOAN_ELIGIBILITY",6800:"OPEN_TLOC_INTEREST",6900:"OPEN_TLOC_INTEREST"},exchangeRates:{method:a.GET,HTTP:{url:"/v1/general/exchange-rates"},WL:{adapter:"GeneralAdapterFBE",path:"v1/general/exchange-rates "},MOCK:{url:"/exchangeRates.json"}},referenceData:{method:a.GET,HTTP:{url:"/v1/general/reference-data?locale={{locale}}"},WL:{adapter:"GeneralAdapterFBE",path:"v1/general/reference-data"},MOCK:{url:"/reference_data_all.json"}},accountsRates:{method:a.GET,HTTP:{url:"/v1/products/rates?locale={{locale}}"},WL:{adapter:"ProductsAdapterFBE",path:"v1/products/rates"},MOCK:{url:"/accountsRates.json"}},passmarkSetup:{method:a.GET,HTTP:{url:"/v1/customers/my/passmark?action=SETUP"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/passmark?action=SETUP"},MOCK:{url:"/passmark.json"},cacheStrategy:{cacheResult:!1}},passmarkImagesByCategory:{method:a.GET,HTTP:{url:"/v1/customers/my/passmark?action=SETUP&image_category={{image_category}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/passmark?action=SETUP"},MOCK:{url:"/passmark.json"},cacheStrategy:{cacheResult:!1}},passmarkImagesByCategoryUpdate:{method:a.GET,HTTP:{url:"/v1/customers/my/passmark?action=UPDATE&image_category={{image_category}}&cache_bust={{cache_bust}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/passmark?action=UPDATE"},MOCK:{url:"/passmark.json"},cacheStrategy:{cacheResult:!1}},getPassmark:{method:a.GET,HTTP:{url:"/v1/customers/my/passmark"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/passmark"},MOCK:{url:"/getPassmark.json"},cacheStrategy:{cacheResult:!1}},putPassmark:{method:a.PUT,HTTP:{url:"/v1/customers/my/passmark"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/passmark"},MOCK:{url:"/passmark.json"},cacheStrategy:{cacheResult:!1}},postPassmark:{method:a.POST,HTTP:{url:"/v1/customers/my/passmark"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/passmark"},MOCK:{url:"/passmark.json"},cacheStrategy:{cacheResult:!1}},getPassmarkDependent:{method:a.GET,HTTP:{url:"/v1/customers/my/dependents/{{id}}/passmark"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/dependents/id/passmark"},MOCK:{url:"/getPassmark.json"}},putPassmarkDependent:{method:a.PUT,HTTP:{url:"/v1/customers/my/dependents/{{id}}/passmark"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/dependents/id/passmark"},MOCK:{url:"/getPassmark.json"}},getCustomerInfo:{method:a.GET,HTTP:{url:"/v1/customers/my",timeout:3*h.timeout},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my"},MOCK:{url:"/getCustomerInfo.json"}},getCustomerInfoAI:{method:a.GET,HTTP:{url:"/v1/customers/my"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my"},MOCK:{url:"/getCustomerInfo.json"}},getCustomerInfoQuery:{method:a.GET,HTTP:{url:"/v1/customers/my?include-servicing-systems={{include_servicing_systems}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my"},MOCK:{url:"/getCustomerInfo.json"}},putCustomerInfo:{method:a.PUT,HTTP:{url:"/v1/customers/my",timeout:3*h.timeout},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my"},MOCK:{url:"/putCustomerInfo.json"}},putCustomerNewPIN:{method:a.PUT,HTTP:{url:"/v1/customers/my/security"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/security"},MOCK:{url:"putCustomerNewPIN.json"}},putCustomerNewPINDependent:{method:a.PUT,HTTP:{url:"/v1/customers/my/dependents/{{id}}/security"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/dependents/id/security"},MOCK:{url:"putCustomerNewPIN.json"}},getCustomerUsername:{method:a.GET,HTTP:{url:"/v1/customers/my/username"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/username"},MOCK:{url:"/getCustomerUsername.json"}},putCustomerUsername:{method:a.PUT,HTTP:{url:"/v1/customers/my/username"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/username"},MOCK:{url:"/putCustomerUsername.json"}},customerPreferences:{method:a.GET,HTTP:{url:"/v1/customers/my/preferences"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/preferences"},MOCK:{url:"/customerPreferences.json"}},putCustomerPreferences:{method:a.PUT,HTTP:{url:"/v1/customers/my/preferences"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/preferences"},MOCK:{url:"/putCustomerPreferences.json"}},getCustomerDependent:{method:a.GET,HTTP:{url:"/v1/customers/my/dependents/{{id}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/dependents/id"},MOCK:{url:"/customerDependents.json"}},putCustomerDependent:{method:a.PUT,HTTP:{url:"/v1/customers/my/dependents/{{id}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/dependents/id"},MOCK:{url:"/customerDependents.json"}},getCustomerCards:{method:a.GET,HTTP:{url:"/v1/customers/my/cards?type={{type}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/cards"},MOCK:{url:"/getCustomerCards.json"}},putCustomerCards:{method:a.PUT,HTTP:{url:"/v1/customers/my/cards"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/cards"},MOCK:{url:"/putCustomerCards.json"}},getCard:{method:a.GET,HTTP:{url:"/v1/cards/{{id}}"},WL:{adapter:"CardsAdapterFBE",path:"v1/cards"},MOCK:{url:"/getCard.json"}},updateCard:{method:a.PUT,HTTP:{url:"/v1/cards/{{id}}"},WL:{adapter:"CardsAdapterFBE",path:"v1/cards/id"},MOCK:{url:"/putCard.json"}},updateCreditCardLimit:{method:a.PUT,HTTP:{url:"/v1/accounts/{{accountHash}}/creditcards/creditlimit"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/creditcards/creditlimit"},MOCK:{url:"/putCreditCardLimit.json"}},updateLoanCreditCardLimit:{method:a.PUT,HTTP:{url:"/v1/accounts/{{accountHash}}/loans/creditlimit"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/loans/creditlimit"},MOCK:{url:"/putCreditCardLimit.json"}},loanPayments:{method:a.POST,HTTP:{url:"/v1/accounts/{{accountHash}}/transactions/loan-payments"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/transactions/loan-payments"},MOCK:{url:"/loanPayments.json"}},creditLimitIncreaseRequest:{method:a.GET,HTTP:{url:"/v1/accounts/{{accountHash}}/creditcards/creditlimit-increase-request"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/creditcards/creditlimit-increase-request"},MOCK:{url:"/creditLimitIncreaseRequest.json"}},customerBonusInfo:{HTTP:{method:a.GET,url:"/v1/customers/my/contests-bonuses"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/contests-bonuses"},MOCK:{url:"/getCustomerBonusInfo.json"}},customerOffers:{HTTP:{method:a.GET,url:"/v1/customers/my/offers?{{queryString}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/offers"},MOCK:{url:"/getCustomerOffers.json"}},updateCustomerOffers:{HTTP:{method:a.PUT,url:"/v1/customers/my/offers/{{offerId}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/offers"},MOCK:{url:"/updateCustomerOffers.json"}},activateCustomerOffers:{method:a.PUT,HTTP:{url:"/v1/customers/my/offers/{{offerId}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/offers"},cacheStrategy:{cacheResult:!1}},openChequing:{method:a.POST,HTTP:{url:"/v1/customers/my/accounts/chequing"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/accounts/chequing"},MOCK:{url:"/canOpenSavingsAccount.json"}},openBusinessSavings:{method:a.POST,HTTP:{url:"/v1/customers/my/accounts/savings/isa"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/accounts/savings/isa"},MOCK:{url:"/openBusinessSavingsAccount.json"}},openBusinessUsSavings:{method:a.POST,HTTP:{url:"/v1/customers/my/accounts/savings/isa"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/accounts/savings/isa"},MOCK:{url:"/openBusinessAccount.json"}},openBusinessGic:{method:a.POST,HTTP:{url:"/v1/customers/my/accounts/savings/gic"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/accounts/savings/gic"},MOCK:{url:"/openBusinessAccount.json"}},openBusinessGicUsd:{method:a.POST,HTTP:{url:"/v1/customers/my/accounts/savings/gic"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/accounts/savings/gic"},MOCK:{url:"/openBusinessAccount.json"}},openSavings:{method:a.POST,HTTP:{url:"/v1/customers/my/accounts/savings/isa"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/accounts/savings/isa"},MOCK:{url:"/canOpenChequingAccount.json"}},updateCCEmploymentInformation:{method:a.PUT,HTTP:{url:"/v1/accounts/{{accountHash}}/creditcards"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/creditcards"},MOCK:{url:"/updateCCEmploymentInformation.json"}},openCreditCard:{method:a.POST,HTTP:{url:"/v1/customers/my/accounts/creditcards",timeout:3*h.timeout},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/accounts/creditcards"},MOCK:{url:"/openCreditCard.json"}},openSavingsRSP:{method:a.POST,HTTP:{url:"/v1/customers/my/accounts/savings/isa/rsp"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/accounts/savings/isa/rsp"},MOCK:{url:"/canOpenSavingsRSPAccount.json"}},openSavingsTFSA:{method:a.POST,HTTP:{url:"/v1/customers/my/accounts/savings/isa/tfsa"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/accounts/savings/isa/tfsa"},MOCK:{url:"/canOpenChequingAccount.json"}},openSavingsTFSAKS:{method:a.POST,HTTP:{url:"/v1/customers/my/accounts/savings/isa/pre-tfsa"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/accounts/savings/isa/pre-tfsa"},MOCK:{url:"/canOpenChequingAccount.json"}},openCSA:{method:a.POST,HTTP:{url:"/v1/customers/my/accounts/savings/csa"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/accounts/savings/csa"},MOCK:{url:"/canOpenCSAAccount.json"}},openGIC:{method:a.POST,HTTP:{url:"/v1/customers/my/accounts/savings/gic"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/accounts/savings/gic"},MOCK:{url:"/canOpenGICAccount.json"}},openGICRSP:{method:a.POST,HTTP:{url:"/v1/customers/my/accounts/savings/gic/rsp"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/accounts/savings/gic/rsp"},MOCK:{url:"/canOpenGICAccount.json"}},openGICTFSA:{method:a.POST,HTTP:{url:"/v1/customers/my/accounts/savings/gic/tfsa"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/accounts/savings/gic/tfsa"},MOCK:{url:"/canOpenGICAccount.json"}},openGICRIF:{method:a.POST,HTTP:{url:"/v1/customers/my/accounts/savings/gic/rif"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/accounts/savings/gic/rif"},MOCK:{url:"/canOpenGICAccount.json"}},openRIFISA:{method:a.POST,HTTP:{url:"/v1/customers/my/accounts/savings/isa/rif"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/accounts/savings/isa/rif"},MOCK:{url:"/canOpenGICAccount.json"}},openTlocInterest:{method:a.POST,HTTP:{url:"/v1/customers/my/applications/tloc"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/applications/tloc"},MOCK:{url:"/canOpenTlocAccount.json"}},orderAccounts:{method:a.POST,HTTP:{url:"/v1/customers/my/order"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/order"},MOCK:{url:"/order_accounts.json"},cacheStrategy:{skipCacheClearing:!0}},migrateCustomer:{method:a.PUT,HTTP:{url:"/v1/customers/my/migration"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/migration"},MOCK:{url:"/order_accounts.json"}},creditCardRates:{method:a.GET,HTTP:{url:"/v1/products/creditcards?prodcode={{productCode}}"},WL:{adapter:"ProductsAdapterFBE",path:"v1/products/creditcards?prodcode={{productCode}}"},MOCK:{url:"/creditCardRates.json"}},creditLimit:{method:a.GET,HTTP:{url:"/v1/customers/my/offers?product-code=CBK&offer-type=CCPA&fetch-all=false"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/offers?product-code=CBK&offer-type=CCPA&fetch-all=false"},MOCK:{url:"/customerOffers.json"}},creditApplicationStatus:{method:a.GET,HTTP:{url:"/v1/customers/my/applications/{{dealId}}",timeout:3*h.timeout},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/applications/dealId"},MOCK:{url:"/ccApplicationStatus.json"}},creditRewardAccounts:{method:a.GET,HTTP:{url:"/v1/customers/my/accounts?actionCode=CREDIT_CARD_REWARD_ACCOUNTS"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/accounts?actionCode=CREDIT_CARD_REWARD_ACCOUNTS"},MOCK:{url:"/creditRewardAccounts.json"}},gicFundSourceAccounts:{method:a.GET,HTTP:{url:"/v1/customers/my/accounts?{{queryString}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/accounts"},MOCK:{url:"/gicFundSourceAccounts.json"}},bisaFundSourceAccounts:{method:a.GET,HTTP:{url:"/v1/customers/my/accounts?actionCode=OPEN_ACCOUNT&currency={{currency}}"},WL:{adapter:"AccountsAdapterFBE",path:"v1/customers/my/accounts?actionCode=OPEN_ACCOUNT&currency={{currency}}"},MOCK:{url:"/bisaFundSourceAccounts.json"}},creditApplicationUpdateWithGet:{method:a.GET,HTTP:{url:"/v1/customers/my/applications/{{dealId}}",timeout:3*h.timeout},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/applications/dealId",timeout:3*h.timeout},MOCK:{url:"/tsysRewards.json"}},creditApplicationUpdate:{method:a.PUT,HTTP:{url:"/v1/customers/my/applications/{{dealId}}",timeout:3*h.timeout},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/applications/dealId",timeout:3*h.timeout},MOCK:{url:"/tsysRewards.json"}},getKBAQuestions:{method:a.POST,HTTP:{url:"/v1/customers/my/knowledge-based-authentication",timeout:10*h.timeout},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/knowledge-based-authentication",timeout:10*h.timeout},MOCK:{url:"/ccKbaQuestions.json"}},updateKBAQuestions:{method:a.PUT,HTTP:{url:"/v1/customers/my/knowledge-based-authentication",timeout:10*h.timeout},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/knowledge-based-authentication",timeout:10*h.timeout},MOCK:{url:"/ccKBAResponses.json"}},getEnrollKBAQuestions:{method:a.POST,HTTP:{url:"/v1/general/enrollments/{{id}}/knowledge-based-authentication",timeout:10*h.timeout},WL:{adapter:"GeneralAdapterFBE",path:"v1/general/enrollments/id/knowledge-based-authentication",timeout:10*h.timeout},MOCK:{url:"/ccKbaQuestions.json"}},updateEnrollKBAQuestions:{method:a.PUT,HTTP:{url:"/v1/general/enrollments/{{id}}/knowledge-based-authentication",timeout:10*h.timeout},WL:{adapter:"GeneralAdapterFBE",path:"v1/general/enrollments/id/knowledge-based-authentication",timeout:10*h.timeout},MOCK:{url:"/ccKBAResponses.json"}},getMutualFundDetails:{method:a.GET,HTTP:{url:"/v1/customers/my/applications/mutual-funds/{{dealId}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/applications/mutual-funds"},MOCK:{url:"/mutual_fund_details.json"}},infoDelivery:{method:a.POST,HTTP:{url:"/v1/customers/my/info-delivery"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/info-delivery"},MOCK:{url:"/info_delivery.json"}},accountSummary:{method:a.GET,HTTP:{url:"/pfm/v1/accounts"},WL:{adapter:"PFMAdapterFBE",path:"pfm/v1/accounts",timeout:2e4},MOCK:{url:"/accounts.json"}},accountDetails:{method:a.GET,HTTP:{url:"/v1/accounts/{{accountHash}}?include-available-actions=true"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id?include-available-actions=true"},MOCK:{url:"/mortgage_account.json"}},saveAccountDetails:{method:a.PUT,HTTP:{url:"/v1/accounts/{{accountHash}}"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id"},MOCK:{url:"/posted_savings_account.json"}},closeAccount:{method:a.GET,HTTP:{url:"/v1/customers/my/accounts?actionCode=CLOSE_ACCOUNT"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/accounts?actionCode=CLOSE_ACCOUNT"},MOCK:{url:"/close_account.json"}},closeAccountSubmit:{method:a.POST,HTTP:{url:"/v1/accounts/{{accountHash}}/transactions/movemoney?trasferType=CLOSE_ACCOUNT"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/transactions/movemoney?trasferType=CLOSE_ACCOUNT"},MOCK:{url:"/submit_close_account.json"}},accountDetailsSavings:{method:a.GET,HTTP:{url:"/v1/accounts/{{accountHash}}?include-available-actions=true"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id?include-available-actions=true"},MOCK:{url:"/account_details.json"}},accountSummarySavings:{method:a.GET,HTTP:{url:"/v1/customers/my/accounts?type=SAVINGS"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/accounts?type=SAVINGS",timeout:1e4},MOCK:{url:"/accounts_details.json"}},accountSummaryChequing:{method:a.GET,HTTP:{url:"/v1/customers/my/accounts?type=CHEQUING"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/accounts?type=CHEQUING",timeout:1e4},MOCK:{url:"/chequing_accounts.json"}},savingsAccountWithoutRif:{method:a.GET,HTTP:{url:"/v1/customers/my/accounts?actionCode=CREDIT_CARD_REWARD_ACCOUNTS"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/accounts?actionCode=CREDIT_CARD_REWARD_ACCOUNTS",timeout:1e4},MOCK:{url:"/savings_accounts_without_rif.json"}},accountDetailsChequing:{method:a.GET,HTTP:{url:"/v1/accounts/{{accountHash}}?{{queryString}}"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id?include-available-actions=true"},MOCK:{url:"/chequing_account.json"}},accountDetailsCreditCard:{method:a.GET,HTTP:{url:"/v1/accounts/{{accountHash}}?include-available-actions=true&pu-emp-details=true&billing-cycle-ranges=true"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id?include-available-actions=true&pu-emp-details=true&billing-cycle-ranges=true"},MOCK:{url:"/credit_card_account.json"}},accountDetailsMortgage:{method:a.GET,HTTP:{url:"/v1/accounts/{{accountHash}}?include-available-actions=true"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id?include-available-actions=true"},MOCK:{url:"/mortgage_account.json"}},accountDetailsLoan:{method:a.GET,HTTP:{url:"/v1/accounts/{{accountHash}}?include-available-actions=true"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id?include-available-actions=true"},MOCK:{url:"/loan_account.json"}},accountDetailsMutualFund:{method:a.GET,HTTP:{url:"/v1/accounts/{{accountHash}}?include-available-actions=true",timeout:2e5},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id?include-available-actions=true"},MOCK:{url:"/investmentFund/investment_account.json"}},accountStatements:{method:a.GET,HTTP:{url:"/v1/customers/my/documents/statements?{{queryString}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/documents/statements"},MOCK:{url:"/account_statements.json"}},taxReceipts:{method:a.GET,HTTP:{url:"/v1/customers/my/documents/tax-receipts?{{queryString}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/documents/tax-receipts"},MOCK:{url:"/tax_receipts.json"}},updateTaxReceipt:{method:a.PUT,HTTP:{url:"/v1/customers/my/documents/tax-receipts"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/documents/tax-receipts/key"},MOCK:{url:"/update_tax_receipt.json"}},accountInvestmentReports:{method:a.GET,HTTP:{url:"/v1/customers/my/documents/investment-reports"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/documents/investment-reports"},MOCK:{url:"/investment_reports.json"}},otherDocuments:{method:a.GET,HTTP:{url:"/v1/customers/my/documents/other-documents"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/documents/other-documents"},MOCK:{url:"/other_documents.json"}},deleteOtherDocument:{method:a.DELETE,HTTP:{url:"/v1/customers/my/documents/other-documents/{{id}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/documents/other-documents/id"},MOCK:{url:"/delete_other_document.json"}},moveMoney:{method:a.GET,HTTP:{url:"/v1/customers/my/accounts?{{queryString}}",timeout:3*h.timeout},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/accounts?{{queryString}}"},MOCK:{url:"/move_money_accounts.json"}},moveMoneySubmit:{method:a.POST,HTTP:{url:"/v1/accounts/{{accountHash}}/transactions/movemoney"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/transactions/movemoney"},MOCK:{url:"/move_money_submit.json"}},moveMoneyEdit:{method:a.PUT,HTTP:{url:"/v1/accounts/{{accountHash}}/transactions/movemoney/{{seqNum}}"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/transactions/movemoney/seqNum"},MOCK:{url:"/move_money_submit.json"}},mutualFundsSubmit:{method:a.POST,HTTP:{url:"/v1/accounts/{{accountHash}}/transactions/mutual-funds"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/transactions/mutual-funds"},MOCK:{url:"/mutual-funds_submit.json"}},mutualFundsEdit:{method:a.PUT,HTTP:{url:"/v1/accounts/{{accountHash}}/transactions/mutual-funds/{{seqNum}}"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/transactions/mutual-funds/seqNum"},MOCK:{url:"/mutual-funds_submit.json"}},accountByType:{method:a.GET,HTTP:{url:"/v1/accounts?type={{type}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/accounts?type=type"},MOCK:{}},accountHolds:{method:a.GET,HTTP:{url:"/v1/accounts/{{accountHash}}/holds"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/holds "},MOCK:{url:"/accounts_holds.json"}},transactionHistory:{method:a.GET,HTTP:{url:"/pfm/v1/transactions?{{queryString}}"},WL:{adapter:"PFMAdapterFBE",path:"pfm/v1/transactions"},MOCK:{url:"/chequing_account_transaction_history.json"}},legacyTransactionHistory:{method:a.GET,HTTP:{url:"/v1/accounts/{{accountHash}}/transactions?{{queryString}}"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/transactions"},MOCK:{url:"/legacy_account_transaction_history.json"}},cards:{method:a.GET,HTTP:{url:"/v1/customers/my/cards"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/cards"},MOCK:{url:"/customers_cards.json"},cacheStrategy:{cacheResult:!0}},availableActions:{method:a.GET,HTTP:{url:"/v1/accounts/{{accountHash}}?include-available-actions=true"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id?include-available-actions=true "},MOCK:{url:"/available_actions.json"}},billPostedPayments:{method:a.GET,HTTP:{url:"/pfm/v1/transactions?{{queryString}}"},WL:{adapter:"PFMAdapterFBE",path:"pfm/v1/transactions"},MOCK:{url:"/posted_payments.json"}},accountUsageTypes:{method:a.GET,HTTP:{url:"/v1/general/reference-data?types=int_use_acct&locale={{locale}}"},WL:{adapter:"GeneralAdapterFBE",path:"v1/general/reference-data?types=int_use_acct"},MOCK:{url:"/reference-data_int_use_acct.json"}},bankInfo:{method:a.GET,HTTP:{url:"/v1/general/reference-data?types=bank_info&locale={{locale}}"},WL:{adapter:"GeneralAdapterFBE",path:"v1/general/reference-data?types=bank_info"},MOCK:{url:"/reference-data_bank_info.json"}},userCapabilities:{method:a.GET,HTTP:{url:"/v1/customers/my/capabilities?{{queryString}}",timeout:3*h.timeout},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/capabilities"},MOCK:{url:"/capabilities.json"},cacheStrategy:{groupClearingExcluded:!0,maxAgeSec:900}},financialInstitutions:{method:a.GET,HTTP:{url:"/v1/general/reference-data?types=financial_institutions&locale={{locale}}"},WL:{adapter:"GeneralAdapterFBE",path:"v1/general/reference-data?types=financial_institutions"},MOCK:{url:"/reference-data_financial_institutions.json"}},userCapabilitiesNoQuery:{method:a.GET,HTTP:{url:"/v1/customers/my/capabilities"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/capabilities"},MOCK:{url:"/capabilities.json"},cacheStrategy:{groupClearingExcluded:!0,maxAgeSec:900}},sanctionedCountries:{method:a.GET,HTTP:{url:"/v1/general/reference-data?types=sanc_co"},WL:{adapter:"GeneralAdapterFBE",path:"v1/general/reference-data?types=sanc_co"},MOCK:{url:"/reference-data_sanc_co.json"}},pendingTransactions:{method:a.GET,HTTP:{url:"/v1/customers/my/pending-transactions?{{queryString}}",timeout:4e5},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/pending-transactions",timeout:4e5},MOCK:{url:"/chequinq_pending_transactions.json"},cacheStrategy:{cacheResult:!1}},payeePendingTransactions:{method:a.GET,HTTP:{url:"/v1/customers/my/pending-transactions"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/pending-transactions"},MOCK:{url:"/chequinq_pending_transactions.json"}},getTransactionSplit:{method:a.GET,HTTP:{url:"/pfm/v1/transactions/{{id}}/split"},WL:{adapter:"PFMAdapterFBE",path:"pfm/v1/transactions/id/split"},MOCK:{url:"/transactions_split.json"}},putTransactionSplit:{method:a.PUT,HTTP:{url:"/pfm/v1/transactions/{{id}}/split"},WL:{adapter:"PFMAdapterFBE",path:"pfm/v1/transactions/id/split"},MOCK:{url:"/transactions_split.json"}},addTransactionNote:{method:a.POST,HTTP:{url:"/pfm/v1/transactions/{{id}}/comments"},WL:{adapter:"PFMAdapterFBE",path:"pfm/v1/transactions/id/comments"}},amendTransactionNote:{method:a.PUT,HTTP:{url:"/pfm/v1/transactions/{{id}}/comments/{{commentId}}"},WL:{adapter:"PFMAdapterFBE",path:"pfm/v1/transactions/id/comments/commentId"}},aggregatedTransactions:{method:a.POST,HTTP:{url:"/pfm/v1/transactions/series"},WL:{adapter:"PFMAdapterFBE",path:"pfm/v1/transactions/series"},MOCK:{url:"/transactions_chart_top_level_categories.json"},cacheStrategy:{cacheResult:!0}},updateTransaction:{method:a.PUT,HTTP:{url:"/pfm/v1/transactions/{{id}}"},WL:{adapter:"PFMAdapterFBE",path:"pfm/v1/transactions/id"},MOCK:{url:"/update_transaction.json"}},deleteChildTransaction:{method:a.DELETE,HTTP:{url:"/pfm/v1/transactions/{{id}}"},WL:{adapter:"PFMAdapterFBE",path:"pfm/v1/transactions/id"},MOCK:{url:"/update_transaction.json"}},overdraftDetails:{method:a.GET,HTTP:{url:"/v1/accounts/{{accountHash}}/overdraft"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/overdraft"},MOCK:{url:"/overdraft_details.json"}},overdraftProtectionCancelation:{method:a.DELETE,HTTP:{url:"/v1/accounts/{{accountHash}}/overdraft"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/overdraft"},MOCK:{url:"/overdraft_protection_cancelation.json"}},overdraftProtectionApply:{method:a.POST,HTTP:{url:"/v1/accounts/{{accountHash}}/overdraft"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/overdraft"},MOCK:{url:"/overdraft_protection_apply.json"}},overdraftProtectionDecreaseLimit:{method:a.PUT,HTTP:{url:"/v1/accounts/{{accountHash}}/overdraft"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/overdraft"},MOCK:{url:"/overdraft_protection_decrease_limit.json"}},overdraftProtectionInvitationDetails:{method:a.GET,HTTP:{url:"/v1/accounts/{{accountHash}}/overdraft-invitation"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/overdraft-invitation"},MOCK:{url:"/overdraft_protection_invitation_details.json"}},overdraftProtectionInvitationResponse:{method:a.PUT,HTTP:{url:"/v1/accounts/{{accountHash}}/overdraft-invitation/{{dealId}}"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/overdraft-invitation/dealId"},MOCK:{url:"/overdraft_protection_invitation_response.json"}},overdraftProtectionPayFullBalanceAccounts:{method:a.GET,HTTP:{url:"/v1/customers/my/accounts?actionCode=OVERDRAFT_PAYMENT"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/accounts?actionCode=OVERDRAFT_PAYMENT"},MOCK:{url:"/overdraft_protection_payfull_balance_accounts.json"}},overdraftProtectionPreApprovedAccounts:{method:a.GET,HTTP:{url:"/v1/customers/my/overdraft-preapproval"},WL:{adapter:"AccountsAdapterFBE",path:"v1/customers/overdraft-preapproval"},MOCK:{url:"/overdraft_protection_preapproved_accounts.json"}},overdraftProtectionPreApprovedDecission:{method:a.PUT,HTTP:{url:"/v1/customers/my/overdraft-preapproval"},WL:{adapter:"AccountsAdapterFBE",path:"v1/customers/my/overdraft-preapproval"},MOCK:{url:"/overdraft_protection_preapproved_decission.json"},cacheStrategy:{isAccountsCall:!0}},standardFees:{method:a.GET,HTTP:{url:"/v1/accounts/{{accountHash}}/fees?{{queryString}}"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/fees"},MOCK:{url:"/standard_fees.json"}},getEmtRecipients:{method:a.GET,HTTP:{url:"/v1/customers/my/emt-recipients"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/emt-recipients"},MOCK:{url:"/emtRecipients.json"}},addEmtRecipient:{method:a.POST,HTTP:{url:"/v1/customers/my/emt-recipients"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/emt-recipients"},MOCK:{url:"/emtRecipients.json"}},editEmtRecipient:{method:a.PUT,HTTP:{url:"/v1/customers/my/emt-recipients/{{id}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/emt-recipients/id"},MOCK:{url:"/emtRecipients.json"}},deleteEmtRecipient:{method:a.DELETE,HTTP:{url:"/v1/customers/my/emt-recipients/{{id}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/emt-recipients/id"},MOCK:{url:"/emtRecipients.json"}},getEmtAutoSenders:{method:a.GET,HTTP:{url:"/v1/customers/my/emt-senders-auto"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/emt-senders-auto"},MOCK:{url:"/emtSendersAuto.json"}},editEmtAutoSenders:{method:a.PUT,HTTP:{url:"/v1/customers/my/emt-senders-auto/{{id}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/emt-senders-auto/id"},MOCK:{url:"/emtSendersAuto.json"}},deleteEmtAutoSenders:{method:a.DELETE,HTTP:{url:"/v1/customers/my/emt-senders-auto/{{id}}?actionCode=EMAIL_TRANSFER"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/emt-senders-auto/id?actionCode=EMAIL_TRANSFER"},MOCK:{url:"/emtSendersAuto.json"}},moveMoneyEmailTransfer:{method:a.GET,HTTP:{url:"/v1/customers/my/accounts?actionCode=EMAIL_TRANSFER"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/accounts?actionCode=EMAIL_TRANSFER"},MOCK:{url:"/moveMoneyEmailTransfer.json"}},addressAutocomplete:{method:a.POST,HTTP:{url:"/v1/general/addresses"},WL:{adapter:"GeneralAdapterFBE",path:"v1/general/addresses"},MOCK:{url:"/addressAutocomplete.json"}},customerConsents:{method:a.GET,HTTP:{url:"/v1/customers/my/consents"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/consents"},MOCK:{url:"/customerConsents.json"}},putCustomerConsents:{method:a.PUT,HTTP:{url:"/v1/customers/my/consents"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/consents"},MOCK:{url:"/putCustomerConsents.json"}},registeredPayees:{method:a.GET,HTTP:{url:"/v1/general/registered-payees?{{queryString}}"},WL:{adapter:"GeneralAdapterFBE",path:"v1/general/registered-payees"},MOCK:{url:"/payeeSearch.json"}},addRegisteredPayees:{method:a.POST,HTTP:{url:"/v1/customers/my/payees"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/payees"},MOCK:{url:"/addPayee.json"}},billPayTransaction:{method:a.POST,HTTP:{url:"/v1/accounts/{{accountHash}}/transactions/bill-payments",timeout:10*h.timeout},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/transactions/bill-payments",timeout:10*h.timeout},MOCK:{url:"/billPayTransaction.json"}},updateBillPayTransaction:{method:a.PUT,HTTP:{url:"/v1/accounts/{{accountHash}}/transactions/bill-payments/{{seqNum}}",timeout:25e3},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/transactions/bill-payments/seqNum",timeout:25e3},MOCK:{url:"/billPayTransaction.json"}},payeeList:{method:a.GET,HTTP:{url:"/v1/customers/my/payees"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/payees"},MOCK:{url:"/payeeList.json"}},padList:{method:a.GET,HTTP:{url:"/v1/accounts/{{accountHash}}/pads"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/pads"},MOCK:{url:"/padList.json"}},stopPadList:{method:a.GET,HTTP:{url:"/v1/accounts/{{accountHash}}/stop-pads"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/stop-pads"},MOCK:{url:"/stopPadList.json"}},stopPadRequest:{method:a.POST,HTTP:{url:"/v1/accounts/{{accountHash}}/stop-pads"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/stop-pads"},MOCK:{url:"/stopPadList.json"}},editPayee:{method:a.PUT,HTTP:{url:"/v1/customers/my/payees/{{id}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/payees/id",timeout:2e4},MOCK:{url:"/emptyResponse.json"}},deletePayee:{method:a.DELETE,HTTP:{url:"/v1/customers/my/payees/{{id}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/payees/id",timeout:2e4},MOCK:{url:"/emptyResponse.json"}},billPayAccounts:{method:a.GET,HTTP:{url:"/v1/customers/my/accounts?actionCode=BILL_PAYMENT"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/accounts?actionCode=BILL_PAYMENT"},MOCK:{url:"/billPayAccounts.json"}},directDepositAccounts:{method:a.GET,HTTP:{url:"/v1/customers/my/accounts?actionCode=DIRECT_DEPOSIT_ACCOUNTS"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/accounts?actionCode=DIRECT_DEPOSIT_ACCOUNTS"},MOCK:{url:"/directDepositAccounts.json"}},rifPaymentAccounts:{method:a.GET,HTTP:{url:"/v1/customers/my/accounts?actionCode=RIF_PAYMENT_ACCOUNTS"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/accounts?actionCode=RIF_PAYMENT_ACCOUNTS"},MOCK:{url:"/accounts.json"}},sendMoneyEmailTransfer:{method:a.POST,HTTP:{url:"/v1/accounts/{{accountHash}}/transactions/emts",timeout:3e4},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/transactions/emts"},MOCK:{url:"/sendMoneyEmailTransfer.json"}},accountsForReceiveEmailMoney:{method:a.GET,HTTP:{url:"/v1/customers/my/accounts?actionCode=EMAIL_TRANSFER"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/accounts?actionCode=EMAIL_TRANSFER"},MOCK:{url:"/accounts.json"}},recommendPayee:{method:a.POST,HTTP:{url:"/v1/general/registered-payees/recommendations"},WL:{adapter:"GeneralAdapterFBE",path:"v1/general/registered-payees/recommendations"},MOCK:{url:"/recommendPayee.json"}},getTravelNotices:{method:a.GET,HTTP:{url:"/v1/customers/my/travel-notifications"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/travel-notifications"},MOCK:{url:"/travelNotice_Get.json"}},addTravelNotice:{method:a.POST,HTTP:{url:"/v1/customers/my/travel-notifications"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/travel-notifications"},MOCK:{url:"/travelNotice_Add.json"}},editTravelNotice:{method:a.PUT,HTTP:{url:"/v1/customers/my/travel-notifications"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/travel-notifications"},MOCK:{url:"/travelNotice_Edit.json"}},deleteTravelNotice:{method:a.DELETE,HTTP:{url:"/v1/customers/my/travel-notifications"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/travel-notifications"},MOCK:{url:"/travelNotice_Delete.json"}},ob2CCConfirmEligibility:{method:a.POST,HTTP:{url:"/v1/customers/my/accounts/creditcards",timeout:3*h.timeout},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/accounts/creditcards"},MOCK:{url:"/ob2CCConfirmEligibility.json"}},ob2CCValidateClientData:{method:a.POST,HTTP:{url:"/v1/customers/my/accounts/creditcards",timeout:3*h.timeout},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/accounts/creditcards"},MOCK:{url:"/ob2CCValidateClientData.json"}},ob2CCEnrollClient:{method:a.POST,HTTP:{url:"/v1/customers/my/accounts/creditcards",timeout:3*h.timeout},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/accounts/creditcards"},MOCK:{url:"/ob2CCEnrollClientResponse.json"}},validateEmtAnswer:{method:a.POST,HTTP:{url:"/v1/customers/my/emt-accept/{{transferId}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/emt-accept/transfer-id"},MOCK:{url:"/acceptEmt.json"}},emtGetTransferDetails:{method:a.GET,HTTP:{url:"/v1/customers/my/emt-accept?{{queryString}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/emt-accept"},MOCK:{url:"/emtTransferDetails.json"}},standardEmtGetTransferDetails:{method:a.GET,HTTP:{url:"/v1/general/emt/emt-accept?{{queryString}}"},WL:{adapter:"GeneralAdapterFBE",path:"v1/general/emt/emt-accept"},MOCK:{url:"/emtTransferDetails.json"}},validateFinancialInstitution:{method:a.GET,HTTP:{url:"/v1/general/financial-institutions?transit-number={{transitNumber}}&institutionId={{institutionId}}&locale={{locale}}"},WL:{adapter:"GeneralAdapterFBE",path:"v1/general/financial-institutions"},MOCK:{url:"/validateFinancialInstitution.json"}},acceptEmt:{method:a.POST,HTTP:{url:"/v1/general/emt/emt-accept/{{transferId}}"},WL:{adapter:"GeneralAdapterFBE",path:"v1/general/emt/emt-accept/id"},MOCK:{url:"/acceptEmt.json"}},acceptClientEmt:{method:a.POST,HTTP:{url:"/v1/accounts/{{accountHash}}/transactions/emt-accept/{{transferId}}"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/transactions/emt-accept/transferId"},MOCK:{url:"/acceptEmt.json"}},declineEmt:{method:a.DELETE,HTTP:{url:"/v1/general/emt/emt-decline/{{transferId}}?answer={{answer}}",timeout:6e4},WL:{adapter:"GeneralAdapterFBE",path:"v1/general/emt/emt-decline/id"},MOCK:{url:"/declineEmt.json"}},declineClientEmt:{method:a.DELETE,HTTP:{url:"/v1/customers/my/emt-decline/{{transferId}}?{{queryString}}",timeout:6e4},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/emt-decline/id"},MOCK:{url:"/declineEmt.json"}},createPayee:{method:a.POST,HTTP:{url:"/v1/customers/my/payees"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/payees"},MOCK:{url:"/createPayee.json"}},limits:{method:a.GET,HTTP:{url:"/v1/customers/my/limits"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/limits"},MOCK:{url:"/limits.json"}},insightsSession:{method:a.PUT,HTTP:{url:"/v1/campaign/session"},WL:{adapter:"CampaignAdapterFBE",method:a.POST,path:"v1/campaign/session"},MOCK:{url:"/insights/session_put.json"}},inboxAllMessages:{method:a.GET,HTTP:{url:"/v1/customers/my/e-messages?{{queryString}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/e-messages"},MOCK:{url:"/inboxMessages.json"}},inboxSingleMessage:{method:a.GET,HTTP:{url:"/v1/customers/my/e-messages/{{id}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/e-messages/id"},MOCK:{url:"/inboxSingleMessage.json"}},inboxUpdateStatus:{method:a.PUT,HTTP:{url:"/v1/customers/my/e-messages/"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/e-messages"},MOCK:{url:"/inboxMessages.json"}},inboxNewMessageCount:{method:a.GET,HTTP:{url:"/v1/customers/my/e-messages?{{queryString}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/e-messages"},MOCK:{url:"/inboxMessageCount.json"}},donationAccounts:{method:a.GET,HTTP:{url:"/v1/customers/my/accounts?actionCode=DONATIONS_FROM_ACCOUNTS"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/accounts?actionCode=DONATIONS_FROM_ACCOUNTS"},MOCK:{url:"/donationAccounts.json"}},createDonation:{method:a.POST,HTTP:{url:"/v1/accounts/{{accountHash}}/transactions/donations"},WL:{adapter:"CustomersAdapterFBE",path:"v1/accounts/id/transactions/donations"},MOCK:{url:"/createDonation.json"}},getDonations:{method:a.GET,HTTP:{url:"/v1/customers/my/donations?retrieveTotal=true"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/id/donations?retrieveTotal=true"},MOCK:{url:"/donations.json"}},getExternalAccounts:{method:a.GET,HTTP:{url:"/v1/customers/my/external-links"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/external-links"},MOCK:{url:"/getExternalAccounts.json"}},getExternalAccountsDependent:{method:a.GET,HTTP:{url:"/v1/customers/my/dependents/{{id}}/externallinks"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/dependents/id/externallinks"},MOCK:{url:"/getExternalAccounts.json"}},addExternalAccount:{method:a.POST,HTTP:{url:"/v1/customers/my/external-links",timeout:2e4},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/external-links"},MOCK:{url:"/externalAccountsCreated.json"}},addExternalAccountDependent:{method:a.POST,HTTP:{url:"/v1/customers/my/dependents/{{id}}/externallinks",timeout:2e4},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/dependents/id/externallinks"},MOCK:{url:"/externalAccountsCreated.json"}},verifyExternalLinkAccount:{method:a.PUT,HTTP:{url:"/v1/customers/my/external-links/{{dealId}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/external-links/dealId"},MOCK:{url:"/verifyExternalLinkAccount.json"}},verifyExternalLinkAccountDependent:{method:a.PUT,HTTP:{url:"/v1/customers/my/dependents/{{id}}/externallinks"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/dependents/id/externallinks"},MOCK:{url:"/verifyExternalLinkAccount.json"}},deleteExternalAccount:{method:a.DELETE,HTTP:{url:"/v1/customers/my/external-links/{{id}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/external-links/id"},MOCK:{url:"/deleteExternalAccount.json"}},deleteExternalAccountDependent:{method:a.DELETE,HTTP:{url:"/v1/customers/my/dependents/{{id}}/externallinks/{{lookupId}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/dependents/id/externallinks/lookupId"},MOCK:{url:"/deleteExternalAccount.json"}},getFinancialInstitution:{method:a.GET,HTTP:{url:"/v1/general/financial-institutions?transit-number={{transit_number}}&institutionId={{institutionId}}&locale={{locale}}"},WL:{adapter:"GeneralAdapterFBE",path:"v1/general/financial-institutions"},MOCK:{url:"/getFinancialInstitution.json"}},checkPendingTransactions:{method:a.GET,HTTP:{url:"/v1/customers/my/pending-transactions?ext-link-seq-num={{external_link_seq_number}}"},WL:{adapter:"GeneralAdapterFBE",path:"v1/general/financial-institutions"},MOCK:{url:"/checkPendingTransactions.json"}},setCreditCardBalanceProtectionInsurance:{method:a.POST,HTTP:{url:"/v1/accounts/{{accountHash}}/creditcards/balance-protection"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/creditcards/balance-protection"},MOCK:{url:"/updateCreditCardBalanceProtectionInsurance.json"}},cancelCreditCardBalanceProtectionInsurance:{method:a.DELETE,HTTP:{url:"/v1/accounts/{{accountHash}}/creditcards/balance-protection"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/creditcards/balance-protection"},MOCK:{url:"/updateCreditCardBalanceProtectionInsurance.json"}},getJointAccountHolders:{method:a.GET,HTTP:{url:"/v1/customers/my/joint-account-holders"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/joint-account-holders"},MOCK:{url:"/getJointAccountHolders.json"}},getJointAccountInvitations:{method:a.GET,HTTP:{url:"/v1/customers/my/invitations"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/invitations"},MOCK:{url:"/jointEnrollment/pending_invitations.json"}},createJointEnrollmentInvitation:{method:a.POST,HTTP:{url:"/v1/customers/my/invitations"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/invitations"},MOCK:{url:"/jointEnrollment/create_invitation.json"}},cancelJointEnrollmentInvitation:{method:a.DELETE,HTTP:{url:"/v1/customers/my/invitations/{{invitationKey}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/invitations"},MOCK:{url:"/jointEnrollment/cancel_invitation.json"}},getJointInvitationSummary:{method:a.GET,HTTP:{url:"/v1/general/invitations/{{invitationKey}}"},WL:{adapter:"GeneralAdapterFBE",path:"v1/general/invitations"},MOCK:{url:"/jointEnrollment/invitation_summary.json"}},validateJointInvitation:{method:a.PUT,HTTP:{url:"/v1/general/invitations/{{invitationKey}}?{{queryString}}"},WL:{adapter:"GeneralAdapterFBE",path:"v1/general/invitations"},MOCK:{url:"/jointEnrollment/validate_invitation.json"}},acceptJointEnrollmentInvitation:{method:a.PUT,HTTP:{url:"/v1/customers/my/invitations/{{invitationKey}}?{{queryString}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/invitations"},MOCK:{url:"/jointEnrollment/accept_invitation.json"}},addAuthorizedUser:{method:a.POST,HTTP:{url:"/v1/accounts/{{accountHash}}/creditcards/authorized-users?{{queryString}}"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/creditcards/authorized-users"},MOCK:{url:"/addAuthorizedUser.json"}},deleteAuthorizedUser:{method:a.DELETE,HTTP:{url:"/v1/accounts/{{accountHash}}/creditcards/authorized-users"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/creditcards/authorized-users"},MOCK:{url:"/removeAuthorizedUser.json"}},getAuthorizedUsers:{method:a.GET,HTTP:{url:"/v1/accounts/{{accountHash}}/creditcards/authorized-users"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/creditcards/authorized-users"},MOCK:{url:"/getAuthorizedUsers.json"}},getContributions:{method:a.GET,HTTP:{url:"/v1/accounts/{{accountHash}}/contributions"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/contributions"},MOCK:{url:"/contributions.json"}},getDistributions:{method:a.GET,HTTP:{url:"/v1/accounts/{{accountHash}}/distributions"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/distributions"},MOCK:{url:"/distributions.json"}},putDistributions:{method:a.PUT,HTTP:{url:"/v1/accounts/{{accountHash}}/distributions"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/distributions"},MOCK:{url:"/putDistributions.json"}},getOrangeAlerts:{method:a.GET,HTTP:{url:"/v1/customers/my/orange-alerts-preferences"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/orange-alerts-preferences"},MOCK:{url:"/getCustomerOrangeAlerts.json"}},putOrangeAlerts:{method:a.PUT,HTTP:{url:"/v1/customers/my/orange-alerts-preferences"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/orange-alerts-preferences"},MOCK:{url:"/putCustomerOrangeAlerts.json"}},forgotCif:{method:a.POST,WL:{adapter:"SecurityAdapterFBE",path:"v1/security/login-retrieval"}},forgotPin:{method:a.POST,WL:{adapter:"SecurityAdapterFBE",path:"v1/security/reset-pin"}},resetPin:{method:a.POST,WL:{adapter:"AuthenticationAdapterFBE",path:"security/reset-pin/verify"}},updatePin:{method:a.PUT,HTTP:{url:"/v1/customers/my/security"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/security"}},deleteAllRememberDevice:{method:a.DELETE,HTTP:{url:"/v1/customers/my/remember-me/ALL"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/remember-me/ALL"},MOCK:{url:"/emptyResponse.json"}},abmLocations:{method:a.GET,HTTP:{url:"/v1/general/abm-locations?{{queryString}}"},WL:{adapter:"GeneralAdapterFBE",path:"v1/general/abm-locations"},MOCK:{url:"/abmData.json"}},getRewardsPreference:{method:a.GET,HTTP:{url:"/v1/accounts/{{accountHash}}/creditcards/rewards-preference"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/creditcards/rewards-preference"},MOCK:{url:"/rewardsPreference.json"}},getRewards:{method:a.GET,HTTP:{url:"/v1/accounts/{{accountHash}}/creditcards/rewards?{{queryString}}"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/creditcards/rewards?{{queryString}}"},MOCK:{url:"/rewards.json"}},addRewards:{method:a.PUT,HTTP:{url:"/v1/accounts/{{accountHash}}/creditcards/rewards-preference"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/creditcards/rewards-preference"},MOCK:{url:"/addRewards.json"}},uncategorizedTransactions:{method:a.GET,HTTP:{url:"/pfm/v1/transactions?categoryIds={{categoryIds}}&periodTo={{periodTo}}&periodFrom={{periodFrom}}"},WL:{adapter:"PFMAdapterFBE",path:"pfm/v1/transactions?categoryIds=112"},MOCK:{url:"/chequing_account_transaction_history.json"}},unconfirmedTransactions:{method:a.GET,HTTP:{url:"/pfm/v1/transactions?onlyUncertain=true&periodTo={{periodTo}}&periodFrom={{periodFrom}}"},WL:{adapter:"PFMAdapterFBE",path:"pfm/v1/transactions?onlyUncertain=true"},MOCK:{url:"/chequing_account_transaction_history.json"}},getEmtTransactionDetails:{method:a.GET,HTTP:{url:"/v1/accounts/{{accountHash}}/transactions/emts/{{transferId}}?include-available-actions=true"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/transactions/emts/transfer-id?include-available-actions=true"},MOCK:{url:"/get_emt_details.json"}},deletePendingEmt:{method:a.DELETE,HTTP:{url:"/v1/accounts/{{accountHash}}/transactions/emts/{{transferId}}"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/transactions/emts/transfer-id"},MOCK:{url:"/get_emt_details.json"}},reclaimEmt:{method:a.POST,HTTP:{url:"/v1/customers/my/emt-reclaim/{{transferId}}"},WL:{adapter:"AccountsAdapterFBE",path:"v1/customers/id/emt-reclaim/transfer-id"},MOCK:{url:"/reclaim_emt_post_result.json"}},getReclaimEmt:{method:a.GET,HTTP:{url:"/v1/customers/my/emt-reclaim/{{transferId}}"},WL:{adapter:"AccountsAdapterFBE",path:"v1/customers/id/emt-reclaim/"},MOCK:{url:"/reclaim_emt.json"}},resendPendingEmt:{method:a.POST,HTTP:{url:"/v1/accounts/{{accountHash}}/transactions/emts/{{transferId}}/notification"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/transactions/emts/transfer-id/notification"},MOCK:{url:"/resend_pending_emt.json"}},deleteBillPayment:{method:a.DELETE,HTTP:{url:"/v1/accounts/{{accountHash}}/transactions/bill-payments/{{seqNum}}"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/transactions/bill-payments/seqNum"},MOCK:{url:"/delete_bill_payment.json"}},skipBillPayment:{method:a.PUT,HTTP:{url:"/v1/accounts/{{accountHash}}/transactions/bill-payments/{{seqNum}}",timeout:3e4},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/transactions/bill-payments/seqNum"},MOCK:{url:"/skip_bill_payment.json"}},enrollmentNewUser:{method:a.POST,HTTP:{url:"/v1/customers",timeout:3e4},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers"},MOCK:{url:"/enrollment_new_user.json"}},postChequeOrders:{method:a.POST,HTTP:{url:"/v1/accounts/{{accountHash}}/cheque-orders"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/cheque-orders"},MOCK:{url:"/chequeOrdersPost.json"}},postDraftOrder:{method:a.POST,HTTP:{url:"/v1/accounts/{{accountHash}}/draft-order"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/draft-order"},MOCK:{url:"/draftOrdersPost.json"}},skipMoveMoney:{method:a.PUT,HTTP:{url:"/v1/accounts/{{accountHash}}/transactions/movemoney/{{seqNum}}",timeout:3e4},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/transactions/movemoney/seqNum"},MOCK:{url:"/skip_movemoney.json"}},deleteMoveMoney:{method:a.DELETE,HTTP:{url:"/v1/accounts/{{accountHash}}/transactions/movemoney/{{seqNum}}",timeout:3e4},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/transactions/movemoney/seqNum"},MOCK:{url:"/delete_move_money.json"}},validateSignature:{method:a.POST,HTTP:{url:"/v1/general/enrollments/{{id}}/e-signature",timeout:2e4},WL:{adapter:"GeneralAdapterFBE",path:"v1/general/enrollments/id/e-signature"},MOCK:{url:"/eSignature.json"}},addKycSignature:{method:a.POST,HTTP:{url:"/v1/customers/my/e-signature"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/e-signature"},MOCK:{url:"/addKycSignature.json"}},requestBalanceTransfer:{method:a.POST,HTTP:{url:"/v1/accounts/{{accountHash}}/creditcards/balance-transfer",timeout:3e4},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/creditcards/balance-transfer"},MOCK:{url:"/request_balance_transfer.json"}},getMortgagePrepaymentDetails:{method:a.GET,HTTP:{url:"/v1/accounts/{{accountHash}}/mortgages?action-code=CHANGE_ADDITIONAL_PAYMENT"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/mortgages?action-code=CHANGE_ADDITIONAL_PAYMENT"},MOCK:{url:"/mortgage_prepayment_details.json"}},getMortgageConvertToFixedDetails:{method:a.GET,HTTP:{url:"/v1/accounts/{{accountHash}}/mortgages?action-code=CONVERT_TO_FIXED_RATE&{{queryString}}"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/mortgages?action-code=CONVERT_TO_FIXED_RATE"},MOCK:{url:"/mortgage_fixed_details.json"}},submitMortgagePrepayment:{method:a.PUT,HTTP:{url:"/v1/accounts/{{accountHash}}/mortgages?action-code=CHANGE_ADDITIONAL_PAYMENT"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/mortgages?action-code=CHANGE_ADDITIONAL_PAYMENT"},MOCK:{url:"/mortgage_prepayment_schedule.json"}},submitMortgageConvertToFixed:{method:a.PUT,HTTP:{url:"/v1/accounts/{{accountHash}}/mortgages?action-code=CONVERT_TO_FIXED_RATE"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/mortgages?action-code=CONVERT_TO_FIXED_RATE"},MOCK:{url:"/mortgage_fixed_submit.json"}},mortgageRenewalCalculator:{method:a.GET,HTTP:{url:"/v1/accounts/{{accountHash}}/mortgages/renewal-calculator?{{queryString}}"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/mortgages/renewal-calculator"},MOCK:{url:"/mortgage_renewal_calculator.json"}},mortgageRenewalPaymentDates:{method:a.GET,HTTP:{url:"/v1/accounts/{{accountHash}}/mortgages/renewals/payment-dates"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/mortgages/renewals/payment-dates"},MOCK:{url:"/mortgage_renewal_payment_dates.json"}},mortgageRenewalSubmit:{method:a.POST,HTTP:{url:"/v1/accounts/{{accountHash}}/mortgages/renewals"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/mortgages/renewals"},MOCK:{url:"/mortgage_renewal_submit.json"}},mortgageRequestToChangePaymentDetails:{method:a.GET,HTTP:{url:"/v1/accounts/{{accountHash}}/mortgages?action-code=CHANGE_PAYMENT_AMOUNT"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/mortgages?action-code=CHANGE_PAYMENT_AMOUNT"},MOCK:{url:"/mortgage_req_change_payment_details.json"}},mortgageRequestToChangePaymentSubmit:{method:a.PUT,HTTP:{url:"/v1/accounts/{{accountHash}}/mortgages?action-code=CHANGE_PAYMENT_AMOUNT"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/mortgages?action-code=CHANGE_PAYMENT_AMOUNT"},MOCK:{url:"/mortgage_req_change_payment_submit.json"}},mortgageRequestToChangeFrequencyDetails:{method:a.GET,HTTP:{url:"/v1/accounts/{{accountHash}}/mortgages?action-code=CHANGE_PAYMENT_SCHEDULE&{{queryString}}"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/mortgages?action-code=CHANGE_PAYMENT_SCHEDULE"},MOCK:{url:"/mortgage_req_change_frequency_details.json"}},mortgageRequestToChangeFrequencySubmit:{method:a.PUT,HTTP:{url:"/v1/accounts/{{accountHash}}/mortgages?action-code=CHANGE_PAYMENT_SCHEDULE"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/mortgages?action-code=CHANGE_PAYMENT_SCHEDULE"},MOCK:{url:"/mortgage_req_change_frequency_submit.json"}},mortgageRequestToChangeAccountDetails:{method:a.GET,HTTP:{url:"/v1/accounts/{{accountHash}}/mortgages?action-code=CHANGE_ACCOUNT"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/mortgages?action-code=CHANGE_ACCOUNT"},MOCK:{url:"/mortgage_req_change_account_details.json"}},mortgageRequestToChangeAccountSubmit:{method:a.PUT,HTTP:{url:"/v1/accounts/{{accountHash}}/mortgages?action-code=CHANGE_ACCOUNT"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/mortgages?action-code=CHANGE_ACCOUNT"},MOCK:{url:"/mortgage_req_change_account_submit.json"}},validateOrangeKey:{method:a.GET,HTTP:{url:"/v1/general/promotions/{{id}}"},WL:{adapter:"",path:""},MOCK:{url:"/orange_key.json"}},registeredDevices:{method:a.GET,HTTP:{url:"/v1/customers/my/registered-devices"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/registered-devices"},MOCK:{url:"/get_reg_devices.json"}},deleteRegisteredDevices:{method:a.DELETE,HTTP:{url:"/v1/customers/my/registered-devices/{{nickname}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/registered-devices/nickname"},MOCK:{url:"/delete_reg_devices.json"}},putRegisteredDevices:{method:a.PUT,HTTP:{url:"/v1/customers/my/registered-devices/{{nickname}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/registered-devices/nickname"},MOCK:{url:"/put_reg_devices.json"}},getSecurityPasses:{method:a.GET,HTTP:{url:"/v1/security/passes"},WL:{adapter:"SecurityAdapterFBE",path:"v1/security/passes"},MOCK:{url:"/get_security_passes.json"},cacheStrategy:{cacheResult:!1}},deleteSecurityPasses:{method:a.DELETE,HTTP:{url:"/v1/security/passes?seq={{seq}}"},WL:{adapter:"SecurityAdapterFBE",path:"v1/security/passes"},MOCK:{url:"/delete_security_passes.json"}},getReferFriendInfo:{method:a.GET,HTTP:{url:"/v1/customers/my/raf-info"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/raf-info"},MOCK:{url:"/raf-info-get.json"}},referFriend:{method:a.POST,HTTP:{url:"/v1/customers/my/refer-a-friend"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/refer-a-friend"},MOCK:{url:"/raf.json"}},getMessageTemplates:{method:a.GET,HTTP:{url:"/v1/general/message-templates?templateId={{templateId}}&locale={{locale}}"},WL:{adapter:"GeneralAdapterFBE",path:"v1/general/message-templates"},MOCK:{url:"/message-template-raf-bonus-info.json"}},getWithholdingTaxRates:{method:a.GET,HTTP:{url:"/v1/customers/my/withholding-tax-rates?{{queryString}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/withholding-tax-rates"},MOCK:{url:"/withholding_tax_rates.json"}},getAccountFees:{method:a.GET,HTTP:{url:"/v1/accounts/{{accountHash}}/fees"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/fees "},MOCK:{url:"/account_fees.json"}},getDependentsInfo:{method:a.GET,HTTP:{url:"/v1/customers/my/dependents/{{dependentId}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/dependents/id"},MOCK:{url:"/dependents.json"}},csaConversion:{method:a.PUT,HTTP:{url:"/v1/customers/my/applications/csa-conversion/{{dealId}}?actionCode={{actionCode}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/accounts/savings/csa-conversion"},MOCK:{url:"/csa_conversion.json"}},csaPostConversion:{method:a.PUT,HTTP:{url:"/v1/customers/my/applications/csa-conversion/{{dealId}}?actionCode=ACCEPT"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/accounts/savings/csa-confirmation"},MOCK:{url:"/csa_conversion.json"}},getCSAConversionApplication:{method:a.GET,HTTP:{url:"/v1/customers/my/applications?type=CSA_CONVERSION&status=WAIT_FOR_INSTRUCTION"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/applications?type=CSA_CONVERSION&status=WAIT_FOR_INSTRUCTION"},MOCK:{url:"/csa_conversion_account.json"}},getRoadblocks:{method:a.GET,HTTP:{url:"/v1/customers/my/roadblocks",timeout:6*h.timeout},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/roadblocks"},MOCK:{url:"/roadblocksGet.json"}},putRoadblocks:{method:a.PUT,HTTP:{url:"/v1/customers/my/roadblocks"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/roadblocks"},MOCK:{url:"/roadblocksPut.json"}},putKYCMethod:{method:a.PUT,HTTP:{url:"/v1/customers/my/kyc-method",timeout:4*h.timeout},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/kyc-method"},MOCK:{url:"/putKYCMethod.json"}},getTaxResidencyCountryList:{method:a.GET,HTTP:{url:"/v1/general/foreign-tax-residency-countries"},WL:{adapter:"GeneralAdapterFBE",path:"v1/general/foreign-tax-residency-countries"},MOCK:{url:"/foreignTaxResidencyCountries.json"}},getFatcaRoadblocks:{method:a.GET,HTTP:{url:"/v1/customers/my/foreign-tax-roadblocks"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/foreign-tax-roadblocks"},MOCK:{url:"/roadblockFactaGet.json"}},putFatcaRoadblocks:{method:a.POST,HTTP:{url:"/v1/customers/my/foreign-tax-self-certification/"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/foreign-tax-self-certification"},MOCK:{url:"/roadblocksFatcaPut.json"}},putFatcaDependentRoadblocks:{method:a.POST,HTTP:{url:"/v1/customers/my/dependents/{{dependentId}}/foreign-tax-self-certification"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/dependents/dependentId/foreign-tax-self-certification"},MOCK:{url:"/roadblocksFatcaPut.json"}},getPendingApplications:{method:a.GET,HTTP:{url:"/v1/customers/my/applications?{{queryString}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/applications"},MOCK:{url:"/magic_switch_pending_apps.json"}},magicSwitchGetApplication:{method:a.GET,HTTP:{url:"/v1/customers/my/applications/magic-switch/{{dealId}}",timeout:3*h.timeout},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/applications/magic-switch/dealId",timeout:3*h.timeout},MOCK:{url:"/magic_switch_pending_app.json"}},magicSwitchSubmit:{method:a.POST,HTTP:{url:"/v1/customers/my/applications/magic-switch",timeout:4*h.timeout},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/applications/magic-switch"},MOCK:{url:"/magic_switch_submit.json"}},magicSwitchUpdate:{method:a.PUT,HTTP:{url:"/v1/customers/my/applications/magic-switch/{{dealId}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/applications/magic-switch/dealId"},MOCK:{url:"/magic_switch_submit.json"}},requestMenigaCategories:{method:a.GET,HTTP:{url:"/pfm/v1/categories"},WL:{adapter:"PFMAdapterFBE",path:"pfm/v1/categories"},MOCK:{url:"/meniga_categories.json"}},getContactSecurityToken:{method:a.GET,HTTP:{skipWebApiBaseUrl:!0,url:"/web/getSecurityPass?PassType=SECURE_CHAT"},WL:{method:a.POST,adapter:"AuthenticationAdapterFBE",path:"security/passes/secure_chat/enroll"},MOCK:{url:"/getSecurityPass.json"}},getRegisteredBeneficiaryPlans:{method:a.GET,HTTP:{url:"/v1/customers/my/registered-plans"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/registered-plans"},MOCK:{url:"/beneficiaries.json"}},generateBeneficiaryPDF:{method:a.POST,HTTP:{url:"/v1/customers/my/beneficiaries"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/beneficiaries"},MOCK:{url:"/generateBeneficiaryPDF.json"}},getTaxResidencyCertification:{method:a.GET,HTTP:{url:"/v1/customers/my/foreign-tax-self-certification",timeout:3e4},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/foreign-tax-self-certification"},MOCK:{url:"/foreign_tax_residency_certification.json"}},getChildTaxResidencyCertification:{method:a.GET,HTTP:{url:"/v1/customers/my/dependents/{{dependentId}}/foreign-tax-self-certification",timeout:3e4},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/dependents/dependentId/foreign-tax-self-certification"},MOCK:{url:"/foreign_tax_residency_certification.json"}},putTaxResidencyCertification:{method:a.PUT,HTTP:{url:"/v1/customers/my/foreign-tax-self-certification/tin",timeout:3e4},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/foreign-tax-self-certification/tin"},MOCK:{url:"/foreign_tax_residency_certification.json"}},putChildTaxResidencyCertification:{method:a.PUT,HTTP:{url:"/v1/customers/my/dependents/{{dependentId}}/foreign-tax-self-certification/tin",timeout:3e4},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/dependents/dependentId/foreign-tax-self-certification/tin"},MOCK:{url:"/foreign_tax_residency_certification.json"}},paymentCalculator:{method:a.GET,HTTP:{url:"/v1/products/loans/heloc/payment-calculator?{{queryString}}"},WL:{adapter:"ProductsAdapterFBE",path:"v1/products/loans/heloc/payment-calculator"},MOCK:{url:"/paymentCalculator.json"}},requestAccounts:{method:a.GET,HTTP:{url:"/v1/customers/my/accounts?{{queryString}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/accounts"},MOCK:{url:"/moveMoneyEmailTransfer.json"}},requestAccountById:{method:a.GET,HTTP:{url:"/v1/customers/{{accountHash}}/accounts?{{queryString}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/{id}/accounts"},MOCK:{url:"/requestAccountById.json"}},openMutualFundEligibility:{method:a.POST,HTTP:{url:"/v1/customers/my/applications/mutual-funds/"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/applications/mutual-funds/"},MOCK:{url:"/mutual_fund_application_eligibility.json"}},mutualFundProfileSubmit:{method:a.POST,HTTP:{url:"/v1/products/mutual-funds/portfolio-selector"},WL:{adapter:"ProductsAdapterFBE",path:"v1/products/mutual-funds/portfolio-selector"},MOCK:{url:"/mutual_fund_profile_submit.json"}},getMutualFundFromAccounts:{method:a.GET,HTTP:{url:"/v1/customers/my/accounts?actionCode=OPEN_ACCOUNT&investmentType=MF&planType={{planType}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/accounts?actionCode=OPEN_ACCOUNT&investmentType=MF"},MOCK:{url:"/mutual_fund_from_accounts.json"}},getMutualFundAccounts:{method:a.GET,HTTP:{url:"/v1/customers/my/accounts?actionCode=MF_FUND_ACCOUNTS&investmentType=MF"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/accounts?actionCode=MF_FUND_ACCOUNTS&investmentType=MF"},MOCK:{url:"/mutual_fund_accounts.json"}},createMutualFundApplication:{method:a.POST,HTTP:{url:"/v1/customers/my/applications/mutual-funds/",timeout:6*h.timeout},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/applications/mutual-funds/"},MOCK:{url:"/mutual_fund_application_create.json"}},updateMutualFundApplication:{method:a.PUT,HTTP:{url:"/v1/customers/my/applications/mutual-funds/{{dealId}}",timeout:6*h.timeout},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/applications/mutual-funds/dealId"},MOCK:{url:"/mutual_fund_application_update.json"}},getMutualFundApplication:{method:a.GET,HTTP:{url:"/v1/customers/my/applications/mutual-funds/{{dealId}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/applications/mutual-funds/dealId"},MOCK:{url:"/mutual_fund_application_get.json"}},sendJointAccountHolderInvitation:{method:a.POST,HTTP:{url:"/v1/customers/my/invitations"},WL:{adapter:"CustomersAdapterFBE",path:"customers/my/invitations"},MOCK:{url:"/mutual_fund_joint_invitation.json"}},magicSwitchEsignature:{method:a.PUT,HTTP:{url:"/v1/customers/my/applications/magic-switch/{{dealId}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/applications/magic-switch/dealId"},MOCK:{url:"/magic_switch_esignature.json"}},getListOfTelusBillers:{method:"GET",HTTP:{url:"/v1/general/registered-payees?type=CREDITCARD"},WL:{adapter:"GeneralAdapterFBE",path:"v1/general/registered-payees"}},getFooterNotifications:{method:a.GET,HTTP:{url:"/v1/customers/my/notification-banners"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/notification-banners"},MOCK:{url:"/footer_notifications.json"}},deletePendingMF:{method:a.DELETE,HTTP:{url:"/v1/accounts/{{accountHash}}/transactions/mutual-funds/{{seqNum}}",timeout:3e4},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/transactions/mutual-funds/seqNum"},MOCK:{url:"/delete_move_money.json"}},createDownloadTransactionsToken:{method:a.GET,HTTP:{url:"/v1/customers/my/security/transaction-download-token"},WL:{adapter:"",path:""},MOCK:{url:"/transaction_download_token.json"}},getCanadaPostLocations:{method:a.GET,HTTP:{url:"/v1/general/enrollments/poi-locations?postal-code={{postalCode}}"},WL:{adapter:"GeneralAdapterFBE",path:"v1/general/enrollments/poi-locations"},MOCK:{url:"/canada_post_locations.json"}},getRestrictedWords:{method:a.GET,WL:{adapter:"GeneralAdapterFBE",path:"v1/general/restricted-words"},MOCK:{url:"/statusCodeSuccess.json"}},enrollTouchId:{method:a.POST,WL:{adapter:"AuthenticationAdapterFBE",path:"security/passes/touch_id/enroll"},MOCK:{url:"/statusCodeSystemError.json"}},enrollDeferPin:{method:a.POST,WL:{adapter:"AuthenticationAdapterFBE",path:"security/passes/defer_pin/enroll"},MOCK:{url:"/statusCodeSuccess.json"}},getCardsForMobilePay:{method:a.GET,WL:{adapter:"MobilePayAdapterFBE",path:"mobilepay/cards"},MOCK:{url:"/getCardsForMobilePay.json"}},ccVerifyForMobilePay:{method:a.PUT,WL:{adapter:"MobilePayAdapterFBE",path:"mobilepay/mobilepayverification"},MOCK:{url:"/statusCodeSystemError.json"}},generateMsmOtp:{method:a.POST,WL:{adapter:"MobilePayAdapterFBE",path:"mobilepay/generatemsmotp"},MOCK:{url:"/generateMsmOtp.json"}},sendEmail:{method:a.POST,WL:{adapter:"SecurityAdapter",path:"security/email-delivery"},MOCK:{url:""}},initRemoteChequeDeposit:{method:a.GET,WL:{adapter:"RDCAdapterFBE",path:"accounts/transactions/remote-deposit-cheque/init"},MOCK:{url:"/initRemoteChequeDeposit.json"}},getTokenForRemoteChequeDeposit:{method:a.GET,WL:{adapter:"RDCAdapterFBE",path:"accounts/transactions/remote-deposit-cheque/token?accountNumber={{accountNumber}}"},MOCK:{url:"/getTokenForRemoteChequeDeposit.json"}},verifyRemoteChequeDeposit:{method:a.POST,WL:{adapter:"RDCAdapterFBE",path:"accounts/transactions/remote-deposit-cheque/verify",timeout:3e4},MOCK:{url:"/verifyRemoteChequeDeposit.json"}},testLevel2Authorization:{method:a.GET,WL:{adapter:"AuthenticationAdapterFBE",path:"authentication/level2"}},confirmRemoteChequeDeposit:{method:a.POST,WL:{adapter:"RDCAdapterFBE",path:"accounts/transactions/remote-deposit-cheque/confirm",timeout:3e4},MOCK:{url:"/confirmRemoteChequeDeposit.json"}},getConfiguration:{method:a.GET,WL:{adapter:"InitializationAdapterFBE",path:"init/configuration"},MOCK:{url:"/configuration.json"}},getWatchAuthCode:{method:a.POST,WL:{adapter:"AuthenticationAdapterFBE",path:"customers/watch-token"},MOCK:{url:"/getWatchAuthCode.json"}},registerDeviceForAlerts:{method:a.POST,WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/orange-alerts-preferences"},MOCK:{url:"/statusCodeSuccess.json"}},getRAF:{method:a.GET,WL:{adapter:"InitializationAdapterFBE",path:"init/raf"},MOCK:{url:"/configuration.json"}},sendAnalyticsInfo:{method:a.POST,WL:{adapter:"AuthenticationAdapterFBE",path:"security/analytics-info"},MOCK:{url:"/statusCodeSuccess.json"}},getBudgetIncome:{method:a.GET,HTTP:{url:"/pfm/v1/budgets/income"},WL:{adapter:"BudgetAdapterFBE",path:"pfm/v1/budgets/income"},MOCK:{url:"/budgetIncome.json"}},getBudgetExpense:{method:a.GET,HTTP:{url:"/pfm/v1/budgets/expense"},WL:{adapter:"BudgetAdapterFBE",path:"pfm/v1/budgets/expense"},MOCK:{url:"/budgetExpense.json"}},getBudgetSavings:{method:a.GET,HTTP:{url:"/pfm/v1/budgets/savings"},WL:{adapter:"BudgetAdapterFBE",path:"pfm/v1/budgets/savings"},MOCK:{url:"/budgetSavings.json"}},getCurrentBudget:{method:a.GET,HTTP:{url:"/pfm/v1/budgets/current"},WL:{adapter:"BudgetAdapterFBE",path:"pfm/v1/budgets/current"},MOCK:{url:"/currentBudget.json"}},getLtsBudget:{method:a.GET,HTTP:{url:"/pfm/v1/budgets/summary"},WL:{adapter:"BudgetAdapterFBE",path:"pfm/v1/budgets/summary"},MOCK:{url:"/LtsBudget.json"},cacheStrategy:{cacheResult:!1}},getBudgetCapabilities:{method:a.GET,HTTP:{url:"/pfm/v1/budgets/capabilities"},WL:{adapter:"BudgetAdapterFBE",path:"pfm/v1/budgets/capabilities"},MOCK:{url:"/LtsBudget.json"},cacheStrategy:{skipCacheClearing:!0}},recalculateBudgetDetails:{method:a.POST,HTTP:{url:"/pfm/v1/budgets/recalculate"},WL:{adapter:"BudgetAdapterFBE",path:"pfm/v1/budgets/recalculate"},MOCK:{url:"/recalculateBudget.json"}},createBudgetDetails:{method:a.POST,HTTP:{url:"/pfm/v1/budgets/create"},WL:{adapter:"BudgetAdapterFBE",path:"pfm/v1/budgets/create"},MOCK:{url:"/createBudget.json"}},getBudgetTransactions:{method:a.GET,HTTP:{url:"/pfm/v1/budgets/transactions?categoryId={{categoryId}}"},WL:{adapter:"BudgetAdapterFBE",path:"/pfm/v1/budgets/transactions"},MOCK:{url:"/budgetTransactions.json"},cacheStrategy:{cacheResult:!1}},getBudgetCategory:{method:a.POST,HTTP:{url:"/pfm/v1/budgets/categories"},WL:{adapter:"BudgetAdapterFBE",path:"pfm/v1/budgets/categories"},MOCK:{url:"/budgetCategory.json"},cacheStrategy:{cacheResult:!1}},getResetBudget:{method:a.GET,HTTP:{url:"/pfm/v1/budgets/reset"},WL:{adapter:"BudgetAdapterFBE",path:"pfm/v1/budgets/reset"},cacheStrategy:{cacheResult:!1}},saveGoal:{method:a.POST,HTTP:{url:"/pfm/v1/goals"},WL:{adapter:"GoalsAdapterFBE",path:"pfm/v1/goals"},MOCK:{url:"/saveGoal.json"},cacheStrategy:{isAccountsCall:!0}},lifeGoals:{method:a.GET,HTTP:{url:"/pfm/v1/goals"},WL:{adapter:"GoalsAdapterFBE",path:"pfm/v1/goals"},MOCK:{url:"/lifeGoals.json"}},lifeGoal:{method:a.GET,HTTP:{url:"/pfm/v1/goals/goal?{{queryString}}"},WL:{adapter:"GoalsAdapterFBE",path:"pfm/v1/goals/goal"},MOCK:{url:"/lifeGoal.json"}},goalCategories:{method:a.GET,HTTP:{url:"/pfm/v1/goals/categories"},WL:{adapter:"GoalsAdapterFBE",path:"pfm/v1/goals/categories"},MOCK:{url:"/goalCategories.json"},cacheStrategy:{skipCacheClearing:!0}},goalImages:{method:a.GET,HTTP:{url:"/pfm/v1/goals/images"},WL:{adapter:"GoalsAdapterFBE",path:"pfm/v1/goals/images"},MOCK:{url:"/goalImages.json"},cacheStrategy:{skipCacheClearing:!0}},goalCapabilities:{method:a.GET,HTTP:{url:"/pfm/v1/goals/capabilities"},WL:{adapter:"GoalsAdapterFBE",path:"pfm/v1/goals/capabilities"},MOCK:{url:"/goalCapabilities.json"},cacheStrategy:{skipCacheClearing:!0}},tlocFundSourceAccounts:{method:a.GET,HTTP:{url:"/v1/customers/my/accounts/tloc/scoaccts?{{queryString}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/accounts"},MOCK:{url:"/tlocFundSourceAccounts.json"}},rspLoanPaymentCalculator:{method:a.GET,HTTP:{url:"/v1/products/loans/rsp/payment-calculator?{{queryString}}"},WL:{adapter:"ProductsAdapterFBE",path:"v1/products/loans/rsp/payment-calculator"},MOCK:{url:"/rspLoanPaymentCalculator.json"}},getAvailableRspLoanPAL:{method:a.GET,HTTP:{url:"/v1/customers/my/applications/availablersppal",timeout:6*h.timeout},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/applications/availablersppal",timeout:6*h.timeout},MOCK:{url:"/rsp_loan_get_available_pal.json"},cacheStrategy:{groupClearingExcluded:!0,maxAgeSec:900}},getRspLoanApplication:{method:a.GET,HTTP:{url:"/v1/customers/my/applications/rsploan/{{dealId}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/applications/rsploan/dealId"},MOCK:{url:"/rsp_loan_application_get.json"}},createRspLoanApplication:{method:a.POST,HTTP:{url:"/v1/customers/my/applications/rsploan",timeout:6*h.timeout},WL:{adapter:"CustomersAdapterFBE",path:"/v1/customers/my/applications/rsploan"},MOCK:{url:"/rsp_loan_application_create.json"}},updateRspLoanApplication:{method:a.PUT,HTTP:{url:"/v1/customers/my/applications/rsploan/{{dealId}}",timeout:6*h.timeout},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/applications/rsploan/dealId"},MOCK:{url:"/rsp_loan_application_update.json"}},getRspPalApplication:{method:a.GET,HTTP:{url:"/v1/customers/my/applications/rsppal/{{dealId}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/applications/rsppal/dealId"},MOCK:{url:"/rsp_loan_pal_get.json"}},submitRspPalApplication:{method:a.PUT,HTTP:{url:"/v1/customers/my/applications/rsppal/{{dealId}}",timeout:6*h.timeout},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/applications/rsppal/dealId"},MOCK:{url:"/rsp_loan_pal_submit.json"}},getRspLoanPaymentFromAccounts:{method:a.GET,HTTP:{url:"/v1/customers/my/accounts?actionCode=RSP_LOAN_PAYMENT"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/accounts?actionCode=RSP_LOAN_PAYMENT"},MOCK:{url:"/mutual_fund_from_accounts.json"}},getInternalCustomerAccounts:{method:a.GET,HTTP:{url:"/v1/customers/my/accounts"},WL:{adapter:"CustomersAdapterFBE",path:"/web/rest/v1/customers/my/accounts"},MOCK:{url:"/internal_customer_accounts.json"}},getRspLoanAllowedDestAccounts:{method:a.GET,HTTP:{url:"/v1/customers/my/accounts?actionCode=RSP_LOAN_PAYOUT"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/accounts?actionCode=RSP_LOAN_PAYOUT"},MOCK:{url:"/rsp_loan_allowed_allocation_accounts.json"}},openRspLoanEligibility:{method:a.POST,HTTP:{url:"/v1/customers/my/applications/rsploan/"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/applications/rsploan/"},MOCK:{url:"/rsp_loan_application_eligibility.json"}},getFullAssetLiabilityTypes:{method:a.GET,HTTP:{url:"/v1/general/reference-data?types=assets,liabilities&incl_tng_resources=true"},WL:{adapter:"GeneralAdapterFBE",path:"v1/general/reference-data?types=assets,liabilities&incl_tng_resources=true"},MOCK:{url:"/reference-data_full_asset_liability_types.json"},cacheStrategy:{groupClearingExcluded:!0,maxAgeSec:3600}},putMedalliaFeedBack:{method:a.PUT,HTTP:{url:"/v1/survey-manager/my/feedback"},WL:{adapter:"SurveyManagerAdapterFBE",path:"v1/survey-manager/my/feedback"},MOCK:{url:"/put_medallia_feedBack.json"},cacheStrategy:{groupClearingExcluded:!0,maxAgeSec:3600}},getAgentId:{method:a.GET,HTTP:{url:"/v1/survey-manager/chat/{{interactionId}}",timeout:h.timeout/2},WL:{adapter:"SurveyManagerAdapterFBE",path:"v1/survey-manager/chat/id"},MOCK:{url:"/get_agent_id.json"},cacheStrategy:{groupClearingExcluded:!0,maxAgeSec:3600}},putMonthlyFees:{method:a.PUT,HTTP:{url:"/v1/customers/my/monthly-fee"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/monthly-fee"},MOCK:{url:""}},keepAlive:{method:a.GET,HTTP:{url:"/keep-alive"},WL:{adapter:"AuthenticationAdapterFBE",path:"authentication/level1"},MOCK:{url:"/keepAlive.json"}}},g=new s.default([[_.submitRspPalApplication,[_.getAvailableRspLoanPAL]],[_.billPayTransaction,[_.pendingTransactions]],[_.sendMoneyEmailTransfer,[_.pendingTransactions]],[_.overdraftProtectionInvitationResponse,[_.getFooterNotifications]],[_.moveMoneySubmit,[_.pendingTransactions]],[_.moveMoneyEdit,[_.pendingTransactions]],[_.deleteMoveMoney,[_.pendingTransactions]],[_.deletePendingEmt,[_.pendingTransactions]],[_.deletePendingMF,[_.pendingTransactions]],[_.deleteBillPayment,[_.pendingTransactions]],[_.sendMoneyEmailTransfer,[_.getEmtRecipients]],[_.saveAccountDetails,[_.cards]]]),S={accounts:{configProperty:"isAccountsCall",searchString:"accounts",maxAgeSec:300},transactions:{configProperty:"isTransactionsCall",searchString:"transactions",maxAgeSec:300},customers:{configProperty:"isCustomersCall",searchString:"customers",maxAgeSec:900},goals:{configProperty:"isGoalsCall",searchString:"goals",maxAgeSec:300},lts:{configProperty:"isLtsSummaryCall",searchString:"summary",maxAgeSec:300}},f={ADDRESS_AUTOCOMPLETE:"addressAutocomplete",EXCHANGE_RATES:"exchangeRates",ACCOUNT_SUMMARY:"accountSummary",GET_CUSTOMER_INFO:"getCustomerInfo",GET_CUSTOMER_INFO_AI:"getCustomerInfoAI",GET_CUSTOMER_INFO_QUERY:"getCustomerInfoQuery",PUT_CUSTOMER_INFO:"putCustomerInfo",GET_CUSTOMER_USERNAME:"getCustomerUsername",PUT_CUSTOMER_USERNAME:"putCustomerUsername",PUT_CUSTOMER_NEW_PIN:"putCustomerNewPIN",PUT_CUSTOMER_NEW_PIN_DEPENDENT:"putCustomerNewPINDependent",GET_CUSTOMER_CONSENTS:"customerConsents",PUT_CUSTOMER_CONSENTS:"putCustomerConsents",CUSTOMER_PREFERENCES:"customerPreferences",PUT_CUSTOMER_PREFERENCES:"putCustomerPreferences",GET_CUSTOMER_DEPENDENT:"getCustomerDependent",PUT_CUSTOMER_DEPENDENT:"putCustomerDependent",GET_CUSTOMER_CARDS:"getCustomerCards",PUT_CUSTOMER_CARDS:"putCustomerCards",GET_CARD:"getCard",UPDATE_CARD:"updateCard",UPDATE_CREDIT_CARD_LIMIT:"updateCreditCardLimit",UPDATE_LOAN_CREDIT_CARD_LIMIT:"updateLoanCreditCardLimit",LOAN_PAYMENTS:"loanPayments",CREDIT_LIMIT_INCREASE_REQUEST:"creditLimitIncreaseRequest",CUSTOMER_BONUS_INFO:"customerBonusInfo",CUSTOMER_OFFERS:"customerOffers",UPDATE_CUSTOMER_OFFERS:"updateCustomerOffers",ACTIVATE_CUSTOMER_OFFERS:"activateCustomerOffers",ACCOUNT_SUMMARY_SAVINGS:"accountSummarySavings",ACCOUNT_SUMMARY_CHEQUING:"accountSummaryChequing",SAVINGS_ACCOUNT_WITHOUT_RIF:"savingsAccountWithoutRif",REFERENCE_DATA:"referenceData",ACCOUNTS_RATES:"accountsRates",SETUP_PASSMARK:"passmarkSetup",PASSMARK_IMAGES_BY_CATEGORY:"passmarkImagesByCategory",PASSMARK_IMAGES_BY_CATEGORY_UPDATE:"passmarkImagesByCategoryUpdate",GET_PASSMARK:"getPassmark",PUT_PASSMARK:"putPassmark",POST_PASSMARK:"postPassmark",GET_PASSMARK_DEPENDENT:"getPassmarkDependent",PUT_PASSMARK_DEPENDENT:"putPassmarkDependent",INFO_DELIVERY:"infoDelivery",OPEN_CHEQUING:"openChequing",OPEN_SAVINGS:"openSavings",UPDATE_CC_EMPLOYMENT_INFORMATION:"updateCCEmploymentInformation",OPEN_CREDIT_CARD:"openCreditCard",CC_RATES:"creditCardRates",CC_LIMIT:"creditLimit",CC_APPLICATION_STATUS:"creditApplicationStatus",CC_REWARD_ACCOUNTS:"creditRewardAccounts",GIC_FUND_SOURCE_ACCOUNTS:"gicFundSourceAccounts",BISA_FUND_SOURCE_ACCOUNTS:"bisaFundSourceAccounts",CC_APPLICATION_UPDATE_WITH_GET:"creditApplicationUpdateWithGet",CC_APPLICATION_UPDATE:"creditApplicationUpdate",CC_GET_KBA_QUESTIONS:"getKBAQuestions",CC_UPDATE_KBA_QUESTIONS:"updateKBAQuestions",CC_CONFIRM_ELIG:"ob2CCConfirmEligibility",CC_VALIDATE_CLIENT:"ob2CCValidateClientData",CC_ENROLL_CLIENT:"ob2CCEnrollClient",ENROLL_GET_KBA_QUESTIONS:"getEnrollKBAQuestions",ENROLL_UPDATE_KBA_QUESTIONS:"updateEnrollKBAQuestions",GET_MUTUAL_FUND_DETAILS:"getMutualFundDetails",OPEN_SAVINGS_RSP:"openSavingsRSP",OPEN_SAVINGS_TFSA:"openSavingsTFSA",OPEN_SAVINGS_TFSA_KS:"openSavingsTFSAKS",OPEN_CSA:"openCSA",OPEN_GIC:"openGIC",OPEN_GIC_RSP:"openGICRSP",OPEN_GIC_TFSA:"openGICTFSA",OPEN_GIC_RIF:"openGICRIF",OPEN_RIF_ISA:"openRIFISA",OPEN_TLOC_INTEREST:"openTlocInterest",ORDER_ACCOUNTS:"orderAccounts",MIGRATE_CUSTOMER:"migrateCustomer",ACCOUNT_DETAILS_SAVINGS:"accountDetailsSavings",ACCOUNT_DETAILS_CHEQUING:"accountDetailsChequing",ACCOUNT_DETAILS_CREDIT_CARD:"accountDetailsCreditCard",ACCOUNT_DETAILS_MUTUAL_FUND:"accountDetailsMutualFund",ACCOUNT_DETAILS_MORTGAGE:"accountDetailsMortgage",ACCOUNT_DETAILS_LOAN:"accountDetailsLoan",ACCOUNT_STATEMENTS:"accountStatements",VIEW_ACCOUNT_STATEMENT:"viewAccountStatement",TAX_RECEIPTS:"taxReceipts",VIEW_TAX_RECEIPT:"viewTaxReceipt",UPDATE_TAX_RECEIPT:"updateTaxReceipt",INVESTMENT_REPORTS:"accountInvestmentReports",VIEW_INVESTMENT_REPORT:"viewInvestmentReport",OTHER_DOCUMENTS:"otherDocuments",DELETE_OTHER_DOCUMENT:"deleteOtherDocument",ACCOUNT_DETAILS:"accountDetails",PUT_ACCOUNT_DETAILS:"saveAccountDetails",MOVE_MONEY:"moveMoney",MOVE_MONEY_SUBMIT:"moveMoneySubmit",MOVE_MONEY_EDIT:"moveMoneyEdit",MUTUAL_FUNDS_SUBMIT:"mutualFundsSubmit",MUTUAL_FUNDS_EDIT:"mutualFundsEdit",PAYEE_LIST:"payeeList",PAD_LIST:"padList",STOP_PAD_LIST:"stopPadList",STOP_PAD_REQUEST:"stopPadRequest",EDIT_PAYEE:"editPayee",DELETE_PAYEE:"deletePayee",BILL_PAY_ACCOUNTS:"billPayAccounts",DIRECT_DEPOSIT_ACCOUNTS:"directDepositAccounts",RIF_PAYMENT_ACCOUNTS:"rifPaymentAccounts",BILL_PAY_TRANSACTION:"billPayTransaction",UPDATE_BILL_PAY_TRANSACTION:"updateBillPayTransaction",ADD_REGISTERED_PAYEES:"addRegisteredPayees",REGISTERED_PAYEES:"registeredPayees",GET_EMT_RECIPIENTS:"getEmtRecipients",ADD_EMT_RECIPIENT:"addEmtRecipient",EDIT_EMT_RECIPIENT:"editEmtRecipient",DELETE_EMT_RECIPIENT:"deleteEmtRecipient",MOVE_MONEY_EMAIL_TRANSFER:"moveMoneyEmailTransfer",SEND_MONEY_EMAIL_TRANSFER:"sendMoneyEmailTransfer",ACCOUNT_HOLDS:"accountHolds",ACCOUNT_BY_TYPE:"accountByType",TRANSACTION_HISTORY:"transactionHistory",LEGACY_TRANSACTION_HISTORY:"legacyTransactionHistory",CARDS:"cards",AVAILABLE_ACTIONS:"availableActions",ACCOUNT_USAGE_TYPES:"accountUsageTypes",PENDING_TRANSACTIONS:"pendingTransactions",PAYEE_PENDING_TRANSACTIONS:"payeePendingTransactions",BILL_POSTED_PAYMENTS:"billPostedPayments",BANK_INFO:"bankInfo",USER_CAPABILITIES:"userCapabilities",USER_CAPABILITIES_NO_QUERY:"userCapabilitiesNoQuery",FINANCIAL_INSTITUTIONS:"financialInstitutions",SANCTIONED_COUNTRIES:"sanctionedCountries",OVERDRAFT_DETAILS:"overdraftDetails",OVERDRAFT_PROTECTION_CANCELATION:"overdraftProtectionCancelation",OVERDRAFT_PROTECTION_APPLY:"overdraftProtectionApply",OVERDRAFT_PROTECTION_DECREASE_LIMIT:"overdraftProtectionDecreaseLimit",OVERDRAFT_PROTECTION_INVITATION_DETAILS:"overdraftProtectionInvitationDetails",OVERDRAFT_PROTECTION_INVITATION_RESPONSE:"overdraftProtectionInvitationResponse",OVERDRAFT_PROTECTION_PAY_FULL_BALANCE_ACCOUNTS:"overdraftProtectionPayFullBalanceAccounts",OVERDRAFT_PROTECTION_PREAPPROVED_ACCOUNTS:"overdraftProtectionPreApprovedAccounts",OVERDRAFT_PROTECTION_PREAPPROVED_DECISSION:"overdraftProtectionPreApprovedDecission",STANDARD_FEES:"standardFees",GET_TRANSACTION_SPLIT:"getTransactionSplit",PUT_TRANSACTION_SPLIT:"putTransactionSplit",ADD_TRANSACTION_NOTE:"addTransactionNote",AMEND_TRANSACTION_NOTE:"amendTransactionNote",AGGREGATED_TRANSACTIONS:"aggregatedTransactions",UPDATE_TRANSACTION:"updateTransaction",DELETE_CHILD_TRANSACTION:"deleteChildTransaction",GET_SIMILAR_TRANSACTIONS:"getSimilarTransactions",GET_EMT_AUTO_SENDERS:"getEmtAutoSenders",EDIT_EMT_AUTO_SENDERS:"editEmtAutoSenders",DELETE_EMT_AUTO_SENDERS:"deleteEmtAutoSenders",RECOMMEND_PAYEE:"recommendPayee",GET_TRAVEL_NOTICES:"getTravelNotices",ADD_TRAVEL_NOTICE:"addTravelNotice",EDIT_TRAVEL_NOTICE:"editTravelNotice",DELETE_TRAVEL_NOTICE:"deleteTravelNotice",ACCOUNTS_FOR_RECEIVE_EMAIL_MONEY:"accountsForReceiveEmailMoney",EMT_GET_TRANSFER_DETAILS:"emtGetTransferDetails",STANDARD_EMT_GET_TRANSFER_DETAILS:"standardEmtGetTransferDetails",VALIDATE_FINANCIAL_INSTITUTION:"validateFinancialInstitution",VALIDATE_EMT_ANSWER:"validateEmtAnswer",ACCEPT_EMT:"acceptEmt",ACCEPT_CLIENT_EMT:"acceptClientEmt",DECLINE_CLIENT_EMT:"declineClientEmt",DECLINE_EMT:"declineEmt",CREATE_PAYEE:"createPayee",GET_EXTERNAL_ACCOUNTS:"getExternalAccounts",GET_EXTERNAL_ACCOUNTS_DEPENDENT:"getExternalAccountsDependent",ADD_EXTERNAL_ACCOUNT:"addExternalAccount",ADD_EXTERNAL_ACCOUNT_DEPENDENT:"addExternalAccountDependent",DELETE_EXTERNAL_ACCOUNT:"deleteExternalAccount",DELETE_EXTERNAL_ACCOUNT_DEPENDENT:"deleteExternalAccountDependent",GET_FINANCIAL_INSTITUTION:"getFinancialInstitution",VERIFY_EXTERNAL_LINK_ACCOUNT:"verifyExternalLinkAccount",VERIFY_EXTERNAL_LINK_ACCOUNT_DEPENDENT:"verifyExternalLinkAccountDependent",CHECK_PENDING_TRANSACTIONS:"checkPendingTransactions",GET_CONTRIBUTIONS:"getContributions",GET_DISTRIBUTIONS:"getDistributions",PUT_DISTRIBUTIONS:"putDistributions",CLOSE_ACCOUNT:"closeAccount",CLOSE_ACCOUNT_SUBMIT:"closeAccountSubmit",LIMITS:"limits",GET_ORANGE_ALERTS:"getOrangeAlerts",PUT_ORANGE_ALERTS:"putOrangeAlerts",FORGOT_CIF:"forgotCif",FORGOT_PIN:"forgotPin",RESET_PIN:"resetPin",UPDATE_PIN:"updatePin",DELETE_REMEMBER_ME_ALL:"deleteAllRememberDevice",SET_CREDIT_CARD_BALANCE_PROTECTION_INSURANCE:"setCreditCardBalanceProtectionInsurance",CANCEL_CREDIT_CARD_BALANCE_PROTECTION_INSURANCE:"cancelCreditCardBalanceProtectionInsurance",GET_JOINT_ACCOUNT_HOLDERS:"getJointAccountHolders",GET_JOINT_ACCOUNT_INVITATIONS:"getJointAccountInvitations",CREATE_JOINT_ENROLLMENT_INVITATION:"createJointEnrollmentInvitation",CANCEL_JOINT_ENROLLMENT_INVITATION:"cancelJointEnrollmentInvitation",GET_JOINT_INVITATION_SUMMARY:"getJointInvitationSummary",VALIDATE_JOINT_INVITATION:"validateJointInvitation",ACCEPT_JOINT_ENROLLMENT_INVITATION:"acceptJointEnrollmentInvitation",ADD_AUTHORIZED_USER:"addAuthorizedUser",DELETE_AUTHORIZED_USER:"deleteAuthorizedUser",GET_AUTHORIZED_USERS:"getAuthorizedUsers",INSIGHTS_SESSION:"insightsSession",INBOX_ALL_MESSAGES:"inboxAllMessages",INBOX_SINGLE_MESSAGE:"inboxSingleMessage",INBOX_UPDATE_STATUS:"inboxUpdateStatus",INBOX_NEW_MESSAGE_COUNT:"inboxNewMessageCount",GET_REWARDS_PREFERENCE:"getRewardsPreference",GET_REWARDS:"getRewards",ADD_REWARDS:"addRewards",UNCATEGORIZED_TRANSACTIONS:"uncategorizedTransactions",UNCONFIRMED_TRANSACTIONS:"unconfirmedTransactions",GET_EMT_TRANSACTION_DETAILS:"getEmtTransactionDetails",DELETE_PENDING_EMT:"deletePendingEmt",RECLAIM_EMT:"reclaimEmt",GET_RECLAIM_EMT:"getReclaimEmt",RESEND_PENDING_EMT:"resendPendingEmt",DELETE_BILL_PAYMENT:"deleteBillPayment",SKIP_BILL_PAYMENT:"skipBillPayment",ENROLLMENT_NEW_USER:"enrollmentNewUser",ABM_LOCATIONS:"abmLocations",POST_CHEQUE_ORDERS:"postChequeOrders",POST_DRAFT_ORDERS:"postDraftOrder",DELETE_MOVE_MONEY:"deleteMoveMoney",SKIP_MOVE_MONEY:"skipMoveMoney",VALIDATE_SIGNATURE:"validateSignature",ADD_KYC_SIGNATURE:"addKycSignature",REQUEST_BALANCE_TRANSFER:"requestBalanceTransfer",MORTGAGE_PREPAYMENT_DETAILS:"getMortgagePrepaymentDetails",MORTGAGE_CONVERT_TO_FIXED_DETAILS:"getMortgageConvertToFixedDetails",MORTGAGE_PREPAYMENT_SUBMIT:"submitMortgagePrepayment",MORTGAGE_COVERT_TO_FIXED_SUBMIT:"submitMortgageConvertToFixed",MORTGAGE_RENEWAL_PAYMENT_DATES:"mortgageRenewalPaymentDates",MORTGAGE_RENEWAL_CALCULATOR:"mortgageRenewalCalculator",MORTGAGE_RENEWAL_SUBMIT:"mortgageRenewalSubmit",MORTGAGE_CHANGE_PAYMENT_DETAILS:"mortgageRequestToChangePaymentDetails",MORTGAGE_CHANGE_PAYMENT_SUBMIT:"mortgageRequestToChangePaymentSubmit",MORTGAGE_CHANGE_FREQUENCY_DETAILS:"mortgageRequestToChangeFrequencyDetails",MORTGAGE_CHANGE_FREQUENCY_SUBMIT:"mortgageRequestToChangeFrequencySubmit",MORTGAGE_CHANGE_ACCOUNT_DETAILS:"mortgageRequestToChangeAccountDetails",MORTGAGE_CHANGE_ACCOUNT_SUBMIT:"mortgageRequestToChangeAccountSubmit",VALIDATE_ORANGE_KEY:"validateOrangeKey",GET_REGISTERED_DEVICES:"registeredDevices",DELETE_REGISTERED_DEVICES:"deleteRegisteredDevices",PUT_REGISTERED_DEVICES:"putRegisteredDevices",GET_SECURITY_PASSES:"getSecurityPasses",DELETE_SECURITY_PASS:"deleteSecurityPasses",GET_DONATION_ACCOUNTS:"donationAccounts",CREATE_DONATION:"createDonation",GET_DONATIONS:"getDonations",GET_REFER_FRIEND_INFO:"getReferFriendInfo",GET_MESSAGE_TEMPLATES:"getMessageTemplates",REFER_FRIEND:"referFriend",GET_WITHHOLDING_TAX_RATES:"getWithholdingTaxRates",GET_ACCOUNT_FEES:"getAccountFees",OPEN_BUSINESS_SAVINGS:"openBusinessSavings",OPEN_BUSINESS_US_SAVINGS:"openBusinessUsSavings",OPEN_BUSINESS_GIC:"openBusinessGic",BUSINESS_GIC_USD:"openBusinessGicUsd",GET_DEPENDENTS_INFO:"getDependentsInfo",CSA_CONVERSION:"csaConversion",CSA_POST_CONVERSION:"csaPostConversion",GET_CSA_CONVERSION_APPLICATION:"getCSAConversionApplication",GET_ROADBLOCKS:"getRoadblocks",PUT_ROADBLOCKS:"putRoadblocks",GET_PENDING_APPS:"getPendingApplications",MAGIC_SWITCH_SUBMIT:"magicSwitchSubmit",OPEN_MUTUAL_FUND_ELIGIBILITY:"openMutualFundEligibility",MUTUAL_FUND_PROFILE_SUBMIT:"mutualFundProfileSubmit",MUTUAL_FUND_FROM_ACCOUNTS:"getMutualFundFromAccounts",MUTUAL_FUND_ACCOUNTS:"getMutualFundAccounts",CREATE_MUTUAL_FUND_APPLICATION:"createMutualFundApplication",UPDATE_MUTUAL_FUND_APPLICATION:"updateMutualFundApplication",PUT_KYC_METHOD:"putKYCMethod",GET_TAX_RESIDENCY_COUNTRY_LIST:"getTaxResidencyCountryList",GET_FATCA_ROADBLOCKS:"getFatcaRoadblocks",PUT_FATCA_ROADBLOCKS:"putFatcaRoadblocks",PUT_FATCA_DEPENDENT_ROADBLOCKS:"putFatcaDependentRoadblocks",GET_CONTACT_SECURITY_TOKEN:"getContactSecurityToken",MAGIC_SWITCH_UPDATE:"magicSwitchUpdate",MAGIC_SWITCH_ESIGNATURE:"magicSwitchEsignature",MAGIC_SWITCH_GET_APPLICATION:"magicSwitchGetApplication",GET_REGISTERED_BENEFICIARY_PLANS:"getRegisteredBeneficiaryPlans",GENERATE_BENEFICIARY_PDF:"generateBeneficiaryPDF",PAYMENT_CALCULATOR:"paymentCalculator",REQUEST_ACCOUNTS:"requestAccounts",REQUEST_ACCOUNT_BY_ID:"requestAccountById",GET_MUTUAL_FUND_APPLICATION:"getMutualFundApplication",SEND_JOINT_ACCOUNT_HOLDER_INVITATION:"sendJointAccountHolderInvitation",GET_LIST_OF_TELUS_BILLERS:"getListOfTelusBillers",GET_TAX_RESIDENCY_CERTIFICATION:"getTaxResidencyCertification",GET_CHILD_TAX_RESIDENCY_CERTIFICATION:"getChildTaxResidencyCertification",PUT_TAX_RESIDENCY_CERTIFICATION:"putTaxResidencyCertification",PUT_CHILD_TAX_RESIDENCY_CERTIFICATION:"putChildTaxResidencyCertification",SEND_EMAIL:"sendEmail",TEST_LEVEL2_AUTHORIZATION:"testLevel2Authorization",RDC_INIT:"initRemoteChequeDeposit",RDC_GET_TOKEN:"getTokenForRemoteChequeDeposit",RDC_VERIFY:"verifyRemoteChequeDeposit",RDC_CONFIRM:"confirmRemoteChequeDeposit",GET_CONFIGURATION:"getConfiguration",GET_RAF:"getRAF",FOOTER_NOTIFICATIONS:"getFooterNotifications",DELETE_PENDING_MF:"deletePendingMF",REQUEST_MENIGA_CATEGORIES:"requestMenigaCategories",GET_DOWNLOAD_TRANSACTIONS_TOKEN:"createDownloadTransactionsToken",GET_CANADA_POST_LOCATIONS:"getCanadaPostLocations",GET_RESTRICTED_WORDS:"getRestrictedWords",GET_WATCH_AUTH_CODE:"getWatchAuthCode",REGISTER_DEVICE_FOR_ALERTS:"registerDeviceForAlerts",SEND_ANALYTICS_INFO:"sendAnalyticsInfo",GET_BUDGET_INCOME:"getBudgetIncome",GET_BUDGET_EXPENSE:"getBudgetExpense",GET_BUDGET_SAVINGS:"getBudgetSavings",GET_CURRENT_BUDGET:"getCurrentBudget",RECALCULATE_BUDGET_DETAILS:"recalculateBudgetDetails",CREATE_BUDGET_DETAILS:"createBudgetDetails",RESET_BUDGET:"getResetBudget",SAVE_GOAL:"saveGoal",LIFE_GOALS:"lifeGoals",LIFE_GOAL:"lifeGoal",GOAL_CATEGORIES:"goalCategories",GOAL_IMAGES:"goalImages",GOAL_CAPABILITIES:"goalCapabilities",TLOC_FUND_SOURCE_ACCOUNTS:"tlocFundSourceAccounts",RSP_LOAN_PAYMENT_CALCULATOR:"rspLoanPaymentCalculator",CREATE_RSP_LOAN_APPLICATION:"createRspLoanApplication",UPDATE_RSP_LOAN_APPLICATION:"updateRspLoanApplication",GET_RSP_LOAN_APPLICATION:"getRspLoanApplication",GET_RSP_LOAN_AVAILABLE_PAL:"getAvailableRspLoanPAL",GET_RSP_LOAN_PAYMENT_FROM_ACCOUNTS:"getRspLoanPaymentFromAccounts",GET_INTERNAL_CUSTOMER_ACCOUNTS:"getInternalCustomerAccounts",GET_RSP_LOAN_ALLOWED_ALLOCATION_ACCOUNTS:"getRspLoanAllowedDestAccounts",OPEN_RSP_LOAN_ELIGIBILITY:"openRspLoanEligibility",GET_RSP_PAL_APPLICATION:"getRspPalApplication",SUBMIT_RSP_PAL_APPLICATION:"submitRspPalApplication",GET_FULL_ASSET_LIABILITY_TYPES:"getFullAssetLiabilityTypes",GET_LTS_BUDGET:"getLtsBudget",GET_BUDGET_CAPABILITIES:"getBudgetCapabilities",GET_BUDGET_TRANSACTIONS:"getBudgetTransactions",GET_BUDGET_CATEGORY:"getBudgetCategory",PUT_MEDALLIA_FEEDBACK:"putMedalliaFeedBack",GET_AGENTID:"getAgentId",PUT_MONTHLY_FEES:"putMonthlyFees",KEEP_ALIVE:"keepAlive"};t.default={HTTP_VERBS:a,STATUS_CODES:r,SUCCESS_STATUS_CODES:l,REQUEST_TYPES:o,SERVICE_CONFIG:_,AVAILABLE_SERVICES:f,RESPONSE_ERRORS:d,CACHE_KEY_ACCOUNTS:"accounts",DATA_INVALIDATED:"DATA_INVALIDATED",ROOT_ENDPOINTS:u,RESPONSE_DETAILS_ERROR_CODES:c,CACHE_CLEARING:g,CACHE_GROUPS:S}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={GET:"cmdGetItem",SET:"cmdSetItem",DEL:"cmdDeleteItem",ERRORS:{IN_PROG:"IN_PROGRESS",FAIL:"BAD_RESPONSE",PARAMS:"BAD_PARAMS",NOTLIST:"NOT_LIST"},KEYS:{SESSION:"tangerine.app.SESSION",CHAT_SESSION:"tangerine.app.CHAT_SESSION",ANALYTICS_ID:"tangerine.app.ANALYTICS_ID",USERHASH_UPGRADED:"com.tangerine.USERHASH_UPGRADED",LAST_USER:"com.tangerine.LAST_USER",REMEMBER:"com.tangerine.REMEMBERED_ACCOUNT",REMEMBER_BIZ:"com.tangerine.REMEMBERED_BIZ_ACCOUNT",REMEMBER_AIF:"com.tangerine.REMEMBERED_ACCOUNT_AIF",TOUCHID:"com.tangerine.TOUCH_ID_DISPLAY",TOUCHID_TOKEN:"com.tangerine.TOUCH_ID_TOKEN",DEFER:"com.tangerine.DEFFERED_PIN",OPT_IN:"com.tangerine.OPT_IN",TOS:"com.tangerine.TOS",SHAKE_ENABLED:"com.tangerine.SHAKE_ENABLED",RDC_TOOL_TIP:"com.tangerine.RDC_TOOL_TIP",EYE_VERIFY:"com.tangerine.EYE_VERIFY_DISPLAY",EYE_VERIFY_TOKEN:"com.tangerine.EYE_VERIFY_TOKEN",VOCAL_PWD:"com.tangerine.VOCAL_PWD",VOCAL_PWD_TOKEN:"com.tangerine.VOCAL_PWD_TOKEN",WATCH_ENABLED:"com.tangerine.WATCH_ENABLED",TUTORIAL_SEEN:"com.tangerine.TUTORIAL_VERSION",DEVICE_REGISTER:"com.tangerine.DEVICE_REGISTER",PENDING_DISABLED_LOGIN_OPTION:"com.tangerine.DISABLED_LOGIN_OPTION",CAPABILITIES:{DEPOSIT_TRANSACT:"tangerine.app.cp.m",BILLPAY_TRANSACT:"tangerine.app.cp.b",EMT_TRANSACT:"tangerine.app.cp.e"}}};t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s,a,o,r,l,c,u=n(13),d=i(u),h=n(36),_=i(h),g=n(207),S=i(g),f={RESPONSE_CODES:{SUCCESS:"SUCCESS",INVALID_HTTP_SERVER_CODE:"INVALID_HTTP_SERVER_CODE"}},v={CREDIT_CARD:"CREDIT_CARD",BILL_HISTORY:"BILL_HISTORY",CHEQUING:"CHEQUING",LOAN:"LOAN",ALL:"ALL",RECATEGORIZATION:"RECATEGORIZATION",REWARDS:"REWARDS",UNCATEGORIZED_TRANSACTIONS:"UNCATEGORIZED_TRANSACTIONS",UNCONFIRMED_TRANSACTIONS:"UNCONFIRMED_TRANSACTIONS",SAVINGS:"SAVINGS",GOALS:"GOALS",MUTUAL_FUND:"MUTUAL_FUND"},E={allTransactions:"allTransactions",interest:"interest",cc_interest:"cc_interest",pointOfSale:"pointOfSale",anyPurchase:"anyPurchase",billPayment:"billPayment",CCBillPayment:"CCBillPayment",emailMoneyTransfer:"emailMoneyTransfer",emailMoneyPending:"emailMoneyPending",deposit:"deposit",withdrawal:"withdrawal",reversal:"reversal",fee:"fee",cc_fee:"cc_fee",purchase:"purchase",payment:"payment",depositPayment:"depositPayment",cashAdvance:"cashAdvance",balanceTransfer:"balanceTransfer",rewards:"rewards",other:"other",automaticSavingProgram:"automaticSavingProgram",electronicFundTransfer:"electronicFundTransfer",loanPayment:"loanPayment",all_interest:"all_interest",all_purchase:"all_purchase",all_payment:"all_payment",redemption:"redemption",transfer:"transfer"},p=(s={},(0,_.default)(s,v.CREDIT_CARD,[E.allTransactions,E.cc_interest,E.purchase,E.payment,E.cashAdvance,E.balanceTransfer,E.cc_fee,E.rewards]),(0,_.default)(s,v.ALL,[E.allTransactions,E.all_interest,E.all_purchase,E.all_payment,E.emailMoneyTransfer,E.deposit,E.withdrawal,E.cashAdvance,E.balanceTransfer,E.reversal,E.cc_fee,E.rewards]),(0,_.default)(s,v.CHEQUING,[E.allTransactions,E.interest,E.pointOfSale,E.billPayment,E.emailMoneyTransfer,E.deposit,E.withdrawal,E.reversal]),(0,_.default)(s,v.SAVINGS,[E.allTransactions,E.interest,E.deposit,E.withdrawal,E.reversal]),(0,_.default)(s,v.GOALS,[E.allTransactions,E.interest,E.deposit,E.withdrawal,E.reversal]),(0,_.default)(s,v.LOAN,[E.allTransactions,E.interest,E.depositPayment,E.withdrawal,E.reversal,E.fee,E.anyPurchase]),s),T={tangerineInvestment:"TNG_investmentfunds",csafunds:"CSA_Funds"},m=(0,d.default)(T).map(function(e){return T[e]}),C={last30Days:"last30Days",last60Days:"last60Days",last90Days:"last90Days",last12months:"last12months",currentMonth:"currentMonth",allDates:"allDates"},A=(0,d.default)(C).map(function(e){return C[e]}),I={last30Days:"last30Days",last60Days:"last60Days",last90Days:"last90Days",last12months:"last12months"},O=(0,d.default)(I).map(function(e){return I[e]}),N={range30Days:"range30Days",range60Days:"range60Days",range90Days:"range90Days",range12months:"range12months"},y=(0,d.default)(N).map(function(e){return N[e]}),b={DATE:"DATE",REWARDS_DATE:"REWARDS_DATE",TIMELINE_DATE:"TIMELINE_DATE",CARD:"CARD",TEXT:"TEXT",TYPE:"TYPE",ACCOUNT:"ACCOUNT",CATEGORY:"CATEGORY",RANGE:"RANGE",CSA:"CSA"},L=(a={},(0,_.default)(a,E.allTransactions,null),(0,_.default)(a,E.transfer,"TF"),(0,_.default)(a,E.interest,"IN"),(0,_.default)(a,E.pointOfSale,"PS"),(0,_.default)(a,E.billPayment,"BP"),(0,_.default)(a,E.CCBillPayment,"CC_BP"),(0,_.default)(a,E.emailMoneyTransfer,"EM"),(0,_.default)(a,E.deposit,"DP"),(0,_.default)(a,E.withdrawal,"WD"),(0,_.default)(a,E.reversal,"RV"),(0,_.default)(a,E.fee,"FEE"),(0,_.default)(a,E.emailMoneyPending,"EMP"),(0,_.default)(a,E.automaticSavingProgram,"ASP"),(0,_.default)(a,E.electronicFundTransfer,"EFT"),(0,_.default)(a,E.loanPayment,"LP"),a),M=(o={},(0,_.default)(o,E.allTransactions,null),(0,_.default)(o,E.interest,"INTEREST"),(0,_.default)(o,E.pointOfSale,"POINT_OF_SALE"),(0,_.default)(o,E.anyPurchase,"POINT_OF_SALE"),(0,_.default)(o,E.billPayment,"BILL_PAYMENT"),(0,_.default)(o,E.emailMoneyTransfer,"EMAIL_MONEY_TRANSFER"),(0,_.default)(o,E.deposit,"DEPOSIT"),(0,_.default)(o,E.withdrawal,"WITHDRAWAL"),(0,_.default)(o,E.fee,"FEE"),(0,_.default)(o,E.reversal,"REVERSAL"),(0,_.default)(o,E.cc_interest,"CC_IN"),(0,_.default)(o,E.purchase,"CC_PS"),(0,_.default)(o,E.payment,"CC_BP"),(0,_.default)(o,E.depositPayment,"DEPOSIT"),(0,_.default)(o,E.cashAdvance,"CC_CA"),(0,_.default)(o,E.balanceTransfer,"CC_BT"),(0,_.default)(o,E.cc_fee,"CC_FEE"),(0,_.default)(o,E.rewards,"CC_RE"),(0,_.default)(o,E.other,"CC_OTH"),(0,_.default)(o,E.all_interest,"CC_IN,INTEREST"),(0,_.default)(o,E.all_purchase,"CC_PS,POINT_OF_SALE"),(0,_.default)(o,E.all_payment,"CC_BP,BILL_PAYMENT,DEPOSIT"),o),R=["allCardholders"],D={BILL_PAYMENT:"BILL_PAYMENT",ELECTRONIC_FUND_TRANSFER:"ELECTRONIC_FUND_TRANSFER",INTEREST:"INTEREST",DEPOSIT:"DEPOSIT",EMAIL_MONEY_TRANSFER:"EMAIL_MONEY_TRANSFER",WITHDRAWAL:"WITHDRAWAL"},P=(r={},(0,_.default)(r,D.BILL_PAYMENT,"billPayment"),(0,_.default)(r,D.ELECTRONIC_FUND_TRANSFER,"electronicFundTransfer"),(0,_.default)(r,D.INTEREST,"interest"),(0,_.default)(r,D.DEPOSIT,"deposit"),(0,_.default)(r,D.EMAIL_MONEY_TRANSFER,"emailMoneyTransfer"),r),$=["SUCCESS","CREATED","DUPLICATE_TRANSACTION"],U=(l={},(0,_.default)(l,v.ALL,{pendingTransactionsHeader:{date:"scheduledTransactionDate",transaction:"destination",account:"account",amount:"amount"},postedTransactionsHeader:{date:"date",transactionCC:"transaction",account:"account",amount:"amount"}}),(0,_.default)(l,v.CHEQUING,{pendingTransactionsHeader:{date:"scheduledTransactionDate",transaction:"destination",amount:"amount"},postedTransactionsHeader:{date:"date",transaction:"transaction",amount:"amount",balance:"balance"}}),(0,_.default)(l,v.LOAN,{pendingTransactionsHeader:{date:"date",transaction:"transaction",amount:"amount"},postedTransactionsHeader:{date:"date",transaction:"transaction",amount:"amount",balance:"balance"}}),(0,_.default)(l,v.SAVINGS,{pendingTransactionsHeader:{date:"scheduledTransactionDate",transaction:"destination",amount:"amount"},postedTransactionsHeader:{date:"date",transaction:"transaction",amount:"amount",balance:"balance"}}),(0,_.default)(l,v.GOALS,{pendingTransactionsHeader:{date:"scheduledTransactionDate",transaction:"destination",amount:"amount"},postedTransactionsHeader:{date:"date",transaction:"transaction",amount:"amount",balance:"balance"}}),(0,_.default)(l,v.CREDIT_CARD,{pendingTransactionsHeader:{date:"date",transactionCC:"transaction",card:"cardNumber",amount:"pendingAmount"},postedTransactionsHeader:{date:"date",transactionCC:"transaction",card:"cardNumber",amount:"amount"}}),(0,_.default)(l,v.RECATEGORIZATION,{header:{date:"date",transaction:"transaction",account:"account",amount:"amount"}}),(0,_.default)(l,v.REWARDS,{postedTransactionsHeader:{date:"date",transaction:"transaction",account:"cardNumber",amount:"rewardAmount"}}),(0,_.default)(l,v.BILL_HISTORY,{pendingTransactionsHeader:{date:"scheduledNextPayment",transaction:"transaction",amount:"amount"},postedTransactionsHeader:{date:"date",transaction:"transaction",amount:"amount"}}),(0,_.default)(l,v.UNCATEGORIZED_TRANSACTIONS,{postedTransactionsHeader:{date:"date",transaction:"transaction",account:"account",amount:"amount"}}),(0,_.default)(l,v.UNCONFIRMED_TRANSACTIONS,{postedTransactionsHeader:{date:"date",transaction:"transaction",account:"account",amount:"amount"}}),(0,_.default)(l,v.MUTUAL_FUND,{pendingTransactionsHeader:{date:"tradeDate",transaction:"transactionType",amount:"amount"},postedTransactionsHeader:{date:"settlementDate",transactionInvestment:"transactionType",units:"units",unitPrice:"unitPrice",amountSettled:"amount"}}),l),k={MONTH:"Month",NONE:"None"},w={DAILY:"global.datePicker.frequencies.daily",WEEKLY:"global.datePicker.frequencies.weekly",BIWEEKLY:"global.datePicker.frequencies.biWeekly",MONTHLY:"global.datePicker.frequencies.monthly",YEARLY:"global.datePicker.frequencies.yearly"},B={RELAYOUT:"RELAYOUT"},F=(c={},(0,_.default)(c,v.CREDIT_CARD,[b.TEXT,b.DATE,b.CARD,b.TYPE]),(0,_.default)(c,v.CHEQUING,[b.TEXT,b.DATE,b.TYPE]),(0,_.default)(c,v.LOAN,[b.TEXT,b.DATE,b.TYPE]),(0,_.default)(c,v.BILL_HISTORY,[b.TEXT,b.DATE]),(0,_.default)(c,v.ALL,[b.TEXT,b.ACCOUNT,b.DATE,b.TYPE]),(0,_.default)(c,v.REWARDS,[b.REWARDS_DATE,b.RANGE]),(0,_.default)(c,v.SAVINGS,[b.TEXT,b.DATE,b.TYPE]),(0,_.default)(c,v.GOALS,[b.TEXT,b.DATE,b.TYPE]),(0,_.default)(c,v.MUTUAL_FUND,[b.TEXT,b.DATE,b.CSA]),c),G={VIEW:"VIEW",EDIT:"EDIT",STOP_PAD:"STOP_PAD",STOP_PAD_CONFIRM:"STOP_PAD_CONFIRM",RECATEGORIZATION:"RECATEGORIZATION",QUICK_RECATEGORIZATION:"QUICK_RECATEGORIZATION",DELETE_EMT:"DELETE_EMT",SKIP_NEXT_PAYMENT:"SKIP_NEXT_PAYMENT",DELETE_BILL_PAY:"DELETE_BILL_PAY",EDIT_BILL_PAY:"EDIT_BILL_PAY",EDIT_MOVE_MONEY:"EDIT_MOVE_MONEY",DELETE_MOVE_MONEY:"DELETE_MOVE_MONEY",SKIP_MOVE_MONEY:"SKIP_MOVE_MONEY",DELETE_LOAN:"DELETE_LOAN",RESEND_EMT:"RESEND_EMT",EDIT_EMT:"EDIT_EMT",RECLAIM_EMT:"RECLAIM_EMT"},V={TOP_LEVEL:"TOP_LEVEL",LOW_LEVEL:"LOW_LEVEL"},x={MENIGA:"MENIGA",NON_MENIGA:"NON_MENIGA"},H={SINGLE:"SINGLE",AGGREGATED:"AGGREGATED"},Y={PAD_PREFIX_EAF:"EFT TO ",PAD_PREFIX_VEF:"VEF AU ",PAD_PREFIX_EAF_WITHDRAWAL:"EFT WITHDRAWAL TO ",PAD_PREFIX_VEF_RETRAIT:"VEF RETRAIT - ",PAD_ACTIVE_STATUS:"ACTIVE"},q=["Scheduled","Prévu"],W=["Pending","En attente"].concat(q),j={AUTHORIZED:"AUTHORIZED",POSTED:"POSTED",DUPLICATE_TRANSACTION:"DUPLICATE_TRANSACTION"},K={FROM_USER:"Tangerine Email Money Transfer From: ",FROM_SPLIT:"From: ",FR_FROM_SPLIT:/de ?: /i,TANGERINE:"Tangerine",TANGERINE_EMT:"TANGERINE_EMT",INTERAC_EMT:"INTERAC_EMT"};t.default={TRANSACTION_STOP_PADS:Y,TRANSACTION_TYPE_FILTERS:p,TRANSACTION_TYPE_FILTER_MAP:E,TRANSACTION_CSA_TYPE_FILTER:m,TRANSACTION_CSA_TYPE_FILTER_MAP:T,TRANSACTION_DATE_FILTER:A,TRANSACTION_DATE_FILTER_MAP:C,TRANSACTION_RANGE_DATE_FILTER:O,TRANSACTION_RANGE_DATE_FILTER_MAP:I,REWARDS_RANGE_DATE_FILTER:y,REWARDS_RANGE_DATE_FILTER_MAP:N,TRANSACTION_TYPE_CODE_MAP:P,TRANSACTION_TABLE_HEADER:U,TRANSACTION_CARD_FILTER:R,TRANSACTION_STATUS_CODES:$,TRANSACTION_TYPE_TO_CODE:L,TRANSACTION_FREQUENCY:w,TRANSACTION_TIME_RESOLUTION:k,TRANSACTION_FILTER_TYPES:b,TRANSACTION_FILTERS:F,TRANSACTION_VIEWS:v,TRANSACTION_POPUP_STATES:G,TRANSACTION_TYPES:D,TRANSACTION_CHART_REQUEST_TYPE:V,SOURCE_OF_TRANSACTIONS:x,TRANSACTION_TYPE_TO_MENIGA_ENDPOINT_TYPE:M,TYPE_OF_CATEGORY_TIMELINE_REQUEST:H,TRANSACTION_LIST_EVENTS:B,CURRENCY_TYPES:S.default.CURRENCY_TYPES,ACCOUNT_TYPES:S.default.ACCOUNT_TYPES,EMT_PENDING_STATUSES:W,EMT_SCHEDULED_STATUSES:q,TRANSACTION_STATUSES:j,DESCRIPTION_STRINGS:K,API:f},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(13),s=function(e){return e&&e.__esModule?e:{default:e}}(i),a={1:{id:1,icon:"icon-income",key:"income",parentCategoryId:null,color:"#b8dc19"},2:{id:2,icon:"icon-cheque",key:"payrollorEmploymentIncome",parentCategoryId:1},4:{id:4,icon:"icon-interest",key:"interestCapitalIncome",parentCategoryId:1},5:{id:5,icon:"icon-income-tax-94",key:"taxRefund",parentCategoryId:1},13:{id:13,icon:"icon-home",key:"home",parentCategoryId:null,color:"#26cd8b"},14:{id:14,icon:"icon-shopping-cart",key:"groceries",parentCategoryId:116},16:{id:16,icon:"icon-lightbulb",key:"electricityHeatingUtilities",parentCategoryId:13},17:{id:17,icon:"icon-home-insurance",key:"homeInsurancePremiums",parentCategoryId:307},18:{id:18,icon:"icon-tv",key:"tVPhoneInternet",parentCategoryId:13},20:{id:20,icon:"icon-cleaning",key:"homeCleaning",parentCategoryId:13},21:{id:21,icon:"icon-rent-paid",key:"rentPaid",parentCategoryId:13},23:{id:23,icon:"icon-furniture",key:"furnishingsAppliancesDécor",parentCategoryId:13},24:{id:24,icon:"icon-art",key:"flowersCandlesArtSmallItems",parentCategoryId:64},27:{id:27,icon:"icon-mortgage",key:"mortgage",parentCategoryId:13},28:{id:28,icon:"icon-property-taxes",key:"propertyTaxes",parentCategoryId:13},29:{id:29,icon:"icon-hammer",key:"homeImprovementsRepairs",parentCategoryId:13},32:{id:32,icon:"icon-car",key:"carsTransportation",parentCategoryId:null,color:"#5987be"},33:{id:33,icon:"icon-auto-insurance",key:"autoInsurancePremiums",parentCategoryId:307},35:{id:35,icon:"icon-car",key:"parking",parentCategoryId:32},36:{id:36,icon:"icon-gas",key:"gasFuel",parentCategoryId:32},37:{id:37,icon:"icon-wrench",key:"autoMaintenanceExpenses",parentCategoryId:32},38:{id:38,icon:"icon-auto-loan",key:"autoLoanLeasePayment",parentCategoryId:32},39:{id:39,icon:"icon-bus",key:"taxisPublicTransportation",parentCategoryId:32},40:{id:40,icon:"icon-family",key:"family",parentCategoryId:null,color:"#96c818"},41:{id:41,icon:"icon-baby",key:"childcare",parentCategoryId:40},42:{id:42,icon:"icon-childrens-clothes",key:"children'sClothing",parentCategoryId:40},43:{id:43,icon:"icon-childrens-toys",key:"children'sToys",parentCategoryId:40},46:{id:46,icon:"icon-paddleball",key:"children'sRecreationalActivities",parentCategoryId:40},48:{id:48,icon:"icon-health-and-beauty",key:"healthBeauty",parentCategoryId:null,color:"#89d7e0"},49:{id:49,icon:"icon-pharmacy",key:"drugStoresandPharmacies",parentCategoryId:48},50:{id:50,icon:"icon-health-insurance",key:"lifeHealthInsurancePremiums",parentCategoryId:307},51:{id:51,icon:"icon-bandaid",key:"doctorsHealthcare",parentCategoryId:48},52:{id:52,icon:"icon-sports",key:"sports",parentCategoryId:70},54:{id:54,icon:"icon-loans-taxes-fines",key:"loansTaxesandFines",parentCategoryId:null,color:"#89b0e0"},55:{id:55,icon:"icon-fines",key:"fines",parentCategoryId:54},59:{id:59,icon:"icon-bank-fees",key:"bankFeesServiceFees",parentCategoryId:54},61:{id:61,icon:"icon-media",key:"subscriptionsMedia",parentCategoryId:64},64:{id:64,icon:"icon-shopping",key:"shoppingServices",parentCategoryId:null,color:"#1eabef"},65:{id:65,icon:"icon-clothing",key:"clothingShoes",parentCategoryId:64},66:{id:66,icon:"icon-heart",key:"beautyProducts",parentCategoryId:48},67:{id:67,icon:"icon-scissors",key:"barberHairdressingSalon",parentCategoryId:48},69:{id:69,icon:"icon-iron",key:"dryCleaningClothingRepairs",parentCategoryId:64},70:{id:70,icon:"icon-leisure",key:"leisure",parentCategoryId:null,color:"#ea40b7"},71:{id:71,icon:"icon-fast-food",key:"fastFoodQuickService",parentCategoryId:116},72:{id:72,icon:"icon-spa",key:"spaMassagePersonalCare",parentCategoryId:48},76:{id:76,icon:"icon-membership",key:"memberships",parentCategoryId:70},79:{id:79,icon:"icon-beer",key:"barsPubsNightclubs",parentCategoryId:70},81:{id:81,icon:"icon-martini",key:"alcoholBars",parentCategoryId:116},82:{id:82,icon:"icon-champagne",key:"tobaccoAlcohol",parentCategoryId:64},84:{id:84,icon:"icon-restaurant",key:"restaurants",parentCategoryId:116},86:{id:86,icon:"icon-education",key:"education",parentCategoryId:null,color:"#4374d2"},87:{id:87,icon:"icon-student-loans",key:"studentLoanPayment",parentCategoryId:86},88:{id:88,icon:"icon-graduation",key:"tuitionCourses",parentCategoryId:86},89:{id:89,icon:"icon-papers",key:"schoolBooksMaterialsStationery",parentCategoryId:86},91:{id:91,icon:"icon-gift",key:"gifts",parentCategoryId:64},95:{id:95,icon:"icon-party",key:"partiesCelebrations",parentCategoryId:64},96:{id:96,icon:"icon-plane",key:"vacationTravel",parentCategoryId:null,color:"#fda1b4"},97:{id:97,icon:"icon-train",key:"transportationCarRental",parentCategoryId:96},98:{id:98,icon:"icon-hotel",key:"hotelsAccommodation",parentCategoryId:96},99:{id:99,icon:"icon-surfboard",key:"recreationEntertainmentonVacation",parentCategoryId:96},100:{id:100,icon:"icon-alcoholic-drink",key:"foodLivingExpensesonVacation",parentCategoryId:96},101:{id:101,icon:"icon-savings",key:"investmentsSavings",parentCategoryId:null,color:"#6fe1b4"},102:{id:102,icon:"icon-regular-savings",key:"regularSavings",parentCategoryId:101},104:{id:104,icon:"icon-donations-and-charities",key:"charityDonations",parentCategoryId:null,color:"#bc2e8d"},105:{id:105,icon:"icon-pets",key:"pets",parentCategoryId:40},106:{id:106,icon:"icon-trailer",key:"summerHome/Cottage/Trailer",parentCategoryId:13},828:{id:828,icon:"icon-condo-fees",key:"condoFees",parentCategoryId:13},830:{id:830,icon:"icon-tangerine-rewards",key:"tangerineMoneyBackRewards",parentCategoryId:1},831:{id:831,icon:"icon-uncategorized-expenses",key:"uncategorizedExpenses",parentCategoryId:null,color:"#7b7b7b"},113:{id:113,icon:"icon-computer",key:"electronicsComputers",parentCategoryId:64},114:{id:114,icon:"icon-jewelry",key:"jewelleryAccessories",parentCategoryId:64},115:{id:115,icon:"icon-toll",key:"tolls",parentCategoryId:32},116:{id:116,icon:"icon-food-and-dining",key:"foodDining",parentCategoryId:null,color:"#c666e7"},117:{id:117,icon:"icon-carwash",key:"carCleaning",parentCategoryId:32},118:{id:118,icon:"icon-rattle",key:"supportPayment",parentCategoryId:40},121:{id:121,icon:"icon-sin",key:"socialInsurance",parentCategoryId:1},124:{id:124,icon:"icon-loan",key:"loanPayments",parentCategoryId:54},129:{id:129,icon:"icon-pacifier",key:"childcareProducts",parentCategoryId:40},131:{id:131,icon:"icon-emergency-savings",key:"emergencyFund",parentCategoryId:101},143:{id:143,icon:"icon-other-pension",key:"otherPension",parentCategoryId:1},145:{id:145,icon:"icon-rental-income",key:"rentalIncome",parentCategoryId:1},199:{id:199,icon:"icon-compass",key:"outdoorActivities",parentCategoryId:70},202:{id:202,icon:"icon-paintbrush",key:"artsCraftsMusic",parentCategoryId:70},210:{id:210,icon:"icon-exclude-from-budget",key:"excludefromBudget",parentCategoryId:null,color:"#9b53cb"},211:{id:211,icon:"icon-credit-card-payment",key:"creditCardPayments",parentCategoryId:210},212:{id:212,icon:"icon-transfers",key:"transfersBetweenownAccounts",parentCategoryId:210},216:{id:216,icon:"icon-cash-withdrawal",key:"aBMOtherCashWithdrawals",parentCategoryId:831},258:{id:258,icon:"icon-dice",key:"lotteriesGambling",parentCategoryId:70},259:{id:259,icon:"icon-glasses",key:"eyeCare",parentCategoryId:48},268:{id:268,icon:"icon-uncategorized-income",key:"uncategorizedIncome",parentCategoryId:1},283:{id:283,icon:"icon-income-tax-89",key:"incomeTaxPaid",parentCategoryId:54},289:{id:289,icon:"icon-headphones",key:"musicandApps",parentCategoryId:64},292:{id:292,icon:"icon-savings-transfers",key:"savingsAccountTransactions",parentCategoryId:210},298:{id:298,icon:"icon-pocket-money",key:"allowancePocketMoneyEtc",parentCategoryId:40},307:{id:307,icon:"icon-insurance",key:"insurance",parentCategoryId:null,color:"#f9a1fd"},315:{id:315,icon:"icon-retirement-savings",key:"retirementSavings",parentCategoryId:101},801:{id:801,icon:"icon-support-income",key:"supportIncome",parentCategoryId:1},802:{id:802,icon:"icon-coffee",key:"coffeeShops",parentCategoryId:116},803:{id:803,icon:"icon-desk-1",key:"homeOffice",parentCategoryId:13},804:{id:804,icon:"icon-dependants",key:"dependants",parentCategoryId:40},805:{id:805,icon:"icon-tooth",key:"dental",parentCategoryId:48},806:{id:806,icon:"icon-bottle",key:"nursingCareFacilities",parentCategoryId:48},807:{id:807,icon:"icon-sports-apparel",key:"sportsApparel",parentCategoryId:64},808:{id:808,icon:"icon-pens",key:"schoolSupplies",parentCategoryId:64},809:{id:809,icon:"icon-entertainment",key:"entertainment",parentCategoryId:70},810:{id:810,icon:"icon-school-bus",key:"fieldtripsMiscellaneousExpenses",parentCategoryId:86},811:{id:811,icon:"icon-alcoholic-drink",key:"travelAgenciesTourOperators",parentCategoryId:96},812:{id:812,icon:"icon-signpost",key:"souvenirsGifts",parentCategoryId:96},813:{id:813,icon:"icon-securities",key:"securities",parentCategoryId:101},814:{id:814,icon:"icon-retirement-savings",key:"rRSPs/RSPs",parentCategoryId:101},815:{id:815,icon:"icon-savings",key:"tFSAs",parentCategoryId:101},816:{id:816,icon:"icon-trust-fund",key:"trustFund",parentCategoryId:101},817:{id:817,icon:"icon-education",key:"rESPs",parentCategoryId:101},818:{id:818,icon:"icon-travel-insurance",key:"travelInsurancePremiums",parentCategoryId:307},819:{id:819,icon:"icon-marine-insurance",key:"marineInsurancePremiums",parentCategoryId:307},820:{id:820,icon:"icon-pet-insurance",key:"petInsurancePremiums",parentCategoryId:307},821:{id:821,icon:"icon-charities",key:"charities",parentCategoryId:104},822:{id:822,icon:"icon-donations",key:"donations",parentCategoryId:104},823:{id:823,icon:"icon-credit-card-other",key:"nonTangerineCreditCardPayments",parentCategoryId:831},824:{id:824,icon:"icon-weights",key:"gymSports",parentCategoryId:48},826:{id:826,icon:"icon-tangerine-loan-payment",key:"tangerineLoanPayments",parentCategoryId:210},827:{id:827,icon:"icon-tangerine-mortgage-payment",key:"tangerineMortgagePayments",parentCategoryId:210},829:{id:829,icon:"icon-interest-charge",key:"interestCharge",parentCategoryId:54},112:{id:112,icon:"icon-question2",key:"uncategorized",parentCategoryId:null,color:"#7b7b7b"}},o={G:{vendor_code:"G",name:"Gas",code:"GAS",icon:"icon-gas",id:36,color:"#5987be"},O:{vendor_code:"O",name:"Groceries",code:"GROC",icon:"icon-shopping-cart",id:14,color:"#c666e7"},H:{vendor_code:"H",name:"Hotel",code:"HO",icon:"icon-hotel",id:98,color:"#fda1b4"},I:{vendor_code:"I",name:"Home Improvement",code:"HOIMP",icon:"icon-hammer",id:29,color:"#26cd8b"},R:{vendor_code:"R",name:"Restaurants",code:"RSTRNT",icon:"icon-food-and-dining",id:84,color:"#c666e7"},F:{vendor_code:"F",name:"Furniture",code:"FURN",icon:"icon-furniture",id:23,color:"#26cd8b"},D:{vendor_code:"D",name:"Drug Store",code:"DRUG",icon:"icon-pharmacy",id:49,color:"#89d7e0"},P:{vendor_code:"P",name:"Parking",code:"PARK",icon:"icon-parking",id:35,color:"#5987be"},E:{vendor_code:"E",name:"Entertainment",code:"ENTR",icon:"icon-entertainment",id:99,color:"#ea40b7"},B:{vendor_code:"B",name:"Bill Payment",code:"BILLP",icon:"icon-recurring-bills",id:118,color:"#89b0e0"},Z:{vendor_code:"Z",name:"Other",code:"OTHER",icon:"icon-other-pension",id:143,color:"#38629c"}},r={O:{vendor_code:"O",name:"Groceries",code:"GROC",icon:"icon-shopping-cart"},F:{vendor_code:"F",name:"Furniture",code:"FURN",icon:"icon-furniture"},R:{vendor_code:"R",name:"Restaurants",code:"RSTRNT",icon:"icon-food-and-dining"},H:{vendor_code:"H",name:"Hotel",code:"HO",icon:"icon-hotel"},G:{vendor_code:"G",name:"Gas",code:"GAS",icon:"icon-gas"},B:{vendor_code:"B",name:"Bill Payment",code:"BILLP",icon:"icon-recurring-bills"},D:{vendor_code:"D",name:"Drug Store",code:"DRUG",icon:"icon-pharmacy"},I:{vendor_code:"I",name:"Home Improvement",code:"HOIMP",icon:"icon-hammer"},E:{vendor_code:"E",name:"Entertainment",code:"ENTR",icon:"icon-entertainment"},P:{vendor_code:"P",name:"Parking",code:"PARK",icon:"icon-parking"},Z:{vendor_code:"z",name:"Other",code:"OTHER",icon:"icon-other"}},l={DEFAULT:"DEFAULT",LARGE:"LARGE"},c={36:r.G.code,14:r.O.code,35:r.P.code,99:r.E.code,23:r.F.code,29:r.I.code,49:r.D.code,28:r.B.code,118:r.B.code,98:r.H.code,84:r.R.code,143:r.Z.code},u={NOT_USEFUL:"NotUseful",PRETTY_USEFUL:"PrettyUseful",VERY_USEFUL:"VeryUseful"},d={},h={};(0,s.default)(a).filter(function(e){return!a[e].parentCategoryId}).forEach(function(e){d[e]=a[e]}),(0,s.default)(a).filter(function(e){return!!a[e].parentCategoryId}).forEach(function(e){h[e]=a[e]}),t.default={ID_TO_CATEGORY:a,REWARDS_CATEGORY:o,REWARDS_SELECT_CATEGORIES:r,TOP_LEVEL_ID_TO_CATEGORY:d,LOW_LEVEL_ID_TO_CATEGORY:h,UNCATEGORIZED_CATEGORY_ID:112,UNCATEGORIZED_TRANSACTION_COLOR:"#7b7b7b",FOLDABLE_CATEGORY_LIST_STYLES:l,CATEGORY_RANK:u,MENIGA_TO_TSYS_CATEGORIES_MAP:c},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(101),s=function(e){return e&&e.__esModule?e:{default:e}}(i),a={PRIMARY:"primary",PRIMARY_FOOTER:"primary_footer",SECONDARY:"secondary",SECONDARY_ACTIONS:"secondary_action",TERTIARY:"tertiary",FOOTER_ACTIONS:"footer_actions",UTILITY:"utility",LOGIN:"login",DOCUMENTS:"documents",MOBILE_NAVIGATION:"mobile_navigation",MOBILE_NAVIGATION_CHILD:"mobile_navigation_child",MOBILE_NAVIGATION_DOCUMENTS:"mobile_navigation_documents"},o={DEPOSIT_VIEW:"DEPOSIT_VIEW",DEPOSIT_TRANSACT:"DEPOSIT_TRANSACT",DEPOSIT_CATEGORIZE:"DEPOSIT_CATEGORIZE",DEPOSIT_ENROLL:"DEPOSIT_ENROLL",BUSINESS_ENROLL:"BUSINESS_ENROLL",PRE_TFSA_ENROLL:"PRE_TFSA_ENROLL",MUTUALFUND_VIEW:"MUTUALFUND_VIEW",MUTUALFUND_ENROLL:"MUTUALFUND_ENROLL",MUTUALFUND_TRANSACT_BUY:"MUTUALFUND_TRANSACT_BUY",MUTUALFUND_TRANSACT_SELL:"MUTUALFUND_TRANSACT_SELL",LENDING_VIEW:"LENDING_VIEW",LENDING_TRANSACT:"LENDING_TRANSACT",LENDING_ENROLL:"LENDING_ENROLL",CC_VIEW:"CC_VIEW",CC_TRANSACT:"CC_TRANSACT",CC_ENROLL:"CC_ENROLL",BUSINESS_UPDATE_FULL:"BUSINESS_UPDATE_FULL",PERSON_UPDATE_BASIC:"PERSON_UPDATE_BASIC",PERSON_UPDATE_MINIMUM:"PERSON_UPDATE_MINIMUM",PERSON_UPDATE_FULL:"PERSON_UPDATE_FULL",PERSON_UPDATE_PARTIAL:"PERSON_UPDATE_PARTIAL",PERSON_UPDATE_LIMITED:"PERSON_UPDATE_LIMITED",EMT_TRANSACT:"EMT_TRANSACT",BILLPAY_TRANSACT:"BILLPAY_TRANSACT",EDOCS_PREFERENCE_UPDATE:"EDOCS_PREFERENCE_UPDATE",EDOCS_PREFERENCE_DISPLAY:"EDOCS_PREFERENCE_DISPLAY",KYC_ENROLL:"KYC_ENROLL",KYC_PENDING:"KYC_PENDING"},r={DISPLAY_CONTACT_US_MENU:"displayContactUsMenu",OPEN_MOVE_MONEY:"openMoveMoney",OPEN_BILL_PAY:"openBillPay",OPEN_ASP:"openAsp",OPEN_RDC:"openRdc",OPEN_EMT:"openEmt",OPEN_DDF:"openDirectDepositForm",CREATE_GOAL:"createGoal",LOGOUT:"logout",GO_TO_BLOG:"goToBlog",OPEN_FEEDBACK:"openFeedback",EXIT_NAVIGATION_MENU:"exitNavigationMenu",GO_BACK:"goBack"},l={INTERNAL_LINK:"internalLink",EXTERNAL_LINK:"externalLink",ROUTE:"route",METHOD:"method"},c={SETUP:"setup",RESET_LOGIN:"resetLogin",REDIRECT_AFTER_RESET_PIN:"redirectAfterResetPINSuccess"},u={ACCOUNTS:"accountSummary",BUDGET_LTS_OVERVIEW:"budgetLtsPage",BILLS:"billPay",INSIGHTS:"insights",TRANSACTIONS:"transactionsPage"},d={FEES:"feesSaved"},h={primary:{default:{items:[{displayName:"global.menu.header.home",type:l.INTERNAL_LINK,action:"/{{locale}}/index.html",authRequired:!1,onlyNative:!1,onlyWeb:!1,capabilities:[],activeOn:[],id:"home"},{displayName:"global.menu.header.myTangerine",type:l.ROUTE,action:s.default.ACCOUNT_SUMMARY,authRequired:!0,onlyNative:!1,onlyWeb:!1,capabilities:[],activeOn:[u.ACCOUNTS,u.BUDGET_LTS_OVERVIEW,u.INSIGHTS,u.TRANSACTIONS,u.BILLS],id:"myTangerine"},{displayName:"global.menu.header.products",type:l.INTERNAL_LINK,action:"/{{locale}}/products",authRequired:!1,onlyNative:!1,onlyWeb:!1,capabilities:[],activeOn:[],id:"products"},{displayName:"global.menu.header.waysToBank",type:l.INTERNAL_LINK,action:"/{{locale}}/ways-to-bank/",authRequired:!1,onlyNative:!1,onlyWeb:!1,capabilities:[],activeOn:[],id:"waysToBank"},{displayName:"global.menu.header.ourBlog",type:l.METHOD,action:r.GO_TO_BLOG,authRequired:!1,onlyNative:!1,onlyWeb:!1,capabilities:[],activeOn:[],id:"ourBlog"}]}},secondary:{accountSummaryMenu:{availableOn:[s.default.ACCOUNT_SUMMARY,s.default.BUDGET_LTS_OVERVIEW,s.default.ACCOUNT_DETAILS_CHEQUING,s.default.ACCOUNT_DETAILS_CREDIT_CARD,s.default.ACCOUNT_DETAILS_SAVINGS,s.default.ACCOUNT_DETAILS_INVESTMENT,s.default.INSIGHTS,s.default.TRANSACTIONS,s.default.BILL_PAY,s.default.BILL_PAY_HISTORY,s.default.ACCOUNT_DETAILS_MORTGAGE,s.default.ACCOUNT_DETAILS_LOAN,s.default.EXISTING_CLIENT_ONBOARDING,s.default.MOVE_MONEY_MODAL,s.default.EMT_MODAL,s.default.PAY_BILLS_MODAL],items:[{displayName:"global.menu.header.overview",type:l.ROUTE,action:s.default.ACCOUNT_SUMMARY,authRequired:!0,onlyNative:!1,onlyWeb:!1,capabilities:[]},{displayName:"global.menu.header.insights",type:l.ROUTE,action:s.default.INSIGHTS,authRequired:!0,onlyNative:!1,onlyWeb:!1,capabilities:[]},{displayName:"global.menu.header.transactions",type:l.ROUTE,action:s.default.TRANSACTIONS,authRequired:!0,onlyNative:!1,onlyWeb:!1,capabilities:[]},{displayName:"global.menu.header.bills",type:l.ROUTE,action:s.default.BILL_PAY,authRequired:!0,onlyNative:!1,onlyWeb:!1,capabilities:[]}]},productMenu:{availableOn:["foo","products"],items:[{displayName:"Link 1",type:l.ROUTE,action:"foo",authRequired:!1,onlyNative:!1,onlyWeb:!1,capabilities:[]},{displayName:"Link 2",type:l.ROUTE,action:"bar",authRequired:!1,onlyNative:!1,onlyWeb:!1,capabilities:[]}]},waysToBankMenu:{availableOn:["moo","cow"],items:[{displayName:"Other Link 1",type:l.ROUTE,action:"moo",authRequired:!1,onlyNative:!1,onlyWeb:!1,capabilities:[]},{displayName:"Other Link 2",type:l.ROUTE,action:"cow",authRequired:!1,onlyNative:!1,onlyWeb:!1,capabilities:[]}]},loginMenu:{availableOn:[s.default.USER_SETTINGS_GENERAL,s.default.ACCOUNT_DOCUMENTS,s.default.ACCOUNT_DOCUMENTS_INVESTMENTS,s.default.ACCOUNT_DOCUMENTS_OTHER,s.default.ACCOUNT_DOCUMENTS_STATEMENTS,s.default.ACCOUNT_DOCUMENTS_TAX_RECEIPTS,s.default.DEVICES,s.default.DEVICES_SECURITY,s.default.DEVICES_ORANGE_SNAPSHOTS,s.default.FORMS,s.default.FORMS_BANKING,s.default.FORMS_INVESTMENT,s.default.INBOX,s.default.USER_SETTINGS,s.default.USER_SETTINGS_ASP,s.default.USER_SETTINGS_CONTEST_BONUSES,s.default.USER_SETTINGS_EXTERNAL_ACCOUNTS,s.default.USER_SETTINGS_GENERAL,s.default.USER_SETTINGS_ORANGE_ALERTS,s.default.USER_SETTINGS_TRANSFER_CONTACTS],items:[{displayName:"global.menu.login.profile",type:l.ROUTE,action:s.default.USER_SETTINGS,notifications:!1,authRequired:!0,onlyNative:!1,onlyWeb:!1,capabilities:[]},{displayName:"global.menu.login.devices",type:l.ROUTE,action:s.default.DEVICES,notifications:!1,authRequired:!0,onlyNative:!1,onlyWeb:!1,capabilities:[]},{displayName:"global.menu.login.documents",type:l.ROUTE,action:s.default.ACCOUNT_DOCUMENTS,notifications:!1,authRequired:!0,onlyNative:!1,onlyWeb:!1,capabilities:[]},{displayName:"global.menu.login.inbox",type:l.ROUTE,action:s.default.INBOX,notifications:!0,authRequired:!0,onlyNative:!1,onlyWeb:!1,capabilities:[]},{displayName:"global.menu.login.forms",type:l.ROUTE,action:s.default.FORMS,notifications:!1,authRequired:!0,capabilities:[]},{displayName:"global.menu.login.logOut",type:l.METHOD,action:r.LOGOUT,notifications:!1,authRequired:!0,onlyNative:!1,onlyWeb:!1,capabilities:[]}]},abmMenu:{availableOn:[s.default.ABM_LOCATIONS,s.default.ABM_ACCESS],items:[{displayName:"global.menu.header.abmLocations",type:l.ROUTE,action:s.default.ABM_LOCATIONS,authRequired:!1,onlyNative:!1,onlyWeb:!1,capabilities:[]},{displayName:"global.menu.header.abmAccess",type:l.ROUTE,action:s.default.ABM_ACCESS,authRequired:!1,onlyNative:!1,onlyWeb:!1,capabilities:[]}]}},secondary_action:{default:{items:[{displayName:"global.menu.header.moveMoney",type:l.METHOD,action:r.OPEN_MOVE_MONEY,icon:"icon-dollar",authRequired:!0,onlyNative:!1,onlyWeb:!1,capabilities:[o.DEPOSIT_TRANSACT]},{displayName:"global.menu.header.payBill",type:l.METHOD,action:r.OPEN_BILL_PAY,icon:"icon-check2",authRequired:!0,onlyNative:!1,onlyWeb:!1,capabilities:[o.BILLPAY_TRANSACT]},{displayName:"global.menu.header.deposit",type:l.METHOD,action:r.OPEN_RDC,icon:"icon-camera",authRequired:!0,onlyNative:!0,onlyWeb:!1,capabilities:[o.DEPOSIT_TRANSACT]},{displayName:"global.menu.header.emailMoney",type:l.METHOD,action:r.OPEN_EMT,icon:"icon-paperplane",authRequired:!0,onlyNative:!1,onlyWeb:!1,capabilities:[o.EMT_TRANSACT]}]}},utility:{default:{items:[{displayName:"global.menu.header.products",type:l.INTERNAL_LINK,action:"/{{locale}}/products",icon:"icon-download",authRequired:!1,visitorOnly:!0,onlyNative:!0,onlyWeb:!1,onlyKycComplete:!1,capabilities:[]},{displayName:"global.menu.utility.abmLocator",type:l.ROUTE,action:s.default.ABM_LOCATIONS,icon:"icon-gallery",authRequired:!1,onlyNative:!1,onlyWeb:!1,capabilities:[]},{displayName:"global.menu.utility.contactUs",type:l.METHOD,action:r.DISPLAY_CONTACT_US_MENU,icon:"icon-chat",authRequired:!1,onlyNative:!1,onlyWeb:!1,capabilities:[]},{displayName:"global.menu.utility.rates",type:l.INTERNAL_LINK,action:"/{{locale}}/rates",icon:"icon-star",authRequired:!1,capabilities:[]},{displayName:"global.menu.utility.tools",type:l.INTERNAL_LINK,action:"/{{locale}}/tools",icon:"icon-tools",authRequired:!1,onlyNative:!1,onlyWeb:!1,capabilities:[]},{displayName:"global.menu.utility.appFeedback",type:l.METHOD,action:r.OPEN_FEEDBACK,icon:"icon-loading",authRequired:!1,onlyNative:!1,onlyWeb:!1,capabilities:[]},{displayName:"global.menu.utility.help",type:l.INTERNAL_LINK,action:"/{{locale}}/faq",icon:"icon-question",authRequired:!1,onlyNative:!1,onlyWeb:!0,capabilities:[]}]}},login:{default:{items:[{displayName:"global.menu.login.profile",type:l.ROUTE,action:s.default.USER_SETTINGS,notifications:!1,authRequired:!0,onlyNative:!1,onlyWeb:!1,capabilities:[]},{displayName:"global.menu.login.devices",type:l.ROUTE,action:s.default.DEVICES,notifications:!1,authRequired:!0,onlyNative:!1,onlyWeb:!1,capabilities:[]},{displayName:"global.menu.login.documents",type:l.ROUTE,action:s.default.ACCOUNT_DOCUMENTS,notifications:!1,authRequired:!0,onlyNative:!1,onlyWeb:!1,capabilities:[]},{displayName:"global.menu.login.inbox",type:l.ROUTE,action:s.default.INBOX,notifications:!0,authRequired:!0,onlyNative:!1,onlyWeb:!1,capabilities:[]},{displayName:"global.menu.login.forms",type:l.ROUTE,action:s.default.FORMS,notifications:!1,authRequired:!0,capabilities:[]},{displayName:"global.menu.login.logOut",type:l.METHOD,action:r.LOGOUT,notifications:!1,authRequired:!0,onlyNative:!1,onlyWeb:!1,capabilities:[]}]}},primary_footer:{default:{items:[{displayName:"global.menu.footer.aboutUs",type:l.INTERNAL_LINK,action:"/{{locale}}/about-us",icon:"",showDropDown:!1,authRequired:!1,onlyNative:!1,onlyWeb:!1,capabilities:[]},{displayName:"global.menu.footer.rates",type:l.INTERNAL_LINK,action:"/{{locale}}/rates",icon:"",showDropDown:!1,authRequired:!1,onlyNative:!1,onlyWeb:!1,capabilities:[]},{displayName:"global.menu.footer.tools",type:l.INTERNAL_LINK,action:"/{{locale}}/tools",icon:"",showDropDown:!1,authRequired:!1,onlyNative:!1,onlyWeb:!1,capabilities:[]},{displayName:"global.menu.footer.careers",type:l.INTERNAL_LINK,action:"/{{locale}}/about-us/careers",icon:"",authRequired:!1,showDropDown:!1,onlyNative:!1,onlyWeb:!1,capabilities:[]},{displayName:"global.menu.footer.privacy",type:l.INTERNAL_LINK,action:"/{{locale}}/privacy",icon:"",authRequired:!1,showDropDown:!1,onlyNative:!1,onlyWeb:!1,capabilities:[]},{displayName:"global.menu.footer.legal",type:l.INTERNAL_LINK,action:"/{{locale}}/legal",icon:"",authRequired:!1,showDropDown:!1,onlyNative:!1,onlyWeb:!1,capabilities:[]},{displayName:"global.menu.footer.security",type:l.INTERNAL_LINK,action:"/{{locale}}/security",icon:"",authRequired:!1,showDropDown:!1,onlyNative:!1,onlyWeb:!1,capabilities:[]},{displayName:"global.menu.footer.abmLocator",type:l.ROUTE,action:s.default.ABM_LOCATIONS,icon:"",authRequired:!1,showDropDown:!1,onlyNative:!1,onlyWeb:!1,capabilities:[]},{displayName:"global.menu.footer.contactUs",type:l.METHOD,action:r.DISPLAY_CONTACT_US_MENU,icon:"icon-uparrow",authRequired:!1,showDropDown:!0,onlyNative:!1,onlyWeb:!1,capabilities:[]}]}},footer_actions:{default:{items:[{displayName:"global.menu.header.overview",type:l.ROUTE,action:s.default.ACCOUNT_SUMMARY,icon:"icon-home",authRequired:!0,onlyNative:!1,onlyWeb:!1,capabilities:[]},{displayName:"global.menu.header.moveMoney",type:l.METHOD,action:r.OPEN_MOVE_MONEY,icon:"icon-dollar",authRequired:!0,onlyNative:!1,onlyWeb:!1,capabilities:[o.DEPOSIT_TRANSACT]},{displayName:"global.menu.header.payBill",type:l.METHOD,action:r.OPEN_BILL_PAY,icon:"icon-check2",authRequired:!0,onlyNative:!1,onlyWeb:!1,capabilities:[o.BILLPAY_TRANSACT]},{displayName:"global.menu.header.emailMoney",type:l.METHOD,action:r.OPEN_EMT,icon:"icon-paperplane",authRequired:!0,onlyNative:!1,onlyWeb:!1,capabilities:[o.EMT_TRANSACT]},{displayName:"global.menu.header.deposit",type:l.METHOD,action:r.OPEN_RDC,icon:"icon-camera",authRequired:!0,onlyNative:!0,onlyWeb:!1,capabilities:[o.DEPOSIT_TRANSACT]}]}},tertiary:{forms:{availableOn:[s.default.FORMS],items:[{displayName:"forms.menu.banking",type:l.ROUTE,action:s.default.FORMS_BANKING,authRequired:!0,capabilities:[]},{displayName:"forms.menu.investment",type:l.ROUTE,action:s.default.FORMS_INVESTMENT,authRequired:!0,capabilities:[]}]},documents:{availableOn:[s.default.ACCOUNT_DOCUMENTS],items:[{displayName:"accountDocuments.menu.statements",type:l.ROUTE,action:s.default.ACCOUNT_DOCUMENTS_STATEMENTS,authRequired:!0,capabilities:[]},{displayName:"accountDocuments.menu.taxReceipts",type:l.ROUTE,action:s.default.ACCOUNT_DOCUMENTS_TAX_RECEIPTS,authRequired:!0,capabilities:[]},{displayName:"accountDocuments.menu.investmentReports",type:l.ROUTE,action:s.default.ACCOUNT_DOCUMENTS_INVESTMENTS,authRequired:!0,capabilities:[o.MUTUALFUND_VIEW]},{displayName:"accountDocuments.menu.other",type:l.ROUTE,action:s.default.ACCOUNT_DOCUMENTS_OTHER,authRequired:!0,capabilities:[]}]}},mobile_navigation:{default:{items:[{displayName:"userSettings.nav.general",type:l.ROUTE,action:s.default.USER_SETTINGS_GENERAL,authRequired:!0,capabilities:[]},{displayName:"userSettings.nav.login_options",type:l.ROUTE,action:s.default.USER_SETTINGS_SECURITY_LOGIN_OPTIONS,authRequired:!0,onlyNative:!0,onlyKycComplete:!0,onlyPersonal:!0,capabilities:[]},{displayName:"userSettings.nav.orange_alerts",type:l.ROUTE,action:s.default.USER_SETTINGS_ORANGE_ALERTS,onlyKycComplete:!0,authRequired:!0,capabilities:[]},{displayName:"userSettings.nav.external_accounts",type:l.ROUTE,action:s.default.USER_SETTINGS_EXTERNAL_ACCOUNTS,authRequired:!0,capabilities:[o.PERSON_UPDATE_LIMITED,o.PERSON_UPDATE_FULL,o.BUSINESS_UPDATE_FULL]},{displayName:"userSettings.nav.transfer_contacts",type:l.ROUTE,action:s.default.USER_SETTINGS_TRANSFER_CONTACTS,authRequired:!0,onlyKycComplete:!0,capabilities:[]},{displayName:"userSettings.nav.contest_bonuses",type:l.ROUTE,action:s.default.USER_SETTINGS_CONTEST_BONUSES,authRequired:!0,capabilities:[]},{displayName:"devices.sectionTitle",type:l.ROUTE,action:s.default.DEVICES_SECURITY,authRequired:!0,capabilities:[]},{displayName:"devices.nav.orangeSnapshots",type:l.ROUTE,action:s.default.DEVICES_ORANGE_SNAPSHOTS,authRequired:!0,capabilities:[]},{displayName:"global.menu.login.documents",type:l.ROUTE,action:s.default.ACCOUNT_DOCUMENTS_STATEMENTS,authRequired:!0,capabilities:[]},{displayName:"global.menu.login.inbox",type:l.ROUTE,action:s.default.INBOX,authRequired:!0,capabilities:[]},{displayName:"global.menu.login.forms",type:l.ROUTE,action:s.default.FORMS,authRequired:!0,capabilities:[]},{displayName:{android:"watchSettings.android.menuItem",apple:"watchSettings.apple.menuItem"},type:l.ROUTE,action:s.default.WATCH_SETTINGS,authRequired:!0,onlyNative:!0,onlyKycComplete:!0,capabilities:[]}]}},mobile_navigation_child:{default:{items:[{displayName:"userSettings.nav.general",type:l.ROUTE,action:s.default.USER_SETTINGS_GENERAL,authRequired:!0,capabilities:[]},{displayName:"userSettings.nav.external_accounts",type:l.ROUTE,action:s.default.USER_SETTINGS_EXTERNAL_ACCOUNTS,authRequired:!0,capabilities:[]},{displayName:"userSettings.nav.automatic_savings_program",type:l.ROUTE,action:s.default.USER_SETTINGS_ASP,authRequired:!0,capabilities:[]},{displayName:"global.menu.login.documents",type:l.ROUTE,action:s.default.MOBILE_NAVIGATION_DOCUMENTS,authRequired:!0,capabilities:[]},{displayName:"global.menu.login.inbox",type:l.ROUTE,action:s.default.INBOX,authRequired:!0,capabilities:[]},{displayName:"global.menu.login.forms",type:l.ROUTE,action:s.default.FORMS,authRequired:!0,capabilities:[]},{displayName:"Security",type:l.ROUTE,action:s.default.USER_SETTINGS_SECURITY,authRequired:!0,capabilities:[]},{displayName:{android:"watchSettings.android.menuItem",apple:"watchSettings.apple.menuItem"},type:l.ROUTE,action:s.default.WATCH_SETTINGS,authRequired:!0,onlyNative:!0,capabilities:[]}]}},mobile_navigation_documents:{default:{items:[{displayName:"accountDocuments.menu.statements",type:l.ROUTE,action:s.default.ACCOUNT_DOCUMENTS_STATEMENTS,authRequired:!0,capabilities:[]},{displayName:"accountDocuments.menu.taxReceipts",type:l.ROUTE,action:s.default.ACCOUNT_DOCUMENTS_TAX_RECEIPTS,authRequired:!0,capabilities:[]},{displayName:"accountDocuments.menu.investmentReports",type:l.ROUTE,action:s.default.ACCOUNT_DOCUMENTS_INVESTMENTS,authRequired:!0,capabilities:[o.MUTUALFUND_VIEW]},{displayName:"accountDocuments.menu.other",type:l.ROUTE,action:s.default.ACCOUNT_DOCUMENTS_OTHER,authRequired:!0,capabilities:[]}]}}};t.default={MENU_TYPES:a,CAPABILITIES:o,ACTION_METHODS:r,LINK_TYPES:l,EVENTS:c,ACTIVE_ON_PAGES:u,menuConfig:h,FEES_SAVED:d},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={MISSING_OWNERSHIP:"265"},s={NOW:"NOW",LATER:"LATER",ONGOING:"ONGOING"},a={ONCE:"ONCE",DAILY:"DAILY",WEEKLY:"WEEKLY",BIWEEKLY:"BIWEEKLY",MONTHLY:"MONTHLY",YEARLY:"YEARLY"},o={GROSS:"GROSS",NET:"NET"},r={MINIMUM_PAYMENT:"M",FULL_BALANCE:"F"},l={EMPTY_SCO_TRANS:"4"},c={Once:a.ONCE,Daily:a.DAILY,Weekly:a.WEEKLY,Biweekly:a.BIWEEKLY,Monthly:a.MONTHLY,Yearly:a.YEARLY,Quarterly:a.QUARTERLY,"Une fois":a.ONCE,Quotidienne:a.DAILY,Hebdomadaire:a.WEEKLY,"Aux deux semaines":a.BIWEEKLY,Mensuelle:a.MONTHLY,Annuellement:a.YEARLY,Trimestriel:a.QUARTERLY},u={ONGOING_PURCHASE:"ONGOING_PURCHASE",ONGOING_WITHDRAWAL:"ONGOING_WITHDRAWAL"},d={"Ongoing Purchase":u.ONGOING_PURCHASE,"Achat périodique":u.ONGOING_PURCHASE,"Ongoing Withdrawal":u.ONGOING_WITHDRAWAL,"Retrait périodique":u.ONGOING_WITHDRAWAL},h={EDIT:"EDIT",CANCEL:"CANCEL"},_=["Pending","En cours"],g={WHEN:s,FREQUENCY:a,MF_FREQUENCY:c},S={FULL:{header:"moveMoney.recurringCCButtons.full",subHeader:"moveMoney.recurringCCButtons.fullDescription"},MINIMUM:{header:"moveMoney.recurringCCButtons.minimum",subHeader:"moveMoney.recurringCCButtons.minimumDescription"}},f={DEFAULT:"default",CCFULLPAY:"creditCardPayFull",EDIT:"edit",INVESTMENTS_BUY:"investmentsBuy",INVESTMENTS_SELL:"investmentsSell",INVESTMENTS_WITHDRAWAL:"investmentsWithdrawal",CC_MAKE_PAYMENT:"ccMakePayment",LOAN_MAKE_PAYMENT:"loanMakePayment",RSP_RIF_SAVING_WITHDRAWAL:"rspRifSavingWithdrawal",CC_ONGOING:"creditCardOngoing",CHEQUING_CC:"chequingCreditCard"},v={OVERDRAFT_FULL_PAYMENT:"OVERDRAFT_FULL_PAYMENT",CLOSE_ACCOUNT:"CLOSE_ACCOUNT"},E={RATES:"/{{langCode}}/rates/index.html",FORMS:"#/forms/banking",BASKET:"#/open-account?products=3201"},p={MINAMT:"global.errorCodes.MFVM12",NON_BUSINESS_START_DATE:"global.errorCodes.225",MISSING_OWNERSHIP:"global.errorCodes.265"},T={MOVE_MONEY:"MOVE_MONEY",MOVE_MONEY_TO_ACCOUNTS:"MOVE_MONEY_TO_ACCOUNTS",OPEN_ACCOUNT:"OPEN_ACCOUNT",EMAIL_TRANSFER:"EMAIL_TRANSFER",BILL_PAYMENT:"BILL_PAYMENT",PENDING_ACCOUNTS:"PENDING_ACCOUNTS",MF_FUND_ACCOUNTS:"MF_FUND_ACCOUNTS",MF_FROM_CASH_ACCOUNTS:"MF_FROM_CASH_ACCOUNTS",MF_TO_CASH_ACCOUNTS:"MF_TO_CASH_ACCOUNTS",MF_FROM_ASP_ACCOUNTS:"MF_FROM_ASP_ACCOUNTS",REMOTE_DEPOSIT_CHEQUE:"REMOTE_DEPOSIT_CHEQUE",RSP_WITHDRAW:"RSP_WITHDRAW",OVERDRAFT_PAYMENT:"OVERDRAFT_PAYMENT",CLOSE_ACCOUNT:"CLOSE_ACCOUNT",RIF_PAYMENT_ACCOUNTS:"RIF_PAYMENT_ACCOUNTS",DONATIONS_FROM_ACCOUNTS:"DONATIONS_FROM_ACCOUNTS",DIRECT_DEPOSIT_ACCOUNTS:"DIRECT_DEPOSIT_ACCOUNTS",ASP_ACCOUNTS:"ASP_ACCOUNTS"},m={ACC_TRANSACTION_MINAMT:"ACC_TRANSACTION_MINAMT",DUPTRAN:"DUPTRAN",DUPLICATE_TRANSACTION:"DUPLICATE_TRANSACTION",VALIDATION_ERROR:"VALIDATION_ERROR",AVLBAL:"AVLBAL-PO",NON_BUSINESS_START_DATE:"MF_TRADE_INVALID_START_DATE_NON_BUSINESS"},C={MESSAGE_33944:"MESSAGE_33944",START_DATE_IN_THE_PAST:"START_DATE_IN_THE_PAST",INVALID:"INVALID"},A={FULL:"1",INITIAL:"0"},I={CUSTOM:0,FULL_BALANCE:1},O={CSA:"Tangerine Children's Savings Account"},N={MIN:2},y={LINE_OF_CREDIT_REQUEST:"RPOO",FULL_RSP_LOAN_PAYMENT:"LPO"},b={TECHNICAL_DESCRIPTIONS:i,TIME_STATES:g,RSP_AMOUNT_TYPES:o,PAYMENT_INDICATOR:r,AMOUNT_TYPE:l,RECURRING_CC_BUTTONS:S,MODAL_TYPES:f,TRANSFER_TYPE:v,URLS:E,ERROR_MESSAGES:p,ACTION_CODES:T,TRANSACTION_CODE:y,CREDIT_PAYMENT_OPTION:A,STATUS_CODES:m,DETAIL_CODES:C,MUTUAL_FUND_TRANSACTION_TYPES:u,MUTUAL_FUND_TRANSACTION_LOCALIZED_TYPES:d,AVAILABLE_ACTIONS:h,MF_PENDING_SETTLEMENT_KEYS:_,SELL_FUNDS_OPTION:I,ACCOUNT_DESCRIPTIONS:O,BUY_FUNDS_DATE_RESTRICTIONS:N};t.default=b,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={NORMAL:{KEY:"NORMAL",CAPABILITY:"PERSON_UPDATE_FULL"},CHILD:{KEY:"Child",CAPABILITY:"PERSON_UPDATE_BASIC"},PARENT:{KEY:"PARENT",CAPABILITY:"PERSON_UPDATE_FULL"},MORTGAGE_ONLY:{KEY:"MORTGAGE_ONLY",CAPABILITY:"PERSON_UPDATE_PARTIAL"},CC_AU:{KEY:"CC_AU",CAPABILITY:"PERSON_UPDATE_MINIMUM"},BUSINESS:{KEY:"BUSINESS",CAPABILITY:"BUSINESS_UPDATE_FULL"}},s={RESET_PASSMARK:"RESET_PASSMARK",UPDATE_PIN:"UPDATE_PIN"},a={CURRENT_PIN:"CURRENT_PIN",NEW_PIN:"NEW_PIN",NEW_PIN_CONFIRM:"NEW_PIN_CONFIRM"},o={START_DATE:"start_date",END_DATE:"end_date",DEPOSITE_DATE:"deposit_date",RATE_OFFER_DETAILS:"rate_offer_details",EXPIRY_DATE:"expiry_date"},r={CONTEST:"C",BONUS:"B"},l=["EMPLOYED","SELF_EMPLOYED"],c={GENERAL:{VALUE:"GENERAL",LABEL:"userSettings.nav.general",URL:"/general",SUB_COMPONENTS:{CREDIT_CARD:"creditCards",REFER_A_FRIEND:"referAFriend",FATCA:"fatca",CLIENT_CARD:"clientCard"}},ORANGE_ALERTS:{VALUE:"ORANGE_ALERTS",LABEL:"userSettings.nav.orange_alerts",URL:"/orange-alerts",MAXAMOUNT:"99999.99",MINAMOUNT:"0"},EXTERNAL_ACCOUNTS:{VALUE:"EXTERNAL_ACCOUNTS",LABEL:"userSettings.nav.external_accounts",URL:"/external-accounts"},ASP:{VALUE:"ASP",LABEL:"userSettings.nav.automatic_savings_program",URL:"/automatic-savings-program"},TRANSFER_CONTACTS:{VALUE:"TRANSFER_CONTACTS",LABEL:"userSettings.nav.transfer_contacts",URL:"/transfer-contacts"},CONTEST_BONUSES:{VALUE:"CONTEST_BONUSES",LABEL:"userSettings.nav.contest_bonuses",URL:"/contests-bonuses"}},u={KEYS:{ERROR_MESSAGE:"error_message",DETAILS:"details",STATUS_CODE:"status_code"},STATUS_CODES:{SYSTEM_ERROR:"SYSTEM_ERROR"}},d={CIF_SWITCHER_READY:"CIF_SWITCHER_READY"},h={URL_PATH:"/settings",CIF_TYPES:i,ACTION_CODES:s,COMPONENT:c,PIN_TYPES:a,DATE_DATA_KEYS:o,CONTEST_BONUS_TYPES:r,EMPLOYED_STATUS_CODES:l,RESPONSE_ERROR:u,EVENTS:d};t.default=h,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={IS_CAFE_APP:"IS_CAFE_APP",BLACKBOX:"obtainBlackBox",OPEN_CHEQUE:"openChequePage",OPEN_LICENCE:"openLicencePage",OPEN_CHEQUE_MANUAL_MODE:"1",OPEN_CHEQUE_AUTOMATIC_MODE:"0",OPEN_CHEQUE_PHOTO_TYPE_FRONT:"front",OPEN_CHEQUE_PHOTO_TYPE_BACK:"back",OPEN_VOICE_BANKING:"openVoiceBanking",OPEN_PDF:"cmdOpenPDF",CMD_GET_LOCALE:"cmdGetLocale",CMD_UPDATE_BADGE:"cmdUpdateBadge",CMD_OPEN_URL:"cmdOpenURL",CMD_OPEN_VOICE_BANKING:"cmdOpenVoiceBanking",CMD_OPEN_SECURE_CHAT:"cmdOpenChat",CMD_CLOSE_CHAT:"cmdCloseChat",CHECK_WATCH_STATUS:"cmdWatchStatusCheck",CMD_SET_WATCH_AUTH_CODE:"cmdWatchSetAuthCode",CMD_REMOVE_WATCH_AUTH_CODE:"cmdWatchRemoveAuthCode",CMD_ANDROID_WATCH_NOTIF:"cmdAndroidWatchNotif",CMD_CALL_US:"cmdCallUs",CMD_CALL_BACK:"cmdCallBack",CMD_LOG_ERROR:"cmdLogError",CMD_SECURE_APP:"cmdSecureApp",TOUCH_ID:"touchId",EYE_VERIFY:"eyeVerify",CMD_TURN_ON_LOCATION_SERVICE:"cmdTurnOnLocationService",CMD_AUTHENTICATE_WITH_AUTH_TYPE:"cmdAuthenticateWithAuthType",CMD_GET_PASSES_PENDING:"getPassesPending",CMD_ACTIVATE_CARD:"activatePaymentPass",CMD_WALLET_PASSES:"walletPasses",CMD_ADD_PAYMENT_PASS:"addPaymentPass",CMD_ADD_PAYMENT_PASS_GENERATE_REQUEST:"addPaymentPassGenerateRequest",CMD_ADD_PAYMENT_PASS_REQUEST:"addPaymentPassRequest",CMD_USER_LOGOUT:"userLogOut",CMD_HYBRID_LOADED:"hybridLoaded",DEFAULT_VALUES:"cmdDefaultValues",CMD_CHECK_TRUSTED_CERTIFICATE:"cmdCheckTrustedCertificate",CERT_CHECK_THRESHOLD:20,errors:{IN_PROG:"IN_PROGRESS",NOT_SUPPORTED:"NOT_SUPPORTED"}};t.default=i,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={INTENDED_USE_ACCOUNT:"int_use_acct",TPI_INDIVIDUAL_RELATIONSHIPS:"tpi_ind_rel",TPI_INDIVIDUAL_INDUSTRIES:"tpi_ind_occ",TPI_BUSINESS_RELATIONSHIPS:"tpi_bus_rel",TPI_BUSINESS_TYPES:"tpi_bus_type",TPI_BUSINESS_INDUSTRIES:"bus_ind_occ",TPI_INCORPORATION_PLACES:"tpi_inc_place",PROVINCES:"prov",STATES:"state",COUNTRIES:"co",RELATIONSHIP_STATUS:"rel_status",EMPLOYMENT_STATUSES:"emp",INDUSTRY_OCCUPATIONS:"ind_occ",EMPLOYMENT_OCCUPATION:"occ",BANK_INFO:"bank_info",FINANCIAL_INSTITUTIONS:"financial_institutions",CAFE_LOCATIONS:"cafe_location",CC_REWARD_CATS:"cc_reward_cats",TIN_REASON:"tin_reasons",US_REASONABILITY:"us_person_sev",CRS_PERSON_STATUS:"crs_person_status",US_PERSON_STATUS:"us_person_status",MORTGAGE_PREPAYMENT_MIN:"mortgage_prepayment_minimums",ASSETS:"assets",LIABILITIES:"liabilities",INCOME:"income",INCOME_FREQUENCY:"income_frequency",MARITAL_STATUS:"marital_status",ADDRESS_STATUS:"address_status"};t.default={TYPES:i},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={ALL:"ALL",OVERDRAFT:"OVERDRAFT",CHEQUE_ORDER:"CHEQUE_ORDER",DRAFT:"DRAFT",INTERAC_EMT:"INTERAC_EMT"},s={STANDARD:"Standard"};t.default={TYPES:i,NAMES:s},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={TRANSUNION_DOWN:"TUDWN",WAITING:"WFJNT",DECLINED:"DEC",APPROVED:"APP",REVIEW:"REVW"},s={ACCEPTED:"ACCEPTED",REJECTED:"REJECTED"},a={ACCEPT:"ACCEPT",REJECT:"DECLINE"},o={PREAPPROVED:"PREAP",ACCEPTED:"PRACC",DECLINED:"PRDEC",APPROVED:"APP"};t.default={OUTCOME_STATUSES:i,INVITATION_RESPONSES:s,MIN_PROTECTION_VALUE:250,PREAPPROVED_DECISSION:a,PREAPPROVED_APPLICATION_STATUS:o,MAX_AMOUNT:9999999.99},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={MAIL:"MAIL",EMAIL:"EMAIL",FAX:"FAX"};t.default={CHANNELS:i},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={BUY:"BUY",SELL:"SELL",RSPWITHDRAWAL:"RSPWITHDRAWAL",REDEMPTION:"Redemption",PURCHASE:"Purchase"};t.default={TRANSACTION_TYPE:i},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={ACTIVATE:"ACTIVATE",RESET_PIN:"RESET_PIN",UPDATE_PIN:"UPDATE_PIN",UNBLOCK_PIN:"UNBLOCK_PIN",UPDATE_STATUS:"UPDATE_STATUS",UPDATE_EMPLOYMENT:"UPDATE_EMPLOYMENT"},s={SUSPEND:"SUSPEND",REACTIVATE:"REACTIVATE"},a={CHEQUING:"chequing",SAVINGS:"savings",OTHER:"other"},o={INVALID_ACCOUNT_API_RESPONSE:"INVALID_ACCOUNT_API_RESPONSE",INVALID_SAVE_CALL:"INVALID_SAVE_CALL",INVALID_CARDS_API_RESPONSE:"INVALID_CARDS_API_RESPONSE"};t.default={CARDS_API_ACTIONS:i,UPDATE_CC_STATUS_TYPE:s,ERRORS:o,ASSIGNABLE_ACCOUNT_TYPES:a},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={NOW:"NOW",LATER:"LATER",ONGOING:"ONGOING"},s={ONCE:"ONCE",DAILY:"DAILY",WEEKLY:"WEEKLY",BIWEEKLY:"BIWEEKLY",MONTHLY:"MONTHLY"},a={WHEN:i,FREQUENCY:s};t.default=a,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={SHARED_KEY:"SHARED_KEY",REVIEW:"REVIEW"},s={FACEBOOK:{PICTURE:"https://www.tangerine.ca/images/secure-site-raf-menu-key.png",CAPTION:"https://www.tangerine.ca"}},a={MODAL_TYPES:i,SHARE_KEY:s};t.default=a,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={TYPES:{RAF_BONUS_INFO:"RAF_BONUS_INFO",RAF_EMAIL:"RAF_EMAIL"}};t.default=i,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={COLOR_WARNING:"#fc123e",COLOR_GREY:"#d8d8d8",COLOR_DUSTY_ORANGE:"#f58426",COLOR_WHITE:"#fff",COLOR_WHITE_TWO:"#d8d8d8"},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={DAYS:"days",WEEKS:"weeks",MONTHS:"months",YEARS:"years"},s={DATE_MANIPULATION:i};t.default=s,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={FBE_LOGIN_WEB:"4",FBE_ENROLL_WEB:"5",FBE_LOGIN_MOBILE:"6",FBE_ENROLL_MOBILE:"7"};t.default={CALL_SOURCES:i},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(101),s=function(e){return e&&e.__esModule?e:{default:e}}(i),a={BASKET_PAGE:s.default.EXISTING_CLIENT_ONBOARDING,ACCOUNT_OVERVIEW:s.default.ACCOUNT_SUMMARY,ACCOUNT_OVERVIEW_LOCKED:"accountSummaryLocked",PENDING_APPLICATIONS:"pendingApplicationsModal",EMT_RECLAIM_MONEY:"emtReclaimMoney"};t.default={OUTFLOW_STATES:a},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={EMAIL:"EMAIL",DEVICES:"DEVICES",ALT_EMAIL:"ALT_EMAIL"},s={EMLP:"EMLP",EMLA:"EMLA",FACEBOOK:"FACEBOOK",TWITTER:"TWITTER",BEAM:"BEAM",APPLE:"APPLE",IPAD:"IPAD",ANDROID:"ANDROID",ANDROIDTAB:"ANDROIDTAB",WINDOWS:"WINDOWS",BLACKBERRY:"BLACKBERRY",SMS:"SMS",MSGB:"MSGB",MPTF:"MPTF",FAX:"FAX"},a={CREDITCARD:"CREDITCARD",DEPOSIT:"DEPOSIT"},o={BALANCE_UNDER:"BALANCE_UNDER",BALANCE_OVER:"BALANCE_OVER",DEPOSIT_OVER:"DEPOSIT_OVER",WITHDRAWAL_OVER:"WITHDRAWAL_OVER",FOR_SELECTED_ACCOUNTS:"FOR_SELECTED_ACCOUNTS",FOR_ALL_ACCOUNTS:"FOR_ALL_ACCOUNTS"},r={DEBIT_TRANSACTION_OVER:"DEBIT_TRANSACTION_OVER",DEBIT_PAYMENT_FAILED:"DEBIT_PAYMENT_FAILED",DEBIT_PAYMENT:"DEBIT_PAYMENT",DIRECT_DEPOSIT:"DIRECT_DEPOSIT"},l={DIRECT_DEPOSIT:"DIRECT_DEPOSIT"},c={SNAPSHOT_ENABLED:"snapshot_enabled",ESTMT:"ESTMT"},u={TLOC_WITHDRAWAL_OVER:"TLOC_WITHDRAWAL_OVER",TLOC_PAYMENT_RECEIVED:"TLOC_PAYMENT_RECEIVED",TLOC_PAYMENT_DUE:"TLOC_PAYMENT_DUE"},d={INVALID:"INVALID",SUCCESS:"SUCCESS"},h={DELIVER_ALERT_GROUP:i,DELIVER_ALERT_CHANNEL:s,ALERT_CATEGORY:a,ACCOUNT_AND_CACHE_CATEGORY:o,DEPOSIT_ALERTS:l,GENERAL_ALERTS:c,DEBIT_CARD_ALERTS:r,API_CALL_RESPONSES:d,TLOC_ALERTS:u};t.default=h,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={UPDATE_ACCOUNT_SUMMARY:"UPDATE_ACCOUNT_SUMMARY",CONNECTION_LOST:"CONNECTION_LOST"};t.default=i,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={defaults:{timeout:1e4,mockBaseURL:"/assets/res/mock/documents"},accountStatement:{method:"GET",HTTP:{url:"/web/docs/rest/v1/customers/my/documents/statements/{{id}}?{{queryString}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/documents/statements/id"},MOCK:{url:"/account_statement.json"}},investmentReport:{method:"GET",HTTP:{url:"/web/docs/rest/v1/customers/my/documents/investment-reports/{{id}}?{{queryString}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/documents/investment-reports/id"},MOCK:{url:"/investment_report.json"}},otherDocument:{method:"GET",HTTP:{url:"/web/docs/rest/v1/customers/my/documents/other-documents/{{id}}?{{queryString}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/documents/other-documents/id"},MOCK:{url:"/other_document.json"}},taxReceipt:{method:"GET",HTTP:{url:"/web/docs/rest/v1/customers/my/documents/tax-receipts/{{key}}?{{queryString}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/documents/tax-receipts/key"},MOCK:{url:"/tax_receipt.json"}},beneficiaryForm:{method:"POST",HTTP:{url:"/web/docs/rest/v1/customers/my/beneficiaries"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/beneficiaries"},MOCK:{url:"/beneficiary_form.json"}},viewCheque:{method:"GET",HTTP:{url:"/web/docs/rest/v1/accounts/{{accountHash}}/documents/cheque-images/{{id}}?{{queryString}}"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/documents/cheque-images/id"},MOCK:{url:""}},accountVoidCheque:{method:"GET",HTTP:{url:"/web/docs/rest/v1/accounts/{{accountHash}}/void-cheque?{{queryString}}"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/void-cheque"},MOCK:{url:"/account_void_cheque.json"}},magicSwitchViewForm:{method:"GET",HTTP:{url:"/web/docs/rest/v1/customers/my/applications/magic-switch/{{id}}/documents?{{queryString}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/applications/magic-switch/id/documents"},MOCK:{url:"/magic_switch_view_form.json"}},getSummary:{method:"GET",HTTP:{url:"/web/docs/rest/v1/accounts/{{accountHash}}/summary?{{queryString}}"},WL:{adapter:"AccountsAdapterFBE",path:"v1/accounts/id/summary"},MOCK:{url:"/account_summary.json"}},tradeConfirmation:{method:"GET",HTTP:{url:"/web/docs/rest/v1/customers/my/documents/trade-confirmations/{{id}}?{{queryString}}"},WL:{adapter:"CustomersAdapterFBE",path:"v1/customers/my/documents/trade-confirmations/id"},MOCK:{url:"/account_statements.json"}}},s={ACCOUNT_STATEMENT:"accountStatement",INVESTMENT_REPORT:"investmentReport",OTHER_DOCUMENT:"otherDocument",TAX_RECEIPT:"taxReceipt",VIEW_CHEQUE:"viewCheque",MAGIC_SWITCH_VIEW_FORM:"magicSwitchViewForm",BENEFICIARY_FORM:"beneficiaryForm",TRADE_CONFIRMATION:"tradeConfirmation",ACCOUNT_VOID_CHEQUE:"accountVoidCheque",GET_SUMMARY:"getSummary"};t.default={AVAILABLE_SERVICES:s,SERVICE_CONFIG:i},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,s=n(36),a=function(e){return e&&e.__esModule?e:{default:e}}(s),o=n(277),r=(i={},(0,a.default)(i,o.AVAILABLE_MODALS.PENDING_APPLICATIONS,["onboardingBundle"]),(0,a.default)(i,o.AVAILABLE_MODALS.CSA_CONVERSION,["onboardingBundle"]),(0,a.default)(i,o.AVAILABLE_MODALS.PAY_BILL,["billsBundle"]),(0,a.default)(i,o.AVAILABLE_MODALS.RDC,["rdcBundle"]),i),l={ACCOUNT_DETAILS:"accountDetailsBundle"};t.default={MODAL_BUNDLE_DEPENDENCY:r,AVAILABLE_BUNDLES:l},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={NOW:"NOW",LATER:"LATER",ONGOING:"ONGOING",ONE_TIME:"LATER",REOCCURRING:"ONGOING",WHEN_TILES:[{header:"global.commonWords.now",when:"NOW"},{header:"global.commonWords.later",subHeader:"billPay.singleBP.scheduleDate",when:"LATER"},{header:"global.commonWords.ongoing",subHeader:"billPay.singleBP.autoPay",when:"ONGOING"}],WHEN_A_TILES:[{header:"global.commonWords.now",when:"NOW"},{header:"global.commonWords.later",subHeader:"billPay.singleBP.scheduleDate",when:"LATER"}],SCHEDULE_TILES:[{header:"billPay.scheduleBill.oneTimePayment",subHeader:"billPay.scheduleBill.oneTimeSubTitle",when:"LATER"},{header:"billPay.scheduleBill.recurringPayment",subHeader:"billPay.scheduleBill.recurringSubTitle",when:"ONGOING"}]},s={ONCE:"ONCE",WEEKLY:"WEEKLY",BIWEEKLY:"BIWEEKLY",MONTHLY:"MONTHLY"},a={SCHEDULE:"SCHEDULE",EDIT:"EDIT",PAY:"PAY"},o={MINIMUM_PAYMENT:"M",FULL_BALANCE:"F"},r={MINIMUM:{header:"billPay.singleBPCC.recurringCCButtons.minimum",subHeader:"billPay.singleBPCC.recurringCCButtons.minimumDescription",helpBubble:"billPay.singleBPCC.recurringCCButtons.minTooltipDesc"},FULL:{header:"billPay.singleBPCC.recurringCCButtons.full",subHeader:"billPay.singleBPCC.recurringCCButtons.fullDescription",helpBubble:"billPay.singleBPCC.recurringCCButtons.fullTooltipDesc"}},l={NOW:{header:"billPay.addBill.now"},LATER:{header:"billPay.addBill.later"}},c={MANUAL:{header:"billPay.addBill.manually",subHeader:"billPay.addBill.bestChoice"},AUTO:{header:"billPay.addBill.automatically",subHeader:"billPay.addBill.weCanPay"}},u=[{header:"global.commonWords.now",when:"NOW"},{header:"global.commonWords.later",subHeader:"billPay.singleBP.scheduleDate",when:"LATER"},{header:"global.commonWords.ongoing",subHeader:"billPay.singleBP.autoPay",when:"ONGOING"}],d={CUSTOM:0,LAST_STATEMENT_BALANCE:1,MINUMUM_PAYMENT:2,CURRENT_BALANCE:3},h={MANUAL:"MANUAL",AUTO:"AUTO"},_={NOW:"NOW",LATER:"LATER",ONGOING:"ONGOING"},g={ID:"60557"},S={BP:"BP",CC_BP:"CC_BP"},f={MIN:.01,MAX:25e3},v={BP_LIMIT_VIOLATION_DAILY:"BP_LIMIT_VIOLATION_DAILY",AVLBAL:"AVLBAL",BP_LIMIT_VIOLATION_SINGLE_PAYMENT:"BP_LIMIT_VIOLATION_SINGLE_PAYMENT",BP_SYSTEM_ERROR:"BP_SYSTEM_ERROR",DUPLICATE_TRANSACTION:"DUPLICATE_TRANSACTION",DUPTRAN:"DUPTRAN"},E={WHEN:i,FREQUENCY:s,MOMENT_FORMAT:"YYYY-MM-DD",WHEN_TILES:u,MODAL_TYPE:a,PAYMENT_TYPE:h,SETUP_PAYMENT:_,RECURRING_CC_BUTTONS:r,PAYMENT_INDICATOR:o,CC_VALUE:g,CC_PAYMENT_OPTIONS:d,SETUP_PAYMENT_TYPES:l,PAYMENT_TYPES:c,BILL_HISTORY_FILTER:S,PAYMENT_LIMITS:f,ERROR_CODES:v};t.default=E,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={TLOC:"TLOC"},s={TLOCPREAP:"TLOCPREAP"},a={ACCEPTED:"ACCEPTED",CLOSE:"CLOSE"},o={ACTIVE:"ACTIV",CLOSE:"CLOSE"},r={TLOC:"TLOC"},l={MODAL_TYPES:i,OFFER_TYPES:s,PRODUCT_CODES:r,MIN_CREDIT_LIMIT:1e4,OFFER_RESOLUTION:a,OFFER_STATUS:o};t.default=l,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(994),s=function(e){return e&&e.__esModule?e:{default:e}}(i),a=angular.module("tangerine.login.module",[]).component("loginPage",s.default);t.default=a,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(995),a=i(s),o=n(996),r=i(o);n(997);var l={bindings:{returnTo:"<"},controller:r.default,template:a.default};t.default=l,e.exports=t.default},function(e,t){e.exports='<tng-login return-to="$ctrl.returnTo" locale="$ctrl.LocaleService.locale"></tng-login> '},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(i),a=function e(t){(0,s.default)(this,e),this.LocaleService=t};a.$inject=["LocaleService"],t.default=a,e.exports=t.default},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(999),a=i(s),o=n(1003),r=i(o),l=n(1004),c=i(l),u=n(1005),d=i(u),h=angular.module("forgotLoginModule",[]).component("forgotLogin",a.default).service("ForgotLoginTPWService",r.default).service("ForgotLoginMFPService",c.default).constant("forgotLoginConstants",d.default);t.default=h,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1e3),a=i(s),o=n(1001),r=i(o);n(1002);var l={template:r.default,controller:a.default};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),a=i(s),o=n(0),r=i(o),l=n(1),c=i(l),u=n(34),d=function(){function e(t,n,i,s,a,o,l,c,d,h,_,g,S,f){(0,r.default)(this,e),this.$log=t,this.isNative=n.isNative(),this.ForgotLoginMFPService=s,this.ForgotLoginTPWService=i,this.forgotLoginService=this._getForgotLoginService(),this.LocaleService=a,this.INPUT_LENGTHS=o.INPUT_LENGTHS,this.VALIDATION_ERRORS=o.VALIDATION_ERRORS,this.nameValidation=u.nameValidation,this.emailValidation=u.emailValidation,this.SessionService=l,this.$state=c,this.stateConstants=d,this.namePattern=u.namePattern,this.$scope=h,this.menuConstants=_,this.EventBusService=g,this.$window=S,this.$translate=f,this.emailSent=!1,this.isSubmitEnabled=!1,this.isLoading=!1,this.PARAMS={FirstName:"",LastName:"",EmailAddress:""},this.STATES={FORM:{titleKey:"login.forgotLogin.states.form"},LOADING:{titleKey:"login.forgotLogin.states.loading"},CONFIRMED:{titleKey:"login.forgotLogin.states.confirmed"}},this.currentState=this.STATES.FORM}return(0,c.default)(e,[{key:"$onInit",value:function(){var e=this;this.SessionService.transaction_token||this.isNative||this.$state.go(this.stateConstants.LOGIN),this.forgotLoginService.initCifRetrieval(),this.EventBusService.subscribe(this.$scope,this.menuConstants.EVENTS.RESET_LOGIN,function(){e.$state.go(e.stateConstants.LOGIN)})}},{key:"validateInput",value:function(){this.forgotLoginForm&&this.forgotLoginForm.firstName.$valid&&this.forgotLoginForm.lastName.$valid&&this.forgotLoginForm.email.$valid?this.isSubmitEnabled=!0:this.isSubmitEnabled=!1}},{key:"sendLoginData",value:function(){var e=this;this.PARAMS=(0,a.default)(this.PARAMS,{TRANSACTION_TOKEN:this.SessionService.transaction_token}),this.currentState=this.STATES.LOADING,this.forgotLoginService.retrieveCif(this.PARAMS).then(function(t){e._hasError(t)?e._handleError(t):(e.currentState=e.STATES.CONFIRMED,e.$log.debug("Login Retrieval: ",t))}).catch(function(t){e._handleError(t)})}},{key:"_handleError",value:function(e){return this.$log.error("Login Retrieval Err: ",e),this.currentState=this.STATES.FORM,this.isNative?this._handleMobileError(e):(e.MessageHeader&&e.MessageHeader.ErrorMessages&&e.MessageHeader.ErrorMessages.length>0?this.errorMessage=e.MessageHeader.ErrorMessages[0]:e.errorMsg?this.errorMessage=e.errorMsg:e.response_status&&e.response_status.technical_description?this.errorMessage=e.response_status.technical_description:this.errorMessage=e.errorMessage,angular.noop())}},{key:"_handleMobileError",value:function(e){if(e.response_status&&e.response_status.return_code){var t="global.errorCodes."+e.response_status.return_code;this.errorMessage=this.$translate.instant(t)}else this.errorMessage=e.errorMessage}},{key:"_getForgotLoginService",value:function(){return this.isNative?this.ForgotLoginMFPService:this.ForgotLoginTPWService}},{key:"_hasError",value:function(e){return void 0===e||e.errorMessage||e.errorMsg||e.response_status&&e.response_status.technical_description||e.MessageHeader&&e.MessageHeader.ErrorMessages&&e.MessageHeader.ErrorMessages.length>0}},{key:"goBack",value:function(){this.$window.history.back()}}]),e}();d.$inject=["$log","EnvironmentService","ForgotLoginTPWService","ForgotLoginMFPService","LocaleService","forgotLoginConstants","SessionService","$state","stateConstants","$scope","menuConstants","EventBusService","$window","$translate"],t.default=d,e.exports=t.default},function(e,t){e.exports='<form name="$ctrl.forgotLoginForm"> <div class="forgot-login"> <div class="forgot-login__email" ng-if="$ctrl.currentState === $ctrl.STATES.FORM"> <tng-error-message ng-if="$ctrl.errorMessage"> {{ $ctrl.errorMessage | translate }} </tng-error-message> <h2 class="heading--title2">{{ \'login.forgotLogin.title\' | translate }}</h2> <div class="field"> <label for="firstName">{{ ::\'login.forgotLogin.firstNameInput\' | translate }}</label> <input name="firstName" class="input" ng-class="{warning:\n            $ctrl.forgotLoginForm.firstName.$invalid &&\n            $ctrl.forgotLoginForm.firstName.$touched\n          }" type="text" maxlength="{{ $ctrl.INPUT_LENGTHS.INPUT_MAX_LENGTH }}" ng-change="$ctrl.validateInput()" ng-model="$ctrl.PARAMS.FirstName" placeholder="{{ ::\'login.forgotLogin.firstNamePlaceholder\' | translate }}" ng-required="true" ng-pattern="$ctrl.namePattern"> <div ng-messages="$ctrl.forgotLoginForm.firstName.$error" ng-show="$ctrl.forgotLoginForm.firstName.$touched" class="field__error"> <p ng-message="required"> {{ ::\'login.userID.requiredField\' | translate }} </p> <p ng-message="pattern"> {{ ::\'login.userID.onlyLetters\' | translate }} </p> </div> </div> <div class="field"> <label for="lastName">{{ ::\'login.forgotLogin.lastNameInput\' | translate }}</label> <input name="lastName" class="input" ng-class="{warning:\n            $ctrl.forgotLoginForm.lastName.$invalid &&\n            $ctrl.forgotLoginForm.lastName.$touched\n          }" type="text" maxlength="{{ $ctrl.INPUT_LENGTHS.INPUT_MAX_LENGTH }}" ng-change="$ctrl.validateInput()" ng-model="$ctrl.PARAMS.LastName" placeholder="{{ ::\'login.forgotLogin.lastNamePlaceholder\' | translate }}" ng-required="true" ng-pattern="$ctrl.namePattern"> <div ng-messages="$ctrl.forgotLoginForm.lastName.$error" ng-show="$ctrl.forgotLoginForm.lastName.$touched" class="field__error"> <p ng-message="required"> {{ ::\'login.userID.requiredField\' | translate }} </p> <p ng-message="pattern"> {{ ::\'login.userID.onlyLetters\' | translate }} </p> </div> </div> <div class="field"> <label for="email">{{ ::\'login.forgotLogin.emailAddressInput\' | translate }}</label> <input name="email" class="input" ng-class="{warning:\n            $ctrl.forgotLoginForm.email.$invalid &&\n            $ctrl.forgotLoginForm.email.$touched\n          }" type="email" maxlength="{{ $ctrl.INPUT_LENGTHS.EMAIL_MAX_LENGTH }}" ng-model="$ctrl.PARAMS.EmailAddress" ng-change="$ctrl.validateInput()" placeholder="{{ ::\'login.forgotLogin.emailAddressPlaceholder\' | translate }}" ng-required="true"> <div ng-messages="$ctrl.forgotLoginForm.email.$error" ng-show="$ctrl.forgotLoginForm.email.$touched" class="field__error"> <p ng-message="required"> {{ ::\'login.userID.requiredField\' | translate }} </p> <p ng-message="email"> {{ ::\'login.userID.emailFormat\' | translate }} </p> </div> </div> <button ng-click="$ctrl.goBack()" actionable-id="forgot_backButton" class="btn btn--edit">{{ ::\'login.forgotLogin.back\' | translate }}</button> <button actionable-id="forgot_nextButton" class="btn btn--tangerine" ng-click="$ctrl.sendLoginData()" ng-class="{ \'disabled\': !$ctrl.isSubmitEnabled }" ng-disabled="!$ctrl.isSubmitEnabled"> {{ ::\'login.forgotLogin.next\' | translate }} </button> </div> <div class="forgot-login__confirmation" ng-if="$ctrl.currentState === $ctrl.STATES.CONFIRMED"> <h2 class="heading--title2">{{ ::\'login.forgotLoginConfirmation.title\' | translate }}</h2> <p>{{ ::\'login.forgotLoginConfirmation.emailSent\' | translate }}<br/><strong>{{ $ctrl.PARAMS.EmailAddress }}</strong></p> <p>{{ ::\'login.forgotLoginConfirmation.description\' | translate }}</p> <button actionable-id="forgot_backToLogin" ui-sref="{{ ::$ctrl.stateConstants.LOGIN }}" class="btn btn--tangerine">{{ ::\'login.forgotLoginConfirmation.login\' | translate }}</button> </div> <div ng-if="$ctrl.currentState === $ctrl.STATES.LOADING" class="loginLoadingIndicator"> <tng-loading-in-progress></tng-loading-in-progress> </div> </div> </form> '},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),a=i(s),o=n(0),r=i(o),l=n(1),c=i(l),u=function(){function e(t,n,i,s,a,o,l,c){(0,r.default)(this,e),this.$q=n,this.$http=i,this.$log=t,this.forgotLoginConstants=a,this.CredentialsService=o,this.EnvironmentService=s,this.LocaleService=l,this.localeConstants=c}return(0,c.default)(e,[{key:"initCifRetrieval",value:function(){return this.CredentialsService.metroGet(this.forgotLoginConstants.COMMANDS.DISPLAY_CIF_RETRIEVAL)}},{key:"retrieveCif",value:function(e){var t=e,n=this.LocaleService.locale===this.localeConstants.LOCALES.EN_CA?this.forgotLoginConstants.SERVICE_PARAMS.SAVE_CHANGES:this.forgotLoginConstants.SERVICE_PARAMS.FR_SAVE_CHANGES;return t=(0,a.default)(t,{command:this.forgotLoginConstants.COMMANDS.RETRIEVE_CIF}),t[n]=this.forgotLoginConstants.SERVICE_PARAMS.NEXT,this.CredentialsService.metroPost(t,{acceptedCommands:[{command:this.forgotLoginConstants.COMMANDS.DISPLAY_CIF_RETRIEVAL_CONFIRMATION}]})}},{key:"base",get:function(){return this.EnvironmentService.getAPIUrl()+"/web"}}]),e}();u.$inject=["$log","$q","$http","EnvironmentService","forgotLoginConstants","CredentialsTPWService","LocaleService","localeConstants"],t.default=u,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i,s,o){(0,a.default)(this,e),this.$log=t,this.$q=o,this.forgotLoginConstants=n,this.RequesterService=i,this.serviceConstants=s}return(0,r.default)(e,[{key:"initCifRetrieval",value:function(){return this.$q.defer().promise}},{key:"retrieveCif",value:function(e){var t={data:{first_name:e.FirstName,last_name:e.LastName,email_address:e.EmailAddress}};return this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.FORGOT_CIF,t)}}]),e}();l.$inject=["$log","forgotLoginConstants","RequesterService","serviceConstants","$q"],t.default=l,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={DISPLAY_CIF_RETRIEVAL:"displayCIFRetrieval",RETRIEVE_CIF:"retrieveCIF",DISPLAY_CIF_RETRIEVAL_CONFIRMATION:"displayCIFRetrievalConfirmation"},s={SAVE_CHANGES:"SAVE ANY CHANGES AND CONTINUE TO NEXT PAGE",FR_SAVE_CHANGES:"Enregistrer tous les changements et continuer à la prochaine page",NEXT:"Next"},a={INPUT_MIN_LENGTH:1,INPUT_MAX_LENGTH:32,EMAIL_MAX_LENGTH:60},o={REQUIRED:"login.forgotLogin.errors.required",NONUMBERS:"login.forgotLogin.errors.noNumbers",EMAILFORMAT:"login.forgotLogin.errors.emailFormat"},r={COMMANDS:i,SERVICE_PARAMS:s,INPUT_LENGTHS:a,VALIDATION_ERRORS:o};t.default=r,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1007),a=i(s),o=n(1011),r=i(o),l=n(1015),c=i(l),u=n(1019),d=i(u),h=n(1023),_=i(h),g=n(1024),S=i(g),f=n(1025),v=i(f),E=n(1026),p=i(E),T=angular.module("resetPinModule",[]).component("resetPin",a.default).component("identificationQuestions",r.default).component("newPin",c.default).component("pinConfirmation",d.default).service("PinResetFlowService",_.default).service("ResetPinTPWService",S.default).service("ResetPinMFPService",v.default).constant("resetPinConstants",p.default);t.default=T,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1008),a=i(s),o=n(1009),r=i(o);n(1010);var l={template:r.default,controller:a.default};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i,s,o,r,l,c,u,d,h,_,g,S,f){(0,a.default)(this,e),this.$log=t,this.$state=d,this.$scope=_,this.flowService=n,this.LocaleService=i,this.ResetPinTPWService=o,this.ResetPinMFPService=r,this.isNative=l.isNative(),this.resetPinService=this._getService(),this.SessionService=c,this.resetPinConstants=s,this.stateConstants=u,this.StepUpService=h,this.menuConstants=g,this.EventBusService=S,this.securityQuestion=null,this.pmSession=null,this.AuthService=f}return(0,r.default)(e,[{key:"$onInit",value:function(){var e=this;angular.isDefined(this.SessionService.transaction_token)||this.isNative?!this.SessionService.isAuthenticated()||this.isNative&&!this.StepUpService.isLevel2Granted||this.$state.go(this.stateConstants.ACCOUNT_SUMMARY):this._goToLogin(),this.$log.debug("INIT RESET PIN CONTROLLER"),this.flowService.activate(),this.flowService.errorMessage="",this.flowService.showLoadingSpinner(),this.resetPinService.initResetPIN().then(function(t){e.$log.debug("RESPONSE FROM RESET PIN SERVICE INIT",t),t&&(t.MessageBody&&t.MessageBody.Question?e.securityQuestion=t.MessageBody.Question:t.pm_question?(e.securityQuestion=t.pm_question,e.flowService.passmarkSession=t.pm_session):("string"==typeof t&&t.indexOf(e.resetPinConstants.ERRORS.DISPLAYLOGGEDINERRORPAGE)>-1||t.MessageHeader.ErrorMessage)&&(e.flowService.deactivate(),e._goToLogin())),e.flowService.showLoadingDoneIcon()}).catch(function(t){e.$log.error("DISPLAY RESET INFO MFP ERROR: ",t)}),this.EventBusService.subscribe(this.$scope,this.menuConstants.EVENTS.RESET_LOGIN,function(){e.flowService.deactivate(),e.AuthService.reinitLogin=!0,e._goToLogin()})}},{key:"_getService",value:function(){return this.isNative?this.ResetPinMFPService:this.ResetPinTPWService}},{key:"_goToLogin",value:function(){this.$state.go(this.stateConstants.LOGIN)}}]),e}();l.$inject=["$log","PinResetFlowService","LocaleService","resetPinConstants","ResetPinTPWService","ResetPinMFPService","EnvironmentService","SessionService","stateConstants","$state","StepUpService","$scope","menuConstants","EventBusService","AuthService"],t.default=l,e.exports=t.default},function(e,t){e.exports='<div class="reset-pin" ng-hide="$ctrl.flowService.isRedirecting"> <h2 class="heading--title2" ng-hide="$ctrl.flowService.isLoading"> {{ \'login.resetPin.title\' | translate }}</h2> <identification-questions ng-if="$ctrl.flowService.currentState == $ctrl.flowService.STATES.IDENTIFICATION_QUESTIONS" reset-pin-service="$ctrl.resetPinService" ng-hide="$ctrl.flowService.isLoading" on-submit-success="$ctrl.flowService.gotoNextState()" security-question="$ctrl.securityQuestion"> </identification-questions> <new-pin ng-if="$ctrl.flowService.currentState == $ctrl.flowService.STATES.NEW_PIN" reset-pin-service="$ctrl.resetPinService" ng-hide="$ctrl.flowService.isLoading" on-submit-success="$ctrl.flowService.onSubmit(newPin)"> </new-pin> <pin-confirmation ng-if="$ctrl.flowService.currentState == $ctrl.flowService.STATES.PIN_CONFIRMATION" ng-hide="$ctrl.flowService.isLoading"> </pin-confirmation> <div ng-if="$ctrl.flowService.isLoading" class="loginLoadingIndicator"> <tng-loading-in-progress></tng-loading-in-progress> </div> </div> '},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1012),a=i(s),o=n(1013),r=i(o);n(1014);var l={template:r.default,controller:a.default,bindings:{onSubmitSuccess:"&",securityQuestion:"<",resetPinService:"<"}};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=n(34),c=function(){function e(t,n,i,s,o,r,c,u){(0,a.default)(this,e),this.$log=t,this.$state=n,this.secQuestMaxLength=40,this.lastThreeMaxLength=3,this.lastThreeSSNValidation=l.lastThreeSSNValidation,this.secretQuestionValidation=l.secretQuestionValidation,this.isSubmitEnabled=!1,this.flowService=s,this.isNative=o.isNative(),this.resetPinConstants=u,this.stateConstants=c,this.dateConstants=i,this.serviceConstants=r,this.selectionMode=this.dateConstants.DATE_SELECTOR_MODES.SINGLE,this.pickerfrequency=this.dateConstants.FREQUENCY_MODE_CONSTANTS.WEEKLY,this.pickerExcludedFrequency=this.dateConstants.FREQUENCY_MODE_CONSTANTS.BIWEEKLY,this.DATEFORMAT="DD/MM/YYYY",this.DEFAULTDATE="01/01/1995",this.MINDATE="01/01/1920",this.datePickerBirthday={selectionMode:this.dateConstants.DATE_SELECTOR_MODES.SINGLE,selectedDate:moment(this.DEFAULTDATE,this.DATEFORMAT),minDate:moment(this.MINDATE,this.DATEFORMAT),maxDate:this.dateConstants.TODAY_IN_EST.clone(),visible:!1},this.formData={}}return(0,r.default)(e,[{key:"$onInit",value:function(){var e=this;this.isNative&&(this.errorMessage=this.flowService.errorMessage,this.flowService.showLoadingSpinner(),this.resetPinService.initResetPIN().then(function(t){e.$log.debug("RESPONSE FROM RESET PIN SERVICE INIT",t),t&&(t.MessageBody&&t.MessageBody.Question?e.securityQuestion=t.MessageBody.Question:t.pm_question?(e.securityQuestion=t.pm_question,e.flowService.passmarkSession=t.pm_session):("string"==typeof t&&t.indexOf(e.resetPinConstants.ERRORS.DISPLAYLOGGEDINERRORPAGE)>-1||t.MessageHeader.ErrorMessage)&&(e.flowService.deactivate(),e._goToLogin())),e.flowService.showLoadingDoneIcon()}).catch(function(t){e.$log.error("DISPLAY RESET INFO MFP ERROR: ",t),e.flowService.deactivate(),e._goToLogin()})),this.formData={SIN:null,DateOfBirth:null,Answer:null,pmSession:null}}},{key:"_goToLogin",value:function(){this.$state.go(this.stateConstants.LOGIN)}},{key:"validateInputs",value:function(){this.isSubmitEnabled=this.lastThreeSSNValidation(this.formData.SIN)&&this.formData.DateOfBirth&&this.formData.Answer&&this.secretQuestionValidation(this.formData.Answer)}},{key:"sendIdentityInfo",value:function(){var e=this;this.flowService.errorMessage="",this.formData.DateOfBirth=this.isNative?this.datePickerBirthday.selectedDate.format("YYYY-MM-DD").toString():this.datePickerBirthday.selectedDate.format("DD/MM/YYYY").toString(),this.formData.pmSession=this.flowService.passmarkSession,this.flowService.showLoadingSpinner(),this.resetPinService.validateResetPIN(this.formData).then(function(t){t&&!t.errorMessage&&t.MessageHeader&&!t.MessageHeader.ErrorMessages||t.response_status&&t.response_status.status_code===e.serviceConstants.STATUS_CODES.SUCCESS?(e.$log.debug("Reset Pin: ",t),e.flowService.showLoadingDoneIcon(),e.onSubmitSuccess()):e._handleError(t)}).catch(function(t){e._handleError(t)})}},{key:"updateSelectedDob",value:function(e){this.formData.DateOfBirth=e.format(this.DATEFORMAT).toString(),this.validateInputs()}},{key:"_handleError",value:function(e){this.flowService.showLoadingDoneIcon(),this.$log.debug("Login Retrieval Err: ",e),e.MessageHeader&&e.MessageHeader.ErrorMessages?this.errorMessage=e.MessageHeader.ErrorMessages[0]:e.response_status&&e.response_status.technical_description?this.errorMessage=e.response_status.technical_description:this.errorMessage=e.errorMessage}},{key:"onKeyPress",value:function(e){(e.charCode<this.resetPinConstants.ASCII_CHARS.DIGIT_0||e.charCode>this.resetPinConstants.ASCII_CHARS.DIGIT_9)&&e.keyCode!==this.resetPinConstants.ASCII_CHARS.BACKSPACE&&e.keyCode!==this.resetPinConstants.ASCII_CHARS.DELETE&&e.preventDefault()}},{key:"onClickBack",value:function(){this.flowService.errorMessage="",this.flowService.goBack()}}]),e}();c.$inject=["$log","$state","tngDateSelectorConstants","PinResetFlowService","EnvironmentService","serviceConstants","stateConstants","resetPinConstants"],t.default=c,e.exports=t.default},function(e,t){e.exports='<form name="$ctrl.formData" class="identification-questions"> <tng-error-message ng-show="$ctrl.errorMessage"> {{ $ctrl.errorMessage }} </tng-error-message> <p>{{ ::\'login.resetPin.identification.instruct\' | translate }}</p> <div class="field"> <label for="ssn"> {{ ::\'login.resetPin.identification.ssnFirst\' | translate }} <span>{{ ::\'login.resetPin.identification.ssnSecond\' | translate }}</span> </label> <div class="ssn-field"> <span>{{ ::\'login.resetPin.identification.firstSSNPart\' | translate }}</span> <input name="ssnDigits" class="input CB_DataMask" type="tel" ng-class="{warning:\n          $ctrl.formData.ssnDigits.$invalid &&\n          $ctrl.formData.ssnDigits.$touched\n        }" maxlength="{{ $ctrl.lastThreeMaxLength }}" minlength="{{ $ctrl.lastThreeMaxLength }}" ng-change="$ctrl.validateInputs()" ng-model="$ctrl.formData.SIN" ng-keypress="$ctrl.onKeyPress($event)" required autocomplete="OFF" autofocus placeholder="{{ ::\'login.resetPin.identification.ssnPlaceholder\' | translate }}"> <div ng-messages="$ctrl.formData.ssnDigits.$error" ng-show="$ctrl.formData.ssnDigits.$touched" class="field__error"> <p ng-message="required"> {{ ::\'login.resetPin.requiredField\' | translate }} </p> <p ng-message="minlength"> {{ ::\'login.resetPin.threeChars\' | translate }} </p> </div> </div> </div> <div class="identification-questions__dob-field"> <label for="dob">{{ ::\'login.resetPin.identification.dob\' | translate }}</label> <div class="field__icon icon-calendar" ng-click="$ctrl.datePickerBirthday.visible = true"></div> <input actionable-id="resetPin_dob" class="input" type="text" ng-model="$ctrl.formData.DateOfBirth" ng-focus="$ctrl.datePickerBirthday.visible = true" ng-required="true" readonly="true" autocomplete="OFF" autofocus placeholder="{{ \'login.resetPin.identification.dobPlaceholder\' | translate }}"> <tng-date-selector ng-if="$ctrl.datePickerBirthday.visible === true" selection-mode="$ctrl.datePickerBirthday.selectionMode" selected-date="$ctrl.datePickerBirthday.selectedDate" min-date="$ctrl.datePickerBirthday.minDate" max-date="$ctrl.datePickerBirthday.maxDate" on-date-change="$ctrl.updateSelectedDob(selectedDate)" scroller-id="date-picker-birthday" hide-frequency-selector="true" hide-selection-mode-selector="true"> </tng-date-selector> </div> <div class="field"> <label for="question"> {{ ::\'login.resetPin.identification.question\' | translate }} <p><span class="CB_DataMask" id="login_secretQuestion_label">{{ $ctrl.securityQuestion }}</span></p> </label> <input name="question" class="input CB_DataMask" type="text" ng-class="{warning:\n        $ctrl.formData.question.$invalid &&\n        $ctrl.formData.question.$touched\n      }" ng-class="{warning: !$ctrl.secretQuestionValidation($ctrl.formData.Answer) && ($ctrl.formData.Answer !== null)}" maxlength="{{ $ctrl.secQuestMaxLength }}" ng-change="$ctrl.validateInputs()" ng-model="$ctrl.formData.Answer" ng-required="true" autocapitalize="none" autocomplete="OFF" id="login_secretQuestion" autofocus placeholder="{{ ::\'login.resetPin.identification.questionPlaceholder\' | translate }}"> <div ng-messages="$ctrl.formData.question.$error" ng-show="$ctrl.formData.question.$touched" class="field__error"> <p ng-message="required"> {{ ::\'login.resetPin.requiredField\' | translate }} </p> </div> </div> <div class="identification-questions__form-buttons"> <button class="btn btn--edit CB_ReadOnly" actionable-id="resetPin_backToLogin" ng-click="$ctrl.onClickBack()"> {{ ::\'login.resetPin.identification.back\' | translate }} </button> <button actionable-id="login_Next" class="btn btn--tangerine CB_ReadOnly" ng-click="$ctrl.sendIdentityInfo()" ng-class="{ \'disabled\': !$ctrl.isSubmitEnabled }" ng-disabled="!$ctrl.isSubmitEnabled"> {{ ::\'login.resetPin.identification.next\' | translate }} </button> </div> </form> '},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1016),a=i(s),o=n(1017),r=i(o);n(1018);var l={template:r.default,controller:a.default,bindings:{onSubmitSuccess:"&",resetPinService:"<"}};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=n(34),c=function(){function e(t,n,i,s,o,r,c){(0,a.default)(this,e),this.$log=t,this.$timeout=n,this.$translate=i,this.flowService=s,this.STATUS_CODES=r.STATUS_CODES,this.resetPinConstants=c,this.isNative=o.isNative(),this.pinValidation=l.pinValidation,this.pinSanitize=l.pinSanitize,this.pinValue=null,this.confirmPinValue=null,this.isSubmitEnabled=!1,this.pinResetForm={}}return(0,r.default)(e,[{key:"$onInit",value:function(){this.showIdenticalValidationError=!1}},{key:"validateInput",value:function(){var e=this;this.toggleIdenticalValidationError();var t=this.pinValue===this.confirmPinValue;this.sanitizeInput(function(){e.pinValidation(e.pinValue)&&e.pinValidation(e.confirmPinValue)&&t?e.isSubmitEnabled=!0:e.isSubmitEnabled=!1})}},{key:"sanitizeInput",value:function(e){var t=this;this.$timeout(function(){t.pinValue&&(t.pinValue=t.pinSanitize(t.pinValue)),t.confirmPinValue&&(t.confirmPinValue=t.pinSanitize(t.confirmPinValue)),angular.isFunction(e)&&e()})}},{key:"submitNewPin",value:function(){var e=this;this.flowService.showLoadingSpinner();var t={PIN:this.pinValue,PINConfirm:this.confirmPinValue};this.resetPinService.validateResetPINInfo(t).then(function(t){t&&!t.errorMessage&&t.MessageHeader&&!t.MessageHeader.ErrorMessages||t.response_status&&t.response_status.status_code===e.STATUS_CODES.SUCCESS?(e.$log.debug("Reset Pin Info: ",t),e.flowService.showLoadingDoneIcon(),e.onSubmitSuccess({newPin:e.pinValue})):e._handleError(t)}).catch(function(t){e._handleError(t)})}},{key:"_handleError",value:function(e){var t=this;if(this.flowService.showLoadingDoneIcon(),this.$log.debug("Login Retrieval Err: ",e),e.MessageHeader&&e.MessageHeader.ErrorMessages)this.errorMessage=e.MessageHeader.ErrorMessages[0];else if(e.ErrorMessages)this.errorMessage=e.ErrorMessages[0];else if(e.response_status)if("details"in e.response_status&&Array.isArray(e.response_status.details)){var n="";e.response_status.details.forEach(function(e,i){i>0&&(n+="<br>"),n="INVALID_PIN_REPEATED_DIGITS"===e.details_code||"INVALID_PIN_SEQUENTIAL_DIGITS"===e.details_code||"INVALID_PIN_LENGTH"===e.details_code||"INVALID_PIN_NOT_NUMERIC"===e.details_code||"INVALID_PIN_SAME_AS_CIF"===e.details_code?t.$translate.instant("global.errorCodes."+e.details_code):""+n+e.technical_description}),this.errorMessage=n.trim()}else e.response_status.technical_description?this.errorMessage=e.response_status.technical_description:this.errorMessage=this.$translate.instant("global.errorCodes.GENERIC_ERROR");else this.errorMessage=e.error_message||e.errorMessage;this.isNative&&this.flowService.restartDueToError(this.errorMessage)}},{key:"toggleIdenticalValidationError",value:function(){this.showIdenticalValidationError=!!(this.pinResetForm.newPin&&this.pinResetForm.newPin.$valid&&this.pinResetForm.confirmPin&&this.pinResetForm.confirmPin.$valid&&this.pinValue!==this.confirmPinValue)}},{key:"onKeyPress",value:function(e){(e.charCode<this.resetPinConstants.ASCII_CHARS.DIGIT_0||e.charCode>this.resetPinConstants.ASCII_CHARS.DIGIT_9)&&e.keyCode!==this.resetPinConstants.ASCII_CHARS.BACKSPACE&&e.keyCode!==this.resetPinConstants.ASCII_CHARS.DELETE&&e.preventDefault()}}]),e}();c.$inject=["$log","$timeout","$translate","PinResetFlowService","EnvironmentService","serviceConstants","resetPinConstants"],t.default=c,e.exports=t.default},function(e,t){e.exports='<form name="$ctrl.pinResetForm" class="new-pin"> <tng-error-message ng-if="$ctrl.errorMessage"> {{ $ctrl.errorMessage }} </tng-error-message> <p>{{ ::\'login.resetPin.newPin.instruct\' | translate }} <a actionable-id="new-pin-instruct_2" ng-href="{{ \'login.resetPin.newPin.securityLink\' | translate }}" target="_blank">{{ ::\'login.resetPin.newPin.instruct2\' | translate }}</a></p> <div class="field"> <label> {{ ::\'login.resetPin.newPin.newPinLabel\' | translate }} </label> <input name="newPin" class="input CB_DataMask" ng-class="{warning:\n        $ctrl.pinResetForm.newPin.$invalid &&\n        $ctrl.pinResetForm.newPin.$touched\n      }" maxlength="6" minlength="6" pin-input placeholder="{{ ::\'login.resetPin.newPin.newPinPlaceholder\' | translate }}" ng-keypress="$ctrl.onKeyPress($event)" ng-change="$ctrl.validateInput()" ng-required="true" autocomplete="off" ng-model="$ctrl.pinValue"> <div ng-messages="$ctrl.pinResetForm.newPin.$error" ng-show="$ctrl.pinResetForm.newPin.$touched" class="field__error"> <p ng-message="required"> {{ ::\'login.resetPin.requiredField\' | translate }} </p> <p ng-message="minlength"> {{ ::\'login.resetPin.sixDigits\' | translate }} </p> </div> </div> <div class="field"> <label> {{ ::\'login.resetPin.newPin.confirmPinLabel\' | translate }} </label> <input name="confirmPin" placeholder="{{ ::\'login.resetPin.newPin.newPinPlaceholder\' | translate }}" class="input CB_DataMask" ng-class="{warning:\n        $ctrl.pinResetForm.confirmPin.$touched &&\n        ($ctrl.pinResetForm.confirmPin.$invalid ||\n        $ctrl.showIdenticalValidationError)\n      }" maxlength="6" minlength="6" pin-input ng-keypress="$ctrl.onKeyPress($event)" ng-change="$ctrl.validateInput()" ng-required="true" autocomplete="off" ng-model="$ctrl.confirmPinValue"> <div ng-messages="$ctrl.pinResetForm.confirmPin.$error" ng-show="$ctrl.pinResetForm.confirmPin.$touched" class="field__error"> <p ng-message="required"> {{ ::\'login.resetPin.requiredField\' | translate }} </p> <p ng-message="minlength"> {{ ::\'login.resetPin.sixDigits\' | translate }} </p> <p ng-if="$ctrl.showIdenticalValidationError"> {{ ::\'login.resetPin.identical\' | translate }} </p> </div> </div> <button actionable-id="resetPin_back" class="btn btn--edit" ng-click="$ctrl.flowService.moveBackTo($ctrl.flowService.STATES.IDENTIFICATION_QUESTIONS)"> {{ ::\'login.resetPin.newPin.back\' | translate }} </button> <button actionable-id="resetPin_next" class="btn btn--tangerine" ng-click="$ctrl.submitNewPin()" ng-class="{ \'disabled\': !$ctrl.isSubmitEnabled }" ng-disabled="!$ctrl.isSubmitEnabled"> {{ ::\'login.resetPin.newPin.next\' | translate }} </button> <p class="disclaimer" ng-bind-html="\'login.resetPin.newPin.disclaimer\' | translate"></p> </form> '},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1020),a=i(s),o=n(1021),r=i(o);n(1022);var l={template:r.default,controller:a.default};t.default=l,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(i),a=function e(t,n,i){(0,s.default)(this,e),this.$log=t,this.flowService=n,this.stateConstants=i};a.$inject=["$log","PinResetFlowService","stateConstants"],t.default=a,e.exports=t.default},function(e,t){e.exports='<div class="new-pin-confirmation"> <p>{{ ::\'login.resetPin.confirmation.message\' | translate }}</p> <p class="disclaimer" ng-bind-html="::\'login.resetPin.confirmation.disclaimer\' | translate"></p> <button class="btn btn--medium btn--tangerine" actionable-id="resetPin_backToLoginButton" ng-click="$ctrl.flowService.goToAccountSummary()">{{ ::\'login.resetPin.confirmation.login\' | translate }}</button> </div> '},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(13),a=i(s),o=n(81),r=i(o),l=n(0),c=i(l),u=n(1),d=i(u),h=n(94),_=i(h),g=n(96),S=i(g),f=n(95),v=i(f),E=n(97),p=i(E),T=function(e){function t(e,n,i,s,o,l,u,d,h,g,S,f,v,E,p,T,m,C){(0,c.default)(this,t);var A=(0,_.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n,i,s,o,d,l,h));return A.$state=s,A.CustomerInfoService=S,A.InsightsSessionService=f,A.LocaleService=v,A.RequesterService=p,A.serviceConstants=T,A.loginCommands=E.LOGIN_COMMANDS,A.nextCommand=A.loginCommands.VALID_PIN_COMMAND,A.AuthService=g,A.stateConstants=u,A.menuConstants=C,A.EventBusService=m,A.isRedirecting=!1,A.STATES={IDENTIFICATION_QUESTIONS:{titleKey:"login.resetPin.identification.title"},NEW_PIN:{titleKey:"login.resetPin.newPin.title"},PIN_CONFIRMATION:{titleKey:"login.resetPin.confirmation.title"},LOADING:{titleKey:"login.resetPin.loading"}},A._initialState=A.STATES.IDENTIFICATION_QUESTIONS,A.totalSteps=(0,a.default)(A.STATES).length,A.passmarkSession=null,A}return(0,v.default)(t,e),(0,d.default)(t,[{key:"_resetState",value:function(){(0,S.default)(t.prototype.__proto__||(0,r.default)(t.prototype),"_resetState",this).call(this),this.isRedirecting=!1,this.currentState=this._initialState,this.newPin=null,this._updateUI()}},{key:"$onInit",value:function(){this.nextCurrentlyDisabled=!1,this.backCurrentlyDisabled=!1}},{key:"onEnableNext",value:function(e){this.nextCurrentlyDisabled=!e}},{key:"onUpdateNext",value:function(e){this.nextButtonIsSubmit=e}},{key:"gotoNextState",value:function(){switch(this.currentState){case this.STATES.IDENTIFICATION_QUESTIONS:this.moveTo(this.STATES.NEW_PIN);break;case this.STATES.NEW_PIN:this.moveTo(this.STATES.PIN_CONFIRMATION)}}},{key:"moveTo",value:function(e){(0,S.default)(t.prototype.__proto__||(0,r.default)(t.prototype),"moveTo",this).call(this,e)}},{key:"restartDueToError",value:function(e){this.errorMessage=e,this._resetState()}},{key:"goToAccountSummary",value:function(){var e=this;this.isLoading=!0,this.AuthService.submitPin({pin:this.newPin,nextCommand:this.nextCommand,locale:this.LocaleService.locale}).then(function(t){!t.authenticated&&t.errorMessage?e._handlePINError(t):e._handlePINSuccess(t)}).catch(function(t){e._handlePINError(t)})}},{key:"goBack",value:function(){this.deactivate(),this.$window.history.back()}},{key:"_handlePINSuccess",value:function(){this.deactivate(),this.isLoading=!1,this.isRedirecting=!0,this.EventBusService.publish(this.menuConstants.EVENTS.REDIRECT_AFTER_RESET_PIN),this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.GET_ROADBLOCKS).then(function(){})}},{key:"_handlePINError",value:function(){this.isLoading=!1,this.$state.go(this.stateConstants.LOGIN)}},{key:"onSubmit",value:function(e){this.newPin=e,this.gotoNextState()}},{key:"_getAnalyticsID",value:function(){return"resetpin"}}]),t}(p.default);T.$inject=["$log","$q","$transitions","$state","$window","pageFlowConstants","stateConstants","$rootScope","AnalyticsService","AuthService","CustomerInfoService","InsightsSessionService","LocaleService","loginConstants","RequesterService","serviceConstants","EventBusService","menuConstants"],t.default=T,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),a=i(s),o=n(0),r=i(o),l=n(1),c=i(l),u=function(){function e(t,n,i){(0,r.default)(this,e),this.$log=t,this.resetPinConstants=n,this.CredentialsService=i}return(0,c.default)(e,[{key:"initResetPIN",value:function(){return this.CredentialsService.metroGet(this.resetPinConstants.COMMANDS.DISPLAY_RESET_PIN_INFO)}},{key:"validateResetPIN",value:function(e){var t={SIN:e.SIN,DateOfBirth:e.DateOfBirth,Answer:e.Answer,pmSession:e.pmSession};return t=(0,a.default)(t,{command:this.resetPinConstants.COMMANDS.VALIDATE_RESET_PIN_INFO}),this.CredentialsService.metroPost(t,{acceptedCommands:[{command:this.resetPinConstants.COMMANDS.DISPLAY_RESET_PIN}]})}},{key:"validateResetPINInfo",value:function(e){var t=e;return t=(0,a.default)(t,{command:this.resetPinConstants.COMMANDS.VALIDATE_RESET_PIN}),this.CredentialsService.metroPost(t,{acceptedCommands:[{command:this.resetPinConstants.COMMANDS.DISPLAY_RESET_PIN_CONFIRMATION}]})}}]),e}();u.$inject=["$log","resetPinConstants","CredentialsTPWService"],t.default=u,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),a=i(s),o=n(0),r=i(o),l=n(1),c=i(l),u=function(){function e(t,n,i,s,a,o){(0,r.default)(this,e),this.$log=t,this.RequesterService=s,this.SessionService=i,this.resetPinConstants=n,this.serviceConstants=a,this.$q=o,this.idData=null,this.validateInfo=null}return(0,c.default)(e,[{key:"initResetPIN",value:function(){var e={data:{login_session:this.SessionService.loginToken,step:"INIT"}};return this.$log.debug("INIT RESET PIN: ",e),this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.FORGOT_PIN,e)}},{key:"validateResetPIN",value:function(e){return this.$log.debug("Validate Reset PIN: ",e),this.idData=e,this.validateInfo={data:{step:"VERIFY",dob:this.idData.DateOfBirth,sin:this.idData.SIN,pm_session:this.idData.pmSession,pm_answer:this.idData.Answer,reset_pin_request_option_type:"SIN"}},e.pmSession&&e.pmSession.indexOf("@")>0&&(this.validateInfo.data.userid=e.pmSession.split("@")[0]),this.$q.when({response_status:{status_code:"SUCCESS"}})}},{key:"validateResetPINInfo",value:function(e){var t=(0,a.default)({data:{}},this.validateInfo);return t.data.pin=e.PIN,this.$log.debug("Validate Reset PIN: ",t),this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.RESET_PIN,t)}}]),e}();u.$inject=["$log","resetPinConstants","SessionService","RequesterService","serviceConstants","$q"],t.default=u,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={DIGIT_0:48,DIGIT_9:57,BACKSPACE:8,DELETE:46},s={DISPLAY_RESET_PIN_INFO:"displayResetPINInfo",VALIDATE_RESET_PIN_INFO:"validateResetPINInfo",DISPLAY_RESET_PIN:"displayResetPIN",VALIDATE_RESET_PIN:"validateResetPIN",DISPLAY_RESET_PIN_CONFIRMATION:"displayResetPINConfirmation",RESET_PIN_CONFIRM:"ResetPINConfirm"},a={DISPLAYLOGGEDINERRORPAGE:"displayLoggedInErrorPage"},o={ASCII_CHARS:i,COMMANDS:s,ERRORS:a};t.default=o,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1028),a=i(s),o=n(1032),r=i(o),l=angular.module("tangerine.notFound.module",[]).component("notFound",a.default).constant("notFoundConstants",r.default);t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1029),a=i(s),o=n(1030),r=i(o);n(1031);var l={template:r.default,controller:a.default};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i,s,o,r,l,c){(0,a.default)(this,e),this.Idle=t,this.notFoundConstants=n,this.$scope=i,this.$state=s,this.EventBusService=l,this.menuConstants=o,this.stateConstants=r,this.LocaleService=c}return(0,r.default)(e,[{key:"$onInit",value:function(){var e=this;this._mapVisitorLinksLocale(),this.Idle.unwatch(),this.EventBusService.subscribe(this.$scope,this.menuConstants.EVENTS.RESET_LOGIN,function(){e.$state.go(e.stateConstants.LOGIN)})}},{key:"_mapVisitorLinksLocale",value:function(){var e=this;this.links=this.notFoundConstants.LINK_LIST.map(function(t){if(t.link){var n=e.LocaleService.localeDisplay.toLowerCase();return t.link="/"+n+"/"+t.link,t}return t})}}]),e}();l.$inject=["Idle","notFoundConstants","$scope","$state","menuConstants","stateConstants","EventBusService","LocaleService"],t.default=l,e.exports=t.default},function(e,t){e.exports='<div class="not-found"> <div class="not-found__banner"> <h1 class="not-found__heading-title" translate> {{ ::\'notFound.title\' }} </h1> <p translate> {{ ::\'notFound.tagLine\' }} </p> </div> <div class="not-found__container"> <h2 translate>{{ ::\'notFound.linksHeader\' }}</h2> <div class="not-found__container__links-list"> <a actionable-id="not-fund-link" ng-repeat="linkObj in $ctrl.links" ng-if="linkObj.state" ui-sref="{{ linkObj.state }}" translate>{{ linkObj.title }}</a> <a actionable-id="not-fund-link" ng-repeat="linkObj in $ctrl.links" ng-if="linkObj.link" ng-href="{{ linkObj.link }}" translate>{{ linkObj.title }}</a> </div> </div> </div> '},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(101),s=function(e){return e&&e.__esModule?e:{default:e}}(i),a=[{title:"notFound.links.home",state:s.default.ACCOUNT_SUMMARY},{title:"notFound.links.signup",state:s.default.LOGIN},{title:"notFound.links.login",state:s.default.LOGIN},{title:"notFound.links.faqs",link:"faq"},{title:"notFound.links.visitus",link:"ways-to-bank/tangerine-locations"},{title:"notFound.links.contactus",link:"about-us/contact-us"},{title:"notFound.links.aboutus",link:"about-us"}],o={LINK_LIST:a};t.default=o,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1034),a=i(s),o=n(1038),r=i(o),l=angular.module("tangerine.maintenance.module",[]).component("maintenance",a.default).constant("maintenanceConstants",r.default);t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1035),a=i(s),o=n(1036),r=i(o);n(1037);var l={template:a.default,controller:r.default,bindings:{}};t.default=l,e.exports=t.default},function(e,t){e.exports='<div class="c-maintenance"> <div class="c-maintenance__banner"> <h1 class="c-maintenance__heading-title" translate> {{ ::\'maintenance.title\' }} </h1> <p translate> {{ ::\'maintenance.tagLine\' }} </p> </div> <div class="c-maintenance__container"> <h2 translate>{{ ::\'maintenance.mainHeader\' }}</h2> <p translate>{{ ::\'maintenance.mainMsg\' }}</p> <p translate>{{ ::\'maintenance.sorryMsg\' }}</p> </div> <div class="c-maintenance__container"> <h2 translate>{{ ::\'maintenance.linksHeader\' }}</h2> <div class="c-maintenance__container__links-list"> <a actionable-id="maintenance-link" ui-sref="{{ linkObj.link }}" ng-repeat="linkObj in $ctrl.maintenanceConstants.LINK_LIST" translate>{{ linkObj.title }}</a> </div> </div> </div> '},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i){(0,a.default)(this,e),this.$log=t,this.Idle=n,this.maintenanceConstants=i}return(0,r.default)(e,[{key:"$onInit",value:function(){this.Idle.unwatch()}}]),e}();l.$inject=["$log","Idle","maintenanceConstants"],t.default=l,e.exports=t.default},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(101),s=function(e){return e&&e.__esModule?e:{default:e}}(i),a=[{title:"maintenance.links.home",link:s.default.ACCOUNT_SUMMARY},{title:"maintenance.links.search",link:s.default.COMING_SOON},{title:"maintenance.links.faqs",link:s.default.COMING_SOON},{title:"maintenance.links.visitus",link:s.default.COMING_SOON},{title:"maintenance.links.contactus",link:s.default.COMING_SOON}],o={LINK_LIST:a};t.default=o,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1040),a=i(s),o=n(1041),r=i(o),l=n(1042),c=i(l),u=n(1043),d=i(u),h=n(1047),_=i(h),g=n(1048),S=i(g),f=n(1049),v=i(f),E=n(1050),p=i(E),T=n(1051),m=i(T),C=n(1052),A=i(C),I=n(1056),O=i(I),N=n(1058),y=i(N),b=n(1062),L=i(b),M=n(1065),R=i(M),D=n(1067),P=i(D),$=n(1070),U=i($),k=angular.module("tangerine.insights.module",[]).run(a.default).constant("InsightsConstants",r.default).constant("InsightsServiceConfig",c.default).component("insights",A.default).component("tngInsight",O.default).component("tngInsightCarousel",y.default).component("tngInsightDefault",L.default).component("tngModalInsight",R.default).component("tngInsightLoadingBar",P.default).component("tngInsightBanner",U.default).service("InsightsService",d.default).service("InsightsEventService",_.default).service("InsightsRequestService",S.default).service("InsightsSessionService",v.default).filter("staticAbsoluteUrl",p.default).directive("insightBackground",m.default);t.default=k,e.exports=t.default},function(e,t,n){"use strict";function i(){}Object.defineProperty(t,"__esModule",{value:!0}),i.$inject=["$transitions"],t.default=i,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={OPEN_URL:"openUrl",OPEN_INTERNAL_URL:"openInternalUrl",OPEN_EXTERNAL_URL:"openExternalUrl",OPEN_SECURE_URL:"openSecureUrl",OPEN_MODAL:"openModal",CLOSE_MODAL:"closeModal",REMOVE_CARD:"removeCard",ANALYTICS_EVENT:"analyticsEvent",INTERACT_EVENT:"interactEvent",INSIGHT_LOADED:"insightLoaded"},s={VIEW:"evt_LogContact",RECEIVED:"evt_LogContactOLIST",REMIND_ME:"evt_RemindMe",NOT_HELPFUL:"evt_NotHelpful"},a={BASKET:"ip_OnboardingProductBasket",FEED:"ip_insightsFeed",SUMMARY:"ip_InsightsCarousel",LOGIN:"ip_LoginBanner",LOGOUT:"ip_LogoutBanner"},o={COOKIE_NAME:"tng.insights.sessionId",CACHE_PREFIX:"tng.insights.cache",HEADER:"interact-sessionid",HEADER_MFP:"Interact-SessionId",AUDIENCE_CUSTOMER:"Customer",AUDIENCE_ANONYMOUS:"Anonymous",GOOGLE_ANALYTICS_ID:"_ga",ANALYTICS_ID:"_aid"},r={SUCCESS:"SUCCESS",WARNING:"WARNING",ERROR:"ERROR",SESSION_NOT_FOUND:1},l={DISPLAY_LIMIT:5},c={MOBILE_BREAKPOINT:482},u={MOBILE:"M",WEB:"W",DAWT:"D"},d={EVENT_MAP:i,INTERACTION_EVENTS:s,INTERACTION_POINTS:a,SESSION:o,STATUS_CODES:r,FEED:l,INSIGHT_UI:c,DEVICE_ORIGINS:u};t.default=d,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={defaults:{timeout:1e4,mockBaseURL:"/assets/res/mock/insights"},insights:{method:"GET",HTTP:{url:"/v1/campaign/insights"},MOCK:{url:"/insights.json"}},insightsDeleteSession:{method:"DELETE",HTTP:{url:"/v1/campaign/session"},MOCK:{url:"/session_delete.json"}},insightsEvent:{method:"POST",HTTP:{url:"/v1/campaign/events"},MOCK:{url:"/event.json"}}},s={GET_INSIGHTS:"insights",EVENT:"insightsEvent",DELETE_SESSION:"insightsDeleteSession"};t.default={AVAILABLE_SERVICES:s,SERVICE_CONFIG:i},e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1044),a=i(s),o=n(147),r=i(o),l=n(1046),c=i(l),u=n(6),d=i(u),h=n(0),_=i(h),g=n(1),S=i(g),f=function(){function e(t,n,i,s,a,o,r,l,c,u,h,g,S){(0,_.default)(this,e),this.EnvironmentService=t,this.InsightsRequestService=n,this.InsightsServiceConfig=i,this.InsightsSessionService=s,this.InsightsConstants=a,this.LocaleService=o,this.localeConstants=r,this.$filter=l,this.$log=c,this.$q=u,this.$sce=h,this.$cookies=g,this.$http=S,this.config=t.get("insights"),this.isMock=t.isMock()||!this.config.apiUrl,this.templateBaseUrl=""+this.config.staticBaseUrl,this.config=(0,d.default)(this.config,{cardBaseUrl:this.templateBaseUrl+"/insight/assets/cards/",defaultCardUrl:"assets/cards/default.html"}),this.mockCardUrl="/assets/res/mock/insights/cards/",this.mockModalUrl="/assets/res/mock/insights/cards/modal/",this.cardBaseUrl=this.isMock?this.mockCardUrl:this.config.cardBaseUrl,this.modalBaseUrl=this.isMock?this.mockModalUrl:this.config.modalBaseUrl,this.analyticsId=this.$cookies.get(this.InsightsConstants.SESSION.GOOGLE_ANALYTICS_ID)||this.$cookies.get(this.InsightsConstants.SESSION.ANALYTICS_ID),this.analyticsId||(this.analyticsId=Math.floor(1e6*Math.random()),this.$cookies.put(this.InsightsConstants.SESSION.ANALYTICS_ID,this.analyticsId,{path:"/"})),this._openCarouselOnLaunch=!0}return(0,S.default)(e,[{key:"getInsights",value:function(e,t){var n=this;return this.InsightsSessionService.startSession(e.isLogin,e.requireSession).then(function(){var i=n.InsightsSessionService.getSession(),s=i.id,a=e.audience||i.audience;(!a||t&&a===n.InsightsConstants.SESSION.AUDIENCE_CUSTOMER)&&(a=n.InsightsConstants.SESSION.AUDIENCE_ANONYMOUS,s="");var o=n.EnvironmentService.isNative()?n.InsightsConstants.DEVICE_ORIGINS.MOBILE:n.InsightsConstants.DEVICE_ORIGINS.WEB,r={appId:n.config.appId,audienceLevel:a,channel:n.config.channel,"interaction-point":e.interactionPoint,origin:o};e.count&&(r.count=e.count),e.skip&&(r.skip=e.skip),n.analyticsId&&(r.aid=n.analyticsId);var l={};return s&&(l[n.InsightsConstants.SESSION.HEADER]=s),n.InsightsRequestService.request(n.InsightsServiceConfig.AVAILABLE_SERVICES.GET_INSIGHTS,{headers:l,queries:r}).then(function(i){var s=i.data&&i.data.status===n.InsightsConstants.STATUS_CODES.ERROR,o=i.data&&i.data.statusCode===n.InsightsConstants.STATUS_CODES.SESSION_NOT_FOUND,r=e.disableRetry&&o,l=!e.disableRetry&&o;return i.data&&i.data.insights||l||!s&&!r?e.disableRetry||!o?(n.$log.debug("insights call failed for unknown reason",i),n._handleSuccess(i,a,e.interactionPoint)):(n.$log.debug("possible interact session error, invalidating session",i),n.InsightsSessionService.setExpired(o),e.disableRetry=!0,n.getInsights(e,t)):n._handleError(i)}).catch(function(e){return n._handleError(e)})})}},{key:"_handleSuccess",value:function(e,t,n){if(this.$log.debug("_handleSuccess",e),t===this.InsightsConstants.SESSION.AUDIENCE_ANONYMOUS){var i=e.headers();this.InsightsSessionService.setSession(i[this.InsightsConstants.SESSION.HEADER],t)}return{insights:this._sanitizeInsights(e.data.insights||[],n),lastUpdated:new Date}}},{key:"_handleError",value:function(e){return this.$log.debug("getInsights:_handleError",e),this.$q.reject(e)}},{key:"_sanitizeInsights",value:function(e,t){var n=this,i=[],s=this.localeConstants.SHORTHAND_LOCALE[this.LocaleService.locale];return function(){var o=(0,c.default)(a.default.mark(function o(){return a.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,r.default.all(e.map(function(){var e=(0,c.default)(a.default.mark(function e(o,r){var l,c,u,d;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l={cacheKey:n._generateCacheKey(o.code?o.code[0]:"",o.treatmentCode),id:o.code?o.code[0]:void 0,name:o.name,interactionPoint:t,score:o.score,treatmentCode:o.treatmentCode,pos:r+1},c=o.attributes.reduce(function(e,t){if(e[t.name]=t.value,angular.isString(t.value)&&t.value.indexOf("|")>=1){var i=t.value.split("|");i.length>=3&&(e[i[0].trim()]=n._richProperty(i[1],i[2]))}return e},{}),delete o.attributes,c.chartData)try{c.chartData=angular.fromJson(c.chartData)}catch(e){n.$log.debug("chart data is not proper json",l,c.chartData,e)}c.ic_cardName?(u=n.templateBaseUrl+"/"+s+"/assets/modal/mp-"+c.ic_cardName+".html",l.modalUrl=n.$sce.trustAsResourceUrl(u),d=""+n.cardBaseUrl+c.ic_cardName+"_"+s+".html",n.$http({method:"GET",url:d}).then(function(e){-1===e.data.indexOf("<!doctype html>")?(l.cardUrl=n.$sce.trustAsResourceUrl(d),i.push(angular.extend(l,c))):n.$log.error("could not find the card through the card url, skipping insight",d)})):n.$log.error("card url not provided, skipping insight",l,c);case 5:case"end":return e.stop()}},e,n)}));return function(t,n){return e.apply(this,arguments)}}()));case 2:case"end":return o.stop()}},o,n)}));return function(){return o.apply(this,arguments)}}()(),i}},{key:"_generateCacheKey",value:function(e,t){var n=this.InsightsSessionService.getSession().id,i=n+"|"+e;return t?i+"|"+t.substring(0,8):i}},{key:"_richProperty",value:function(e,t){var n=e.trim(),i=t.trim();if(0===n.indexOf("numeric")){var s=2,a=/^\w+:(\d+)/.exec(n);return a&&(s=a[1]),this.$filter("number")(i,s)}if("currency"===n)return this.$filter("currency")(i,void 0,2);if(0===n.indexOf("date")){var o="mediumDate",r=/^\w+:(\w+)/.exec(n);return r&&"long"===r[1]&&(o="longDate"),this.$filter("date")(i,o)}return i}},{key:"defaultCardUrl",get:function(){return this.config.defaultCardUrl}},{key:"openCarouselOnLaunch",get:function(){return this._openCarouselOnLaunch},set:function(e){this._openCarouselOnLaunch=e}}]),e}();f.$inject=["EnvironmentService","InsightsRequestService","InsightsServiceConfig","InsightsSessionService","InsightsConstants","LocaleService","localeConstants","$filter","$log","$q","$sce","$cookies","$http"],t.default=f,e.exports=t.default},,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i,s,o,r,l,c,u,d,h,_){var g=this;(0,a.default)(this,e),this.InsightsRequestService=n,this.InsightsServiceConfig=i,this.InsightsSessionService=s,this.InsightsConstants=o,this.InsightsEvents=o.EVENT_MAP,this.InteractEvents=o.INTERACTION_EVENTS,this.$window=r,this.$log=l,this.AnalyticsService=c,this.analyticsEvents=u.AVAILABLE_EVENTS,this.EnvironmentService=t,this.config=t.get("insights"),this.internalBaseUrl=""+this.config.staticBaseUrl,this.isNative=t.isNative(),d.subscribe(_,h.KEEP_ALIVE,function(){return g.keepAlive()})}return(0,r.default)(e,[{key:"sendEvent",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};switch(t){case this.InsightsEvents.OPEN_URL:case this.InsightsEvents.OPEN_INTERNAL_URL:case this.InsightsEvents.OPEN_EXTERNAL_URL:case this.InsightsEvents.OPEN_SECURE_URL:this._openUrl(t,e,n);break;case this.InsightsEvents.ANALYTICS_EVENT:this._handleAnalyticsEvent(e.treatmentCode,n);break;case this.InsightsEvents.INTERACT_EVENT:this._handleInteractButtonEvent(e,n.eventType,n);break;case this.InteractEvents.VIEW:this._handleInteractViewEvent(e);break;case this.InteractEvents.RECEIVED:break;default:this.$log.debug("unknown event action",t,e,n)}}},{key:"_openUrl",value:function(e,t,n){if(n.url)if(e===this.InsightsEvents.OPEN_EXTERNAL_URL)this.$window.open(n.url,this.isNative?"_system":"_blank");else if(e===this.InsightsEvents.OPEN_URL||e===this.InsightsEvents.OPEN_INTERNAL_URL){var i=this.$window.btoa(this.$window.JSON.stringify(t)),s="offer_id="+t.id+"&tngod="+i+"&interact_zone="+t.interactionPoint;t.ic_basketProducts&&(s+="&product_id="+t.ic_basketProducts);var a=n.url+(n.url.indexOf("?")>-1?"&":"?")+s;this.isNative&&(a=this.internalBaseUrl+"/"+a),this.$window.open(a,this.isNative?"_system":"_self")}else e===this.InsightsEvents.OPEN_SECURE_URL&&(this.isNative&&n.url?(0===n.url.indexOf("/")?n.url=n.url.substring(1):0===n.url.indexOf(this.EnvironmentService.getBaseUrl())&&(n.url=n.url.substring(this.EnvironmentService.getBaseUrl().length),0===n.url.indexOf("/")&&(n.url=n.url.substring(1))),0===n.url.indexOf("en/")||0===n.url.indexOf("fr/")?(n.url=this.EnvironmentService.getBaseUrl()+"/"+n.url,this.$window.open(n.url,n.target||"_self")):window.location.href=n.url):this.$window.open(n.url,n.target||"_self"))}},{key:"_handleAnalyticsEvent",value:function(e,t){t.gtmCode&&this.$log.debug("track gtm",e,t.gtmCode)}},{key:"_handleInteractViewEvent",value:function(e){var t="evt_LogContact"+e.offertype;if(this._hasPostedEvent(e.cacheKey))return void this.$log.debug("Ignoring previously posted event",t);var n=[{key:"UDFOfferType",value:e.offertype},{key:"offerCode",value:e.id}];e.interactionPoint&&n.push({key:"intpoint",value:e.interactionPoint}),this._handleInteractEvent(e.treatmentCode,t,n,e.cacheKey),this.AnalyticsService.sendAction(this.analyticsEvents.PROMOTION_VIEW,void 0,e)}},{key:"_handleInteractButtonEvent",value:function(e,t,n){var i=[{key:"offerCode",value:e.id}];n.responseType&&i.push({key:"UACIResponseTypeCode",value:n.responseType}),e.interactionPoint&&i.push({key:"intpoint",value:e.interactionPoint}),this._handleInteractEvent(e.treatmentCode,t,i,e.cacheKey),this.AnalyticsService.sendAction(this.analyticsEvents.PROMOTION_CLICK,void 0,e)}},{key:"_handleInteractReceivedEvent",value:function(e){var t=this;if(this._shouldSendEvent()){var n=[],i=this.InsightsSessionService.getCache()||[];if(e.forEach(function(e){var s=e.cacheKey+"_received";if(!(i.indexOf(s)>-1)){var a=[{key:"UACIOfferTrackingCode",value:e.treatmentCode},{key:"UDFOfferType",value:"OLIST"}];e.interactionPoint&&a.push({key:"intpoint",value:e.interactionPoint}),n.push({eventType:t.InteractEvents.RECEIVED,eventData:a}),i.push(s)}}),n.length){this.InsightsSessionService.updateCache(i);var s={},a=this.InsightsSessionService.getSession().id;a&&(s[this.InsightsConstants.SESSION.HEADER]=a);var o={appId:this.config.appId};this.InsightsRequestService.request(this.InsightsServiceConfig.AVAILABLE_SERVICES.EVENT,{data:{events:n},headers:s,queries:o})}}}},{key:"_handleInteractEvent",value:function(e,t,n,i){var s=this;if(this._shouldSendEvent()){var a={eventType:t,eventData:[{key:"UACIOfferTrackingCode",value:e}]};if(angular.isArray(n)&&(a.eventData=a.eventData.concat(n)),n&&n.eventType===this.InteractEvents.REMIND_ME){var o=this.InsightsSessionService.getCache();angular.isArray(o)?o.indexOf(i)<0&&o.push(i):o=[i],this.InsightsSessionService.updateCache(o)}var r={},l=this.InsightsSessionService.getSession(),c=l.id;c&&(r[this.InsightsConstants.SESSION.HEADER]=c);var u={appId:this.config.appId,audience:l?l.audience:void 0};this.InsightsRequestService.request(this.InsightsServiceConfig.AVAILABLE_SERVICES.EVENT,{data:{events:[a]},headers:r,queries:u}).then(function(){s._addToCache(i)})}}},{key:"_shouldSendEvent",value:function(){return this.InsightsSessionService.getSession().audience===this.InsightsConstants.SESSION.AUDIENCE_CUSTOMER}},{key:"_hasPostedEvent",value:function(e){var t=this.InsightsSessionService.getCache();return angular.isArray(t)&&t.indexOf(e)>-1}},{key:"_addToCache",value:function(e){var t=this.InsightsSessionService.getCache();angular.isArray(t)?t.indexOf(e)<0&&t.push(e):t=[e],this.InsightsSessionService.updateCache(t)}},{key:"keepAlive",value:function(){this.$log.debug("Triggering insights keep alive");var e={},t=this.InsightsSessionService.getSession(),n=t.id;n&&(e[this.InsightsConstants.SESSION.HEADER]=n);var i={appId:this.config.appId,audience:t?t.audience:void 0};this.InsightsRequestService.request(this.InsightsServiceConfig.AVAILABLE_SERVICES.EVENT,{data:{events:[{eventType:"evt_Heartbeat",eventData:[]}]},headers:e,queries:i})}}]),e}();l.$inject=["EnvironmentService","InsightsRequestService","InsightsServiceConfig","InsightsSessionService","InsightsConstants","$window","$log","AnalyticsService","analyticsConstants","EventBusService","appStateConstants","$rootScope"],t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i,s,o,r,l,c,u,d){(0,a.default)(this,e),this.AnalyticsService=t,this.ErrorService=i,this.InsightsServiceConfig=s,this.defaultConfig=s.SERVICE_CONFIG.defaults,this.HTTP_VERBS=l.HTTP_VERBS,this.ANALYTICS_EVENTS=o.AVAILABLE_EVENTS,this.ERROR_EVENTS=r.AVAILABLE_EVENTS,this.REQUEST_TYPES=l.REQUEST_TYPES,this.$http=c,this.$q=u,this.$log=d,this.config=n.get("insights"),n.isMock()||!this.config.apiUrl?this.requestType=this.REQUEST_TYPES.MOCK:this.requestType=this.REQUEST_TYPES.HTTP}return(0,r.default)(e,[{key:"request",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.$log.debug("Insights Service request for "+e);var n=this.InsightsServiceConfig.SERVICE_CONFIG[e],i=n.method;return i&&i in this.HTTP_VERBS||(i=this.HTTP_VERBS.GET),this.AnalyticsService.sendAction(this.ANALYTICS_EVENTS.API_REQUEST,e),this.requestType!==this.REQUEST_TYPES.MOCK&&this.config.apiUrl?this._http(n,i,t):this._mockRequest(n,i,t)}},{key:"_http",value:function(e,t,n){var i=this,s=e.HTTP,a=this.config.apiUrl+s.url,o=s.timeout||this.defaultConfig.timeout;return this.$log.debug("_http",a,t,n),this.$http({method:t,url:a,data:n.data,params:n.queries,timeout:o,headers:n.headers,withCredentials:!0}).then(function(e){var t=e.data;return i._isErrorRequest(t.http_code)?i._processError(t):e}).catch(function(e){return i._processError(e)})}},{key:"_mockRequest",value:function(e,t,n){var i=this,s=e.MOCK,a=this.defaultConfig.mockBaseURL+s.url;this.$log.debug("_mockRequest",a,t);var o=s.timeout||this.defaultConfig.timeout;return this.$http({method:this.HTTP_VERBS.GET,url:a,data:n.data,params:n.queries,timeout:o,headers:n.headers}).then(function(e){var t=e;return"default"in t.data&&(t.data=t.data.default),"mockResponse"in n&&t.data[n.mockResponse]&&(t.data=t.data[n.mockResponse]),t}).catch(function(e,t){return i.$q.reject({data:e,status:t})})}},{key:"_isErrorRequest",value:function(e){return e>=400}},{key:"_processError",value:function(e){var t=this;return this.ErrorService.processError(e,this.ERROR_EVENTS.REQUEST_ERROR).then(function(n){return t.$q.reject({data:e.data,status:e.status,errorMessage:n.message})}).catch(function(){return t.$q.reject()})}}]),e}();l.$inject=["AnalyticsService","EnvironmentService","ErrorService","InsightsServiceConfig","analyticsConstants","errorConstants","serviceConstants","$http","$q","$log"],t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(36),a=i(s),o=n(0),r=i(o),l=n(1),c=i(l),u=function(){function e(t,n,i,s,a,o,l,c,u,d){(0,r.default)(this,e),this.RequesterService=t,this.serviceConstants=n,this.InsightsRequestService=i,this.InsightsServiceConfig=s,this.SESSION_CONSTANTS=a.SESSION,this.$q=l,this.$log=c,this.$cookies=u,this.CacheFactory=d,this.config=o.get("insights"),this.session={},this.sessionPromise=null,this.insightsCache=null,this.cookieDefaults={path:"/"};var h=this.getSession();h.id&&(this.insightsCache=this._initializeCache(h.id))}return(0,c.default)(e,[{key:"getSession",value:function(){if(this.session.id&&this.session.audience)return this.session;var e=this.$cookies.get(this.SESSION_CONSTANTS.COOKIE_NAME),t={};if(e){var n=e.split(";");t.id=n[0],t.audience=n[1]}return this.session&&(t.expired=this.session.expired),t}},{key:"setSession",value:function(e,t){if(this.session={id:e,audience:t},this.sessionPromise=this.$q.when(this.session),!e)return void this.$cookies.remove(this.SESSION_CONSTANTS.COOKIE_NAME);this.$cookies.put(this.SESSION_CONSTANTS.COOKIE_NAME,e+";"+t,this.cookieDefaults),this.insightsCache=this._initializeCache(e)}},{key:"deleteSession",value:function(){var e=this,t=(0,a.default)({},this.SESSION_CONSTANTS.HEADER,this.getSession().id),n={appId:this.config.appId};return this._clearSession(),this.InsightsRequestService.request(this.InsightsServiceConfig.AVAILABLE_SERVICES.DELETE_SESSION,{headers:t,queries:n}).then(function(t){return e.$log.debug("InsightsSessionService:deleteSession",t),t})}},{key:"_clearSession",value:function(){try{this.insightsCache&&this.insightsCache.removeAll()}catch(e){return}this.setSession("",this.SESSION_CONSTANTS.AUDIENCE_ANONYMOUS)}},{key:"setExpired",value:function(e){this.session&&(this.session.expired=!0),this.sessionPromise=void 0,e&&(this.$log.debug("InsightsSessionService:deleteSessionCookie"),this.$cookies.remove(this.SESSION_CONSTANTS.COOKIE_NAME))}},{key:"startSession",value:function(e,t){var n=this;if(this.sessionPromise&&!e)return this.sessionPromise;if(!e&&!t)return this.$q.when({});if(t&&!this.sessionPromise){var i=this.getSession();if(i.id&&!i.expired)return this.sessionPromise=this.$q.when(i),this.sessionPromise}var s={data:{channel:this.config.channel}},a=this.getSession().id;return a&&(s.headers={},s.headers[this.SESSION_CONSTANTS.HEADER]=a),this.sessionPromise=this.RequesterService.request(this.serviceConstants.AVAILABLE_SERVICES.INSIGHTS_SESSION,s).then(function(e){return n._handleSessionSuccess(e)}).catch(function(e){return n._handleSessionError(e)}),this.sessionPromise}},{key:"_handleSessionSuccess",value:function(e){if(e.status!==this.serviceConstants.STATUS_CODES.SUCCESS)return void this._handleSessionError(e);this.setSession(e.responseHeaders[this.SESSION_CONSTANTS.HEADER]||e.responseHeaders[this.SESSION_CONSTANTS.HEADER_MFP],this.SESSION_CONSTANTS.AUDIENCE_CUSTOMER)}},{key:"_handleSessionError",value:function(e){return this.$log.error(e),this.$q.reject(e)}},{key:"_initializeCache",value:function(e){var t=this.SESSION_CONSTANTS.CACHE_PREFIX+"."+e;return this.CacheFactory.get(t)||this.CacheFactory.createCache(t,{deleteOnExpire:"aggressive",recycleFreq:6e4,storageMode:"sessionStorage"}),this.CacheFactory.get(t)}},{key:"_getCacheName",value:function(){return this.SESSION_CONSTANTS.CACHE_PREFIX+"."+this.getSession().id}},{key:"getCache",value:function(){return this.insightsCache?this.insightsCache.get(this._getCacheName()):null}},{key:"updateCache",value:function(e){try{this.insightsCache.put(this._getCacheName(),e)}catch(e){this.$log.error("Failed to update insights cache: "+e.toString())}}}]),e}();u.$inject=["RequesterService","serviceConstants","InsightsRequestService","InsightsServiceConfig","InsightsConstants","EnvironmentService","$q","$log","$cookies","CacheFactory"],t.default=u,e.exports=t.default},function(e,t,n){"use strict";function i(e){return function(t){return t&&e.isNative()&&!t.startsWith("http")?e.get("insights").staticBaseUrl+t:t}}Object.defineProperty(t,"__esModule",{value:!0}),i.$inject=["EnvironmentService"],t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e,t){return{restrict:"A",scope:{options:"=insightBackground"},link:function(n,i){var s=n.options||{},a=e(s.desktop),o=e(s.mobile),r=s.mobileBreakpoint||t.INSIGHT_UI.MOBILE_BREAKPOINT,l=void 0,c=function(){var e=$(window).width(),t=e>=r?a:o;t&&l!==t&&(l=t,i.css({"background-image":"url("+t+")"}))};$(window).on("resize",c),n.$on("$destroy",function(){$(window).off("resize",c)}),c()}}}Object.defineProperty(t,"__esModule",{value:!0}),i.$inject=["staticAbsoluteUrlFilter","InsightsConstants"],t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1053),a=i(s),o=n(1054),r=i(o);n(1055);var l={template:r.default,controller:a.default};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(65),a=i(s),o=n(64),r=i(o),l=n(13),c=i(l),u=n(0),d=i(u),h=n(1),_=i(h),g=function(){function e(t,n,i,s,a,o,r,l,c){(0,d.default)(this,e),this.InsightsService=t,this.InsightsConstants=n,this.InsightsEvents=n.EVENT_MAP,this.INTERACTION_EVENTS=n.INTERACTION_EVENTS,this.InsightsEventService=i,this.$anchorScroll=s,this.LocaleService=a,this.localeConstants=o,this.$scope=r,this.$translate=l,this.$timeout=c,this.insights=[],this.insightsQueue=[],this.requestCount=1e3,this.categories={},this.isLoading=!1,this.hasReachedEnd=!1,this.isModalOpen=!1,this.filterObj={localizedCategory:null,localizedProduct:null},this.selected={localizedCategory:null,localizedProduct:null},this.CATEGORY_ALL_CATEGORIES=this.$translate.instant("insights.select.category")}return(0,_.default)(e,[{key:"comparator",value:function(e,t){return null===t||angular.equals(e,t)}},{key:"handleEvent",value:function(e,t,n){switch(e){case this.InsightsEvents.OPEN_MODAL:this._openModal(n);break;case this.InsightsEvents.CLOSE_MODAL:this.onModalClose();break;case this.InsightsEvents.REMOVE_CARD:this._removeCard(n);break;case this.InsightsEvents.INSIGHT_LOADED:break;default:this.InsightsEventService.sendEvent(n,e,t)}}},{key:"_removeCard",value:function(e){var t=this.insights.indexOf(e);t>-1&&(this.insights.splice(t,1),this._invalidateDropdown()),this.insights.length||(this.errorMessage=this.$translate.instant("insights.noInsights"))}},{key:"_openModal",value:function(e){this.selectedInsight=e,this.isModalOpen=!0}},{key:"onModalClose",value:function(){this.isModalOpen=!1}},{key:"scrollToTopOfList",value:function(){this.$anchorScroll("insights-list")}},{key:"shouldThrottleLazyLoad",value:function(){return this.isLoading||0===this.insights.length||this.hasReachedEnd}},{key:"onLoadMore",value:function(){this.isLoading||this.hasReachedEnd||this._fetchInsights(!1)}},{key:"_fetchInsights",value:function(e){var t=this;if(!e)return void this.$scope.$apply(function(){t._dequeueInsights()});this.isLoading=!0;var n={interactionPoint:this.InsightsConstants.INTERACTION_POINTS.FEED,count:this.requestCount,audience:this.InsightsConstants.SESSION.AUDIENCE_CUSTOMER,requireSession:!0};this.InsightsService.getInsights(n).then(function(e){t.$timeout(function(){if(!e.insights||!e.insights.length)return t.hasReachedEnd=!0,void t._setErrorMessage("insights.noInsights",!1);t.insightsQueue=e.insights.concat(),e.insights&&e.insights.length&&t._dequeueInsights(),t.handleEvent(t.INTERACTION_EVENTS.RECEIVED,{insights:e.insights})},1e3)}).catch(function(){t._setErrorMessage("insights.serviceErrorShort",!0)}).finally(function(){t.isLoading=!1})}},{key:"_dequeueInsights",value:function(){var e=this,t=Math.min(this.InsightsConstants.FEED.DISPLAY_LIMIT,this.insightsQueue.length),n=this.insightsQueue.splice(0,t);this.insights=this.insights.concat(n),this._invalidateDropdown(),this.hasReachedEnd=!this.insightsQueue.length,this.insights.forEach(function(t){e.handleEvent(e.INTERACTION_EVENTS.VIEW,{},t)})}},{key:"_invalidateDropdown",value:function(){var e=this;this.categories={};var t=!0,n=!1,i=void 0;try{for(var s,o=(0,r.default)(this.insights);!(t=(s=o.next()).done);t=!0){var l=function(){var t=s.value,n=e._getDropdownTranslation(t.ic_filter_category),i=e._getDropdownTranslation(t.ic_filter_product);if(t.localizedCategory=n,t.localizedProduct=i,!n)return{v:void 0};n&&!e.categories[n]&&(e.categories[n]=[]),i&&void 0===e.categories[n].find(function(e){return e.value===i})&&e.categories[n].push({value:i})}();if("object"===(void 0===l?"undefined":(0,a.default)(l)))return l.v}}catch(e){n=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw i}}this.selectCategories=[{label:this.CATEGORY_ALL_CATEGORIES,value:this.CATEGORY_ALL_CATEGORIES}],this.selectCategories=this.selectCategories.concat((0,c.default)(this.categories).map(function(e){return{label:e,value:e}})),this.selected.localizedCategory=this.selectCategories[0].value}},{key:"onCategorySelect",value:function(){this.selected.localizedCategory===this.CATEGORY_ALL_CATEGORIES?this.filterObj.localizedCategory=null:this.filterObj.localizedCategory=this.selected.localizedCategory,this.preselectProductDropdown()}},{key:"onProductSelect",value:function(){this.filterObj.localizedProduct=this.selected.localizedProduct}},{key:"preselectProductDropdown",value:function(){this.selected.localizedProduct=null;var e=this.categories[this.filterObj.localizedCategory];e&&1===e.length&&(this.selected.localizedProduct=e[0].value),this.onProductSelect()}},{key:"_getDropdownTranslation",value:function(e){if(!e)return e;var t=e.split(";");return 1===t.length?t[0].trim():this.LocaleService.locale===this.localeConstants.LOCALES.FR_CA?t[1].trim():t[0].trim()}},{key:"_setErrorMessage",value:function(e,t){var n=this;this.$timeout(function(){n.serviceError=t,n.errorMessage=n.$translate.instant(e)},400)}},{key:"$onInit",value:function(){this._fetchInsights(!0)}}]),e}();g.$inject=["InsightsService","InsightsConstants","InsightsEventService","$anchorScroll","LocaleService","localeConstants","$scope","$translate","$timeout"],t.default=g,e.exports=t.default},function(e,t){e.exports='<section class="c-insights"> <tng-insight-loading-bar actionable-id="insights_loadingBar" is-loading="$ctrl.isLoading"></tng-insight-loading-bar> <div class="container"> <h1 class="heading--title">{{ \'insights.title\' | translate }}</h1> <div class="c-insights__filters" ng-if="$ctrl.insights.length"> <div class="grid__container"> <div class="grid__column--1of3"> <tng-select-autocomplete input-id="insights_selectOffer" name="insightsOfferDropDown" ng-model="$ctrl.selected.localizedCategory" options="$ctrl.selectCategories" option-label-key="label" option-value-key="value" on-select="$ctrl.onCategorySelect();" is-static="true"></tng-select-autocomplete> </div> <div class="grid__column--1of3" ng-if="$ctrl.filterObj.localizedCategory && $ctrl.categories[$ctrl.filterObj.localizedCategory].length"> <tng-select-autocomplete name="insightsAccountDropDown" input-id="insights_selectAccount" ng-model="$ctrl.selected.localizedProduct" options="$ctrl.categories[$ctrl.filterObj.localizedCategory]" option-label-key="value" option-value-key="value" on-select="$ctrl.onProductSelect()" is-static="true" placeholder="insights.select.subcategory"></tng-select-autocomplete> </div> </div> </div> <div class="c-error-message panel" ng-class="{ \'service-error\': $ctrl.serviceError }" ng-if="$ctrl.errorMessage"> <span>{{ $ctrl.errorMessage }}</span> </div> </div> <tng-lazy-loader should-throttle-callback="$ctrl.shouldThrottleLazyLoad()" on-bottom-reached="$ctrl.onLoadMore()"> <ul class="c-insights-list insights" id="insights-list"> <li ng-repeat="insight in $ctrl.insights | filter:$ctrl.filterObj:$ctrl.comparator track by $index"> <tng-insight insight="insight" on-event="$ctrl.handleEvent(action, properties, insight, $index);"> </tng-insight></li> </ul> </tng-lazy-loader> <div ng-if="$ctrl.hasReachedEnd && $ctrl.insights.length" style="text-align:center"> <p class="margin__all--rel2"><strong>{{ \'transactions.endOfTheList\' | translate }}</strong></p> <a class="btn btn--large btn--edit" href="" ng-click="$ctrl.scrollToTopOfList()" actionable-id="insights-to-top-of-feed"> {{ \'transactions.backToTheTop\' | translate }} </a> </div> </section> <tng-modal-insight ng-if="$ctrl.isModalOpen" insight="$ctrl.selectedInsight" on-event="$ctrl.handleEvent(action, properties, $ctrl.selectedInsight);"></tng-modal-insight> '},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(278),a=i(s),o=n(1057),r=i(o),l={template:r.default,controller:a.default,bindings:{insight:"<",onEvent:"&"}};t.default=l,e.exports=t.default},function(e,t){e.exports='<ng-include src="$ctrl.insight.cardUrl" onload="$ctrl.onInsightLoaded()"></ng-include> <div class="banner--internal-page" ng-if="$ctrl.cardLoadError"></div>'},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1059),a=i(s),o=n(1060),r=i(o);n(1061);var l={template:r.default,controller:a.default,bindings:{insights:"<"}};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i,s,o,r,l,c,u){(0,a.default)(this,e),this.InsightsService=t,this.InsightsConstants=n,this.InsightsEvents=n.EVENT_MAP,this.INTERACTION_EVENTS=n.INTERACTION_EVENTS,this.InsightsEventService=i,this.EnvironmentService=s,this.$log=o,this.$element=r,this.$timeout=l,this.$scope=c,this.$translate=u,this.currentSlide=1,this.insights=[],this.isLoading=!1,this.isMobilePhone=this.EnvironmentService.isPhone(),this.isOpen=!this.isMobilePhone,this.isModalOpen=!1,this.sliderInitialized=!1}return(0,r.default)(e,[{key:"removeInsight",value:function(e){var t=this,n=e;this.insights.splice(n,1),this.$timeout(function(){t.listElement.addClass("instant-slide"),t._reinitSlider(),t.$timeout(function(){if(t.insights.length>0){n%=t.insights.length,t.slider.goToSlide(n),t.currentSlide=n+1;var e=t.insights[n];e&&(t.isLightCard=e.isLightCard,t.handleEvent(t.INTERACTION_EVENTS.VIEW,{},e,n))}t.listElement.css({visibility:"visible"})},80)},10),this.$timeout(function(){t.listElement.removeClass("instant-slide")},200),this.insights.length||(this.listElement.parent().parent().remove(),this.isOpen=!1,this._hideDefaultCard(),this._setWarningMessage(this.$translate.instant("insights.noInsights"),!1))}},{key:"handleEvent",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;switch(e){case this.InsightsEvents.OPEN_MODAL:this._openModal(n);break;case this.InsightsEvents.CLOSE_MODAL:this.onModalClose();break;case this.InsightsEvents.REMOVE_CARD:this.removeInsight(i);break;case this.InsightsEvents.INSIGHT_LOADED:this._onInsightLoaded(n,t,i);break;default:this.InsightsEventService.sendEvent(n,e,t)}}},{key:"_openModal",value:function(e){this.selectedInsight=e,this.isModalOpen=!0}},{key:"onModalClose",value:function(){this.isModalOpen=!1}},{key:"_onInsightLoaded",value:function(e,t,n){e.isLightCard=t.isLightCard,this.currentSlide===n+1&&(this.isLightCard=e.isLightCard),0===n&&(this._initSlider(),this.isOpen=!this.isMobilePhone||this.InsightsService.openCarouselOnLaunch)}},{key:"$onInit",value:function(){var e=this;this._initComponents(),this.isLoading=!0,this.$timeout(function(){e.InsightsService.getInsights({audience:e.InsightsConstants.SESSION.AUDIENCE_CUSTOMER,requireSession:!0,count:7,interactionPoint:"ip_InsightsCarousel"}).then(function(t){e.insights=t.insights,e.$timeout(function(){if(!e.insights||!e.insights.length)return e._setWarningMessage(e.$translate.instant("insights.noInsights"),!1),e._hideDefaultCard(),void e._dismissCarousel()},1e3);try{e.handleEvent(e.INTERACTION_EVENTS.VIEW,{},e.insights[0],0),e.handleEvent(e.INTERACTION_EVENTS.RECEIVED,{insights:e.insights})}catch(e){}}).catch(function(){e._setWarningMessage(e.$translate.instant("insights.serviceErrorShort"),!0),e._hideDefaultCard(),e._dismissCarousel()}).finally(function(){e.isLoading=!1})},700)}},{key:"_dismissCarousel",value:function(){var e=this;this.$timeout(function(){e.isOpen=!1},200)}},{key:"toggleCarouselOpen",value:function(){this.isOpen=!this.isOpen,this.isMobilePhone&&(this.InsightsService.openCarouselOnLaunch=this.isOpen)}},{key:"_initComponents",value:function(){this.listElement.css({visibility:"hidden"}),this.listElement.addClass("bxslider")}},{key:"_hideDefaultCard",value:function(){this.defaultCardElement.css({visibility:"hidden"})}},{key:"_initSlider",value:function(){var e=this;if(!this.sliderInitialized){this.$log.debug("First insight loaded.. load slider"),this.sliderInitialized=!0;var t=function(){e.$scope.$apply(function(){e.isAnimating=!0})},n=function(t,n,i){i<0||e.$scope.$apply(function(){e.isAnimating=!1,e.$timeout(function(){e.currentSlide=i+1});var t=e.insights[i];e.handleEvent(e.INTERACTION_EVENTS.VIEW,{},t,i),e.isLightCard=t.isLightCard})};setTimeout(function(){e.slider=e.listElement.bxSlider({auto:!1,pager:!1,touchEnabled:e.insights.length>1,pause:6e3,speed:450,onSlideBefore:t,onSlideAfter:n}),e.listElement.css({visibility:"visible"}),e.defaultCardElement.css({display:"none"}),e.insights&&e.insights.length&&e.getDropDownElement.css({display:"block"})},50)}}},{key:"_reinitSlider",value:function(){this.sliderInitialized=!1,this.slider.destroySlider(),this._initSlider()}},{key:"_setWarningMessage",value:function(e,t){var n=this;this.$timeout(function(){n.warningMessage=e,n.serviceError=t},0)}},{key:"listElement",get:function(){return $(this.$element.find("ul")[0])}},{key:"defaultCardElement",get:function(){return $(this.$element.find("tng-insight-default")[0])}},{key:"getDropDownElement",get:function(){return $(this.$element.find("button.c-insights-carousel__toggle")[0])}}]),e}();l.$inject=["InsightsService","InsightsConstants","InsightsEventService","EnvironmentService","$log","$element","$timeout","$scope","$translate"],t.default=l,e.exports=t.default},function(e,t){e.exports='<section class="c-insights-carousel" ng-class="{ \'is-open\': $ctrl.isOpen, \'error\': $ctrl.serviceError }"> <span class="c-insights-carousel__warning" ng-if="!$ctrl.isLoading && !$ctrl.insights.length">{{$ctrl.warningMessage}}</span> <div ng-if="!$ctrl.isLoading && $ctrl.insights.length && !$ctrl.isOpen" class="c-insights-carousel__mobileHeader" ng-click="$ctrl.toggleCarouselOpen()"> <div class="c-insights-carousel__indicator"> {{ $ctrl.insights.length }} </div> <span class="c-insights-carousel__indicatorText"> {{ \'insights.newInsights\' | translate }} </span> </div> <button ng-if="$ctrl.insights.length" class="c-insights-carousel__toggle" ng-click="$ctrl.toggleCarouselOpen();" actionable-id="insights-toggle" ng-class="{ \'light\': !$ctrl.isLightCard }"> <span ng-class="$ctrl.isOpen ? \'icon-uparrow\' : \'icon-downarrow\'"></span> </button> <div class="c-insights-carousel__container insights" ng-class="{ \'is-hidden\': !$ctrl.isOpen, \'is-animating\': $ctrl.isAnimating }"> <div> <div actionable-id="insightsCarousel_indicator" ng-if="$ctrl.isOpen && $ctrl.sliderInitialized && $ctrl.insights.length" class="c-insights-carousel__indicator print-hide" ng-class="{ \'light\': !$ctrl.isLightCard, \'dark\': $ctrl.isLightCard }"> {{ $ctrl.currentSlide }} / {{ $ctrl.insights.length }} </div> <div> <ul style="position:absolute"> <li ng-repeat="insight in $ctrl.insights"><tng-insight insight="::insight" on-event="$ctrl.handleEvent (action, properties, insight, $index)"></tng-insight></li> </ul> </div> </div> <div> <tng-insight-default on-event="$ctrl.handleEvent(action, properties, {});"></tng-insight-default> </div> </div> </section> <tng-modal-insight ng-if="$ctrl.isModalOpen" insight="$ctrl.selectedInsight" on-event="$ctrl.handleEvent(action, properties, $ctrl.selectedInsight);"></tng-modal-insight> '},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1063),a=i(s),o=n(1064),r=i(o),l={template:r.default,controller:a.default,bindings:{onEvent:"&"}};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t){(0,a.default)(this,e),this.InsightsService=t}return(0,r.default)(e,[{key:"handleEvent",value:function(e,t){this.onEvent({action:e,properties:t})}},{key:"$onInit",value:function(){this.card={cardUrl:this.InsightsService.defaultCardUrl}}}]),e}();l.$inject=["InsightsService"],t.default=l,e.exports=t.default},function(e,t){e.exports='<div class="banner--internal-page"> <div class="banner--internal-page__container"> <div class="c-insights-default-card__container"> <span class="c-insights-default-card__container__loader"></span> <span class="c-insights-default-card__container__label">{{ \'insights.loading\' | translate }}</span> </div> </div> </div>'},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(278),a=i(s),o=n(1066),r=i(o),l={template:r.default,controller:a.default,bindings:{insight:"<",onEvent:"&"}};t.default=l,e.exports=t.default},function(e,t){e.exports='<ng-include src="$ctrl.insight.modalUrl" onload="$ctrl.onModalLoaded()"></ng-include> '},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1068),a=i(s),o=n(1069),r=i(o),l={template:r.default,controller:a.default,bindings:{isLoading:"<"}};t.default=l,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(i),a=function e(){(0,s.default)(this,e)};a.$inject=[],t.default=a,e.exports=t.default},function(e,t){e.exports='<div class="c-insights-loading-bar"> <div class="c-insights-loading-bar__container" ng-class="{ \'hidden\': !$ctrl.isLoading }"> <span class="c-insights-loading-bar__container__loader"></span> <span class="c-insights-loading-bar__container__label">{{ \'insights.loading\' | translate }}</span> </div> </div> '},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1071),a=i(s),o=n(1072),r=i(o),l={template:r.default,controller:a.default,bindings:{insight:"<"}};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i,s,o,r,l){(0,a.default)(this,e),this.InsightsService=t,this.InsightsEvents=n.EVENT_MAP,this.sessionConstants=n.SESSION,this.INTERACTION_EVENTS=n.INTERACTION_EVENTS,this.InsightsEventService=i,this.InsightsSessionService=s,this.EventBusService=o,this.localeConstants=r,this.$scope=l,this.isModalOpen=!1}return(0,r.default)(e,[{key:"handleEvent",value:function(e,t,n){switch(e){case this.InsightsEvents.OPEN_MODAL:this._openModal(n);break;case this.InsightsEvents.CLOSE_MODAL:this.onModalClose();break;case this.InsightsEvents.INSIGHT_LOADED:break;default:this.InsightsEventService.sendEvent(n,e,t)}}},{key:"_openModal",value:function(e){this.selectedInsight=e,this.isModalOpen=!0}},{key:"onModalClose",value:function(){this.isModalOpen=!1}},{key:"$onChanges",value:function(e){var t=e.insight;if(t&&t.currentValue){var n=t.currentValue;this.handleEvent(this.INTERACTION_EVENTS.VIEW,{},n);var i=this.InsightsSessionService.getSession();i.audience&&i.audience===this.sessionConstants.AUDIENCE_CUSTOMER&&this.handleEvent(this.INTERACTION_EVENTS.RECEIVED,{insights:[n]},void 0)}}}]),e}();l.$inject=["InsightsService","InsightsConstants","InsightsEventService","InsightsSessionService","EventBusService","localeConstants","$scope"],t.default=l,e.exports=t.default},function(e,t){e.exports='<tng-insight insight="$ctrl.insight" on-event="$ctrl.handleEvent (action, properties, $ctrl.insight)"></tng-insight> <tng-modal-insight ng-if="$ctrl.isModalOpen" insight="$ctrl.selectedInsight" on-event="$ctrl.handleEvent(action, properties, $ctrl.selectedInsight)"></tng-modal-insight>'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1074),s=function(e){return e&&e.__esModule?e:{default:e}}(i),a=angular.module("tangerine.comingSoon.module",[]).component("comingSoon",s.default);t.default=a,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1075),a=i(s),o=n(1076),r=i(o);n(1077);var l={template:r.default,controller:a.default};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i,s,o){(0,a.default)(this,e),this.$window=t,this.$interpolate=n,this.environmentService=i,this.localeService=s,this.loginConstants=o}return(0,r.default)(e,[{key:"handleBack",value:function(){this.$window.history.back()}},{key:"goToTangerineSite",value:function(){var e=this.$interpolate("https://www.tangerine.ca/{{locale}}/index.html"),t=e({locale:this.localeService.localeDisplay.toLowerCase()});this.$window.open(t,"_self")}}]),e}();l.$inject=["$window","$interpolate","EnvironmentService","LocaleService","loginConstants"],t.default=l,e.exports=t.default},function(e,t){e.exports=' <style>.banner--internal-page{min-height:300px;color:#fff;text-align:center;border:0;padding:50px;display:block;margin:auto;margin:0;margin-right:auto;margin-left:auto}.banner--internal-page__icon,[class*=" banner--internal-page__icon--"],[class^=banner--internal-page__icon--]{font-size:3.5em;border-radius:50px;display:inline-flex;float:left;color:#fff;background-color:#f58426;font-weight:400;font-style:normal;font-stretch:normal;float:none;width:4.5rem}.banner--internal-page__icon__icon,[class*=" banner--internal-page__icon__icon--"],[class^=banner--internal-page__icon__icon--]{background-color:#f58426;color:#fff;display:inline-block}.banner--internal-page__icon__title,[class*=" banner--internal-page__icon__title--"],[class^=banner--internal-page__icon__title--]{color:#fff}.banner--internal-page__icon__info,[class*=" banner--internal-page__icon__info--"],[class^=banner--internal-page__icon__info--]{color:#fff}.banner--internal-page__icon__button::after,[class*=" banner--internal-page__icon__button--"]::after,[class^=banner--internal-page__icon__button--]::after{clear:both;content:"";display:block}.banner--internal-page__icon h1,.banner--internal-page__icon h2,.banner--internal-page__icon h3,.banner--internal-page__icon h4,.banner--internal-page__icon h5,.banner--internal-page__icon h6,.banner--internal-page__icon p,[class*=" banner--internal-page__icon--"] h1,[class*=" banner--internal-page__icon--"] h2,[class*=" banner--internal-page__icon--"] h3,[class*=" banner--internal-page__icon--"] h4,[class*=" banner--internal-page__icon--"] h5,[class*=" banner--internal-page__icon--"] h6,[class*=" banner--internal-page__icon--"] p,[class^=banner--internal-page__icon--] h1,[class^=banner--internal-page__icon--] h2,[class^=banner--internal-page__icon--] h3,[class^=banner--internal-page__icon--] h4,[class^=banner--internal-page__icon--] h5,[class^=banner--internal-page__icon--] h6,[class^=banner--internal-page__icon--] p{color:#fff}@media (max-width:1279px){.banner--internal-page__icon,[class*=" banner--internal-page__icon--"],[class^=banner--internal-page__icon--]{width:3.5rem}}@media (max-width:479px){.banner--internal-page__icon,[class*=" banner--internal-page__icon--"],[class^=banner--internal-page__icon--]{width:4.5rem}}.banner--internal-page__title,[class*=" banner--internal-page__title--"],[class^=banner--internal-page__title--]{font-family:TangerineCircular,Arial,Helvetica,sans-serif;font-size:70px;font-size:4.375rem;font-weight:700;font-style:normal;font-stretch:normal;line-height:1.08}@media (min-width:480px) and (max-width:1279px){.banner--internal-page__title,[class*=" banner--internal-page__title--"],[class^=banner--internal-page__title--]{font-size:64px;font-size:4rem}}@media (max-width:375px){.banner--internal-page__title,[class*=" banner--internal-page__title--"],[class^=banner--internal-page__title--]{font-size:48px;font-size:3rem;word-wrap:break-word}}@media (max-width:375px) and (min-width:480px) and (max-width:1279px){.banner--internal-page__title,[class*=" banner--internal-page__title--"],[class^=banner--internal-page__title--]{font-size:44px;font-size:2.75rem}}.banner--internal-page__info,[class*=" banner--internal-page__info--"],[class^=banner--internal-page__info--]{padding:20px 0}.banner--internal-page__button-container,[class*=" banner--internal-page__button-container--"],[class^=banner--internal-page__button-container--]{position:absolute;bottom:20px;left:20px}.banner--internal-page__button,[class*=" banner--internal-page__button--"],[class^=banner--internal-page__button--]{font-size:18px;font-size:1.125rem;display:inline-block;border-radius:6px;font-weight:700;line-height:1;text-align:center;padding:.5em .75em;width:auto;background-color:#f58426;color:#fff;width:auto;padding:.5em .75em;float:none;margin-left:0!important}@media (min-width:480px) and (max-width:1279px){.banner--internal-page__button,[class*=" banner--internal-page__button--"],[class^=banner--internal-page__button--]{font-size:14px;font-size:.875rem}}.banner--internal-page__button:active,.banner--internal-page__button:hover,[class*=" banner--internal-page__button--"]:active,[class*=" banner--internal-page__button--"]:hover,[class^=banner--internal-page__button--]:active,[class^=banner--internal-page__button--]:hover{opacity:.9}.banner--internal-page__button.disabled,.banner--internal-page__button[disabled],[class*=" banner--internal-page__button--"].disabled,[class*=" banner--internal-page__button--"][disabled],[class^=banner--internal-page__button--].disabled,[class^=banner--internal-page__button--][disabled]{opacity:.5}.btn__row>.banner--internal-page__button+.banner--internal-page__button,.btn__row>.banner--internal-page__button+[class*=" banner--internal-page__button--"],.btn__row>.banner--internal-page__button+[class^=banner--internal-page__button--],.btn__row>[class*=" banner--internal-page__button--"]+.banner--internal-page__button,.btn__row>[class*=" banner--internal-page__button--"]+[class*=" banner--internal-page__button--"],.btn__row>[class*=" banner--internal-page__button--"]+[class^=banner--internal-page__button--],.btn__row>[class^=banner--internal-page__button--]+.banner--internal-page__button,.btn__row>[class^=banner--internal-page__button--]+[class*=" banner--internal-page__button--"],.btn__row>[class^=banner--internal-page__button--]+[class^=banner--internal-page__button--]{margin-left:.625em}.btn__row--wide>.banner--internal-page__button+.banner--internal-page__button,.btn__row--wide>.banner--internal-page__button+[class*=" banner--internal-page__button--"],.btn__row--wide>.banner--internal-page__button+[class^=banner--internal-page__button--],.btn__row--wide>[class*=" banner--internal-page__button--"]+.banner--internal-page__button,.btn__row--wide>[class*=" banner--internal-page__button--"]+[class*=" banner--internal-page__button--"],.btn__row--wide>[class*=" banner--internal-page__button--"]+[class^=banner--internal-page__button--],.btn__row--wide>[class^=banner--internal-page__button--]+.banner--internal-page__button,.btn__row--wide>[class^=banner--internal-page__button--]+[class*=" banner--internal-page__button--"],.btn__row--wide>[class^=banner--internal-page__button--]+[class^=banner--internal-page__button--]{margin-left:1.25em}.banner--internal-page__button::after,[class*=" banner--internal-page__button--"]::after,[class^=banner--internal-page__button--]::after{clear:both;content:"";display:block}.banner--internal-page.backgroundImg{background-repeat:no-repeat;-webkit-background-size:cover;-moz-background-size:cover;-o-background-size:cover;background-size:cover;background-position:center}@media (max-width:480px){.banner--internal-page{width:auto}}</style> <div> <div class="banner--internal-page backgroundImg dynamic c-coming-soon__banner"> <div class="banner--internal-page__container"><span class="banner--internal-page__icon dynamic"></span> <div translate-cloak class="banner--internal-page__title margin__t--fix2 dynamic" translate>{{ ::\'comingSoon.title\' }}</div> <p class="banner--internal-page__info dynamic"></p> </div> </div> <div class="c-coming-soon__directive"> <br> <p translate-cloak translate>{{ ::\'comingSoon.body\' }} <br> </p><p translate-cloak translate>{{ ::\'comingSoon.link\' }}</p> <br> <button actionable-id="comming-soon-back_btn" class="btn" ng-click="$ctrl.handleBack()" type="submit"> {{ \'comingSoon.button\' | translate }} </button> </div> </div> '},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1079),a=i(s),o=n(1083),r=i(o),l=n(1087),c=i(l),u=n(1091),d=i(u),h=n(1095),_=i(h),g=n(1099),S=i(g),f=n(1103),v=i(f),E=n(1110),p=i(E),T=n(279),m=i(T),C=n(1114),A=i(C),I=n(1115),O=i(I),N=angular.module("budgetToolModule",[]).component("budgetInitial",a.default).component("budgetIncome",r.default).component("budgetExpense",c.default).component("budgetSavings",d.default).component("budgetSummary",_.default).component("budgetTool",p.default).component("budgetTransactionList",S.default).component("budgetAddCategory",v.default).service("budgetToolService",m.default).service("budgetToolFlowService",A.default).constant("budgetToolConstants",O.default);t.default=N,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1080),a=i(s),o=n(1081),r=i(o);n(1082);var l={controller:a.default,template:r.default};t.default=l,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(i),a=function e(t,n,i,a){(0,s.default)(this,e),this.$log=t,this.$window=n,this.$state=i,this.flowService=a};a.$inject=["$log","$window","$state","budgetToolFlowService"],t.default=a,e.exports=t.default},function(e,t){e.exports='<div class="c-budget-initial"> <div class="c-budget-initial__banner"> <h4 id="head_title">{{ ::\'budget.budgetInitial.head\' | translate }}</h4> <div> <div class="c-budget-initial__section"> <p class="c-budget-initial__icon" id="lts_icon"><tng-category-icon icon="icon-uncategorized-income" color="#f58426" size="70"></tng-category-icon></p> <p class="c-budget-initial__title-lts" id="lts_title">{{ ::\'budget.budgetInitial.lts\' | translate }}</p> </div> <div class="c-budget-initial__section"><span class="c-budget-initial__separator">=</span> </div> <div class="c-budget-initial__section"> <p class="c-budget-initial__icon" id="income_icon"><tng-category-icon icon="icon-cheque" color="#7B7B7B" size="70"></tng-category-icon></p> <p class="c-budget-initial__title" id="income_title">{{ ::\'budget.budgetInitial.income\' | translate }}</p> </div> <div class="c-budget-initial__section"><span class="c-budget-initial__separator">&#8211;</span></div> <div class="c-budget-initial__section"> <p class="c-budget-initial__icon" id="expense_icon"><tng-category-icon icon="icon-fines" color="#7B7B7B" size="70"></tng-category-icon></p> <p class="c-budget-initial__title" id="expense_title">{{ ::\'budget.budgetInitial.expense\' | translate }}</p> </div> <div class="c-budget-initial__section"><span class="c-budget-initial__separator">&#8211;</span> </div> <div class="c-budget-initial__section"> <p class="c-budget-initial__icon" id="savings_icon"><tng-category-icon icon="icon-savings" color="#7B7B7B" size="70"></tng-category-icon> </p><p class="c-budget-initial__title" id="savings_title">{{ ::\'budget.budgetInitial.savings\' | translate }}</p> </div> </div> </div> </div> <div class="c-quick-boxaccess"> <div class="c-quick-boxaccess__content"> <div class="grid__container"> <div id="left_card" class="panel c-quick-boxaccess__grid-item"> <div> <div class="top_box"> <p id="amount_text_large">{{ ::\'budget.budgetInitialLeftCard.amount\' | translate }} <span id="left_card_heading" class="card_main_title">{{ ::\'budget.budgetInitialLeftCard.main_title\' | translate }}</span> </p> <img id="left_image" class="left_image" ng-src="{{::\'assets/images/Stay_On_Track_Of_Your_Finances.png\'}}"> </div> </div> <div> <div class="description_box"> <p id="left_card_title" class="card_text_title">{{ ::\'budget.budgetInitialLeftCard.text_title\' | translate }}</p> <p id="left_card_description" class="card_text">{{ ::\'budget.budgetInitialLeftCard.description\' | translate }}</p> </div> </div> </div> <div id="center_card" class="panel c-quick-boxaccess__grid-item"> <div class="image_box"> <img id="center_image" class="center_image" ng-src="{{::\'assets/images/We_Do_The_Heavy_Lifting.png\'}}"> </div> <div class="description_box"> <p id="center_card_title" class="card_text_title">{{ ::\'budget.budgetInitialCenterCard.text_title\' | translate }}</p> <p id="center_card_description" class="card_text">{{ ::\'budget.budgetInitialCenterCard.description\' | translate }}</p> </div> </div> <div id="right_card" class="panel c-quick-boxaccess__grid-item"> <div class="image_box"> <p id="headline"><span class="card_main_subtext">{{ ::\'budget.budgetInitialRightCard.main_title\' | translate }} <span id="amount_text">{{ ::\'budget.budgetInitialRightCard.amount\' | translate }}</span> {{ ::\'budget.budgetInitialRightCard.sub_text\' | translate }}</span></p> <img id="right_image" class="right_image" ng-src="{{::\'assets/images/Helpful_Actionable_Insights.png\'}}"> </div> <div class="description_box"> <p id="right_card_title" class="card_text_title">{{ ::\'budget.budgetInitialRightCard.text_title\' | translate }}</p> <p id="right_card_description" class="card_text">{{ ::\'budget.budgetInitialRightCard.description\' | translate }}</p> </div> </div> </div> </div> </div>'},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1084),a=i(s),o=n(1085),r=i(o);n(1086);var l={controller:a.default,require:{parentCtrl:"^budgetTool"},template:r.default,bindings:{income:"<",isLoading:"<"}};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),a=i(s),o=n(0),r=i(o),l=n(1),c=i(l),u=function(){function e(t,n,i,s,a){(0,r.default)(this,e),this.$log=t,this.$state=i,this.$window=n,this.budgetToolService=s,this.localeService=a}return(0,c.default)(e,[{key:"$onInit",value:function(){this.isSelectedCategory=!1,this.isAddCategory=!1,this.transactions=[]}},{key:"addCategory",value:function(){this.isAddCategory=!0,this.parentCtrl.showNav=!1}},{key:"selectCategory",value:function(e){var t=this;this.selectedCategory=e,this.isSelectedCategory=!0,this.parentCtrl.showNav=!1,this.isFetching=!0,this.initAmount=e.amount,this.budgetToolService.getBudgetTransactions(e.category_id).then(function(e){t.budgetToolService.getAccounts().then(function(n){var i=n.accounts;t.isFetching=!1,t.transactions=t.extendTransactionsWithAccountDetails(e.transactions,i,[])},function(e){t.isFetching=!1,t.$log("Error:"+e)})},function(e){t.isFetching=!1,t.transactions=[],t.$log("Error:"+e)})}},{key:"onUnselectCategory",value:function(){this.selectedCategory=null,this.isSelectedCategory=!1,this.parentCtrl.showNav=!0,this.isAddCategory=!1}},{key:"extendTransactionsWithAccountDetails",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Array.isArray(t)&&Array.isArray(e)&&0!==t.length?e.map(function(e){return(0,a.default)(e,{account:t.concat(n).find(function(t){if(t.number||t.account_number){var n=t.number?t.number.toLowerCase():t.account_number.toLowerCase();return e&&e.from_account?n===e.from_account.number:n===e.account_id}})})}):e}}]),e}();u.$inject=["$log","$window","$state","budgetToolService","LocaleService"],t.default=u,e.exports=t.default},function(e,t){e.exports='<div class="c-income-page"> <div class="header-container"> <h2 class="heading--title">{{ ::\'budget.budgetIncome.avg_income\' | translate }}</h2> <h2 class="heading--amount">{{$ctrl.income.average_amount | currency}}</h2> <div ng-if="!$ctrl.isSelectedCategory" class="income-desc margin__t--fix2" ng-bind-html="\'budget.budgetIncome.desc\' | translate"></div> </div> <div class="c-income-categories-list" ng-if="!$ctrl.isSelectedCategory"> <div ng-repeat="income in $ctrl.income.data track by income.category_id | limitTo: $ctrl.numberOfVisibleCategories"> <div class="c-income-categories-list__panel panel" ng-click="$ctrl.selectCategory(income)"> <a href="" class="c-income-categories-list__link padding__lr--rel2"> <div class="c-income-categories-list__name"><span class="{{income.category_name}} small">{{income.category_name}}</span></div> <div class="c-income-categories-list__amount"><span>+ </span>{{income.amount | currency}}</div> </a> </div> </div> <div class="c-budget-category-add panel" ng-click="$ctrl.addCategory()" ng-if="$ctrl.isLoading === true"> <span class="icon-plus large"> <span class="c-budget-category-add__adding" style="padding-left:0">{{ ::\'budget.budgetIncome.add_category\' | translate }} </span> </span> </div> </div> </div> <div> <budget-transaction-list ng-if="$ctrl.isSelectedCategory && $ctrl.isAddCategory === false" category="$ctrl.selectedCategory" transactions="$ctrl.transactions" category-list="$ctrl.parentCtrl.budgetDetails.income_data.data" on-close-details="$ctrl.onUnselectCategory()" is-fetching="$ctrl.isFetching" is-income="true"> </budget-transaction-list> </div> <div> <budget-add-category ng-if="$ctrl.isAddCategory && $ctrl.isSelectedCategory === false" on-close-details="$ctrl.onUnselectCategory()" is-fetching="$ctrl.isFetching" category-list="$ctrl.parentCtrl.budgetDetails.income_data.data" header-title="\'income\'"> </budget-add-category> </div> '},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1088),a=i(s),o=n(1089),r=i(o);n(1090);var l={controller:a.default,require:{parentCtrl:"^budgetTool"},template:r.default,bindings:{expense:"<",isLoading:"<"}};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),a=i(s),o=n(0),r=i(o),l=n(1),c=i(l),u=function(){function e(t,n,i,s,a){(0,r.default)(this,e),this.$log=t,this.$state=i,this.$window=n,this.budgetToolService=s,this.localeService=a}return(0,c.default)(e,[{key:"$onInit",value:function(){this.isSelectedCategory=!1,this.transactions=[],this.isAddCategory=!1}},{key:"addCategory",value:function(){this.isAddCategory=!0,this.parentCtrl.showNav=!1}},{key:"selectCategory",value:function(e){var t=this;this.selectedCategory=e,this.isSelectedCategory=!0,this.parentCtrl.showNav=!1,this.isFetching=!0,this.initAmount=e.amount,this.budgetToolService.getBudgetTransactions(e.category_id).then(function(e){t.budgetToolService.getAccounts().then(function(n){var i=n.accounts;t.isFetching=!1,t.transactions=t.extendTransactionsWithAccountDetails(e.transactions,i,[])},function(e){t.isFetching=!1,t.$log("Error:"+e)})},function(e){t.isFetching=!1,t.transactions=[],t.$log("Error:"+e)})}},{key:"onUnselectCategory",value:function(){this.selectedCategory=null,this.isSelectedCategory=!1,this.parentCtrl.showNav=!0,this.isAddCategory=!1}},{key:"extendTransactionsWithAccountDetails",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Array.isArray(t)&&Array.isArray(e)&&0!==t.length?e.map(function(e){return(0,a.default)(e,{account:t.concat(n).find(function(t){if(t.number||t.account_number){var n=t.number?t.number.toLowerCase():t.account_number.toLowerCase();return e&&e.from_account?n===e.from_account.number:n===e.account_id}})})}):e}}]),e}();u.$inject=["$log","$window","$state","budgetToolService","LocaleService"],t.default=u,e.exports=t.default},function(e,t){e.exports='<div class="c-expense-page"> <div class="header-container"> <h2 class="heading--title">{{::\'budget.budgetExpense.avg_expense\' | translate }}</h2> <h2 class="heading--amount">{{$ctrl.expense.average_amount | currency}}</h2> <div ng-if="!$ctrl.isSelectedCategory" class="expense-desc margin__t--fix2" ng-bind-html="\'budget.budgetExpense.desc\' | translate"></div> </div> <div class="c-expense-categories-list" ng-if="!$ctrl.isSelectedCategory"> <div ng-repeat="expense in $ctrl.expense.data track by expense.category_id | limitTo: $ctrl.numberOfVisibleCategories"> <div class="c-expense-categories-list__panel panel" ng-click="$ctrl.selectCategory(expense)"> <a href="" class="c-expense-categories-list__link padding__lr--rel2"> <div class="c-expense-categories-list__name"><span class="{{expense.category_name}} small">{{expense.category_name}}</span></div> <div class="c-expense-categories-list__amount">{{expense.amount | currency}}</div> </a> </div> </div> <div class="c-budget-category-add panel" ng-click="$ctrl.addCategory()" ng-if="$ctrl.isLoading === true"> <span class="icon-plus large"> <span class="c-budget-category-add__adding" style="padding-left:0">{{ ::\'budget.budgetIncome.add_category\' | translate }} </span> </span> </div> </div> <div ng-if="!$ctrl.isSelectedCategory" class="footer-container"> <div class="expense-foot" ng-bind-html="\'budget.budgetExpense.bottom\' | translate"> </div> </div> </div> <div> <budget-transaction-list ng-if="$ctrl.isSelectedCategory && $ctrl.isAddCategory === false" category="$ctrl.selectedCategory" transactions="$ctrl.transactions" category-list="$ctrl.parentCtrl.budgetDetails.expense_data.data" on-close-details="$ctrl.onUnselectCategory()" is-fetching="$ctrl.isFetching"> </budget-transaction-list> </div> <div> <budget-add-category ng-if="$ctrl.isAddCategory && $ctrl.isSelectedCategory === false" category-list="$ctrl.parentCtrl.budgetDetails.expense_data.data" on-close-details="$ctrl.onUnselectCategory()" is-fetching="$ctrl.isFetching" header-title="\'expense\'"> </budget-add-category> </div> '},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1092),a=i(s),o=n(1093),r=i(o);n(1094);var l={controller:a.default,require:{parentCtrl:"^budgetTool"},template:r.default,bindings:{savings:"<",isLoading:"<"}};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),a=i(s),o=n(0),r=i(o),l=n(1),c=i(l),u=function(){function e(t,n,i,s,a){(0,r.default)(this,e),this.$log=t,this.$window=n,this.$state=i,this.budgetToolService=s,this.localeService=a}return(0,c.default)(e,[{key:"$onInit",value:function(){this.isSelectedCategory=!1,this.transactions=[],this.isAddCategory=!1}},{key:"addCategory",value:function(){this.isAddCategory=!0,this.parentCtrl.showNav=!1}},{key:"selectCategory",value:function(e){var t=this;this.selectedCategory=e,this.isSelectedCategory=!0,this.parentCtrl.showNav=!1,this.isFetching=!0,this.budgetToolService.getBudgetTransactions(e.category_id).then(function(e){t.budgetToolService.getAccounts().then(function(n){var i=n.accounts;t.isFetching=!1,t.transactions=t.extendTransactionsWithAccountDetails(e.transactions,i,[]),t.convertAccountNames()},function(e){t.isFetching=!1,t.$log("Error:"+e)})},function(e){t.isFetching=!1,t.transactions=[],t.$log("Error:"+e)})}},{key:"onUnselectCategory",value:function(){this.selectedCategory=null,this.isSelectedCategory=!1,this.parentCtrl.showNav=!0,this.isAddCategory=!1}},{key:"extendTransactionsWithAccountDetails",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Array.isArray(t)&&Array.isArray(e)&&0!==t.length?e.map(function(e){return(0,a.default)(e,{account:t.concat(n).find(function(t){if(t.number||t.account_number){var n=t.number?t.number.toLowerCase():t.account_number.toLowerCase();return e&&e.from_account?n===e.from_account.number:n===e.account_id}})})}):e}}]),e}();u.$inject=["$log","$window","$state","budgetToolService","LocaleService"],t.default=u,e.exports=t.default},function(e,t){e.exports='<div class="c-savings-page"> <div class="header-container"> <h2 class="heading--title">{{::\'budget.budgetSavings.avg_savings\' | translate }}</h2> <h2 class="heading--amount">{{$ctrl.savings.average_amount | currency}}</h2> <div ng-if="!$ctrl.isSelectedCategory" class="savings-desc margin__t--fix2" ng-bind-html="\'budget.budgetSavings.desc\' | translate"></div> </div> <div class="c-savings-categories-list" ng-if="!$ctrl.isSelectedCategory"> <div ng-repeat="savings in $ctrl.savings.data track by savings.category_id | limitTo: $ctrl.numberOfVisibleCategories"> <div class="c-savings-categories-list__panel panel" ng-click="$ctrl.selectCategory(savings)"> <a href="" class="c-savings-categories-list__link padding__lr--rel2"> <div class="c-savings-categories-list__name"><span class="{{savings.category_name}} small">{{savings.category_name}}</span></div> <div class="c-savings-categories-list__amount">{{savings.amount | currency}}</div> </a> </div> </div> <div class="c-budget-category-add panel" ng-click="$ctrl.addCategory()" ng-if="$ctrl.isLoading === true"> <span class="icon-plus large"> <span class="c-budget-category-add__adding" style="padding-left:0">{{ ::\'budget.budgetIncome.add_category\' | translate }} </span> </span> </div> </div> </div> <div> <budget-transaction-list ng-if="$ctrl.isSelectedCategory && $ctrl.isAddCategory === false" category="$ctrl.selectedCategory" transactions="$ctrl.transactions" category-list="$ctrl.parentCtrl.budgetDetails.savings_data.data" on-close-details="$ctrl.onUnselectCategory()" is-fetching="$ctrl.isFetching"> </budget-transaction-list> </div> <div> <budget-add-category ng-if="$ctrl.isAddCategory && $ctrl.isSelectedCategory === false" category-list="$ctrl.parentCtrl.budgetDetails.savings_data.data" on-close-details="$ctrl.onUnselectCategory()" is-fetching="$ctrl.isFetching" header-title="\'savings\'"> </budget-add-category> </div>'},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1096),a=i(s),o=n(1097),r=i(o);n(1098);var l={controller:a.default,template:r.default,bindings:{summary:"<"}};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n){(0,a.default)(this,e),this.$log=t,this.$window=n}return(0,r.default)(e,[{key:"$onInit",value:function(){}}]),e}();l.$inject=["$log","$window"],t.default=l,e.exports=t.default},function(e,t){e.exports='<div class="c-summary-page"> <div class="header-container"> <h2 class="heading--title">{{::\'budget.budgetSummary.summary_title\' | translate }}</h2> <h2 class="heading--amount">{{$ctrl.summary.leftToSpend | currency}}</h2> </div> <div class="c-summary-categories-list"> <div class="c-summary-categories-list__panel panel"> <a class="c-summary-categories-list__link padding__lr--rel2"> <div class="c-summary-categories-list__icon"><span class="{{summary.icon}} large"></span></div> <div class="c-summary-categories-list__name"><span class="{{summary.categoryName}} small">{{::\'budget.budgetSummary.inc\' | translate }}</span></div> <div class="c-summary-categories-list__amount">{{$ctrl.summary.avgIncome | currency}}</div> </a> </div> <div class="c-summary-categories-list__panel panel"> <a class="c-summary-categories-list__link padding__lr--rel2"> <div class="c-summary-categories-list__icon"><span class="{{summary.icon}} large"></span></div> <div class="c-summary-categories-list__name"><span class="{{summary.categoryName}} small">{{::\'budget.budgetSummary.exp\' | translate }}</span></div> <div class="c-summary-categories-list__amount"><span>- </span>{{$ctrl.summary.avgExpense | currency}}</div> </a> </div> <div class="c-summary-categories-list__panel panel"> <a class="c-summary-categories-list__link padding__lr--rel2"> <div class="c-summary-categories-list__icon"><span class="{{summary.icon}} large"></span></div> <div class="c-summary-categories-list__name"><span class="{{summary.categoryName}} small">{{::\'budget.budgetSummary.sav\' | translate }}</span></div> <div class="c-summary-categories-list__amount"><span>- </span>{{$ctrl.summary.avgSavings | currency}}</div> </a> </div> <div class="c-summary-categories-list__panel panel"> <a class="c-summary-categories-list__link padding__lr--rel2"> <div class="c-summary-categories-list__icon"><span class="{{summary.icon}} large"></span></div> <div class="c-summary-categories-list__name"><span class="{{summary.categoryName}} small">{{::\'budget.budgetSummary.lts\' | translate }}</span></div> <div class="c-summary-categories-list__amountcolour"><span>= </span>{{$ctrl.summary.leftToSpend | currency}}</div> </a> </div> </div> <div class="footer-container"> <h2 class="footer--title">{{::\'budget.budgetSummary.desc_title\' | translate }}</h2> <div class="summary-foot margin__t--fix2" ng-bind-html="\'budget.budgetSummary.desc\' | translate"> </div> </div> </div> '},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1100),a=i(s),o=n(1101),r=i(o);n(1102);var l={controller:a.default,require:{parentCtrl:"^budgetTool"},template:r.default,bindings:{category:"<",onCloseDetails:"&",isIncome:"<",categoryList:"=",transactions:"<",isFetching:"<",shouldDisplayOnMobile:"<"}};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i,s,o,r,l,c){(0,a.default)(this,e),this.$log=t,this.$state=i,this.$window=n,this.$anchorScroll=s,this.$location=o,this.budgetToolConstants=l,this.budgetToolService=r,this.ACCOUNT_TYPES=c.ACCOUNT_TYPES}return(0,r.default)(e,[{key:"$onInit",value:function(){this.header=this.budgetToolConstants.BudgetToolConstants.BUDGET_TOOL_TRANSACTION_HEADER.budgetTransactionHeader,this.amountType=this.budgetToolConstants.BudgetToolConstants.BUDGET_TOOL_TRANSACTION_AMOUNT.AMOUNT_TYPE,this.estimateDisabled=!1,this.category.estimated_amount>0||(this.estimateDisabled=!0),this.savedDisabled=!1,this.category.saved_amount>0||(this.savedDisabled=!0),this.category.amount===this.category.saved_amount&&!1===this.parentCtrl.budgetDetails.is_preview?(this.budgetAmountOption=this.budgetToolConstants.BudgetToolConstants.BUDGET_TOOL_TRANSACTION_AMOUNT.AMOUNT_TYPE.SAVED,this.allowAmountReset=!0):this.category.amount===this.category.estimated_amount?(this.budgetAmountOption=this.budgetToolConstants.BudgetToolConstants.BUDGET_TOOL_TRANSACTION_AMOUNT.AMOUNT_TYPE.ESTIMATE,this.allowAmountReset=!0):(this.budgetAmountOption=this.budgetToolConstants.BudgetToolConstants.BUDGET_TOOL_TRANSACTION_AMOUNT.AMOUNT_TYPE.CUSTOM,this.allowAmountReset=!1),this.amount=this.category.amount,this.dateFieldLabel="transaction_date",this.maxAmount=1e6,this.showRequired=!1,this.showAmountInvalid=!1,this.showAmountInvalidMax=!1,this.ignoreValidation=!1,this.isAmountFocus=!1}},{key:"setAmountFocus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isAmountFocus=e}},{key:"scrollToTopOfThePage",value:function(){this.$location.hash("budget_transaction_top"),this.$anchorScroll()}},{key:"removeCategoryFromBudgetDetails",value:function(e,t,n){for(var i=!1,s=0;s<t.length;s++)t[s].category_id===e&&(i=!0,t=t.splice(s,1));return i&&this.recalculateBudgetDetails(n),this.onCloseDetails(),!0}},{key:"closeBudgetTransactionList",value:function(e){return this.ignoreValidation=!1,!this.validateAmount()||(this.category.amount=this.amount,this.recalculateBudgetDetails(e),this.onCloseDetails(),!0)}},{key:"recalculateBudgetDetails",value:function(e){var t=this;return this.budgetToolService.recalculateBudgetDetails(e.budgetDetails).then(function(n){t.info=n,e.budgetDetails=n.budget_details,e.budgetSummary.avgIncome=e.budgetDetails.income_data.average_amount,e.budgetSummary.avgExpense=e.budgetDetails.expense_data.average_amount,e.budgetSummary.avgSavings=e.budgetDetails.savings_data.average_amount,e.budgetSummary.leftToSpend=e.budgetSummary.avgIncome-e.budgetSummary.avgExpense-e.budgetSummary.avgSavings,e.budgetIncomeList=e.budgetDetails.income_data,e.budgetExpenseList=e.budgetDetails.expense_data,e.budgetSavingsList=e.budgetDetails.savings_data},function(e){return t.$log("Error:"+e),!1}),this.info}},{key:"radioSelectionChangedSaved",value:function(e){return this.amount=e,this.allowAmountReset=!0,this.setAmountFocus(!1),!0}},{key:"radioSelectionChangedEstimate",value:function(e){return this.amount=e,this.allowAmountReset=!0,this.setAmountFocus(!1),!0}},{key:"radioSelectionChangedCustom",value:function(e){return!0===this.allowAmountReset&&(this.amount=null===e?0:e,this.allowAmountReset=!1,this.ignoreValidation=!0,this.showRequired=!1,this.showAmountInvalid=!1,this.showAmountInvalidMax=!1,this.setAmountFocus(!0)),!0}},{key:"updateBudgetAmountOption",value:function(){this.budgetAmountOption=this.budgetToolConstants.BudgetToolConstants.BUDGET_TOOL_TRANSACTION_AMOUNT.AMOUNT_TYPE.CUSTOM,this.allowAmountReset=!1}},{key:"validateAmount",value:function(){return this.ignoreValidation?(this.ignoreValidation=!1,!0):(this.showRequired=!1,this.showAmountInvalid=!1,this.showAmountInvalidMax=!1,null!==this.amount&&void 0!==this.amount||(this.showRequired=!0),this.amount<=0&&(this.showAmountInvalid=!0),this.amount>this.maxAmount&&(this.showAmountInvalidMax=!0),!(this.showRequired||this.showAmountInvalid||this.showAmountInvalidMax))}},{key:"getTransactionCardName",value:function(e){var t=this.ACCOUNT_TYPES;return e.from_account&&e.from_account.type===t.CREDIT_CARD?e.from_account.display_name:e.account?e.account.display_name:e.account_id?e.account_id:e.to_account&&e.to_account.type===t.CREDIT_CARD?e.to_account.display_name:void 0}},{key:"shouldDisplayDateBlock",value:function(e,t,n){var i=moment(t[e][n],"YYYY-MM-DD");return 0===e||i.isBefore(t[e-1][n],"day")||i.isAfter(t[e-1][n],"day")}}]),e}();l.$inject=["$log","$window","$state","$anchorScroll","$location","budgetToolService","budgetToolConstants","accountConstants"],t.default=l,e.exports=t.default},function(e,t){e.exports=' <tng-modal-dialog class="c-budget-transaction-page" hide-close="$ctrl.parentCtrl.flowService.showConfirmExitUI || $ctrl.parentCtrl.flowService.inLoadingMode" on-close="$ctrl.onCloseDetails()" scroll-id="add-bill-modal-event"> <header> <span class="large">{{($ctrl.category.category_name) ? $ctrl.category.category_name : \'\'}}</span> </header> <div class="c-budget-transaction-list"> <div class="c-budget-transaction-list__new-amount"> <tng-amount-input on-amount-change="$ctrl.validateAmount()" locale="$ctrl.parentCtrl.flowService.locale" input-type="$ctrl.parentCtrl.flowService.AMOUNT_INPUT_TYPES.STANDARD" ng-model="$ctrl.amount" on-focus="$ctrl.updateBudgetAmountOption()" on-blur="$ctrl.validateAmount()" no-decimals="false" disable-autofocus="true" ng-required="true" focus="$ctrl.isAmountFocus"> </tng-amount-input> <div ng-show="$ctrl.showRequired" class="field__error"> {{ ::\'global.validation.required\' | translate }} </div> <div ng-show="$ctrl.showAmountInvalid" class="field__error"> {{ \'budget.transactions.invalid_min_amount\' | translate}} </div> <div ng-show="$ctrl.showAmountInvalidMax" class="field__error"> {{ \'budget.transactions.invalid_max_amount\' | translate}} </div> </div> <div class="field"> <input id="budgetAmountOption1" name="budgetAmountOptions" class="input input--tangerine-radio" type="radio" ng-value="$ctrl.amountType.CUSTOM" ng-model="$ctrl.budgetAmountOption" ng-click="$ctrl.radioSelectionChangedCustom(0)"/> <label for="budgetAmountOption1"><strong>{{ \'budget.transactions.custom_amount\' | translate }}</strong></label> </div> <div class="field" ng-if="$ctrl.parentCtrl.budgetDetails.is_preview === false && !$ctrl.savedDisabled"> <input id="budgetAmountOption2" name="budgetAmountOptions" class="input input--tangerine-radio" type="radio" ng-value="$ctrl.amountType.SAVED" ng-model="$ctrl.budgetAmountOption" ng-click="$ctrl.radioSelectionChangedSaved($ctrl.category.saved_amount)" ng-disabled="{{$ctrl.savedDisabled}}"/> <label for="budgetAmountOption2"> <strong class="heading--sub4">{{ $ctrl.category.saved_amount | currency }}</strong> <strong>{{ \'budget.transactions.saved_amount\' | translate }}</strong> </label> </div> <div class="field"> <input id="budgetAmountOption3" name="budgetAmountOptions" class="input input--tangerine-radio" type="radio" ng-value="$ctrl.amountType.ESTIMATE" ng-model="$ctrl.budgetAmountOption" ng-click="$ctrl.radioSelectionChangedEstimate($ctrl.category.estimated_amount)" ng-disabled="{{$ctrl.estimateDisabled}}"/> <label for="budgetAmountOption3"> <strong class="heading--sub4">{{ $ctrl.category.estimated_amount | currency }}</strong> <strong>{{ \'budget.transactions.estimate_amount\' | translate }}</strong> </label> </div> <div class="transaction-desc margin__tb--fix2" ng-bind-html="\'budget.transactions.desc\' | translate"></div> </div> <div id="budget_transaction_top" class="c-budget-transaction-category-list" ng-if="$ctrl.isFetching === false && $ctrl.transactions.length > 0"> <tng-transactions-list-header header="$ctrl.header"></tng-transactions-list-header> <div class="c-budget-transaction-category-list__list"> <div class="c-budget-transaction-category-list__tile" ng-repeat="transaction in $ctrl.transactions"> <div class="c-budget-transaction-category-list__tile-grid"> <tng-transaction-date-column class="c-budget-transaction-category-list__date" should-display-on-mobile="::$ctrl.shouldDisplayDateBlock($index, $ctrl.transactions, $ctrl.dateFieldLabel)" transaction="::transaction"> </tng-transaction-date-column> <div class="c-budget-transaction-category-list__transaction"> <div class="c-budget-transaction-category-list__transaction-title-section"> <h5 class="c-budget-transaction-category-list__title"> {{transaction.description}}</h5> {{$ctrl.category.category_name}} </div> </div> <div class="c-budget-transaction-category-list__account"> <h5 class="c-budget-transaction-category-list__title"> <tng-account-name max-len="10" account="transaction.account"></tng-account-name></h5> {{transaction.account.display_name | maskNumber}} </div> <div class="c-budget-transaction-category-list__amount"> <span ng-if="$ctrl.isIncome === true" style="color:#f58426">+ {{transaction.amount | currency}}</span> <span ng-if="$ctrl.isIncome !== true"> {{transaction.amount | currency}}</span> </div> </div> </div> </div> </div> <div ng-if="$ctrl.transactions.length === 0 && $ctrl.isFetching === false"> <p class="margin__all--rel2" style="text-align:center"> <strong> {{ \'transactions.noResultsNotAllDates\' | translate }} </strong> </p> </div> <footer> <div class="c-budget-navigation-footer__controls btn__row"> <button class="btn btn--warn" actionable-id="budget_remove_category" ng-click="$ctrl.removeCategoryFromBudgetDetails($ctrl.category.category_id, $ctrl.categoryList, $ctrl.parentCtrl)"> {{::\'budget.transactions.remove_button\' | translate }} </button> <button class="btn btn--done" actionable-id="budget_close_modal" ng-click="$ctrl.closeBudgetTransactionList($ctrl.parentCtrl)"> {{ ::\'global.components.buttons.done\' | translate }} </button> </div> </footer> </tng-modal-dialog> '},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1104),a=i(s),o=n(1108),r=i(o);n(1109);var l={controller:a.default,require:{parentCtrl:"^budgetTool"},template:r.default,bindings:{category:"<",onCloseDetails:"&",headerTitle:"<",categoryList:"=",transactions:"<",isFetching:"<",shouldDisplayOnMobile:"<"}};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(13),a=i(s),o=n(0),r=i(o),l=n(1),c=i(l),u=n(1105),d=function(){function e(t,n,i,s,a,o,l,c,u){(0,r.default)(this,e),this.$log=t,this.$state=i,this.$window=n,this.$anchorScroll=s,this.$location=a,this.budgetToolConstants=o,this.$translate=l,this.budgetToolService=c,this.categoryConstants=u}return(0,c.default)(e,[{key:"$onInit",value:function(){this.isDisabled=!0,this.dateFieldLabel="transaction_date",this.maxAmount=1e6,this.showRequired=!1,this.showAmountInvalid=!1,this.showAmountInvalidMax=!1,this.categoryRequired=!1,this.ignoreValidation=!1,this.selectedCurrentCategory=null,this._populateParentCategory(),this.amount=0,this.selectedCategoryType=null}},{key:"scrollToTopOfThePage",value:function(){this.$location.hash("budget_transaction_top"),this.$anchorScroll()}},{key:"_populateParentCategory",value:function(){var e=this;return this.budgetToolService.getBudgetCategory(this.parentCtrl.budgetDetails).then(function(t){"income"===e.headerTitle?e.response=t.available_category_details.income_data.data:"expense"===e.headerTitle?e.response=t.available_category_details.expense_data.data:"savings"===e.headerTitle&&(e.response=t.available_category_details.savings_data.data),e.topLevelCategoriesArray=[],e.filteredCategoriesList=[],e.ID_TO_CATEGORY=e.categoryConstants.ID_TO_CATEGORY,e.response.forEach(function(t){var n=e.ID_TO_CATEGORY[(0,a.default)(e.ID_TO_CATEGORY).find(function(n){return e.ID_TO_CATEGORY[n].id===parseInt(t.category_id,10)})];angular.isObject(n)&&(t.icon=n.icon),t.is_available&&e.filteredCategoriesList.push(t),t.is_parent_category&&e.topLevelCategoriesArray.push(t)})},function(t){return e.$log("Error:"+t),!1}),this.info}},{key:"addCategoryToBudgetDetails",value:function(e,t,n){var i=!1;return!this.validateAmount()||((0,u.isNullOrUndefined)(e.category_name)||(0,u.isNullOrUndefined)(this.selectedAmount)||(i=!0),i&&(e.amount=this.selectedAmount,t=t.splice(t.length,0,e),this.recalculateBudgetDetails(n)),this.onCloseDetails(),!0)}},{key:"recalculateBudgetDetails",value:function(e){var t=this;return this.budgetToolService.recalculateBudgetDetails(e.budgetDetails).then(function(n){t.info=n,e.budgetDetails=n.budget_details,e.budgetSummary.avgIncome=e.budgetDetails.income_data.average_amount,e.budgetSummary.avgExpense=e.budgetDetails.expense_data.average_amount,e.budgetSummary.avgSavings=e.budgetDetails.savings_data.average_amount,e.budgetSummary.leftToSpend=e.budgetSummary.avgIncome-e.budgetSummary.avgExpense-e.budgetSummary.avgSavings,e.budgetIncomeList=e.budgetDetails.income_data,e.budgetExpenseList=e.budgetDetails.expense_data,e.budgetSavingsList=e.budgetDetails.savings_data},function(e){return t.$log("Error:"+e),!1}),this.info}},{key:"validateAmount",value:function(){return this.amount=this.selectedAmount,this.ignoreValidation?(this.ignoreValidation=!1,!0):(this.showCategoryTypeRequired=!1,this.showRequired=!1,this.showAmountInvalid=!1,this.showAmountInvalidMax=!1,this.categoryRequired=!1,null!==this.selectedCategoryType&&void 0!==this.selectedCategoryType||null!==this.amount&&void 0!==this.amount?null===this.selectedCategoryType||void 0===this.selectedCategoryType?this.categoryRequired=!0:this.amount<=0||void 0===this.amount||null===this.amount?this.showAmountInvalid=!0:this.amount>this.maxAmount&&(this.showAmountInvalidMax=!0):this.showRequired=!0,!(this.showRequired||this.showAmountInvalid||this.showAmountInvalidMax||this.categoryRequired))}},{key:"shouldDisplayDateBlock",value:function(e,t,n){var i=moment(t[e][n],"YYYY-MM-DD");return 0===e||i.isBefore(t[e-1][n],"day")||i.isAfter(t[e-1][n],"day")}},{key:"onCategorySelect",value:function(e){this.selectedCurrentCategory=e,this.selectedAmount=e.amount,this.selectedCategoryType=e.category_name,this.showRequired=!1,this.showAmountInvalid=!1,this.showAmountInvalidMax=!1,this.categoryRequired=!1,angular.element("#amount-input").focus()}}]),e}();d.$inject=["$log","$window","$state","$anchorScroll","$location","budgetToolConstants","$translate","budgetToolService","categoryConstants"],t.default=d,e.exports=t.default},,,,function(e,t){e.exports='<tng-modal-dialog class="c-budget-add-category-page" hide-close="$ctrl.parentCtrl.flowService.showConfirmExitUI || $ctrl.parentCtrl.flowService.inLoadingMode" on-close="$ctrl.onCloseDetails()" scroll-id="add-bill-modal-event"> <header> <span> <span ng-if="$ctrl.headerTitle === \'income\'" class="large">{{ ::\'budget.addcategory.income\' | translate }} </span> <span ng-if="$ctrl.headerTitle === \'expense\'" class="large">{{ ::\'budget.addcategory.expense\' | translate }} </span> <span ng-if="$ctrl.headerTitle === \'savings\'" class="large">{{ ::\'budget.addcategory.savings\' | translate }} </span> </span> </header> <section> <div class="transaction-desc margin__tb--fix2" ng-bind-html="\'budget.addcategory.desc\' | translate"></div> </section> <section> <div class="c-budget-add-category-page__category-add-form"> <div class="c-budget-add-category-page__category-box"> <div class="c-budget-add-category-page__category-item js-maintain-scroll" ng-class="{\n      \'c-budget-add-category-page__category-item--error\': $ctrl.showRequired === true || $ctrl.showAmountInvalid === true || $ctrl.showAmountInvalidMax === true,\n      }"> <div ng-if="$ctrl.selectedCurrentCategory === undefined || $ctrl.selectedCurrentCategory === null" class="c-budget-add-category-page__category-item--pending c-budget-add-category-page__category-item-icon"><i class="icon-other"></i></div> <div ng-if="$ctrl.selectedCurrentCategory === undefined || $ctrl.selectedCurrentCategory === null" class="c-budget-add-category-page__category-item--pending c-budget-add-category-page__category-item-name"> {{ \'transactions.editTransactionModal.selectCategory\' | translate }} </div> <div ng-if="$ctrl.selectedCurrentCategory.category_id" class="c-budget-add-category-page__category-item c-budget-add-category-page__category-item-icon"><i ng-class="$ctrl.selectedCurrentCategory.icon"></i></div> <div ng-if="$ctrl.selectedCurrentCategory.category_id" class="c-budget-add-category-page__category-item c-budget-add-category-page__category-item-name"> {{$ctrl.selectedCurrentCategory.category_name}} </div> <div class="c-budget-add-category-page__category-item-amount"> <span ng-if="$ctrl.localeValue === $ctrl.LOCALES.EN_CA && ($ctrl.selectedCurrentCategory === undefined || $ctrl.selectedCurrentCategory === null)" class="c-budget-add-category-page__category-item--pending">$</span> <span ng-if="$ctrl.localeValue === $ctrl.LOCALES.EN_CA && $ctrl.selectedCurrentCategory.category_id">$</span> <input class="input c-budget-add-category-page__category-item-amount-input" ng-class="{\'c-budget-add-category-page__category-item-amount-input--empty\': $ctrl.selectedAmount === undefined }" type="text" name="amount-input" id="amount-input" placeholder="{{ \'transactions.editTransactionModal.amount\' | translate }}" ng-model="$ctrl.selectedAmount" amount-input pu-elastic-input ng-change="$ctrl.validateAmount()" decimals="2" ng-required="true" maxlength="12"/> </div> </div> <div ng-show="$ctrl.showRequired" class="field__error"> {{ ::\'global.validation.required\' | translate }} </div> <div ng-show="$ctrl.categoryRequired" class="field__error"> {{ \'budget.addcategory.category_required\' | translate }} </div> <div ng-show="$ctrl.showAmountInvalid" class="field__error"> {{ \'budget.addcategory.invalid_amount\' | translate}} </div> <div ng-show="$ctrl.showAmountInvalidMax" class="field__error"> {{ \'budget.transactions.invalid_max_amount\' | translate}} </div> </div> </div></section> <section> <div class="c-budget-add-category-page__browse-categories"> <h3 class="c-budget-add-category-page__h3-title"> {{ \'transactions.editTransactionModal.browseCategories\' | translate }}</h3> <div class="c-budget-add-category-page__filters"> <div class="c-budget-add-category-page__input-filter field"> <button actionable-id="transaction-filters-search" type="button" class="field__icon c-transaction-filters__search-icon icon-search"></button> <input type="text" name="categoryFilter" class="input" ng-model="$ctrl.searchCategoryName" placeholder="{{ \'transactions.editTransactionModal.search\' | translate }}"/> </div> <div class="c-budget-add-category-page__select-filter field"> <select name="categoryType" class="select" id="categoryList_categoryType" ng-model="$ctrl.parentCategoryIdSelect"> <option value="{{null}}">{{ \'transactions.editTransactionModal.allCategories\' | translate }}</option> <option value="{{c.category_id}}" ng-repeat="c in $ctrl.topLevelCategoriesArray">{{ c.category_name }}</option> </select> </div> </div> <div class="c-budget-add-category-page__category-tiles"> <a actionable-id="edit-transaction-category_selecte_filtered" href="" ng-repeat="c in $ctrl.filteredCategoriesList | filter: ($ctrl.parentCategoryIdSelect ? {parent_category_id: +$ctrl.parentCategoryIdSelect} : {}) | filter: {category_name: $ctrl.searchCategoryName}" ng-click="$ctrl.onCategorySelect(c)" ng-class="\'c-budget-add-category-page__category-tile \' + ($ctrl.isCategorySelected(c) ? \'c-budget-add-category-page__category-tile--selected\' : \'\')"> <i class="c-budget-add-category-page__category-tile-icon {{::c.icon}}"></i> <div class="c-budget-add-category-page__category-tile-name"> <p title="{{:: \'global.transactionsCategories.\' + c.key | translate }}" style="margin:0"> {{c.category_name}} </p> <div> <p class="c-budget-add-category-page__category-tile-amount">{{c.amount | currency}}</p> </div> </div></a> </div> </div> </section> <footer> <div> <button actionable-id="edit-transaction-cancel" class="btn btn--edit" ng-click="$ctrl.onCloseDetails()"> {{ \'transactions.editTransactionModal.cancel\' | translate }}</button> <button actionable-id="edit-transaction-done" class="btn btn--orange" ng-click="$ctrl.addCategoryToBudgetDetails($ctrl.selectedCurrentCategory, $ctrl.categoryList, $ctrl.parentCtrl)"> {{ \'budget.addcategory.add\'| translate }} </button> </div> </footer> </tng-modal-dialog> '},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1111),a=i(s),o=n(1112),r=i(o);n(1113);var l={controller:r.default,template:a.default,bindings:{}};t.default=l,e.exports=t.default},function(e,t){e.exports='<div ng-if="$ctrl.flowService.currentState !== $ctrl.flowService.STATES.LTSPAGE"> <tng-progress-bar-buttons ng-if="$ctrl.flowService.currentState !== \'LTSPAGE\'" class="c-progress-bar-buttons" total-steps="$ctrl.flowService.totalSteps" current-state="$ctrl.flowService.currentState" states="$ctrl.flowService.breadcrumbs" subflowfractionoverride="0"> </tng-progress-bar-buttons> </div> <div> <budget-initial ng-if="$ctrl.flowService.currentState === $ctrl.flowService.STATES.INITIAL"> </budget-initial> <budget-income ng-if="$ctrl.flowService.currentState === $ctrl.flowService.STATES.INCOME" income="$ctrl.budgetIncomeList" is-loading="$ctrl.isLoading"> </budget-income> <budget-expense ng-if="$ctrl.flowService.currentState === $ctrl.flowService.STATES.EXPENSE" expense="$ctrl.budgetExpenseList" is-loading="$ctrl.isLoading"> </budget-expense> <budget-savings ng-if="$ctrl.flowService.currentState === $ctrl.flowService.STATES.SAVINGS" savings="$ctrl.budgetSavingsList" is-loading="$ctrl.isLoading"> </budget-savings> <budget-summary ng-if="$ctrl.flowService.currentState === $ctrl.flowService.STATES.SUMMARY" summary="$ctrl.budgetSummary"> </budget-summary> <nav class="c-budget-navigation-footer" ng-if="$ctrl.showNav && $ctrl.flowService.currentState !== $ctrl.flowService.STATES.LTSPAGE" ng-class="{\'c-budget-navigation-footer-mobile\': $ctrl.isNative}"> <div class="container"> <div class="c-budget-navigation-footer__controls btn__row" ng-if="$ctrl.flowService.currentState === $ctrl.flowService.STATES.INITIAL"> <button class="btn btn--edit" actionable-id="budget_cancel" ng-click="$ctrl.onButtonClick($ctrl.flowService.BUTTONS.BTN_CANCEL)"> {{ ::\'global.components.buttons.cancel\' | translate }} </button> <button class="btn btn--next" actionable-id="budget_next" ng-click="$ctrl.onButtonClick($ctrl.flowService.BUTTONS.BTN_NEXT)"> {{ ::\'global.components.buttons.next\' | translate }} </button> </div> <div class="c-budget-navigation-footer__controls btn__row" ng-if="$ctrl.flowService.currentState === $ctrl.flowService.STATES.SUMMARY"> <button class="btn btn--edit" actionable-id="budget_back" ng-click="$ctrl.onButtonClick($ctrl.flowService.BUTTONS.BTN_BACK)"> {{ ::\'global.components.buttons.back\' | translate }} </button> <button class="btn btn--done" actionable-id="budget_done" ng-click="$ctrl.onButtonClick($ctrl.flowService.BUTTONS.BTN_DONE)"> {{ ::\'global.components.buttons.done\' | translate }} </button> </div> <div class="c-budget-navigation-footer__controls btn__row" ng-if="$ctrl.flowService.currentState !== $ctrl.flowService.STATES.INITIAL && $ctrl.flowService.currentState !== $ctrl.flowService.STATES.SUMMARY"> <button class="btn btn--edit" actionable-id="budget_back" ng-click="$ctrl.onButtonClick($ctrl.flowService.BUTTONS.BTN_BACK)"> {{ ::\'global.components.buttons.back\' | translate }} </button> <button class="btn btn--next" actionable-id="budget_next" ng-click="$ctrl.onButtonClick($ctrl.flowService.BUTTONS.BTN_NEXT)"> {{ ::\'global.components.buttons.next\' | translate }} </button> </div> </div> </nav> </div> '},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i,s,o,r,l,c,u){(0,a.default)(this,e),this.$log=t,this.$state=i,this.$window=n,this.$stateParams=l,this.stateConstants=s,this.flowService=o,this.budgetToolService=r,this.FeedbackSurveyConstants=c,this.FeedbackSurveyService=u}return(0,r.default)(e,[{key:"$onInit",value:function(){if(this.budgetSummary={},this.budgetDetails={},this.flowService.activate(),this.showNav=!0,null!=this.$stateParams.currentState&&"INCOME"===this.$stateParams.currentState){var e=this.flowService.getStates();this.flowService.setCurrentState(e.INCOME)}if(null!=this.$stateParams.currentState&&"LTSPAGE"===this.$stateParams.currentState){var t=this.flowService.getStates();this.flowService.setCurrentState(t.LTSPAGE)}this.getCurrentBudget(),this.selectedCategory=!1,this.isLoading=!1}},{key:"getCurrentBudget",value:function(){var e=this;this.budgetToolService.getCurrentBudget().then(function(t){e.budgetDetails=t.budget_details,e.budgetSummary.avgIncome=e.budgetDetails.income_data.average_amount,e.budgetSummary.avgExpense=e.budgetDetails.expense_data.average_amount,e.budgetSummary.avgSavings=e.budgetDetails.savings_data.average_amount,e.budgetSummary.leftToSpend=e.budgetSummary.avgIncome-e.budgetSummary.avgExpense-e.budgetSummary.avgSavings,e.budgetIncomeList=e.budgetDetails.income_data,e.budgetExpenseList=e.budgetDetails.expense_data,e.budgetSavingsList=e.budgetDetails.savings_data,e.isLoading=!0},function(t){e.$log("Error:"+t)})}},{key:"saveBudgetDetails",value:function(){var e=this;return this.budgetDetails.is_preview&&this.onStartBudgetsFeedback(),this.budgetToolService.saveBudgetDetails(this.budgetDetails).then(function(t){e.status=t,e.$state.go(e.stateConstants.BUDGET_LTS_OVERVIEW,{})},function(t){e.$log("Error:"+t)}),this.status}},{key:"getBudgetIncome",value:function(){var e=this;this.budgetToolService.getBudgetIncome().then(function(t){e.budgetIncomeList=t,e.budgetSummary.avgIncome="9"},function(t){e.$log("Error:"+t)})}},{key:"getBudgetExpense",value:function(){var e=this;this.budgetToolService.getBudgetExpense().then(function(t){e.budgetExpenseList=t,e.budgetSummary.avgExpense=t.averageExpense},function(t){e.$log("Error:"+t)})}},{key:"getBudgetSavings",value:function(){var e=this;this.budgetToolService.getBudgetSavings().then(function(t){e.budgetSavingsList=t,e.budgetSummary.avgSavings=t.averageSavings},function(t){e.$log("Error:"+t)})}},{key:"$onDestroy",value:function(){this.flowService.deactivate()}},{key:"onButtonClick",value:function(e){var t=this.$log,n=this.flowService;switch(e.type){case n.BUTTON_TYPES.BACK:n.gotoPrevState();break;case n.BUTTON_TYPES.CANCEL:this.$state.go(this.stateConstants.ACCOUNT_SUMMARY);break;case n.BUTTON_TYPES.NEXT:n.gotoNextState();break;case n.BUTTON_TYPES.DONE:this.saveBudgetDetails();break;default:t.debug("default - NO ACTION")}}},{key:"onStartBudgetsFeedback",value:function(){var e=this.FeedbackSurveyConstants.MEDALLIA_FORM_IDS.BUDGET_FEEDBACK;this.FeedbackSurveyService.launchFeedbackSurvey(e)}}]),e}();l.$inject=["$log","$window","$state","stateConstants","budgetToolFlowService","budgetToolService","$stateParams","FeedbackSurveyConstants","FeedbackSurveyService"],t.default=l,e.exports=t.default},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(13),a=i(s),o=n(81),r=i(o),l=n(0),c=i(l),u=n(1),d=i(u),h=n(94),_=i(h),g=n(96),S=i(g),f=n(95),v=i(f),E=n(97),p=i(E),T=function(e){function t(e,n,i,s,o,l,u,d,h,g){(0,c.default)(this,t);var S=(0,_.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n,i,s,o,l,u,d));return S.budgetToolConstants=h,S.BUTTON_TYPES=u.BUTTON_TYPES,S.AMOUNT_INPUT_TYPES=g.AMOUNT_INPUT_TYPES,S.STATES={INITIAL:{titleKey:"budget.steps.initial"},INCOME:{titleKey:"budget.steps.income"},EXPENSE:{titleKey:"budget.steps.expense"},SAVINGS:{titleKey:"budget.steps.savings"},SUMMARY:{titleKey:"budget.steps.summary"},LTSPAGE:{titleKey:"budget.steps.ltsPage"}},S.totalSteps=(0,a.default)(S.STATES).length,S.breadcrumbs=[S.STATES.INITIAL,S.STATES.INCOME,S.STATES.EXPENSE,S.STATES.SAVINGS,S.STATES.SUMMARY],S}return(0,v.default)(t,e),(0,d.default)(t,[{key:"_resetState",value:function(e){(0,S.default)(t.prototype.__proto__||(0,r.default)(t.prototype),"_resetState",this).call(this),this.currentState=this.STATES.INITIAL,this.data=e,this.BUTTONS={BTN_CANCEL:new E.PageFlowButton(this.BUTTON_TYPES.CANCEL,!0,!0),BTN_BACK:new E.PageFlowButton(this.BUTTON_TYPES.BACK,!0,!1),BTN_NEXT:new E.PageFlowButton(this.BUTTON_TYPES.NEXT,!0,!1),BTN_DONE:new E.PageFlowButton(this.BUTTON_TYPES.DONE,!0,!0)}}},{key:"_updateUI",value:function(){switch((0,S.default)(t.prototype.__proto__||(0,r.default)(t.prototype),"hideWarningOnExit",this).call(this),this.BUTTONS.BTN_CANCEL.show=!0,this.BUTTONS.BTN_CANCEL.disable=!0,this.BUTTONS.BTN_BACK.show=!0,this.BUTTONS.BTN_BACK.disable=!1,this.BUTTONS.BTN_NEXT.show=!0,this.BUTTONS.BTN_NEXT.disable=!1,this.BUTTONS.BTN_DONE.show=!0,this.BUTTONS.BTN_DONE.disable=!1,this.currentState){case this.STATES.INITIAL:this.BUTTONS.BTN_CANCEL.type=this.BUTTON_TYPES.CANCEL,this.BUTTONS.BTN_CANCEL.disable=!1,this.BUTTONS.BTN_NEXT.type=this.BUTTON_TYPES.NEXT,this.BUTTONS.BTN_NEXT.disable=!1,this.breadCrumbState=this.currentState-1;break;case this.STATES.INCOME:case this.STATES.EXPENSE:case this.STATES.SAVINGS:this.BUTTONS.BTN_BACK.type=this.BUTTON_TYPES.BACK,this.BUTTONS.BTN_BACK.disable=!1,this.BUTTONS.BTN_NEXT.type=this.BUTTON_TYPES.NEXT,this.BUTTONS.BTN_NEXT.disable=!1,this.breadCrumbState=this.currentState-1;break;case this.STATES.SUMMARY:this.BUTTONS.BTN_BACK.type=this.BUTTON_TYPES.BACK,this.BUTTONS.BTN_BACK.disable=!1,this.BUTTONS.BTN_DONE.type=this.BUTTON_TYPES.DONE,this.BUTTONS.BTN_DONE.disable=!1}}},{key:"gotoNextState",value:function(){var e=!0;switch(this.currentState){case this.STATES.INITIAL:this.moveTo(this.STATES.INCOME);break;case this.STATES.INCOME:this.moveTo(this.STATES.EXPENSE);break;case this.STATES.EXPENSE:this.moveTo(this.STATES.SAVINGS);break;case this.STATES.SAVINGS:this.moveTo(this.STATES.SUMMARY);break;default:e=!1,this.$log.debug("Unknown or unrecognized state:",this.currentState)}return e}},{key:"gotoPrevState",value:function(){var e=!0;switch(this.currentState){case this.STATES.INITIAL:case this.STATES.INCOME:this.moveTo(this.STATES.INITIAL);break;case this.STATES.EXPENSE:this.moveTo(this.STATES.INCOME);break;case this.STATES.SAVINGS:this.moveTo(this.STATES.EXPENSE);break;case this.STATES.SUMMARY:this.moveTo(this.STATES.SAVINGS);break;default:e=!1,this.$log.debug("Unknown or unrecognized state:",this.currentState)}return e}},{key:"getStates",value:function(){return this.STATES}},{key:"setCurrentState",value:function(e){this.currentState=e}},{key:"_getAnalyticsID",value:function(){return"budgets"}}]),t}(p.default);T.$inject=["$log","$q","$transitions","$state","$window","$rootScope","pageFlowConstants","AnalyticsService","budgetToolConstants","amountInputConstants"],t.default=T,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={BUDGET_TOOL_TRANSACTION_HEADER:{budgetTransactionHeader:{date:"date",transactionCC:"transaction",account:"account",amount:"amount"}},BUDGET_TOOL_TRANSACTION_AMOUNT:{AMOUNT_TYPE:{ESTIMATE:"ESTIMATE",CUSTOM:"CUSTOM",SAVED:"SAVED"}}};t.default={BudgetToolConstants:i},e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1117),a=i(s),o=n(279),r=i(o),l=n(1121),c=i(l),u=angular.module("budgetLtsPageModule",[]).component("ltsFormulaGrid",a.default).service("budgetToolService",r.default).component("budgetLtsPage",c.default);t.default=u,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1118),a=i(s),o=n(1119),r=i(o);n(1120);var l={template:a.default,controller:r.default,transclude:{firstColumnTitle:"?firstColumnTitle",secondColumnTitle:"?secondColumnTitle",thirdColumnTitle:"?thirdColumnTitle",fourthColumnTitle:"?fourthColumnTitle",bottomColumn:"?bottomColumn"},bindings:{firstValue:"<",secondValue:"<",thirdValue:"<",fourthValue:"<",thirdValueIsRate:"<?",hideBottomColumn:"<?"}};t.default=l,e.exports=t.default},function(e,t){e.exports='<div class="c-balance-grid"> <div class="c-balance-grid__table"> <div class="c-balance-grid__table__table-column-top--has-right-borders"> <div class="c-balance-grid__section"> <p id="firstColumnTitle" class="c-balance-grid__title" ng-transclude="firstColumnTitle"></p> <p id="firstValue" class="c-balance-grid__value"> {{ ($ctrl.firstValue || 0) | currency }} </p> </div> </div> <div class="c-balance-grid__table__table-column-top--has-right-borders"> <div class="c-balance-grid__section"> <p id="secondColumnTitle" class="c-balance-grid__title" ng-transclude="secondColumnTitle"></p> <p id="secondValue" class="c-balance-grid__value"> <span>-</span> {{ ($ctrl.secondValue || 0) | currency }} </p> </div> </div> <div class="c-balance-grid__table__table-column-top--has-right-borders"> <div class="c-balance-grid__section"> <p id="thirdColumnTitle" class="c-balance-grid__title" ng-transclude="thirdColumnTitle"></p> <p id="thirdValue" class="c-balance-grid__value" ng-if="!$ctrl.thirdValueIsRate"> <span>-</span> {{ ($ctrl.thirdValue || 0) | currency }} </p> </div> </div> <div class="c-balance-grid__table__table-column-top--has-right-borders"> <div class="c-balance-grid__section"> <p id="fourthColumnTitle" class="c-balance-grid__title" ng-transclude="fourthColumnTitle"></p> <p id="fourthValue" class="c-balance-grid__value"> <span>=</span> {{ ($ctrl.fourthValue || 0) | currency }} </p> </div> </div> </div> </div> '},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(i),a=function e(t){(0,s.default)(this,e),this.$log=t};a.$inject=["$log"],t.default=a,e.exports=t.default},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1122),a=i(s),o=n(1123),r=i(o);n(1124);var l={controller:a.default,template:r.default,bindings:{}};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i,s,o,r,l,c,u,d,h,_,g,S,f){(0,a.default)(this,e),this.$log=t,this.$q=n,this.$state=s,this.$window=i,this.$scope=o,this.budgetToolConstants=r,this.$translate=l,this.budgetToolService=c,this.$locale=u,this.colorConstants=d,this.stateConstants=h,this.FeedbackSurveyConstants=_,this.FeedbackSurveyService=g,this.EventBusService=S,this.serviceConstants=f,this.ROOT_ENDPOINTS=f.ROOT_ENDPOINTS,this.DATA_INVALIDATED=f.DATA_INVALIDATED}return(0,r.default)(e,[{key:"$onInit",value:function(){var e=this;this.isLoading=!0,this.showConfirmCancelDialog=!1,this._getLtsBudget(),this._getLtsDays(),this.EventBusService.subscribe(this.$scope,this.DATA_INVALIDATED,function(t,n){return e._handleDataInvalidated(n)})}},{key:"_handleDataInvalidated",value:function(e){e&&this._getLtsBudget()}},{key:"_getLtsDays",value:function(){var e=new Date;this.currentDay=e.getDate(),this.daysInMonth=new Date(e.getFullYear(),e.getMonth()+1,0).getDate(),this.month=this.$locale.DATETIME_FORMATS.MONTH[(new Date).getMonth()],this.year=(new Date).getFullYear()}},{key:"_getLtsBudget",value:function(){var e=this;this.budgetToolService.getLtsBudget().then(function(t){e.budget_lts=t.budget_lts,e.actual_lts=t.actual_lts,e.avg_income=t.budget_details.income_data.average_amount,e.avg_expense=t.budget_details.expense_data.average_amount,e.avg_savings=t.budget_details.savings_data.average_amount,e.isLoading=!1,e.actual_lts>0?e.firstWidth=e.actual_lts/e.budget_lts*100:e.firstWidth=100,e.isBudgetLts=!0}).catch(function(t){e.$log.error("GET LTS BUDGET ERROR: ",t),e._processError(t)})}},{key:"cancelResetBudget",value:function(){this.showConfirmCancelDialog=!1}},{key:"resetBudgetDetails",value:function(){var e=this;return this.budgetToolService.resetBudgetDetails().then(function(t){e.budget_lts=t.budget_lts,e.actual_lts=t.actual_lts,e.avg_income=t.budget_details.income_data.average_amount,e.avg_expense=t.budget_details.expense_data.average_amount,e.avg_savings=t.budget_details.savings_data.average_amount,e.isLoading=!1,e.actual_lts>0?e.firstWidth=e.actual_lts/e.budget_lts*100:e.firstWidth=100,e.isBudgetLts=!0,e.showConfirmCancelDialog=!1}).catch(function(t){e.$log.error("RESET BUDGET ERROR: ",t),e._processError(t)}),this.info}},{key:"enterConfirmCancelDialog",value:function(){this.showConfirmCancelDialog=!0}},{key:"gotoFeedback",value:function(){var e=this.FeedbackSurveyConstants.MEDALLIA_FORM_IDS.BUDGET_OVERVIEW_FEEDBACK;this.FeedbackSurveyService.launchFeedbackSurvey(e)}},{key:"progressBarColor",get:function(){var e=this.colorConstants.COLOR_GREY;return this.isBudgetLts&&(this.actual_lts<0?e=this.colorConstants.COLOR_WARNING:this.actual_lts>0&&(e=this.colorConstants.COLOR_DUSTY_ORANGE)),e}}]),e}();l.$inject=["$log","$q","$window","$state","$scope","budgetToolConstants","$translate","budgetToolService","$locale","colorConstants","stateConstants","FeedbackSurveyConstants","FeedbackSurveyService","EventBusService","serviceConstants"],t.default=l,e.exports=t.default},function(e,t){e.exports='<div ng-if="!$ctrl.isLoading" class="c-account-details"> <div class="c-account-details__container print-hide" lift-and-load-child> <div id="Lts-desc" class="c-details-overview__account-number"> <strong> {{::\'budget.budgetSummary.lts\' | translate }} </strong> <span id="Lts-hypen"> - </span> <span id="Lts-monthyear">{{$ctrl.month }} {{$ctrl.year }}</span> </div> <div id="Lts-day" class="c-details-overview__name"> {{ ::\'budget.budgetSummary.Day\' | translate }} {{ $ctrl.currentDay }} {{ ::\'budget.budgetSummary.of\'| translate }} {{ $ctrl.daysInMonth}} </div> <div id="Lts-acutallts"> <h1 class="c-details-overview__balance" ng-style="{\'color\':$ctrl.progressBarColor}"> {{($ctrl.actual_lts || 0) | currency}} </h1> <div> <tng-progress-bar height="20" width="$ctrl.firstWidth" second-width="$ctrl.secondWidth" color="{{ $ctrl.progressBarColor }}"> </tng-progress-bar> </div> <div> <div class="c-account-details-credit-card__table-column-bottom" ng-if="$ctrl.progressBarColor === $ctrl.colorConstants.COLOR_DUSTY_ORANGE && $ctrl.firstWidth <= 15.0"> <div> <span id="Lts-icon" class="icon-warning-small c-account-details-credit-card__icon-fifteen"></span> </div> <div id="Lts-message" class="c-account-details-credit-card__messages-fifteen">{{ ::\'budget.budgetSummary.fifteen_percent_message\' | translate }}</div> </div> <div class="c-account-details-credit-card__table-column-bottom" ng-if="$ctrl.progressBarColor === $ctrl.colorConstants.COLOR_DUSTY_ORANGE && $ctrl.firstWidth > 15.0"> <div> <span id="Lts-icon" class="icon-complete2 c-account-details-credit-card__icon-orange"></span> </div> <div id="Lts-message" class="c-account-details-credit-card__message">{{ ::\'budget.budgetSummary.orange_message\' | translate }}</div> </div> <div class="c-account-details-credit-card__table-column-bottom" ng-if="$ctrl.progressBarColor === $ctrl.colorConstants.COLOR_GREY"> <div> <span id="Lts-icon" class="icon-warning-small c-account-details-credit-card__icon-grey"></span></div> <div id="Lts-message" class="c-account-details-credit-card__messages">{{::\'budget.budgetSummary.grey_message\'| translate }}</div> </div> <div class="c-account-details-credit-card__table-column-bottom" ng-if="$ctrl.progressBarColor === $ctrl.colorConstants.COLOR_WARNING"> <div><span id="Lts-icon" class="icon-warning-small c-account-details-credit-card__icon-red"></span></div> <div id="Lts-message" class="c-account-details-credit-card__messages">{{ ::\'budget.budgetSummary.red_message\' | translate }}</div> </div> </div> <div class="c-account-details-credit-card__balance-grid"> <lts-formula-grid first-value="$ctrl.avg_income" second-value="$ctrl.avg_expense" third-value="$ctrl.avg_savings" fourth-value="$ctrl.budget_lts"> <first-column-title> {{ ::\'budget.budgetSummary.inc\' | translate }} </first-column-title> <second-column-title> {{ ::\'budget.budgetSummary.exp\' | translate }} </second-column-title> <third-column-title> {{ ::\'budget.budgetSummary.sav\' | translate }} </third-column-title> <fourth-column-title> {{ ::\'budget.budgetSummary.lts_pm\' | translate }} </fourth-column-title> </lts-formula-grid> </div> </div> <div class="c-account-control-options"> <button id="Lts-editBudget" class="c-account-control-options__button btn btn--done btn--medium btn--auto" actionable-id="edit_budget" ng-click="$ctrl.$state.go($ctrl.stateConstants.BUDGET_TOOL, { currentState: \'INCOME\' })"> {{::\'budget.budgetSummary.edit_budget\' | translate }} </button> <button id="Lts-resetBudget" class="c-account-control-options__button btn btn--edit btn--medium btn--auto" actionable-id="reset_budget" ng-click="$ctrl.enterConfirmCancelDialog()"> {{ ::\'budget.budgetSummary.reset_budget\' | translate }} </button> </div> <tng-modal-dialog ng-if="$ctrl.showConfirmCancelDialog" is-visible="$ctrl.showConfirmCancelDialog" on-close="$ctrl.showConfirmCancelDialog = false"> <header> <span>{{ ::\'budget.resetFlow.heading\' | translate }}</span> </header> <p> {{ ::\'budget.resetFlow.text1\' | translate }} </p> <p> {{ ::\'budget.resetFlow.text2\' | translate }} </p> <footer> <button actionable-id="budget-cancel_reset" class="btn btn--prev" ng-click="$ctrl.cancelResetBudget()"> {{ ::\'budget.resetFlow.no\' | translate }} </button> <button actionable-id="budget-confirm_reset" class="btn btn--next" ng-click="$ctrl.resetBudgetDetails()"> {{ ::\'budget.resetFlow.yes\' | translate }} </button> </footer> </tng-modal-dialog> </div> </div> <div ng-if="!$ctrl.isLoading" class="c-account-details__content"> <span> <button class="btn btn--done btn--large c-account-details-credit-card__feedback" actionable-id="feedback_budget" ng-click="$ctrl.gotoFeedback()"> {{ ::\'budget.budgetSummary.feedback\' | translate }} </button> </span> </div>'},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1126),a=i(s),o=n(1130),r=i(o),l=n(1131),c=i(l),u=angular.module("tangerine.help.module",[]).constant("helpConstants",r.default).service("HelpFlowStateService",c.default).component("help",a.default);t.default=u,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1127),a=i(s),o=n(1128),r=i(o);n(1129);var l={template:r.default,controller:a.default};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i,s,o,r,l,c,u){(0,a.default)(this,e),this.helpConstants=t,this.stateConstants=n,this.localeConstants=i,this.HelpFlowStateService=s,this.CobrowseService=o,this.LocaleService=r,this.$stateParams=l,this.$scope=c,this.$log=u}return(0,r.default)(e,[{key:"$onInit",value:function(){this.$stateParams.locale?this.LocaleService.locale=this.localeConstants.LOCALES.FR_CA:this.LocaleService.locale=this.localeConstants.LOCALES.EN_CA,this.CobrowseService.session?(this.cobrowseSession=this.CobrowseService.session,this.cobrowseSessionToken=this.CobrowseService.session.token,this.HelpFlowStateService.next()):(this.HelpFlowStateService.init(),this.cobrowseSessionToken=null,this.cobrowseSession=null),this.CobrowseService.registerSessionStartedCB(this._cobrowseSessionStarted.bind(this)),this.CobrowseService.registerApiInitializedCB(this._cobrowseApiInitialized.bind(this)),this.CobrowseService.registerAgentJoinedCB(this._cobrowseAgentJoined.bind(this)),this.CobrowseService.registerSessionEndedCB(this._cobrowseSessionEnded.bind(this))}},{key:"$onDestroy",value:function(){this.CobrowseService.deregisterAllCB()}},{key:"startCobrowseSession",value:function(){this.HelpFlowStateService.isSpinnerActive=!0,this.CobrowseService.startCobrowseSession()}},{key:"endCobrowseSession",value:function(){this.CobrowseService.endCobrowseSession()}},{key:"_cobrowseStartedOrInitializedSetup",value:function(e){this.cobrowseSession=e,this.cobrowseSessionToken=e.token,this.HelpFlowStateService.isSpinnerActive=!1,this.HelpFlowStateService.next(),this.$scope.$apply()}},{key:"_cobrowseSessionStarted",value:function(e){this._cobrowseStartedOrInitializedSetup(e)}},{key:"_cobrowseApiInitialized",value:function(e){e&&this._cobrowseStartedOrInitializedSetup(e)}},{key:"_cobrowseSessionEnded",value:function(){this.cobrowseSession=null,this.cobrowseSessionToken=null,this.HelpFlowStateService.reset(),this.$scope.$apply()}},{key:"_cobrowseAgentJoined",value:function(){}},{key:"state",get:function(){return this.HelpFlowStateService.isSpinnerActive?this.HelpFlowStateService.spinnerActiveState:this.HelpFlowStateService.flowState}}]),e}();l.$inject=["helpConstants","stateConstants","localeConstants","HelpFlowStateService","CobrowseService","LocaleService","$stateParams","$scope","$log"],t.default=l,e.exports=t.default},function(e,t){e.exports='<div class="c-help c-help-p"> <div class="container"> <h5 class="team-brand-help" translate="contactUs.modal.callYou.brand"> <span class="icon-tangerine"></span> </h5> <h1 class="heading--title ng-binding" translate="contactUs.IVRCobrowse.title"></h1> <div class="c-help c-help-p spinner" ng-show="$ctrl.state === \'SPINNER_ACTIVE\'"> <tng-loading-spinner>{{\'global.commonWords.loading\' | translate}}</tng-loading-spinner> </div> <div ng-show="$ctrl.state === \'COBROWSE_DISCONNECTED\'"> <p translate="contactUs.IVRCobrowse.disconnected.content"></p> <button actionable-id="help-submit_btn" translate="contactUs.IVRCobrowse.disconnected.buttons.getCode" class="btn--edit btn--larger" ng-click="$ctrl.startCobrowseSession()" type="submit"> </button> <p>{{\'contactUs.IVRCobrowse.disconnected.privacy\' | translate}} <a actionable-id="help-privacy_link" ng-href="{{::\'contactUs.IVRCobrowse.disconnected.privacyLink\' | translate}}">{{\'contactUs.IVRCobrowse.disconnected.privacyLinkText\' | translate }}</a></p> </div> <div class="" ng-show="$ctrl.state === \'COBROWSE_CONNECTED\'"> <div class="panel"> <span translate="contactUs.IVRCobrowse.connected.shareCode"></span> <h1 class="connection-code">{{ $ctrl.cobrowseSessionToken }}</h1> </div> <p translate="contactUs.IVRCobrowse.connected.content"></p> </div> </div> </div> <tng-enrollment-confirmation></tng-enrollment-confirmation> '},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={COBROWSE_CONNECTED:"COBROWSE_CONNECTED",COBROWSE_DISCONNECTED:"COBROWSE_DISCONNECTED"};t.default={FLOW:i},e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n){(0,a.default)(this,e),this.$log=t,this.helpConstants=n,this.FLOW_OPTIONS={COBROWSE_DISCONNECTED:this.helpConstants.FLOW.COBROWSE_DISCONNECTED,COBROWSE_CONNECTED:this.helpConstants.FLOW.COBROWSE_CONNECTED},this.SPINNER_OPTIONS={ACTIVE:"SPINNER_ACTIVE",INACTIVE:"SPINNER_INACTIVE"}}return(0,r.default)(e,[{key:"init",value:function(){this.reset()}},{key:"reset",value:function(){this._flowState=this.FLOW_OPTIONS.COBROWSE_DISCONNECTED,this._spinnerState=this.SPINNER_OPTIONS.INACTIVE}},{key:"next",value:function(){var e=this._flowState,t=this.FLOW_OPTIONS;switch(e){case t.COBROWSE_DISCONNECTED:this._flowState=t.COBROWSE_CONNECTED;break;default:this.$log.error("Unknown or unrecognized state.")}}},{key:"flowState",get:function(){return this._flowState}},{key:"isSpinnerActive",set:function(e){this._spinnerState=e?this.SPINNER_OPTIONS.ACTIVE:this.SPINNER_OPTIONS.INACTIVE},get:function(){return this._spinnerState===this.SPINNER_OPTIONS.ACTIVE}},{key:"spinnerActiveState",get:function(){return this.SPINNER_OPTIONS.ACTIVE}}]),e}();l.$inject=["$log","helpConstants"],t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1133),a=i(s),o=n(1134),r=i(o),l=angular.module("NavigationModule",[]).config(a.default).component("tngNavigation",r.default);t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e,t,n){e.state(t.MOBILE_NAVIGATION_DOCUMENTS,{cache:!1,component:"tngNavigation",url:"/documents",data:{menu:n.MENU_TYPES.MOBILE_NAVIGATION_DOCUMENTS,parentNavigation:t.NAVIGATION,requiresAuth:!0,title:"global.menu.login.documents"}})}Object.defineProperty(t,"__esModule",{value:!0}),i.$inject=["$stateProvider","stateConstants","menuConstants"],t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1135),a=i(s),o=n(1136),r=i(o);n(1137);var l={template:a.default,controller:r.default};t.default=l,e.exports=t.default},function(e,t){e.exports='<div class="c-navigation-page fb2"> <div class="container"> <div class="c-user-settings__user-header__info-container"> <tng-cif-switcher current-page="$ctrl.currentPage" on-cif-switch="$ctrl.onCifSwitch()"> </tng-cif-switcher> </div> <nav class="mobile-nav"> <ul class="mobile-nav__list grid__container" ng-if="!$ctrl.cifTypeService.isSwitchingCifs" tng-nav-list="$ctrl.getCurrentNavList()"> <li class="grid__column--1of2" ng-repeat="navItem in navList.items" ng-if="$ctrl.hidePageOnCifType(navItem)"> <a class="mobile-nav__item" ui-sref="{{ navItem.action }}" actionable-id="navigation_navItem_{{ $index }}"> {{ navItem.displayName | translate }} <span class="icon" ng-show="navItem.displayName === \'global.menu.login.inbox\'"> {{ $ctrl.inboxCount }} </span> <span class="icon-rightarrow"></span> </a> </li> </ul> <ul class="mobile-nav__list grid__container" ng-show="$ctrl.$state.is($ctrl.stateConstants.MOBILE_NAVIGATION)"> <li class="grid__column--1of2"> <a actionable-id="navigation-nav-item_link" class="mobile-nav__item" href="" ng-click="$ctrl.handleLogOutClick()"> {{ \'global.menu.login.logOut\' | translate }} <span class="icon-rightarrow"></span> </a> </li> </ul> </nav> </div> </div> '},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i,s,o,r,l,c,u,d,h,_,g){(0,a.default)(this,e),this.UserService=t,this.stateConstants=n,this.menuConstants=i,this.$state=s,this.cifTypeService=o,this.MenuService=r,this.serviceConstants=l,this.InboxService=c,this.UserSettingsConstants=u,this.$scope=d,this.EventBusService=h,this.TimerService=g,this.AccountSummaryService=_,this.userInfo={},this.isLoading=!0}return(0,r.default)(e,[{key:"$onInit",value:function(){var e=this;this.UserService.getUserInfo().then(function(t){e.userInfo=t.customer}).finally(function(){e.TimerService.endTimerForAction(e.TimerService.EVENTS.VIEW_PROFILE_SETTINGS)}),this.getUserNotificationCount(),this.EventBusService.subscribe(this.$scope,this.UserSettingsConstants.EVENTS.CIF_SWITCHER_READY,function(){e.isLoading=!1})}},{key:"getUserNotificationCount",value:function(){var e=this;this.InboxService.getNewMessageCount().then(function(t){t.response_status.status_code===e.serviceConstants.STATUS_CODES.SUCCESS&&(e.userNotificationCount=t.total_number_of_new_emessages)})}},{key:"getCurrentNavList",value:function(){return this.cifTypeService.didParentSwitchToChild()&&this.$state.current.data.menu!==this.menuConstants.MENU_TYPES.MOBILE_NAVIGATION_DOCUMENTS?this.menuConstants.MENU_TYPES.MOBILE_NAVIGATION_CHILD:this.$state.current.data.menu}},{key:"handleLogOutClick",value:function(){this.MenuService.handleMenuInteraction(this.menuConstants.LINK_TYPES.METHOD,this.menuConstants.ACTION_METHODS.LOGOUT)}},{key:"hidePageOnCifType",value:function(e){var t=!0,n=e.displayName.toUpperCase();return this.cifTypeService.isChild()?(-1===n.indexOf(this.UserSettingsConstants.COMPONENT.ORANGE_ALERTS.VALUE)&&-1===n.indexOf(this.UserSettingsConstants.COMPONENT.TRANSFER_CONTACTS.VALUE)&&-1===n.indexOf(this.UserSettingsConstants.COMPONENT.CONTEST_BONUSES.VALUE)||(t=!1),this.cifTypeService.didParentSwitchToChild()||-1===n.indexOf(this.UserSettingsConstants.COMPONENT.EXTERNAL_ACCOUNTS.VALUE)||(t=!1)):this.cifTypeService.isBusiness()?-1===n.indexOf(this.UserSettingsConstants.COMPONENT.ORANGE_ALERTS.VALUE)&&-1===n.indexOf(this.UserSettingsConstants.COMPONENT.TRANSFER_CONTACTS.VALUE)&&-1===n.indexOf(this.UserSettingsConstants.COMPONENT.CONTEST_BONUSES.VALUE)||(t=!1):this.cifTypeService.didParentSwitchToChild()||-1!==n.indexOf(this.UserSettingsConstants.COMPONENT.ASP.VALUE)&&(t=!1),-1===n.indexOf(this.UserSettingsConstants.COMPONENT.TRANSFER_CONTACTS.VALUE)||this.AccountSummaryService.hasCheckingAccounts()||(t=!1),-1===n.indexOf(this.UserSettingsConstants.COMPONENT.ORANGE_ALERTS.VALUE)||this.AccountSummaryService.hasCheckingAccounts()||this.AccountSummaryService.hasCreditCardAccounts()||this.AccountSummaryService.hasSavingAccounts()||(t=!1),t}},{key:"inboxCount",get:function(){return"0"===this.userNotificationCount?"":this.userNotificationCount>50?"50+":this.userNotificationCount}}]),e}();l.$inject=["UserService","stateConstants","menuConstants","$state","CifTypeService","MenuService","serviceConstants","InboxService","UserSettingsConstants","$scope","EventBusService","AccountSummaryService","TimerService"],t.default=l,e.exports=t.default},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1139),a=i(s),o=n(1143),r=i(o),l=n(1144),c=i(l),u=angular.module("MobileTermsAndConditionsModule",[]).component("mobileTermsAndConditions",a.default).service("MobileTermsAndConditionsService",c.default).constant("MobileTermsAndConditionsConstants",r.default);t.default=u,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1140),a=i(s),o=n(1141),r=i(o);n(1142);var l={template:r.default,controller:a.default};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n,i,s,o,r,l,c,u,d,h,_){(0,a.default)(this,e),this.$scope=t,this.$q=n,this.$log=i,this.mobileTermsAndConditionsConstants=s,this.ssoMode=this.mobileTermsAndConditionsConstants.simpleSignOnMode,this.stateConstants=o,this.$state=r,this.SessionService=l,this.$translate=c,this.EnvironmentService=u,this.BackButtonService=d,this.backButtonConstants=_,this.menuService=h}return(0,r.default)(e,[{key:"$onInit",value:function(){var e=this;this.$translate("mobileTermsAndConditions.buttons.next").then(function(t){e.buttonText=t}),this.BackButtonService.addBackButtonListener(this.$scope,this.backButtonConstants.PRIORITY.LOW,function(){return e.$state.current.name===e.stateConstants.MOBILE_TERMS_AND_CONDITIONS&&(e.menuService.logout(),!0)})}},{key:"_getNextDestinaton",value:function(){var e=this,t=this.$q.defer();return this.EnvironmentService.isNative()?this.SessionService.shouldSkipOptIn().then(function(n){e.$log.debug("shouldSkipOptIn",n),t.resolve(e.stateConstants.ACCOUNT_SUMMARY)},function(){e.SessionService.querySimpleSignOnMode().then(function(n){e.ssoMode.TOUCH===n?t.resolve(e.stateConstants.SIMPLE_SIGN_ON_TOUCH_ID):e.ssoMode.QUICK===n?t.resolve(e.stateConstants.SIMPLE_SIGN_ON_QUICK_VIEW_NO_BACK):t.resolve(e.stateConstants.ACCOUNT_SUMMARY)})}):t.resolve(this.stateConstants.ACCOUNT_SUMMARY),t.promise}},{key:"_goToNextState",value:function(){var e=this;this._getNextDestinaton().then(function(t){e.$state.go(t,void 0,{location:"replace"})})}},{key:"submit",value:function(){var e=this;this.accepted&&this.SessionService.addToTOS().then(function(t){e.$log.debug("addToTos",t),e._goToNextState()},function(t){e.$log.error("Failed to save TOS flag",t),e.errors=e.$translate.instant("global.errorCodes.generic")})}},{key:"onChange",value:function(e){var t=this;this.$log.debug("onChange",e);var n=void 0;n=this.accepted?"mobileTermsAndConditions.buttons.done":"mobileTermsAndConditions.buttons.next",this.$translate(n).then(function(e){t.buttonText=e})}}]),e}();l.$inject=["$scope","$q","$log","MobileTermsAndConditionsConstants","stateConstants","$state","SessionService","$translate","EnvironmentService","BackButtonService","MenuService","backButtonConstants"],t.default=l,e.exports=t.default},function(e,t){e.exports='<div class="c-mobile-terms-and-conditions"> <div class="terms-condition-content"> <tng-tile-item class=""> <h2 class="" translate>{{::\'mobileTermsAndConditions.title\'}}</h2> </tng-tile-item> <tng-tile-item class=""> <h3 translate>{{::\'mobileTermsAndConditions.prompt\'}}</h3> </tng-tile-item> <div class="c-tile c-tile--vertical last-term"> <tng-tile-item> <p translate>{{::\'mobileTermsAndConditions.terms.p0\'}}</p> <ul> <li><span translate>{{::\'mobileTermsAndConditions.terms.p1\'}}</span></li> <li><span translate>{{::\'mobileTermsAndConditions.terms.p2\'}}</span></li> <li><span translate>{{::\'mobileTermsAndConditions.terms.p3\'}}</span></li> <li><span translate>{{::\'mobileTermsAndConditions.terms.p4\'}}</span></li> <li><span translate>{{::\'mobileTermsAndConditions.terms.p5\'}}</span></li> </ul> <p translate>{{::\'mobileTermsAndConditions.terms.p6\'}}</p> <p translate>{{::\'mobileTermsAndConditions.terms.p7\'}}</p> <p translate>{{::\'mobileTermsAndConditions.terms.p8\'}}</p> <p translate>{{::\'mobileTermsAndConditions.terms.p9\'}}</p> </tng-tile-item> </div> </div> <div class="fb2-footer"> <div class="fb2-footer__row terms-condition-checkbox"> <input id="checkbox" class="input" ng-checked="false" type="checkbox" ng-model="$ctrl.accepted" ng-change="$ctrl.onChange()"/> <label for="checkbox" class="c-basic-info__edit__field__mailing-different" translate> {{::\'mobileTermsAndConditions.agree\'}} </label> </div> <div class="fb2-footer__row fb2-footer__row--align-right"> <button class="btn btn--next" ng-class="$ctrl.accepted?\'enabled\':\'disabled\'" ng-click="$ctrl.submit()">{{$ctrl.buttonText}}</button> </div> </div> </div> '},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={simpleSignOnMode:{TOUCH:"touch",QUICK:"quick",NONE:"none"}};t.default=i,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(i),a=function e(t,n,i,a){(0,s.default)(this,e),this.$q=t,this.$log=n,this.sessionService=i,this.nativeService=a};a.$inject=["$q","$log","SessionService","NativeService"],t.default=a,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1146),s=function(e){return e&&e.__esModule?e:{default:e}}(i),a=angular.module("SignOutModule",[]).component("signOut",s.default);t.default=a,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1147),s=function(e){return e&&e.__esModule?e:{default:e}}(i),a={controller:s.default};t.default=a,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t){(0,a.default)(this,e),this.menuService=t}return(0,r.default)(e,[{key:"$onInit",value:function(){this.menuService.logout()}}]),e}();l.$inject=["MenuService"],t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1149),a=i(s),o=n(1153),r=i(o),l=n(1154),c=i(l),u=n(1155),d=i(u),h=n(1156),_=i(h),g=angular.module("MobilePayModule",[_.default.name]).component("mobilePay",a.default).service("MobilePayService",c.default).service("MobilePaySessionService",d.default).constant("MobilePayConstants",r.default);t.default=g,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1150),a=i(s),o=n(1151),r=i(o);n(1152);var l={template:r.default,controller:a.default};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(13),a=i(s),o=n(0),r=i(o),l=n(1),c=i(l),u=function(){function e(t,n,i,s,a,o,l,c,u,d,h){(0,r.default)(this,e),this.$q=t,this.$log=n,this.mobilePayConstants=i,this.stateConstants=s,this.$state=a,this.sessionService=o,this.text=this.mobilePayConstants.MobilePayText,this.cardStatusDisplayType=this.mobilePayConstants.CardStatusDisplayType,this.title=this.text.title.initial,this.mobilePayService=l,this.mobilePaySessionService=c,this.environmentService=u,this.$translate=d,this.nativeService=h,this.matchingCards=[],this.verifiedCards=[],this.activationPrompt="",this.showSkipButton=!1,this.showAdditionalCardsPrompt=!1,this.activations=this.mobilePaySessionService.getPasses()}return(0,c.default)(e,[{key:"$onInit",value:function(){var e=this;if(!this.activations.length||this.environmentService.isCafeApp())return this.activationPrompt=this.text.prompt.noMatch,void(this.showSkipButton=!0);this.isLoading=!0,this.mobilePayService.getCardsForMobilePay().then(function(t){var n=e.activations.reduce(function(e,t){return Object.prototype.hasOwnProperty.call(e,t.primaryAccountNumberSuffix)?e[t.primaryAccountNumberSuffix].push(t):e[t.primaryAccountNumberSuffix]=[t],e},{}),i=(0,a.default)(n).map(function(i){var s=t.cards.find(function(e){return e.suffix.endsWith(i)});return!!s&&{card_name:s.name,type:s.type,last_digits:i,hash_number:s.hash_number,token:n[i].map(function(e){return{deviceAccountIdentifier:e.deviceAccountIdentifier,deviceAccountNumberSuffix:e.deviceAccountNumberSuffix,primaryAccountIdentifier:e.primaryAccountIdentifier,primaryAccountNumberSuffix:e.primaryAccountNumberSuffix}}),status:e.cardStatusDisplayType.PENDING,results:[]}}).filter(function(e){return!!e});e.matchingCards=i,e._setCardStrings()},function(t){e.$log.error("getCardsForMobilePay error:",t),e.errors=e.$translate.instant(e.text.error.service)}).finally(function(){e.isLoading=!1})}},{key:"_setCardStrings",value:function(){this.matchingCards.length?(this.activationPrompt=this.text.prompt.initial,this.showSkipButton=!1):(this.activationPrompt=this.text.prompt.noMatch,this.showSkipButton=!0)}},{key:"_unverifiedCount",value:function(){return this.matchingCards.length}},{key:"listItemClick",value:function(e){var t=this;if(e.status!==this.cardStatusDisplayType.VERIFIED&&e.status!==this.cardStatusDisplayType.PROGRESS){e.status=this.cardStatusDisplayType.PROGRESS,this.errors="",e.results=[];var n=[];e.token.forEach(function(i){var s=t._processCard(e,{account_hash:e.hash_number,device_account_identifier:i.deviceAccountIdentifier,device_account_number_suffix:i.deviceAccountNumberSuffix,primary_account_identifier:i.primaryAccountIdentifier,primary_account_number_suffix:i.primaryAccountNumberSuffix});n.push(s)}),this.isLoading=!0,this.$q.all(n).finally(function(){t._recalculateStatus(e),t.cardStatusDisplayType.VERIFIED===e.status&&(t.matchingCards.splice(t.matchingCards.indexOf(e),1),t.verifiedCards.push(e),t.showAdditionalCardsPrompt=t.verifiedCards.length>0&&t.matchingCards.length>0),0===t._unverifiedCount()&&(t.title=t.text.title.done,t.activationPrompt=t.text.prompt.done,t.showSkipButton=!0),t.isLoading=!1})}}},{key:"_recalculateStatus",value:function(e){var t=[this.cardStatusDisplayType.VERIFIED,this.cardStatusDisplayType.ERROR,this.cardStatusDisplayType.PROGRESS];e.status=e.results.reduce(function(e,n){return t[Math.max(t.indexOf(e),t.indexOf(n))]})}},{key:"_requestCardProcessing",value:function(e,t){return e.type===this.mobilePayConstants.CardType.CREDIT?this.mobilePayService.verifyMobilePay(t):this._processDebitCard(e,t)}},{key:"_processCard",value:function(e,t){var n=this;return this._requestCardProcessing(e,t).then(function(i){n.$log.debug("_requestCardProcessing response:",i),e.token=e.token.filter(function(e){return e.deviceAccountIdentifier!==t.device_account_identifier}),e.results.push(n.cardStatusDisplayType.VERIFIED)},function(t){n.$log.error("requestCardProcessing error:",t),e.results.push(n.mobilePayService.ERROR),e.type,n.mobilePayConstants.CardType.CREDIT,e.error=n.text.error.service,n.errors=n.$translate.instant(n.text.error.service)})}},{key:"_processDebitCard",value:function(e,t){var n=this;return this.mobilePayService.generateMsmOtp(t).then(function(e){return n.nativeService.activatePaymentPass(t.device_account_identifier,e.OTP)})}},{key:"doneClick",value:function(){this.$state.go(this.stateConstants.ACCOUNT_SUMMARY,void 0,{location:"replace"})}}]),e}();u.$inject=["$q","$log","MobilePayConstants","stateConstants","$state","SessionService","MobilePayService","MobilePaySessionService","EnvironmentService","$translate","NativeService"],t.default=u,e.exports=t.default},function(e,t){e.exports='<div ng-if="$ctrl.isLoading" class="loginLoadingIndicator"> <tng-loading-in-progress></tng-loading-in-progress> </div> <div class="c-mobile-pay" ng-show="!$ctrl.isLoading"> <div class="c-user-settings__user-header__info-container__info" ng-if="$ctrl.errors"> <tng-error-message> {{$ctrl.errors | json}} </tng-error-message> </div> <div> <h2>{{$ctrl.title | translate}}</h2> <p translate>{{$ctrl.activationPrompt}}</p> <tng-mobile-pay-card-list cards="$ctrl.verifiedCards"></tng-mobile-pay-card-list> <div id="additionalCardsPrompt" ng-if="$ctrl.showAdditionalCardsPrompt"> <h3 translate>{{::\'mobilePay.prompt.additionalCard\'}}</h3> </div> <tng-mobile-pay-card-list cards="$ctrl.matchingCards" on-click="$ctrl.listItemClick(card)"></tng-mobile-pay-card-list> </div> </div> <nav class="c-navigation-footer" ng-show="!$ctrl.isLoading"> <div class="container"> <div class="c-navigation-footer__controls btn__row"> <button class="btn btn--prev" ng-click="$ctrl.doneClick()" translate>{{::\'mobilePay.button.done\'}}</button> </div> </div> </nav> '},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={PENDING:"Pending",VERIFIED:"Verified",ERROR:"Error",PROGRESS:"Progress"},s={CREDIT:"CREDIT",DEBIT:"DEBIT"},a={title:{initial:"mobilePay.title.initial",done:"mobilePay.title.done"},prompt:{initial:"mobilePay.prompt.initial",done:"mobilePay.prompt.done",additionalCard:"mobilePay.prompt.additionalCard",noMatch:"mobilePay.prompt.noMatch"},error:{service:"mobilePay.error.service"}},o={VERIFY_CREDIT_CARD:"ccVerifyForMobilePay",GET_CARDS_FOR_MOBILE_PAY:"getCardsForMobilePay",GENERATE_MSM_OTP:"generateMsmOtp"},r=[{deviceAccountIdentifier:"DAPLMC0000132877d7fdd8b18e3347c5a2ac7aa61a40658a",deviceAccountNumberSuffix:"9876",primaryAccountIdentifier:"34791274891738129398",primaryAccountNumberSuffix:"9398"},{deviceAccountIdentifier:"DAPLMC0000132877d7fdd8b18e3347c5a2ac7aa61a40658b",deviceAccountNumberSuffix:"9877",primaryAccountIdentifier:"34791274891738129876",primaryAccountNumberSuffix:"9876"},{deviceAccountIdentifier:"DAPLMC0000132877d7fdd8b18e3347c5a2ac7aa61a40658c",deviceAccountNumberSuffix:"9878",primaryAccountIdentifier:"34791274891738129876",primaryAccountNumberSuffix:"9876"},{deviceAccountIdentifier:"DAPLMC0000132877d7fdd8b18e3347c5a2ac7aa61a40658d",deviceAccountNumberSuffix:"9879",primaryAccountIdentifier:"34791274891738129876",primaryAccountNumberSuffix:"9876"}],l={SERVICES:o,MobilePayText:a,CardStatusDisplayType:i,PassesMockData:r,CardType:s};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n){(0,a.default)(this,e),this.requesterService=t,this.services=n.SERVICES}return(0,r.default)(e,[{key:"verifyMobilePay",value:function(e){return this.requesterService.request(this.services.VERIFY_CREDIT_CARD,{data:e})}},{key:"getCardsForMobilePay",value:function(){return this.requesterService.request(this.services.GET_CARDS_FOR_MOBILE_PAY,{noError:!0})}},{key:"generateMsmOtp",value:function(e){return this.requesterService.request(this.services.GENERATE_MSM_OTP,{data:e})}}]),e}();l.$inject=["RequesterMobileService","MobilePayConstants"],t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(){(0,a.default)(this,e),this.passStore={}}return(0,r.default)(e,[{key:"getPasses",value:function(){return this.passStore.passes||[]}},{key:"addPasses",value:function(e){this.passStore.passes=e}}]),e}();t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1157),a=i(s),o=n(1161),r=i(o),l=angular.module("MobilePayCardListComponents",[]).constant("MobilePayCardListConstants",r.default).component("tngMobilePayCardList",a.default);t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1158),a=i(s),o=n(1159),r=i(o);n(1160);var l={template:r.default,controller:a.default,bindings:{cards:"=",onClick:"&"}};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=function(){function e(t,n){(0,a.default)(this,e),this.$log=t,this.$translate=n}return(0,r.default)(e,[{key:"initData",value:function(){}}]),e}();l.$inject=["$log","$translate"],t.default=l,e.exports=t.default},function(e,t){e.exports='<div class="c-tile c-tile--round" ng-repeat="card in $ctrl.cards"> <tng-tile-item class="c-tile--round" ng-click="$ctrl.onClick({card:card})"> <div class="tile-section"> <h3>{{card.card_name}}</h3> <p>* {{card.last_digits}}</p> </div> <div class="tile-section align-right" ng-switch="card.status"> <span class="tile-section__arrow icon-complete2" ng-switch-when="Verified"></span> <span class="tile-section__arrow icon-other" ng-switch-when="Progress"></span> <span class="tile-section__arrow icon-rightarrow" ng-switch-default></span> </div> </tng-tile-item> </div> '},function(e,t){},function(e,t,n){"use strict"},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1163),a=i(s),o=n(1167),r=i(o),l=angular.module("InsightsTlocLearnMoreModule",[]).component("insightsTlocLearnMore",a.default).component("tlocLearnMore",r.default);t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1164),a=i(s),o=n(1165),r=i(o);n(1166);var l={template:a.default,controller:r.default,bindings:{}};t.default=l,e.exports=t.default},function(e,t){e.exports='<div class="insights-tloc-learnMore"> <tng-modal-dialog on-close="$ctrl.onModalClose()" analytics-id="tloc-preap-learn-more" ng-if="$ctrl.modalTypeVisible === $ctrl.tlocConstants.MODAL_TYPES.TLOC"> <div ng-if="!$ctrl.showExitWarning && !$ctrl.isLoading"> <tloc-learn-more offer="$ctrl.offer"></tloc-learn-more> </div> <footer ng-if="!$ctrl.showExitWarning && !$ctrl.isLoading && $ctrl.offer && !$ctrl.offerClosed"> <button class="btn btn--orange" ng-click="$ctrl.doAccept()" actionable-id="accountTile_detailsModal_close">{{ \'global.components.buttons.continue\' | translate }} </button> </footer> <div ng-if="$ctrl.isLoading"> <div class="container insights-tloc-learnMore__loading-spinner"> <tng-loading-spinner>{{ ::\'global.pageFlow.loading.isLoading\' | translate }}</tng-loading-spinner> </div> </div> </tng-modal-dialog> </div> '},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),a=i(s),o=n(0),r=i(o),l=n(1),c=i(l),u=function(){function e(t,n,i,s,o,l){(0,r.default)(this,e),(0,a.default)(this,{$log:t,$scope:n,stateConstants:i,$state:s,tlocConstants:o,TlocService:l}),this.showExitWarning=!1,this.modalTypeVisible=null,this.gotoAccountSummary=!0}return(0,c.default)(e,[{key:"$onInit",value:function(){this._setupModal()}},{key:"onModalClose",value:function(){this._close()}},{key:"_setupModal",value:function(){this.modalTypeVisible=this.tlocConstants.MODAL_TYPES.TLOC,this._getOffer()}},{key:"_getOffer",value:function(){var e=this;return this.isLoading=!0,this.TlocService.getOffers().then(function(t){e.offer=t}).catch(function(t){e._handleErrors(t)}).finally(function(){e.isLoading=!1})}},{key:"_close",value:function(){this.modalTypeVisible=null,this.gotoAccountSummary&&this.$state.go(this.stateConstants.ACCOUNT_SUMMARY)}},{key:"_submitData",value:function(){this.submitErrors=[]}},{key:"_handleErrors",value:function(e){var t=this;"errorMessage"in e&&this.submitErrors.push(e.errorMessage),e.response_status&&("details"in e.response_status&&e.response_status.details.forEach(function(e){t.submitErrors.push(e)}),"status_code"in e.response_status&&"technical_description"in e.response_status&&-1===["CREATED","SUCCESS"].indexOf(e.response_status.status_code)&&this.submitErrors.push(e.response_status.technical_description)),this.$log.debug("formatted error:",this.submitErrors)}},{key:"doAccept",value:function(){this.$log.debug("doAccept invoked"),this.gotoAccountSummary=!1,this._close(),this.$state.go(this.stateConstants.EXISTING_CLIENT_ONBOARDING,{addAccount:"borrowing",products:this.offer.productTypeNumber})}},{key:"offerClosed",get:function(){return this.TlocService.tlocConstants.OFFER_STATUS.CLOSE===this.offer.offerStatus}}]),e}();u.$inject=["$log","$scope","stateConstants","$state","tlocConstants","TlocService"],t.default=u,e.exports=t.default},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1168),a=i(s),o=n(1169),r=i(o);n(1170);var l={template:a.default,controller:r.default,bindings:{offer:"<?"}};t.default=l,e.exports=t.default},function(e,t){e.exports=' <div class="dialog-content c-tloc-learnMore" ng-if="!$ctrl.isLoading"> <div ng-if="$ctrl.offer && !$ctrl.offerClosed"> <section class="intro"> <p>{{ ::\'tloc.learnMore.header\' | translate:{ creditLimit: $ctrl.offer.offerDetails.creditLimit } }}</p> </section> <section ng-if="$ctrl.TlocService.isPromoClient($ctrl.offer)"> <p>{{ ::\'tloc.learnMore.subHeader\' | translate: { interestRate : $ctrl.offer.offerDetails.promoRate} }}</p> </section> <section> <p class="messageTitle">{{ ::\'tloc.learnMore.info.header\' | translate}}</p> <div class="c-tloc-modal"> <div class="c-balance-grid__table"> <div class="c-balance-grid__table__table-column-top has-right-border"> <div class="c-balance-grid__section full-height"> <p class="c-balance-grid__title">{{ ::\'tloc.learnMore.info.preApproved.title\' | translate }}</p> <p class="c-balance-grid__value" ng-bind-html="\'tloc.learnMore.info.preApproved.message\' | translate:\n                { creditLimit: $ctrl.offer.offerDetails.creditLimit }"> </p> </div> </div> <div class="c-balance-grid__table__table-column-top has-right-border"> <div class="c-balance-grid__section"> <p class="c-balance-grid__title">{{ ::\'tloc.learnMore.info.interestRate.title\' | translate }}</p> <p class="c-balance-grid__value" ng-bind-html="\'tloc.learnMore.info.interestRate.message\' | translate:\n                {\n                  totalRate: $ctrl.offer.offerDetails.totalRate,\n                  spread: $ctrl.offer.offerDetails.spread }"> </p> <p class="c-balance-grid__title">{{ ::\'tloc.learnMore.info.interestRate.note\' | translate }}</p> </div> </div> </div> <div class="c-balance-grid__table border-top" ng-if="$ctrl.TlocService.isPromoClient($ctrl.offer)"> <div class="c-balance-grid__table__table-column-top has-right-border"> <div class="c-balance-grid__section"> <p class="c-balance-grid__title"> {{ ::\'tloc.learnMore.info.introductoryRate.title\' | translate }} </p> <p class="c-balance-grid__value" ng-bind-html="\'tloc.learnMore.info.introductoryRate.message\' | translate:\n              { interestRate: $ctrl.offer.offerDetails.promoRate }"> </p> </div> </div> </div> </div> </section> <section> <p>{{ ::\'tloc.learnMore.note\' | translate }}</p> </section> <section ng-if="$ctrl.TlocService.isPromoClient($ctrl.offer)"> <p class="messageTitle"> {{ ::\'tloc.learnMore.introductory.header\' | translate }} </p> <p ng-bind-html="::\'tloc.learnMore.introductory.note\' | translate : { interestRate: $ctrl.offer.offerDetails.promoRate }"></p> </section> </div> <tng-error-message ng-if="!$ctrl.isLoading && $ctrl.errorMessage" message-only="true"> <p>{{::$ctrl.errorMessage | translate }}</p> </tng-error-message> </div> <div ng-show="$ctrl.isLoading"> <div class="container c-tloc-learnMore__loading-spinner"> <tng-loading-spinner>{{ ::\'global.pageFlow.loading.isLoading\' | translate }}</tng-loading-spinner> </div> </div> '},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=i(s),o=n(1),r=i(o),l=n(34),c=function(){function e(t,n,i,s,o,r,c,u){(0,a.default)(this,e),this.$log=t,this.$scope=n,this.$translate=i,this.$httpParamSerializer=s,this.$window=r,this.STATUS_CODES=o.STATUS_CODES,this.UserService=c,this.TlocService=u,this.submitErrors=[],this.clearWatcher=null,this.nameValidation=l.nameValidation,this.namePattern=l.namePattern,this.annualRatePlaceholders={rateDate:null,tangerinePrimeRate:null},this.$log.debug("constructor for tlocLearnMoreController")}return(0,r.default)(e,[{key:"$onInit",value:function(){this.$log.debug("onInit for tlocLearnMoreController"),this._setupModal()}},{key:"_setupModal",value:function(){this.offer||this._getOffer()}},{key:"_handleErrors",value:function(e){var t=this;"errorMessage"in e&&this.submitErrors.push(e.errorMessage),e.response_status&&("details"in e.response_status&&e.response_status.details.forEach(function(e){t.submitErrors.push(e)}),"status_code"in e.response_status&&"technical_description"in e.response_status&&-1===["CREATED","SUCCESS"].indexOf(e.response_status.status_code)&&this.submitErrors.push(e.response_status.technical_description)),this.$log.debug("formatted error:",this.submitErrors)}},{key:"_getOffer",value:function(){var e=this;return this.isLoading=!0,this.TlocService.getOffers().then(function(t){e.offer=t}).catch(function(t){e._handleErrors(t)}).finally(function(){e.isLoading=!1})}},{key:"print",value:function(){this.$window.print()}},{key:"offerClosed",get:function(){return this.TlocService.tlocConstants.OFFER_STATUS.CLOSE===this.offer.offerStatus}},{key:"errorMessage",get:function(){return this.offer?this.offerClosed?"tloc.learnMore.offerClosed":null:"tloc.learnMore.alreadyAccepted"}}]),e}();c.$inject=["$log","$scope","$translate","$httpParamSerializer","serviceConstants","$window","UserService","TlocService"],t.default=c,e.exports=t.default},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=["$interpolate",function(e){var t=this;return{setLocale:function(e){t.locale=e},getInterpolationIdentifier:function(){return"TangerineInterpolator"},interpolate:function(t,n,i,s,a){return!t.match("{{")||n||a||(t=t.replace(/\{\{|\}\}/g,"")),""+e(t)(n,s)}}}];t.default=i,e.exports=t.default}]),[396]);